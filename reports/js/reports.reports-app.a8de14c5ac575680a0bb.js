(self.webpackChunk_deriv_reports=self.webpackChunk_deriv_reports||[]).push([["reports-app"],{"../../node_modules/lodash.debounce/index.js":(t,e,r)=>{var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,c="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=c||u||Function("return this")(),f=Object.prototype.toString,h=Math.max,p=Math.min,d=function(){return l.Date.now()};function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function y(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(_(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var r=i.test(t);return r||a.test(t)?s(t.slice(2),r?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,r){var n,o,i,a,s,c,u=0,l=!1,f=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var r=n,i=o;return n=o=void 0,u=e,a=t.apply(i,r)}function v(t){return u=t,s=setTimeout(w,e),l?m(t):a}function g(t){var r=t-c;return void 0===c||r>=e||r<0||f&&t-u>=i}function w(){var t=d();if(g(t))return O(t);s=setTimeout(w,function(t){var r=e-(t-c);return f?p(r,i-(t-u)):r}(t))}function O(t){return s=void 0,b&&n?m(t):(n=o=void 0,a)}function S(){var t=d(),r=g(t);if(n=arguments,o=this,c=t,r){if(void 0===s)return v(c);if(f)return s=setTimeout(w,e),m(c)}return void 0===s&&(s=setTimeout(w,e)),a}return e=y(e)||0,_(r)&&(l=!!r.leading,i=(f="maxWait"in r)?h(y(r.maxWait)||0,e):i,b="trailing"in r?!!r.trailing:b),S.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=c=o=s=void 0},S.flush=function(){return void 0===s?a:O(d())},S}},"../../node_modules/prop-types/factoryWithThrowingShims.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/prop-types/lib/ReactPropTypesSecret.js");function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,r,o,i,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},"../../node_modules/prop-types/index.js":(t,e,r)=>{t.exports=r("../../node_modules/prop-types/factoryWithThrowingShims.js")()},"../../node_modules/prop-types/lib/ReactPropTypesSecret.js":t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"./src/Stores/connect.js":(t,e,r)=>{"use strict";r.d(e,{z1:()=>u,$j:()=>l});var n=r("mobx-react"),o=r("react");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=o.createContext(null);var u=function(t){var e=t.store,r=t.children;return o.createElement(c.Provider,{value:a(a({},e),{},{mobxStores:e})},r)},l=function(t){return function(e){return function(t,e){var r=function(r){var i=o.useContext(c),s=e;return function(t){return!("function"!=typeof t||!t.prototype||!t.prototype.isReactComponent)}(e)&&(s=function(t){return o.createElement(e,t)}),(0,n.useObserver)((function(){return s(a(a({},r),t(i,r)))}))};return r.displayName=e.name,r}(t,e)}}},"./src/_common/base/server_time.js":(t,e,r)=>{var n,o,i,a=r("./src/_common/utility.js").PromiseClass,s=(o=!1,i=new a,{init:function(t){o||(n=t,i.resolve(n.server_time),o=!0)},get:function(){return o&&n.server_time?n.server_time.clone():void 0},timePromise:function(){return o?Promise.resolve(n.server_time):i.promise}});t.exports=s},"./src/_common/utility.js":t=>{function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n,o=r((function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=new Promise((function(t,r){e.reject=r,e.resolve=t}))}));t.exports={template:function(t,e){var r=e;return e&&!Array.isArray(e)&&(r=[e]),t.replace(/\[_(\d+)]/g,(function(t,e){return r[+e-1]}))},createElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement(t);return Object.keys(e).forEach((function(t){var n=e[t];"text"===t?r.textContent=n:"html"===t?r.html(n):r.setAttribute(t,n)})),r},getStaticHash:function(){return n=n||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:o}},"./src/app.jsx":(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>Gt});var n,o=r("../../node_modules/prop-types/index.js"),i=r.n(o),a=r("react"),s=r("mobx-react"),c=r("react-router"),u=r("react-router-dom"),l=r("@deriv/shared"),f=r("@deriv/components"),h=r("@deriv/translations"),p=a.lazy((function(){return r.e("404").then(r.bind(r,"./src/Modules/Page404/index.js"))})),d=(0,l.makeLazyLoader)((function(){return(0,l.moduleLoader)((function(){return r.e("reports-routes").then(r.bind(r,"./src/Containers/index.js"))}))}),(function(){return a.createElement(f.Loading,null)})),_={component:p,getTitle:function(){return(0,h.localize)("Error 404")}};const y=function(){return n||(n=[{path:l.routes.reports,component:d("Reports"),is_authenticated:!0,getTitle:function(){return(0,h.localize)("Reports")},icon_component:"IcReports",routes:[{path:l.routes.positions,component:d("OpenPositions"),getTitle:function(){return(0,h.localize)("Open positions")},icon_component:"IcOpenPositions",default:!0},{path:l.routes.profit,component:d("ProfitTable"),getTitle:function(){return(0,h.localize)("Profit table")},icon_component:"IcProfitTable"},{path:l.routes.statement,component:d("Statement"),getTitle:function(){return(0,h.localize)("Statement")},icon_component:"IcStatement"}]}]).push(_),n};var b=function t(e,r){var n;return r.some((function(r){var o;try{o=(0,c.matchPath)(e,r)}catch(t){if(/undefined/.test(t.message))return}return o?(n=r,!0):!!r.routes&&(n=t(e,r.routes))})),n},m=["active_class","to","children"];function v(){return v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v.apply(this,arguments)}function g(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var w=function(t){var e=t.active_class,r=t.to,n=t.children,o=g(t,m),i=a.useContext(l.PlatformContext).is_appstore,s=function(t){return/^\//.test(t)?t:"/".concat(t||"")}(r),c=b(s,y({is_appstore:i}));if(!c)throw new Error("Route not found: ".concat(r));return r?a.createElement(u.NavLink,v({to:s,activeClassName:e||"active",exact:c.exact},o),n):a.createElement("a",o,n)};w.propTypes={active_class:i().string,children:i().oneOfType([i().object,i().array,i().string]),to:i().string};function O(){return O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},O.apply(this,arguments)}const S=function(t){return a.createElement(u.Route,{exact:t.exact,path:t.path,render:function(e){var r,n=null;if(t.component===u.Redirect){var o=t.to;if(t.path===l.routes.index)o=e.location.pathname.toLowerCase().replace(t.path,"");n=a.createElement(u.Redirect,{to:o})}else if(!t.is_authenticated||t.is_logging_in||t.is_logged_in){var i=t.routes?t.routes.find((function(t){return t.default})):{},s=!(0,l.isEmptyObject)(i),c=(0,l.removeBranchName)(location.pathname);n=a.createElement(a.Fragment,null,s&&c===t.path&&a.createElement(u.Redirect,{to:i.path}),a.createElement(t.component,O({},e,{routes:t.routes})))}else(0,l.redirectToLogin)(t.is_logged_in,(0,h.getLanguage)());var f=(null===(r=t.getTitle)||void 0===r?void 0:r.call(t))||"";return document.title="".concat(f," | ").concat(l.default_title),n}})};function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j.apply(this,arguments)}const k=function(t){var e=a.useContext(l.PlatformContext).is_appstore;return a.createElement(a.Suspense,{fallback:function(){return a.createElement("div",null,a.createElement(h.Localize,{i18n_default_text:"Loading..."}))}},a.createElement(u.Switch,null,y({is_appstore:e}).map((function(e){return a.createElement(S,j({key:e.path},e,t))}))))};var P=r("./src/Stores/connect.js"),E=function(t){var e=t.header,r=t.message,n=t.is_dialog,o=t.redirect_label,i=t.redirectOnClick,s=t.should_show_refresh,c=void 0===s||s?(0,h.localize)("Please refresh this page to continue."):"";return n?a.createElement(f.Dialog,{title:e||(0,h.localize)("There was an error"),is_visible:!0,confirm_button_text:o||(0,h.localize)("Ok"),onConfirm:i||function(){return location.reload()}},r||(0,h.localize)("Sorry, an error occured while processing your request.")):a.createElement(f.PageError,{header:e||(0,h.localize)("Somethingâ€™s not right"),messages:r?[r,c]:[(0,h.localize)("Sorry, an error occured while processing your request."),c],redirect_urls:[l.routes.trade],redirect_labels:[o||(0,h.localize)("Refresh")],buttonOnClick:i||function(){return location.reload()}})};E.propTypes={header:i().string,is_dialog:i().bool,message:i().oneOfType([i().node,i().string,i().object]),redirect_label:i().string,redirectOnClick:i().func,should_show_refresh:i().bool,type:i().string};const x=E;var T=function(t){return t.has_error?a.createElement(x,t.error):a.createElement(k,{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,passthrough:t.passthrough})};T.propTypes={error:s.PropTypes.objectOrObservableObject,has_error:i().bool,is_logged_in:i().bool,is_logging_in:i().bool,is_virtual:i().bool,passthrough:i().object};const A=(0,c.withRouter)((0,P.$j)((function(t){var e=t.client,r=t.common;return{is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,error:r.error,has_error:r.has_error}}))(T));var C=r("mobx"),R=r("../../node_modules/lodash.debounce/index.js"),D=r.n(R);function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){I(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function I(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var M=function(t,e){var r=(0,l.toMoment)().startOf("day").unix();return e&&r>e?e:(0,l.epochToMoment)(r).add(1,"d").subtract(1,"s").unix()},F=function(t,e,r,n){return(0,l.toMoment)().startOf("day").unix()>n?r:t&&e?e:r},B=function(t,e,r,n){return(0,l.toMoment)().startOf("day").unix()>n?!!t||e:e?r||t:!!t||!1};const z=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return L(L({},B(t,n,r,e)&&{date_from:F(n,r,t,e)}),(e||n)&&{date_to:M(0,e)})};function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var G=r("./src/_common/utility.js");function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const U=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,r,n;return e=t,(r=[{key:"add",value:function(t,e){this.has(t)||(this.errors[t]=[]),-1===this.errors[t].indexOf(e)&&this.errors[t].push(e)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(t){return this.has(t)?this.errors[t][0]:null}},{key:"get",value:function(t){return this.has(t)?this.errors[t]:[]}},{key:"has",value:function(t){return Object.prototype.hasOwnProperty.call(this.errors,t)}}])&&q(e.prototype,r),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const J=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Y(this,t),this.input=e,this.rules=r,this.store=n,this.errors=new U,this.error_count=0}var e,r,n;return e=t,n=[{key:"getRuleObject",value:function(t){var e="string"==typeof t,r={name:e?t:t[0],options:e?{}:t[1]||{}};return r.validator="custom"===r.name?t[1].func:(0,l.getPreBuildDVRs)()[r.name].func,r}}],(r=[{key:"addFailure",value:function(t,e,r){var n=r||e.options.message||(0,l.getPreBuildDVRs)()[e.name].message();"length"===e.name?n=(0,G.template)(n,[e.options.min===e.options.max?e.options.min:"".concat(e.options.min,"-").concat(e.options.max)]):"min"===e.name?n=(0,G.template)(n,[e.options.min]):"not_equal"===e.name&&(n=(0,G.template)(n,[e.options.name1,e.options.name2])),this.errors.add(t,n),this.error_count++}},{key:"check",value:function(){var e=this;return Object.keys(this.input).forEach((function(r){Object.prototype.hasOwnProperty.call(e.rules,r)&&e.rules[r].forEach((function(n){var o=t.getRuleObject(n);if((o.validator||"function"==typeof o.validator)&&(!o.options.condition||o.options.condition(e.store))&&(""!==e.input[r]||"req"===o.name)){var i,a;if("number"===o.name){var s=o.validator(e.input[r],o.options,e.store,e.input);i=s.is_ok,a=s.message}else i=o.validator(e.input[r],o.options,e.store,e.input);i||e.addFailure(r,o,a)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&$(e.prototype,r),n&&$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Q(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){K(i,n,o,a,s,"next",t)}function s(t){K(i,n,o,a,s,"throw",t)}a(void 0)}))}}function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nt=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};et(this,t),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,C.makeObservable)(this,{validation_errors:C.observable,validation_rules:C.observable,partial_fetch_time:C.observable,retrieveFromStorage:C.action,setValidationErrorMessages:C.action,setValidationRules:C.action,addRule:C.action,validateProperty:C.action,validateAllProperties:C.action,onSwitchAccount:C.action.bound,onPreSwitchAccount:C.action.bound,onLogout:C.action.bound,onClientInit:C.action.bound,onNetworkStatusChange:C.action.bound,onThemeChange:C.action.bound,onRealAccountSignupEnd:C.action.bound,disposePreSwitchAccount:C.action.bound,disposeSwitchAccount:C.action.bound,disposeLogout:C.action.bound,disposeClientInit:C.action.bound,disposeNetworkStatusChange:C.action.bound,disposeThemeChange:C.action.bound,disposeRealAccountSignupEnd:C.action.bound,onUnmount:C.action.bound,assertHasValidCache:C.action.bound});var n=r.root_store,o=r.local_storage_properties,i=r.session_storage_properties,a=r.validation_rules,s=r.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var c=o&&o.length||i&&i.length;if(c){if(!s)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:s,enumerable:!1,writable:!1})}this.root_store=n,this.local_storage_properties=o||[],this.session_storage_properties=i||[],setTimeout((function(){e.setValidationRules(a),e.setupReactionForLocalStorage(),e.setupReactionForSessionStorage(),e.retrieveFromStorage()}),0)}var e,r,n;return e=t,r=[{key:"getSnapshot",value:function(t){var e=(0,C.toJS)(this);return(0,l.isEmptyObject)(this.root_store)||(e.root_store=this.root_store),t&&t.length&&(e=t.reduce((function(t,r){return Object.assign(t,tt({},r,e[r]))}),{})),e}},{key:"setupReactionForLocalStorage",value:function(){var e=this;this.local_storage_properties.length&&(0,C.reaction)((function(){return e.local_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.local_storage_properties,t.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var e=this;this.session_storage_properties.length&&(0,C.reaction)((function(){return e.session_storage_properties.map((function(t){return e[t]}))}),(function(){return e.saveToStorage(e.session_storage_properties,t.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,r){var n=JSON.stringify(this.getSnapshot(e),(function(t,e){if(null!==e)return e}));r===t.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):r===t.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var t=this,e=JSON.parse(localStorage.getItem(this.store_name,{})),r=JSON.parse(sessionStorage.getItem(this.store_name,{})),n=Z(Z({},e),r);Object.keys(n).forEach((function(e){return t[e]=n[e]}))}},{key:"setValidationErrorMessages",value:function(t,e){var r=this;this.validation_errors[t]&&!r.validation_errors[t].filter((function(t){return!e.includes(t)})).concat(e.filter((function(e){return!r.validation_errors[t].includes(e)}))).length||(this.validation_errors[t]=e)}},{key:"setValidationRules",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(r){t.addRule(r,e[r])}))}},{key:"addRule",value:function(t,e){var r=this;this.validation_rules[t]=e,(0,C.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(t,e){var r=this,n=this.validation_rules[t].trigger,o=tt({},t,void 0!==e?e:this[t]),i=tt({},t,this.validation_rules[t].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(o[n]=this[n],i[n]=this.validation_rules[n].rules||[]);var a=new J(o,i,this);a.isPassed(),Object.keys(o).forEach((function(t){r.setValidationErrorMessages(t,a.errors.get(t))}))}},{key:"validateAllProperties",value:function(){var t=this,e=Object.keys(this.validation_rules),r=Object.keys(this.validation_errors);e.forEach((function(e){t.validateProperty(e,t[e])})),r.forEach((function(r){e.includes(r)||delete t.validation_errors[r]}))}},{key:"onSwitchAccount",value:function(t){var e=this;t&&(this.switch_account_listener=t,this.switchAccountDisposer=(0,C.when)((function(){return e.root_store.client.switch_broadcast}),(function(){try{var t=e.switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Switching account listeners are required to return a promise.");t.then((function(){e.root_store.client.switchEndSignal(),e.onSwitchAccount(e.switch_account_listener)}))}catch(t){(0,l.isProduction)()||console.error(t)}})))}},{key:"onPreSwitchAccount",value:function(t){var e=this;t&&(this.pre_switch_account_listener=t,this.preSwitchAccountDisposer=(0,C.when)((function(){return e.root_store.client.pre_switch_broadcast}),(function(){try{var t=e.pre_switch_account_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Pre-switch account listeners are required to return a promise.");t.then((function(){e.root_store.client.setPreSwitchAccount(!1),e.onPreSwitchAccount(e.pre_switch_account_listener)}))}catch(t){(0,l.isProduction)()||console.error(t)}})))}},{key:"onLogout",value:function(t){var e=this;this.logoutDisposer=(0,C.when)((function(){return e.root_store.client.has_logged_out}),Q(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.logout_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setLogout(!1),e.onLogout(e.logout_listener)})),t.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,l.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.logout_listener=t}},{key:"onClientInit",value:function(t){var e=this;this.clientInitDisposer=(0,C.when)((function(){return e.root_store.client.initialized_broadcast}),Q(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(r=e.client_init_listener())||!r.then||"function"!=typeof r.then){t.next=6;break}r.then((function(){e.root_store.client.setInitialized(!1),e.onClientInit(e.client_init_listener)})),t.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),(0,l.isProduction)()||console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))),this.client_init_listener=t}},{key:"onNetworkStatusChange",value:function(t){var e=this;this.networkStatusChangeDisposer=(0,C.reaction)((function(){return e.root_store.common.is_network_online}),(function(t){try{e.network_status_change_listener(t)}catch(t){(0,l.isProduction)()||console.error(t)}})),this.network_status_change_listener=t}},{key:"onThemeChange",value:function(t){var e=this;this.themeChangeDisposer=(0,C.reaction)((function(){return e.root_store.ui.is_dark_mode_on}),(function(t){try{e.theme_change_listener(t)}catch(t){(0,l.isProduction)()||console.error(t)}})),this.theme_change_listener=t}},{key:"onRealAccountSignupEnd",value:function(t){var e=this;this.realAccountSignupEndedDisposer=(0,C.when)((function(){return e.root_store.ui.has_real_account_signup_ended}),(function(){try{var t=e.real_account_signup_ended_listener();if(!t||!t.then||"function"!=typeof t.then)throw new Error("Real account signup listeners are required to return a promise.");t.then((function(){e.root_store.ui.setRealAccountSignupEnd(!1),e.onRealAccountSignupEnd(e.real_account_signup_ended_listener)}))}catch(t){(0,l.isProduction)()||console.error(t)}})),this.real_account_signup_ended_listener=t}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(t){if(this.root_store.client.loginid!==t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];r.forEach((function(t){return t()})),this.partial_fetch_time=!1}}}],r&&rt(e.prototype,r),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t){return function(t){if(Array.isArray(t))return at(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return at(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return at(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function st(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,s,"next",t)}function s(t){st(i,n,o,a,s,"throw",t)}a(void 0)}))}}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lt(t,e){return lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},lt(t,e)}function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=dt(t);if(e){var o=dt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ht(this,r)}}function ht(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pt(t)}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}nt.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var _t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(s,t);var e,r,n,o,i,a=ft(s);function s(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,{root_store:r})).data=[],e.date_from=null,e.date_to=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),e.error="",e.has_loaded_all=!1,e.is_loading=!1,e.filtered_date_range=void 0,e.client_loginid="",e.fetchOnScroll=D()((function(t){t<1500&&e.fetchNextBatch()}),150),(0,C.makeObservable)(pt(e),{data:C.observable,date_from:C.observable,date_to:C.observable,error:C.observable,has_loaded_all:C.observable,is_loading:C.observable,filtered_date_range:C.observable,client_loginid:C.observable,total_profit:C.computed,is_empty:C.computed,has_selected_date:C.computed,fetchNextBatch:C.action.bound,profitTableResponseHandler:C.action.bound,handleScroll:C.action.bound,networkStatusChangeListener:C.action.bound,onMount:C.action.bound,onUnmount:C.override,totals:C.computed,accountSwitcherListener:C.action.bound,clearTable:C.action.bound,clearDateFilter:C.action.bound,handleDateChange:C.action.bound}),e}return e=s,r=[{key:"total_profit",get:function(){return this.data.reduce((function(t,e){var r=Number(parseFloat(e.buy_price));return t+(Number(parseFloat(e.sell_price))-r)}),0)}},{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"shouldFetchNextBatch",value:function(){return!this.has_loaded_all&&!this.is_loading}},{key:"fetchNextBatch",value:(i=ct(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shouldFetchNextBatch()){t.next=2;break}return t.abrupt("return");case 2:return this.is_loading=!0,t.next=5,l.WS.profitTable(50,this.data.length,z(this.date_from,this.date_to,0,!1));case 5:e=t.sent,this.profitTableResponseHandler(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"profitTableResponseHandler",value:function(t){var e=this;if("error"in t)this.error=t.error.message;else{var r=t.profit_table.transactions.map((function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="DD MMM YYYY HH:mm:ss",o="".concat((0,l.toMoment)(+t.purchase_time).format(n)),i=t.purchase_time,a="".concat((0,l.toMoment)(+t.sell_time).format(n)),s=parseFloat(t.payout),c=parseFloat(t.sell_price),u=parseFloat(t.buy_price),f=(0,l.formatMoney)(e,Number(c-u),!0),h=(0,l.getSymbolDisplayName)(r,(0,l.getMarketInformation)(t.shortcode).underlying);return W(W({},t),{payout:s,sell_price:c,buy_price:u,profit_loss:f,sell_time:a,purchase_time:o,display_name:h,purchase_time_unix:i})}(t,e.root_store.client.currency,e.root_store.active_symbols.active_symbols)}));this.data=[].concat(it(this.data),it(r)),this.has_loaded_all=r.length<50,this.is_loading=!1}}},{key:"handleScroll",value:function(t){var e=t.target,r=e.scrollTop,n=e.scrollHeight-(r+e.clientHeight);this.fetchOnScroll(n)}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:(o=ct(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,l.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),t.next=6,l.WS.wait("authorize");case 6:this.clearTable(),this.fetchNextBatch();case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),l.WS.forgetAll("proposal")}},{key:"totals",get:function(){var t=0;return this.data.forEach((function(e){t+=parseFloat(e.profit_loss.replace(/,/g,""))})),{profit_loss:t.toString()}}},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return t.clearTable(),t.clearDateFilter(),e(t.fetchNextBatch())}))}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix()}},{key:"handleDateChange",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.date_range;this.filtered_date_range=o,this.date_from=null!==(e=null==t?void 0:t.from)&&void 0!==e?e:t.is_batch?null:this.date_from,this.date_to=null!==(r=null==t?void 0:t.to)&&void 0!==r?r:this.date_to,this.clearTable(),this.fetchNextBatch()}}],r&&ut(e.prototype,r),n&&ut(e,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(nt);function yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(r),!0).forEach((function(e){mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vt(t){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt(t)}function gt(t){return function(t){if(Array.isArray(t))return wt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ot(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function St(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ot(i,n,o,a,s,"next",t)}function s(t){Ot(i,n,o,a,s,"throw",t)}a(void 0)}))}}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kt(t,e){return kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},kt(t,e)}function Pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Tt(t);if(e){var o=Tt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Et(this,r)}}function Et(t,e){if(e&&("object"===vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xt(t)}function xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(t){return Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Tt(t)}var At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kt(t,e)}(c,t);var e,r,n,o,i,a,s=Pt(c);function c(t){var e,r=t.root_store;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,{root_store:r})).data=[],e.is_loading=!1,e.has_loaded_all=!1,e.date_from=null,e.date_to=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),e.error="",e.action_type="all",e.filtered_date_range=void 0,e.client_loginid="",e.account_statistics={},e.fetchOnScroll=D()((function(t){t<1500&&e.fetchNextBatch()}),150),(0,C.makeObservable)(xt(e),{data:C.observable,is_loading:C.observable,has_loaded_all:C.observable,date_from:C.observable,date_to:C.observable,error:C.observable,action_type:C.observable,filtered_date_range:C.observable,client_loginid:C.observable,account_statistics:C.observable,is_empty:C.computed,has_selected_date:C.computed,clearTable:C.action.bound,clearDateFilter:C.action.bound,fetchNextBatch:C.action.bound,statementHandler:C.action.bound,handleDateChange:C.action.bound,handleFilterChange:C.action.bound,handleScroll:C.action.bound,loadAccountStatistics:C.action.bound,accountSwitcherListener:C.action.bound,networkStatusChangeListener:C.action.bound,onMount:C.action.bound,onUnmount:C.override}),e}return e=c,r=[{key:"is_empty",get:function(){return!this.is_loading&&0===this.data.length}},{key:"has_selected_date",get:function(){return!(!this.date_from&&!this.date_to)}},{key:"clearTable",value:function(){this.data=[],this.has_loaded_all=!1,this.is_loading=!1}},{key:"clearDateFilter",value:function(){this.date_from=null,this.date_to=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix(),this.partial_fetch_time=0}},{key:"shouldFetchNextBatch",value:function(t){if(!t&&(this.has_loaded_all||this.is_loading))return!1;var e=(0,l.toMoment)().startOf("day").add(1,"d").subtract(1,"s").unix();return!(this.date_to<e)||!t&&this.partial_fetch_time}},{key:"fetchNextBatch",value:(a=St(regeneratorRuntime.mark((function t(){var e,r,n,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]&&o[0],this.shouldFetchNextBatch(e)){t.next=3;break}return t.abrupt("return");case 3:return this.is_loading=!0,r=z(this.date_from,this.date_to,this.partial_fetch_time,e),"all"!==this.action_type&&(r.action_type=this.action_type),t.next=8,l.WS.statement(100,e?void 0:this.data.length,r);case 8:n=t.sent,this.statementHandler(n,e);case 10:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"statementHandler",value:function(t,e){var r=this;if("error"in t)this.error=t.error.message;else{var n=t.statement.transactions.map((function(t){return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n="DD MMM YYYY HH:mm:ss",o=(0,l.toMoment)(t.transaction_time).format(n),i=parseFloat(t.payout),a=parseFloat(t.amount),s=parseFloat(t.balance_after),c=!0,u=["buy","sell"].includes(t.action_type)?t.shortcode:null,f=u?(0,l.getSymbolDisplayName)(r,(0,l.getMarketInformation)(u).underlying):"";return bt({action:(0,h.localize)((0,l.toTitleCase)(t.action_type)),date:o,display_name:f,refid:t.transaction_id,payout:isNaN(i)?"-":(0,l.formatMoney)(e,i,c),amount:isNaN(a)?"-":(0,l.formatMoney)(e,a,c),balance:isNaN(s)?"-":(0,l.formatMoney)(e,s,c),desc:t.longcode.replace(/\n/g,"<br />"),id:t.contract_id,app_id:t.app_id,shortcode:u,action_type:t.action_type,purchase_time:t.purchase_time,transaction_time:t.transaction_time},t.withdrawal_details&&{withdrawal_details:t.withdrawal_details,longcode:t.longcode})}(t,r.root_store.client.currency,r.root_store.active_symbols.active_symbols)}));this.data=e?[].concat(gt(n),gt(this.data)):[].concat(gt(this.data),gt(n)),this.has_loaded_all=!e&&n.length<100,this.is_loading=!1,n.length>0&&(this.partial_fetch_time=(0,l.toMoment)().unix())}}},{key:"handleDateChange",value:function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.date_range;this.filtered_date_range=o,this.date_from=null!==(e=null==t?void 0:t.from)&&void 0!==e?e:t.is_batch?null:this.date_from,this.date_to=null!==(r=null==t?void 0:t.to)&&void 0!==r?r:this.date_to,this.clearTable(),this.fetchNextBatch()}},{key:"handleFilterChange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action_type=t,this.clearTable(),this.fetchNextBatch()}},{key:"handleScroll",value:function(t){var e=t.target,r=e.scrollTop,n=e.scrollHeight-(r+e.clientHeight);this.fetchOnScroll(n)}},{key:"loadAccountStatistics",value:(i=St(regeneratorRuntime.mark((function t(){var e,r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.account_statistics={},!(e=this.root_store.client).standpoint.iom&&!e.standpoint.malta){t.next=8;break}return t.next=6,l.WS.accountStatistics();case 6:r=t.sent,(0,C.runInAction)((function(){r.error?n.account_statistics={}:n.account_statistics=r.account_statistics}));case 8:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"accountSwitcherListener",value:function(){var t=this;return new Promise((function(e){return t.clearTable(),t.clearDateFilter(),t.loadAccountStatistics(),e(t.fetchNextBatch())}))}},{key:"networkStatusChangeListener",value:function(t){this.is_loading=!t}},{key:"onMount",value:(o=St(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertHasValidCache(this.client_loginid,this.clearDateFilter,this.clearTable,l.WS.forgetAll.bind(null,"proposal")),this.client_loginid=this.root_store.client.loginid,this.onSwitchAccount(this.accountSwitcherListener),this.onNetworkStatusChange(this.networkStatusChangeListener),t.next=6,l.WS.wait("authorize");case 6:this.fetchNextBatch(!0),this.loadAccountStatistics();case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onUnmount",value:function(){this.disposeSwitchAccount(),l.WS.forgetAll("proposal")}}],r&&jt(e.prototype,r),n&&jt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(nt);function Ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rt(t,e,r){return e&&Ct(t.prototype,e),r&&Ct(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Dt=Rt((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.profit_table=new _t({root_store:e}),this.statement=new At({root_store:e})}));function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lt(t,e,r){return e&&Nt(t.prototype,e),r&&Nt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var It,Mt=Lt((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.client=e.client,this.common=e.common,this.modules=new Dt(this,e),this.ui=e.ui,this.gtm=e.gtm,this.rudderstack=e.rudderstack,this.pushwoosh=e.pushwoosh,this.notifications=e.notifications,this.contract_replay=e.contract_replay,this.contract_trade=e.contract_trade,this.portfolio=e.portfolio,this.chart_barrier_store=e.chart_barrier_store,this.active_symbols=e.active_symbols})),Ft=r("./src/_common/base/server_time.js"),Bt=r.n(Ft);(0,C.configure)({enforceActions:"observed"});const zt=function(t,e){return It||(Bt().init(t.common),(0,l.setWebsocket)(e),It=new Mt(t))};function Ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Vt=function(t){var e=t.passthrough,r=Ht(a.useState(zt(e.root_store,e.WS)),1)[0];return a.createElement(P.z1,{store:r},a.createElement(a.Fragment,null,a.createElement(A,null)))};Vt.propTypes={passthrough:i().shape({root_store:i().object,WS:i().object})};const Gt=Vt}}]);