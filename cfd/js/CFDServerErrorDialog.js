!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@deriv/components"),require("@deriv/translations"),require("mobx"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["@deriv/components","@deriv/translations","mobx","react","react-dom"],t):"object"==typeof exports?exports["@deriv/cfd"]=t(require("@deriv/components"),require("@deriv/translations"),require("mobx"),require("react"),require("react-dom")):e["@deriv/cfd"]=t(e["@deriv/components"],e["@deriv/translations"],e.mobx,e.react,e["react-dom"])}(self,(function(e,t,r,n,o){return(()=>{"use strict";var i={"../../node_modules/mobx-persist-store/lib/esm5/index.js":(e,t,r)=>{var n=new Map,o={},i={},a=r("mobx"),s=function(e){return Boolean(e)&&!1===Array.isArray(e)&&"object"==typeof e},c=function(e,t,r){void 0===r&&(r="")},u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},d=function(){function e(e){this.options=e}return e.prototype.setItem=function(e,t){var r;return u(this,void 0,void 0,(function(){var n,o,i,a,s,u;return l(this,(function(l){switch(l.label){case 0:return n=this.options,o=n.stringify,i=void 0===o||o,a=n.debugMode,void 0!==a&&a,s=this.options.expireIn?Object.assign({},t,{__mps__:{expireInTimestamp:(d=this.options.expireIn,(new Date).getTime()+d)}}):t,u=i?JSON.stringify(s):s,c(0,"".concat(e," - setItem:"),u),[4,null===(r=this.options.storage)||void 0===r?void 0:r.setItem(e,u)];case 1:return l.sent(),[2]}var d}))}))},e.prototype.getItem=function(e){var t,r;return u(this,void 0,void 0,(function(){var n,o,i,a,s,u,d;return l(this,(function(l){switch(l.label){case 0:return n=this.options,o=n.removeOnExpiration,i=void 0===o||o,a=n.debugMode,void 0!==a&&a,[4,null===(t=this.options.storage)||void 0===t?void 0:t.getItem(e)];case 1:s=l.sent();try{u=JSON.parse(s)||{}}catch(e){u=s||{}}return f=null===(r=u.__mps__)||void 0===r?void 0:r.expireInTimestamp,p=(new Date).getTime(),d=new Date(f).getTime()<=p,c(0,"".concat(e," - hasExpired"),d),d&&i?[4,this.removeItem(e)]:[3,3];case 2:l.sent(),l.label=3;case 3:return u=d?{}:u,c(0,"".concat(e," - (getItem):"),u),[2,u]}var f,p}))}))},e.prototype.removeItem=function(e){var t;return u(this,void 0,void 0,(function(){var r;return l(this,(function(n){switch(n.label){case 0:return r=this.options.debugMode,void 0!==r&&r,c(0,"".concat(e," - (removeItem): storage was removed")),[4,null===(t=this.options.storage)||void 0===t?void 0:t.removeItem(e)];case 1:return n.sent(),[2]}}))}))},e}(),f=function(e){return e.reduce((function(e,t){return"string"==typeof t?(e.push({key:t,serialize:function(e){return e},deserialize:function(e){return e}}),e):(s(r=t)?["key","serialize","deserialize"].every((function(e){return!(!r.hasOwnProperty(e)||void 0===e)||(c(o.debugMode,"".concat(e," not found in SerializableProperty"),{key:e,obj:r}),!1)})):(c(o.debugMode,0,{obj:r}),0))?(e.push(t),e):e;var r}),[])},p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},h=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};!function(){function e(e,t,r){var n,s,u,l,p,h,v;void 0===r&&(r={}),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null,this.debugMode=!1,this.isHydrated=!1,this.isPersisting=!1,this.storageName="",this.target=e,this.storageName=t.name,this.properties=f(t.properties),this.reactionOptions=Object.assign({fireImmediately:!0},i,r),this.debugMode=null!==(s=null!==(n=t.debugMode)&&void 0!==n?n:o.debugMode)&&void 0!==s&&s,this.storageAdapter=new d({expireIn:null!==(u=t.expireIn)&&void 0!==u?u:o.expireIn,removeOnExpiration:null===(p=null!==(l=t.removeOnExpiration)&&void 0!==l?l:o.removeOnExpiration)||void 0===p||p,stringify:null===(v=null!==(h=t.stringify)&&void 0!==h?h:o.stringify)||void 0===v||v,storage:t.storage?t.storage:o.storage,debugMode:this.debugMode}),(0,a.makeObservable)(this,{clearPersistedStore:a.action,hydrateStore:a.action,isHydrated:a.observable,isPersisting:a.observable,pausePersisting:a.action,startPersisting:a.action,stopPersisting:a.action},{autoBind:!0,deep:!1}),this.storageAdapter.options.storage,this.storageName,c(this.debugMode,"".concat(this.storageName," - (makePersistable)"),{properties:this.properties,storageAdapter:this.storageAdapter,reactionOptions:this.reactionOptions})}e.prototype.init=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return[4,this.hydrateStore()];case 1:return e.sent(),this.startPersisting(),[2,this]}}))}))},e.prototype.hydrateStore=function(){return p(this,void 0,void 0,(function(){var e,t,r,n=this;return h(this,(function(o){switch(o.label){case 0:return e=Boolean(this.cancelWatch),this.isPersisting&&this.pausePersisting(),(0,a.runInAction)((function(){n.isHydrated=!1,c(n.debugMode,"".concat(n.storageName," - (hydrateStore) isHydrated:"),n.isHydrated)})),this.storageAdapter&&this.target?[4,this.storageAdapter.getItem(this.storageName)]:[3,2];case 1:t=o.sent(),r=this.target,t&&(0,a.runInAction)((function(){n.properties.forEach((function(e){var n;if([r.hasOwnProperty(e.key),void 0!==t[e.key]].every(Boolean)){var o=t[e.key];r[e.key]instanceof a.ObservableMap&&(n=o,Array.isArray(n)&&n.every((function(e){return Array.isArray(e)})))?r[e.key]=e.deserialize(new Map(o)):r[e.key]=e.deserialize(o)}}))})),o.label=2;case 2:return(0,a.runInAction)((function(){n.isHydrated=!0,c(n.debugMode,"".concat(n.storageName," - isHydrated:"),n.isHydrated)})),e&&this.startPersisting(),[2]}}))}))},e.prototype.startPersisting=function(){var e=this;if(this.storageAdapter&&this.target&&!this.cancelWatch){var t=this.target;this.cancelWatch=(0,a.reaction)((function(){var r={};return e.properties.forEach((function(e){var n=(0,a.isComputedProp)(t,e.key),o=(0,a.isAction)(t[e.key]);if(String(e.key),String(e.key),!n&&!o){var i=e.serialize(t[e.key]);if(i instanceof a.ObservableMap){var s=[];i.forEach((function(e,t){s.push([t,(0,a.toJS)(e)])})),i=s}r[e.key]=(0,a.toJS)(i)}})),r}),(function(t){return p(e,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.storageAdapter?[4,this.storageAdapter.setItem(this.storageName,t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}),this.reactionOptions),this.isPersisting=!0,c(this.debugMode,"".concat(this.storageName," - (startPersisting) isPersisting:"),this.isPersisting)}},e.prototype.pausePersisting=function(){this.isPersisting=!1,c(this.debugMode,"".concat(this.storageName," - pausePersisting (isPersisting):"),this.isPersisting),this.cancelWatch&&(this.cancelWatch(),this.cancelWatch=null)},e.prototype.stopPersisting=function(){this.pausePersisting(),c(this.debugMode,"".concat(this.storageName," - (stopPersisting)")),n.delete(this.target),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null},e.prototype.clearPersistedStore=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){switch(e.label){case 0:return this.storageAdapter?(c(this.debugMode,"".concat(this.storageName," - (clearPersistedStore)")),[4,this.storageAdapter.removeItem(this.storageName)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.getPersistedStore=function(){return p(this,void 0,void 0,(function(){return h(this,(function(e){return this.storageAdapter?(c(this.debugMode,"".concat(this.storageName," - (getPersistedStore)")),[2,this.storageAdapter.getItem(this.storageName)]):[2,null]}))}))}}()},"../../node_modules/mobx-react-lite/es/index.js":(e,t,r)=>{r.d(t,{Pi:()=>A});var n=r("mobx"),o=r("react"),i=r.n(o);if(!o.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!n.makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var a=r("react-dom");function s(e){e()}function c(e){return(0,n.getDependencyTree)(e)}var u="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry;function l(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+d}}var d=1e4;var f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var p=u?function(e){var t=new Map,r=1,n=new e((function(e){var r=t.get(e);r&&(r.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,o,i){var a=r++;return n.register(i,a,e),e.current=l(o),e.current.finalizationRegistryCleanupToken=a,t.set(a,e.current),e.current},recordReactionAsCommitted:function(e){n.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(u):function(){var e,t=new Set;function r(){void 0===e&&(e=setTimeout(n,1e4))}function n(){e=void 0;var n=Date.now();t.forEach((function(e){var r=e.current;r&&n>=r.cleanAt&&(r.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&r()}return{addReactionToTrack:function(e,n,o){var i;return e.current=l(n),i=e,t.add(i),r(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),n())},resetCleanupScheduleForTests:function(){var r,n;if(t.size>0){try{for(var o=f(t),i=o.next();!i.done;i=o.next()){var a=i.value,s=a.current;s&&(s.reaction.dispose(),a.current=null)}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}(),h=p.addReactionToTrack,v=p.recordReactionAsCommitted,m=(p.resetCleanupScheduleForTests,p.forceCleanupTimerToRunNowForTests,!1);function y(){return m}var g=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function b(e){return"observer".concat(e)}var w=function(){};function x(){return new w}function P(e,t){if(void 0===t&&(t="observed"),y())return e();var r=g(i().useState(x),1)[0],o=g(i().useState(),2)[1],a=function(){return o([])},s=i().useRef(null);if(!s.current)var u=new n.Reaction(b(t),(function(){l.mounted?a():l.changedBeforeMount=!0})),l=h(s,u,r);var d,f,p=s.current.reaction;if(i().useDebugValue(p,c),i().useEffect((function(){return v(s),s.current?(s.current.mounted=!0,s.current.changedBeforeMount&&(s.current.changedBeforeMount=!1,a())):(s.current={reaction:new n.Reaction(b(t),(function(){a()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},a()),function(){s.current.reaction.dispose(),s.current=null}}),[]),p.track((function(){try{d=e()}catch(e){f=e}})),f)throw f;return d}var S="function"==typeof Symbol&&Symbol.for,T=S?Symbol.for("react.forward_ref"):"function"==typeof o.forwardRef&&(0,o.forwardRef)((function(e){return null})).$$typeof,k=S?Symbol.for("react.memo"):"function"==typeof o.memo&&(0,o.memo)((function(e){return null})).$$typeof;function A(e,t){var r;if(k&&e.$$typeof===k)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(y())return e;var n=null!==(r=null==t?void 0:t.forwardRef)&&void 0!==r&&r,i=e,a=e.displayName||e.name;if(T&&e.$$typeof===T&&(n=!0,"function"!=typeof(i=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var s,c,u=function(e,t){return P((function(){return i(e,t)}),a)};return""!==a&&(u.displayName=a),e.contextTypes&&(u.contextTypes=e.contextTypes),n&&(u=(0,o.forwardRef)(u)),u=(0,o.memo)(u),s=e,c=u,Object.keys(s).forEach((function(e){M[e]||Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(s,e))})),u}var M={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};var O;(O=a.unstable_batchedUpdates)||(O=s),(0,n.configure)({reactionScheduler:O})},"../stores/src/index.ts":(e,t,r)=>{r.d(t,{Pi:()=>n.Pi,oR:()=>a});var n=r("../../node_modules/mobx-react-lite/es/index.js"),o=r("react");r("mobx"),r("../../node_modules/mobx-persist-store/lib/esm5/index.js");var i=(0,o.createContext)(null),a=function(){var e=(0,o.useContext)(i);if(!e)throw new Error("useStore must be used within StoreContext");return e}},"@deriv/components":t=>{t.exports=e},"@deriv/translations":e=>{e.exports=t},mobx:e=>{e.exports=r},react:e=>{e.exports=n},"react-dom":e=>{e.exports=o}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return i[e](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var c={};return(()=>{s.d(c,{default:()=>i});var e=s("react"),t=s.n(e),r=s("@deriv/components"),n=s("@deriv/translations"),o=s("../stores/src/index.ts");const i=(0,o.Pi)((function(){var e=(0,o.oR)(),i=e.ui,a=e.modules,s=i.enableApp,c=i.disableApp,u=a.cfd,l=u.clearCFDError,d=u.error_message,f=u.error_type,p=u.has_cfd_error,h=u.is_cfd_success_dialog_enabled,v=p&&!h&&f&&!["PasswordReset","PasswordError"].includes(f);return t().createElement(r.Dialog,{title:(0,n.localize)("Something’s not right"),confirm_button_text:(0,n.localize)("OK"),onConfirm:l,disableApp:c,enableApp:s,is_visible:v},d||t().createElement(n.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))}))})(),c=c.default})()}));