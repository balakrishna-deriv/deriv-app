(self.webpackChunk_deriv_cfd=self.webpackChunk_deriv_cfd||[]).push([["cfd-app"],{"./src/Components/cfd-account-copy.tsx":(e,t,a)=>{"use strict";a.d(t,{O:()=>l});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/translations"),c=a("@deriv/shared"),l=function(e){var t=e.text,a=e.className;return r().createElement("div",{className:a,"data-testid":"cfd_account_copy_main_div"},r().createElement(o.Clipboard,{text_copy:t,info_message:(0,c.isMobile)()?"":(0,i.localize)("copy"),success_message:(0,i.localize)("copied!"),popoverAlignment:(0,c.isMobile)()?"left":"bottom"}))}},"./src/Components/success-dialog.jsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>f});var n=a("../../node_modules/prop-types/index.js"),r=a.n(n),o=a("../../node_modules/classnames/index.js"),i=a.n(o),c=a("react"),l=a.n(c),s=a("@deriv/components"),u=a("@deriv/translations");function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}var _=function(e){var t=e.className;return l().createElement(s.Icon,{className:t,icon:"IcCheckmarkCircle",custom_color:"var(--status-success)",size:24})},m=function(e){var t=e.classNameMessage,a=void 0===t?"":t,n=e.has_cancel,r=e.has_submit,o=e.icon,c=e.message,m=e.onCancel,f=e.onSubmit,p=e.heading,g=e.icon_size,h=e.text_submit,v=e.text_cancel,b=e.is_open,y=e.toggleModal,w=e.title,E=e.has_close_icon,x=e.width,S=void 0===x?"":x,z=e.is_medium_button;return l().createElement(s.Modal,{className:"cfd-success-dialog",is_open:b,toggleModal:y,has_close_icon:E,small:!w,title:w,width:S},l().createElement(s.Modal.Body,null,l().createElement("div",{className:i()("success-change__icon-area",{"success-change__icon-area--large":"large"===g,"success-change__icon-area--xlarge":"xlarge"===g})},o,l().createElement(_,{className:"bottom-right-overlay"})),!p&&l().createElement(s.Text,{as:"h2",weight:"bold",size:"s",className:"dc-modal-header__title"},l().createElement(u.Localize,{i18n_default_text:"Success!"})),p&&p,l().isValidElement(c)&&c,!l().isValidElement(c)&&l().createElement("p",{className:a},c)),l().createElement(s.Modal.Footer,null,n&&l().createElement(s.Button,d({onClick:m,has_effect:!0,text:v||(0,u.localize)("Maybe later"),secondary:!0},z?{medium:!0}:{large:!0})),r&&l().createElement(s.Button,d({has_effect:!0,onClick:f,text:h,primary:!0},z?{medium:!0}:{large:!0}))))};m.defaultProps={icon_size:"large",has_cancel:!1,has_submit:!0},m.propTypes={classNameMessage:r().string,has_cancel:r().bool,has_close_icon:r().bool,has_submit:r().bool,heading:r().oneOfType([r().string,r().object]),icon:r().object,icon_size:r().string,icon_type:r().string,is_medium_button:r().bool,is_open:r().bool,message:r().oneOfType([r().string,r().object]),onCancel:r().func,onSubmit:r().func,text_cancel:r().string,text_submit:r().string,title:r().string,toggleModal:r().func,width:r().string};const f=m},"./src/Containers/cfd-change-password-confirmation.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var n=a("react"),r=a.n(n),o=a("../../node_modules/classnames/index.js"),i=a.n(o),c=a("../../node_modules/formik/dist/formik.esm.js"),l=a("@deriv/components"),s=a("@deriv/translations"),u=a("@deriv/shared");const d=function(e){var t=e.confirm_label,a=e.className,n=e.platform,o=e.onConfirm,d=e.onCancel,_=e.context;return r().createElement(c.J9,{initialValues:{password:""},onSubmit:o},(function(e){var o,c,m,f=e.isSubmitting,p=e.handleSubmit;return r().createElement("form",{onSubmit:p,"data-testid":"dt_cfd_change_password_form"},r().createElement("div",{className:i()("cfd-change-password-confirmation__wrapper",(o={},c="".concat(a,"-wrapper"),m=a,c in o?Object.defineProperty(o,c,{value:m,enumerable:!0,configurable:!0,writable:!0}):o[c]=m,o))},r().createElement("div",{className:i()("cfd-change-password-confirmation",a)},r().createElement(l.Icon,{className:"cfd-change-password__icon",icon:n===u.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),r().createElement(l.Text,{as:"p",align:"center",size:"s",weight:"bold"},r().createElement(s.Localize,{i18n_default_text:"Confirm to change your {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(n)}})),r().createElement(l.Text,{className:"cfd-change-password-confirmation__description",as:"p",align:"center",color:"loss-danger",size:"xs"},r().createElement(s.Localize,{i18n_default_text:"This will change the password to all of your {{platform}} accounts.",values:{platform:(0,u.getCFDPlatformLabel)(n)}})),r().createElement(l.FormSubmitButton,{is_center:!0,label:t||(0,s.localize)("Create"),cancel_label:(0,s.localize)("Cancel"),is_loading:f,has_cancel:!0,onCancel:d,context:_}))))}))}},"./src/Containers/cfd-dbvi-onboarding.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>p});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/translations"),c=a("@deriv/account/dist/account/js/poi-poa-docs-submitted"),l=a.n(c),s=a("./src/Stores/connect.js"),u=a("@deriv/shared"),d=a("./src/Containers/cfd-financial-stp-real-account-signup.tsx");function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var f=function(e){var t=e.onClickOk;return r().createElement("div",{className:"da-icon-with-message"},r().createElement(o.Icon,{icon:"IcPoaLock",size:128}),r().createElement(o.Text,{className:"da-icon-with-message__text",as:"p",size:(0,u.isMobile)()?"xs":"s",weight:"bold"},(0,i.localize)("Switch to your real account to submit your documents")),r().createElement(o.Button,{has_effect:!0,text:(0,i.localize)("Ok"),onClick:function(){t()},className:"da-icon-with-message__button",primary:!0}))};const p=(0,s.$j)((function(e){var t=e.client,a=e.modules.cfd,n=e.ui;return{account_status:t.account_status,account_type:a.account_type,disableApp:n.disableApp,enableApp:n.enableApp,fetchAccountSettings:t.fetchAccountSettings,has_created_account_for_selected_jurisdiction:a.has_created_account_for_selected_jurisdiction,has_submitted_cfd_personal_details:a.has_submitted_cfd_personal_details,is_cfd_verification_modal_visible:a.is_cfd_verification_modal_visible,is_virtual:t.is_virtual,jurisdiction_selected_shortcode:a.jurisdiction_selected_shortcode,mt5_login_list:t.mt5_login_list,openPasswordModal:a.enableCFDPasswordModal,toggleCFDVerificationModal:a.toggleCFDVerificationModal,updateAccountStatus:t.updateAccountStatus,updateMT5Status:t.updateMT5Status}}))((function(e){var t=e.account_status,a=e.context,n=e.disableApp,c=e.enableApp,s=e.fetchAccountSettings,m=e.has_created_account_for_selected_jurisdiction,p=e.has_submitted_cfd_personal_details,g=e.is_cfd_verification_modal_visible,h=e.is_virtual,v=e.jurisdiction_selected_shortcode,b=e.openPasswordModal,y=e.toggleCFDVerificationModal,w=e.updateAccountStatus,E=e.updateMT5Status,x=_(r().useState(!1),2),S=x[0],z=x[1],k=_(r().useState(!1),2),A=k[0],T=k[1],D=function(){u.WS.authorized.getAccountStatus().then((function(e){var t=e.get_account_status;if(null!=t&&t.authentication){var a=(0,u.getAuthenticationStatusInfo)(t),n=a.poi_acknowledged_for_vanuatu_maltainvest,r=a.poi_acknowledged_for_bvi_labuan,o=a.poa_acknowledged;z("vanuatu"===v?n&&o&&p:"maltainvest"===v?n&&o:r&&o&&p)}T(!1)})),T(!1)};r().useEffect((function(){g&&(T(!0),D(),s())}),[g]);var M=function(){return A?r().createElement(o.Loading,{is_fullscreen:!1}):h?r().createElement(f,{onClickOk:y}):S?r().createElement(l(),{onClickOK:y,updateAccountStatus:w,account_status:t,jurisdiction_selected_shortcode:v,has_created_account_for_selected_jurisdiction:m,openPasswordModal:b,context:a}):r().createElement(d.default,{onFinish:function(){E(),m?z(!0):(y(),b())},context:a})},C=function(){return m?(0,i.localize)("Submit your proof of identity and address"):(0,i.localize)("Add a real MT5 account")};return r().createElement(r().Suspense,{fallback:r().createElement(o.UILoader,null)},r().createElement(o.DesktopWrapper,null,r().createElement(o.Modal,{className:"cfd-financial-stp-modal",disableApp:n,enableApp:c,is_open:g,title:C(),toggleModal:y,height:"700px",width:"996px",context:a,onMount:function(){return D()},exit_classname:"cfd-modal--custom-exit"},M())),r().createElement(o.MobileWrapper,null,r().createElement(o.MobileDialog,{portal_element_id:"deriv_app",title:C(),wrapper_classname:"cfd-financial-stp-modal",visible:g,onClose:y,context:a},M())))}))},"./src/Containers/cfd-financial-stp-real-account-signup.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>re});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/shared"),c=a("./src/Stores/connect.js"),l=a("../../node_modules/formik/dist/formik.esm.js"),s=a("@deriv/account/dist/account/js/file-uploader-container"),u=a.n(s),d=a("@deriv/account/dist/account/js/form-sub-header"),_=a.n(d),m=a("@deriv/account/dist/account/js/poa-status-codes"),f=a.n(m),p=a("@deriv/translations"),g=["maxLength","name","optional"];function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){b(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E.apply(this,arguments)}function x(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var S=function(e){var t=e.maxLength,a=e.name,n=e.optional,i=void 0!==n&&n,c=x(e,g);return r().createElement(l.gN,{name:a},(function(e){var n=e.field,l=e.form,s=l.errors,u=l.touched;return r().createElement(o.Input,E({},n,{type:"text",required:!i,name:a,autoComplete:"off",maxLength:t||30,error:u[n.name]&&s[n.name]},c))}))},z=function(e){var t=e.values,a=(e.context,e.residence_list),n=e.account_opening_reason,r=e.is_tin_required,o=y(a.filter((function(e){return e.text===t.tax_residence&&e.tin_format})),1)[0],i=null==o?void 0:o.tin_format,c=i||["^[A-Za-z0-9./s-]{0,25}$"],l={citizen:[function(e){return!!e},function(e){return a.map((function(e){return e.text})).includes(e)}],tax_residence:[function(e){return!!e},function(e){return a.map((function(e){return e.text})).includes(e)}],tax_identification_number:[function(e){return!(!t.tax_residence&&r||i)||!!e},function(e){return!c||(null==c?void 0:c.some((function(t){return e.match(t)})))}],account_opening_reason:[function(e){return!!e},function(e){return n.map((function(e){return e.value})).includes(e)}],place_of_birth:[function(e){return!!e},function(e){return a.map((function(e){return e.text})).includes(e)}]},s={citizen:(0,p.localize)("Citizenship"),tax_residence:(0,p.localize)("Tax residence"),tax_identification_number:(0,p.localize)("Tax identification number"),account_opening_reason:(0,p.localize)("Account opening reason"),place_of_birth:(0,p.localize)("Place of birth")},u={};return Object.entries(l).forEach((function(e){var a,n=y(e,2),r=n[0],o=n[1].findIndex((function(e){return!e(t[r])}));-1!==o&&(u[r]=(a=s[r],[(0,p.localize)("{{field_name}} is required",{field_name:a}),(0,p.localize)("{{field_name}} is not properly formatted.",{field_name:a})])[o])})),u};const k=function(e){var t,a,n=e.changeable_fields,c=e.is_loading,s=e.landing_company,u=e.residence_list,d=e.onSubmit,_=e.context,m=e.value,f=e.index,g=e.form_error,h=[{text:(0,p.localize)("Hedging"),value:"Hedging"},{text:(0,p.localize)("Income Earning"),value:"Income Earning"},{text:(0,p.localize)("Speculative"),value:"Speculative"},{text:(0,p.localize)("Peer-to-peer exchange"),value:"Peer-to-peer exchange"}],b=!(null===(t=null==s||null===(a=s.config)||void 0===a?void 0:a.tax_details_required)||void 0===t||!t);return 0===u.length||c?r().createElement(o.Loading,{is_fullscreen:!1}):r().createElement(l.J9,{initialValues:v({},m),validateOnChange:!0,validateOnBlur:!0,validate:function(e){return z({values:e,context:_,residence_list:u,account_opening_reason:h,is_tin_required:b})},onSubmit:function(e,t){return function(e,t,a,n,r,o){var i=function(e){var t,a,n,r=e.residence_list,o=e.citizen_text,i=e.tax_residence_text,c=e.place_of_birth_text;return null==r||r.forEach((function(e){e.text===o&&(t=e),e.text===c&&(n=e),e.text===i&&(a=e)})),{citizen:t,place_of_birth:n,tax_residence:a}}({residence_list:o,citizen_text:e.citizen,tax_residence_text:e.tax_residence,place_of_birth_text:e.place_of_birth}),c=i.citizen,l=i.place_of_birth,s=i.tax_residence;n(a,v(v({},e),{},{citizen:(null==c?void 0:c.value)||"",place_of_birth:(null==l?void 0:l.value)||"",tax_residence:(null==s?void 0:s.value)||""}),t.setSubmitting,r)}(e,t,f,d,!(0,i.isDeepEqual)(m,e),u)},validateOnMount:!0},(function(e){var t=e.handleSubmit,a=e.isSubmitting,c=e.handleChange,s=e.handleBlur,d=e.errors,f=e.touched,v=e.values,b=e.setFieldValue,y=e.isValid,w=f.citizen&&d.citizen,x=f.place_of_birth&&d.place_of_birth,z=f.tax_residence&&d.tax_residence,k=f.account_opening_reason&&d.account_opening_reason,A=!(!m.citizen||null!=n&&n.includes("citizen")),T=!(!m.place_of_birth||null!=n&&n.includes("place_of_birth")),D=!(!m.tax_residence||null!=n&&n.includes("tax_residence")),M=!(!m.account_opening_reason||null!=n&&n.includes("account_opening_reason")),C=function(e,t){var a=e.value?e.text:"";b(t,a,!0)};return r().createElement(o.AutoHeightWrapper,{default_height:200,height_offset:(0,i.isDesktop)()?148:null},(function(e){var f=e.setRef;return r().createElement("form",{className:"cfd-personal-details-modal__form",ref:f,onSubmit:t,autoComplete:"off",noValidate:!0},r().createElement(o.Div100vhContainer,{className:"details-form",max_autoheight_offset:"179px",is_disabled:(0,i.isDesktop)()},r().createElement(o.Text,{as:"p",size:"xxs",align:"center",className:"details-form__description","data-testid":"dt_cfd_details_form_description"},r().createElement(p.Localize,{i18n_default_text:"Any information you provide is confidential and will be used for verification purposes only."})),r().createElement(o.ThemedScrollbars,{height:"512px",is_bypassed:(0,i.isMobile)()},r().createElement("div",{className:"details-form__elements"},r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(o.DesktopWrapper,null,r().createElement(l.gN,{name:"citizen"},(function(e){var t=e.field;return r().createElement(o.Autocomplete,E({},t,{id:"real_mt5_citizenship","data-lpignore":"true",autoComplete:"off",type:"text",label:(0,p.localize)("Citizenship"),error:w,disabled:A,list_items:u,onItemSelection:function(e){return C(e,"citizen")},list_portal_id:"modal_root",required:!0}))}))),r().createElement(o.MobileWrapper,null,r().createElement(o.SelectNative,{placeholder:(0,p.localize)("Please select"),label:(0,p.localize)("Citizenship"),value:v.citizen,list_items:u,error:w,disabled:A,use_text:!0,onChange:function(e){return b("citizen",e.target.value,!0)},required:!0,should_hide_disabled_options:!1}))),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(o.DesktopWrapper,null,r().createElement(l.gN,{name:"place_of_birth"},(function(e){var t=e.field;return r().createElement(o.Autocomplete,E({},t,{id:"real_mt5_place_of_birth","data-lpignore":"true",autoComplete:"off",type:"text",label:(0,p.localize)("Place of birth*"),error:x,disabled:T,list_items:u,onItemSelection:function(e){return C(e,"place_of_birth")},list_portal_id:"modal_root",required:!0}))}))),r().createElement(o.MobileWrapper,null,r().createElement(o.SelectNative,{placeholder:(0,p.localize)("Please select"),label:(0,p.localize)("Place of birth*"),value:v.place_of_birth,list_items:u,error:x,disabled:T,use_text:!0,onChange:function(e){return b("place_of_birth",e.target.value,!0)},required:!0,should_hide_disabled_options:!1}))),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(o.DesktopWrapper,null,r().createElement(l.gN,{name:"tax_residence"},(function(e){var t=e.field;return r().createElement(o.Autocomplete,E({id:"real_mt5_tax_residence","data-lpignore":"true",type:"text",autoComplete:"off",label:(0,p.localize)("Tax residence*"),error:z,disabled:D,list_items:u,onItemSelection:function(e){return C(e,"tax_residence")},list_portal_id:"modal_root"},t))}))),r().createElement(o.MobileWrapper,null,r().createElement(o.SelectNative,{placeholder:(0,p.localize)("Please select"),label:(0,p.localize)("Tax residence*"),value:v.tax_residence,error:z,disabled:D,list_items:u,use_text:!0,onChange:function(e){return b("tax_residence",e.target.value,!0)},required:!0}))),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(S,{id:"real_mt5_tax_identification_number",name:"tax_identification_number",label:(0,p.localize)("Tax identification number"),placeholder:(0,p.localize)("Tax identification number"),value:v.tax_identification_number,onBlur:s,disabled:!(!m.tax_identification_number||null!=n&&n.includes("tax_identification_number")),optional:!0})),r().createElement(l.gN,{name:"account_opening_reason"},(function(e){var t=e.field;return r().createElement(r().Fragment,null,r().createElement(o.DesktopWrapper,null,r().createElement(o.Dropdown,E({},t,{placeholder:(0,p.localize)("Account opening reason*"),is_align_text_left:!0,name:t.name,list:h,value:v.account_opening_reason,disabled:M,onChange:c,handleBlur:s,error:k,list_portal_id:"modal_root"}))),r().createElement(o.MobileWrapper,null,r().createElement(o.SelectNative,E({},t,{placeholder:(0,p.localize)("Please select"),name:t.name,label:(0,p.localize)("Account opening reason*"),list_items:h,value:v.account_opening_reason,disabled:M,error:k,onChange:function(e){c(e),b("account_opening_reason",e.target.value,!0)},data_testid:"account_opening_reason_mobile"}))))}))))),r().createElement(o.Modal.Footer,{is_bypassed:(0,i.isMobile)(),has_separator:!0},g&&r().createElement(o.FormSubmitErrorMessage,{message:g}),r().createElement(o.FormSubmitButton,{is_disabled:a||!y||Object.keys(d).length>0,is_absolute:(0,i.isMobile)(),label:(0,p.localize)("Next"),context:_})))}))}))};var A,T=["onSave","index","onSubmit","refreshNotifications"];function D(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function N(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const j=function(e){var t=e.onSave,a=e.index,n=e.onSubmit,c=e.refreshNotifications,s=N(e,T),d=r().useRef(null),m=F(r().useState(!0),2),g=m[0],h=m[1],v=F((0,o.useStateCallback)({poa_status:"none",has_poi:!1,form_error:""}),2),b=v[0],y=v[1],w=F((0,o.useStateCallback)({files:[],error_message:null}),2),E=w[0],x=w[1],z=F(r().useState(!1),2),k=z[0],M=z[1],O=function(){var e,r=(e=regeneratorRuntime.mark((function e(r,o){var c,l,s,u,d,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(c=C({},r)).document_file,o.setSubmitting(!0),e.next=5,i.WS.setSettings(c);case 5:if(!(l=e.sent).error){e.next=10;break}return y(C(C({},b),{form_error:l.error.message})),o.setSubmitting(!1),e.abrupt("return");case 10:return e.next=12,i.WS.authorized.storage.getSettings();case 12:if(s=e.sent,!(u=s.error)){e.next=17;break}return y(C(C({},b),{form_error:u.message})),e.abrupt("return");case 17:return y(C(C({},b),{form_error:""})),e.prev=18,e.next=21,null===(d=A.current)||void 0===d?void 0:d.upload();case 21:if(!(_=e.sent)||null==_||!_.warning){e.next=26;break}return y(C(C({},b),{form_error:_.warning})),o.setSubmitting(!1),e.abrupt("return");case 26:return e.next=28,i.WS.authorized.storage.getAccountStatus();case 28:if(!e.sent.error){e.next=34;break}return y(C(C({},b),{form_error:u.message})),o.setSubmitting(!1),e.abrupt("return");case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(18),y(C(C({},b),{form_error:e.t0.message}));case 39:o.setSubmitting(!1),t(a,r),n(a,r);case 42:case"end":return e.stop()}}),e,null,[[18,36]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){D(o,n,r,i,c,"next",e)}function c(e){D(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}();r().useEffect((function(){i.WS.authorized.getAccountStatus().then((function(e){i.WS.wait("states_list").then((function(){var t,a,n,r,o,i,l=null===(t=e.get_account_status)||void 0===t||null===(a=t.authentication)||void 0===a||null===(n=a.document)||void 0===n?void 0:n.status,s=null===(r=e.get_account_status)||void 0===r||null===(o=r.authentication)||void 0===o||null===(i=o.identity)||void 0===i?void 0:i.status;if(l&&s){var u="none"===s;y(C(C({},b),{poa_status:l,needs_poi:u,identity_status:s}),(function(){h(!1),c()}))}l&&["rejected","expired","suspected"].includes(l)&&M(!0)}))}))}),[c,y]);var P=function(e,t){return b.poa_status!==f().verified&&0!==Object.keys(t).length},j=s.states_list,L=s.value,R=L.address_line_1,I=L.address_line_2,V=L.address_city,B=L.address_state,U=L.address_postcode,W=b.form_error,X=b.poa_status,q=!g&&X!==f().verified;return r().createElement(l.J9,{initialValues:{address_line_1:R,address_line_2:I,address_city:V,address_state:B,address_postcode:U,document_file:E.files},validateOnMount:!0,validate:function(e){if([f().verified,f().pending].includes(b.poa_status))return{};var t={address_line_1:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,i.validAddress)(e)},function(e){return(0,i.validLength)(e,{max:70})}],address_line_2:[function(e){return!e||(0,i.validAddress)(e)},function(e){return(0,i.validLength)(e,{max:70})}],address_city:[function(e){return!!e&&!e.match(/^\s*$/)},function(e){return(0,i.validLength)(e,{min:1,max:35})},function(e){return(0,i.validLetterSymbol)(e)}],address_state:[function(e){return(0,i.validLength)(e,{max:35})}],address_postcode:[function(e){return(0,i.validLength)(e,{max:20})},function(e){return!e||(0,i.validPostCode)(e)}]},a={address_line_1:[(0,p.localize)("First line of address is required"),(0,p.localize)("First line of address is not in a proper format."),(0,p.localize)("This should not exceed {{max}} characters.",{max:70})],address_line_2:[(0,p.localize)("Second line of address is not in a proper format."),(0,p.localize)("This should not exceed {{max}} characters.",{max:70})],address_city:[(0,p.localize)("Town/City is required."),(0,p.localize)("This should not exceed {{max_number}} characters.",{max_number:35}),(0,p.localize)("Town/City is not in a proper format.")],address_state:[(0,p.localize)("State/Province is not in a proper format.")],address_postcode:[(0,p.localize)("This should not exceed {{max_number}} characters.",{max_number:20}),(0,p.localize)("Only letters, numbers, space, and hyphen are allowed.")]},n={};return Object.entries(t).forEach((function(t){var r=F(t,2),o=r[0],i=r[1].findIndex((function(t){return!t(e[o])}));-1!==i&&(n[o]=a[o][i])})),n},enableReinitialize:!0,onSubmit:O,innerRef:d},(function(e){e.dirty;var n=e.errors,c=e.handleSubmit,s=e.isSubmitting,d=e.handleBlur,m=e.handleChange,h=e.setFieldTouched,v=e.setFieldValue,b=e.values,y=e.touched;return r().createElement(o.AutoHeightWrapper,{default_height:200},(function(e){var w=e.setRef,z=e.height;return r().createElement("form",{ref:w,onSubmit:c,className:"cfd-proof-of-address"},r().createElement(o.Div100vhContainer,{className:"details-form",height_offset:"100px",is_disabled:(0,i.isDesktop)()},g&&r().createElement(o.Loading,{is_fullscreen:!1}),q&&r().createElement(o.ThemedScrollbars,{autohide:!1,height:"".concat(z-77,"px"),is_bypassed:(0,i.isMobile)()},r().createElement("div",{className:"cfd-proof-of-address__field-area"},k&&r().createElement(o.Text,{size:"xs",align:"center",color:"loss-danger"},(0,p.localize)("We were unable to verify your address with the details you provided. Please check and resubmit or choose a different document type.")),r().createElement(_(),{title:(0,p.localize)("Address information")}),r().createElement(S,{name:"address_line_1",maxLength:255,required:!0,label:(0,p.localize)("First line of address*"),placeholder:(0,p.localize)("First line of address*"),onBlur:d}),r().createElement(S,{name:"address_line_2",maxLength:255,label:(0,p.localize)("Second line of address (optional)"),optional:!0,placeholder:(0,p.localize)("Second line of address"),onBlur:d}),r().createElement("div",{className:"cfd-proof-of-address__inline-fields"},r().createElement(S,{maxLength:255,name:"address_city",required:!0,label:(0,p.localize)("Town/City*"),placeholder:(0,p.localize)("Town/City*"),onBlur:d}),r().createElement("fieldset",{className:"address-state__fieldset"},(null==j?void 0:j.length)>0?r().createElement(r().Fragment,null,r().createElement(o.DesktopWrapper,null,r().createElement(l.gN,{name:"address_state"},(function(e){var t=e.field;return r().createElement(o.Dropdown,{id:"address_state",className:"address_state-dropdown",is_align_text_left:!0,list:j,error:y[t.name]&&n[t.name],name:"address_state",value:b.address_state,onChange:m,placeholder:(0,p.localize)("State/Province"),list_portal_id:"modal_root"})}))),r().createElement(o.MobileWrapper,null,r().createElement(o.SelectNative,{label:(0,p.localize)("State/Province"),value:b.address_state,list_items:j,error:y.address_state&&n.address_state,onChange:function(e){m(e),v("address_state",e.target.value,!0)}}))):r().createElement(S,{name:"address_state",label:(0,p.localize)("State/Province"),placeholder:(0,p.localize)("State/Province"),value:b.address_state,onBlur:d})),r().createElement(S,{maxLength:255,name:"address_postcode",label:(0,p.localize)("Postal/ZIP code"),placeholder:(0,p.localize)("Postal/ZIP code"),onBlur:d,optional:!0})),r().createElement("div",{className:"cfd-proof-of-address__file-upload"},r().createElement(u(),{onRef:function(e){return A=e},getSocket:i.WS.getSocket,onFileDrop:function(e){return function(e,n,r,o,i){r("document_file",!0),o("document_file",e),x({files:e,error_message:n},(function(){"function"==typeof t&&t(a,C(C({},i),{document_file:e}))}))}(e.files,e.error_message,h,v,b)}})))),r().createElement(o.Modal.Footer,{is_bypassed:(0,i.isMobile)()},(X===f().none||q)&&r().createElement(o.FormSubmitButton,{is_disabled:P(0,n)||X!==f().verified&&E.files&&E.files.length<1||!!E.error_message,label:X===f().verified?(0,p.localize)("Submit"):(0,p.localize)("Next"),is_absolute:(0,i.isMobile)(),is_loading:s,form_error:W}))))}))}))};var L=a("@deriv/account/dist/account/js/proof-of-identity-container-for-mt5"),R=a.n(L),I=(a("@deriv/account/dist/account/css/proof-of-identity-container-for-mt5.css"),["index","onSave","onSubmit","height"]);function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},V.apply(this,arguments)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function W(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const X=(0,c.$j)((function(e){var t=e.client,a=e.common,n=e.notifications;return{account_status:t.account_status,app_routing_history:a.app_routing_history,fetchResidenceList:t.fetchResidenceList,is_switching:t.is_switching,is_virtual:t.is_virtual,is_high_risk:t.is_high_risk,is_withdrawal_lock:t.is_withdrawal_lock,refreshNotifications:n.refreshNotifications,routeBackInApp:a.routeBackInApp,should_allow_authentication:t.should_allow_authentication,account_settings:t.account_settings,residence_list:t.residence_list}}))((function(e){var t,a,n,o=e.index,i=e.onSave,c=e.onSubmit,l=e.height,s=W(e,I),u=B(r().useState("none"),2),d=u[0],_=u[1],m=(null===(t=s.account_settings)||void 0===t?void 0:t.citizen)||(null===(a=s.account_settings)||void 0===a?void 0:a.country_code),f=null===(n=s.residence_list)||void 0===n?void 0:n.find((function(e){return e.value===m}));return r().createElement(R(),V({},s,{height:l,is_from_external:!0,onStateChange:function(e){return function(e){_(e),i(o,{poi_state:e}),c(o,{poi_state:d})}(e)},citizen_data:f}))}));function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){J(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function $(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){H(o,n,r,i,c,"next",e)}function c(e){H(o,n,r,i,c,"throw",e)}i(void 0)}))}}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return K(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const Z=(0,c.$j)((function(e){var t=e.ui,a=e.client;return{account_settings:a.account_settings,disableApp:t.disableApp,enableApp:t.enableApp,getChangeableFields:a.getChangeableFields,landing_company:a.landing_company,residence_list:a.residence_list,setAccountSettings:a.setAccountSettings}}))((function(e){var t=e.account_settings,a=e.context,n=e.getChangeableFields,c=e.landing_company,l=e.residence_list,s=e.setAccountSettings,u=e.onSubmit,d=Y(r().useState(""),2),_=d[0],m=d[1],f=Y(r().useState(!1),2),g=f[0],h=f[1],v=Y(r().useState({citizen:"",place_of_birth:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""}),2),b=v[0],y=v[1],w=function(){var e=$(regeneratorRuntime.mark((function e(a){var n,r,o,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=11;break}return e.next=3,i.WS.authorized.storage.getSettings();case 3:if(!(r=e.sent).error){e.next=8;break}return m(r.error.message),"function"==typeof a&&a(!1),e.abrupt("return");case 8:n=r.get_settings,e.next=12;break;case 11:n=t;case 12:c=(o=n).citizen,l=o.place_of_birth,s=o.tax_residence,u=o.tax_identification_number,d=o.account_opening_reason,y(G(G({},b),{},{citizen:E(c)||"",place_of_birth:E(l)||"",tax_residence:E(s)||"",tax_identification_number:u||"",account_opening_reason:d||""}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r().useEffect((function(){h(!0),w().then((function(){h(!1)}))}),[]);var E=function(e){var t=Y(null==l?void 0:l.filter((function(t){return t.value===e})),1)[0];return(0,i.getPropertyValue)(t,["text"])||e},x=function(e,t){y(G(G({},t),{},{citizen:E(t.citizen),place_of_birth:E(t.place_of_birth),tax_residence:E(t.tax_residence)}))},S=function(){var e=$(regeneratorRuntime.mark((function e(a,n,r){var o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!(c.length>3&&void 0!==c[3])||c[3])){e.next=10;break}return e.next=4,i.WS.setSettings(n);case 4:if(!(o=e.sent).error){e.next=9;break}return m(o.error.message),r(!1),e.abrupt("return");case 9:w(r);case 10:x(0,n),s(G(G({},t),n)),u(a,n);case 13:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),z=function(){return r().createElement(o.Div100vhContainer,{className:"cfd-personal-details-modal",id:"cfd-personal-details-modal",is_disabled:(0,i.isDesktop)(),height_offset:"40px"},r().createElement("div",{className:"cfd-personal-details-modal__heading-container"},r().createElement(o.Text,{as:"p",weight:"bold",align:"center",size:"s"},(0,p.localize)("Complete your personal details"))),r().createElement("div",{className:"cfd-personal-details-modal__body"},r().createElement(k,{context:a,form_error:_,index:2,is_loading:g,landing_company:c,onSubmit:S,residence_list:l,changeable_fields:n(),value:b})))};return r().createElement(r().Fragment,null,r().createElement(o.DesktopWrapper,null,z()),r().createElement(o.MobileWrapper,null,z()))}));function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Q.apply(this,arguments)}function ee(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ne(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const re=(0,c.$j)((function(e){var t=e.client,a=e.modules.cfd,n=e.notifications;return{addNotificationByKey:n.addNotificationMessageByKey,authentication_status:t.authentication_status,get_settings:t.account_settings,client_email:t.email,is_fully_authenticated:t.is_fully_authenticated,landing_company:t.landing_company,refreshNotifications:n.refreshNotifications,removeNotificationMessage:n.removeNotificationMessage,removeNotificationByKey:n.removeNotificationByKey,residence_list:t.residence_list,states_list:t.states_list,fetchStatesList:t.fetchStatesList,storeProofOfAddress:a.storeProofOfAddress,account_status:t.account_status,jurisdiction_selected_shortcode:a.jurisdiction_selected_shortcode,has_submitted_cfd_personal_details:a.has_submitted_cfd_personal_details}}))((function(e){var t=e.account_status,a=e.authentication_status,n=e.fetchStatesList,c=e.get_settings,l=e.refreshNotifications,s=e.has_submitted_cfd_personal_details,u=e.jurisdiction_selected_shortcode,d=te(r().useState(0),2),_=d[0],m=d[1],f=te(r().useState(""),2),p=f[0],g=f[1],h=_,v=r().useRef(!0).current,b=(0,i.getAuthenticationStatusInfo)(t),y=b.need_poi_for_vanuatu_maltainvest,w=b.need_poi_for_bvi_labuan,E={body:X,form_value:{poi_state:"unknown"},forwarded_props:["addNotificationByKey","authentication_status","refreshNotifications","removeNotificationMessage","removeNotificationByKey","jurisdiction_selected_shortcode"]},x={body:j,form_value:{address_line_1:c.address_line_1,address_line_2:c.address_line_2,address_city:c.address_city,address_state:c.address_state,address_postcode:c.address_postcode,upload_file:""},forwarded_props:["states_list","get_settings","storeProofOfAddress","refreshNotifications"]},S={body:Z,form_value:{citizen:"",place_of_birth:"",tax_residence:"",tax_identification_number:"",account_opening_reason:""},forwarded_props:["residence_list","landing_company"]},z=!("pending"===a.document_status||"verified"===a.document_status),k=!s&&"maltainvest"!==u,A=[].concat(ee(("vanuatu"===u||"maltainvest"===u?y:w)?[E]:[]),ee(z?[x]:[]),ee(k?[S]:[])),T=te(r().useState(A),2),D=T[0],M=T[1];r().useEffect((function(){l()}),[D,l]),r().useEffect((function(){n()}),[n]);var C=function(){v=!1,e.onFinish()},O=function(e,t){if(v){var a=ee(D);a[e].form_value=t,M(a)}},F=function(e){return e?D[h][e]:D[h]},P=F("body"),N=F("form_value"),L=(F("forwarded_props")||[]).reduce((function(t,a){return Object.assign(t,(n={},r=a,o=e[a],r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{});return r().createElement(o.Div100vhContainer,{className:"cfd-financial-stp-modal",id:"real_mt5_financial_stp_account_opening",is_disabled:(0,i.isDesktop)(),height_offset:"40px"},r().createElement("div",{className:"cfd-financial-stp-modal__body","data-testid":"dt_cfd_financial_stp_modal_body"},r().createElement(P,Q({value:N,index:h,onSubmit:function(e,t){g(""),_+1<D.length?(O(e,t),m(_+1)):C()},height:"auto",context:e.context,onCancel:function(){_-1>=0?(m(_-1),g("")):C()},onSave:O,form_error:p},L))))}))},"./src/Containers/cfd-password-manager-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>C});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/translations"),c=a("@deriv/shared"),l=a("./src/Stores/connect.js"),s=a("./src/Stores/Modules/CFD/cfd-store.js"),u=a("./src/Containers/cfd-change-password-confirmation.tsx"),d=function(e){var t=e.platform,a=e.onConfirm;return r().createElement("div",{className:"cfd-change-password"},r().createElement(o.Icon,{className:"cfd-change-password__icon",icon:t===c.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),r().createElement(o.Text,{as:"p",align:"center",size:"s",weight:"bold"},r().createElement(i.Localize,{i18n_default_text:"{{platform}} password",values:{platform:(0,c.getCFDPlatformLabel)(t)}})),r().createElement(o.Text,{as:"p",align:"center",className:"cfd-change-password__description",size:"xs"},t===c.CFD_PLATFORMS.MT5?r().createElement(i.Localize,{i18n_default_text:"Use this password to log in to your Deriv MT5 accounts on the desktop, web, and mobile apps."}):r().createElement(i.Localize,{i18n_default_text:"Use this password to log in to your Deriv X accounts on the web and mobile apps."})),r().createElement(o.Button,{className:"dc-btn dc-btn--primary dc-btn__large dc-modal__container_cfd-reset-password-modal__button",onClick:a},r().createElement(o.Text,{size:"xs",weight:"bold",color:"colored-background"},r().createElement(i.Localize,{i18n_default_text:"Change password"}))))},_=function(e){var t=e.email,a=e.platform,n=e.account_group,l=r().useCallback((function(){var e=a===c.CFD_PLATFORMS.MT5?1:2;"real"===n?e=Number("".concat(e,"0")):"demo"===n&&(e=Number("".concat(e,"1")));var r=a===c.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";c.WS.verifyEmail(t,r,{url_parameters:{redirect_to:e}})}),[t,a,n]);return r().useEffect((function(){l()}),[l]),r().createElement(o.SendEmailTemplate,{title:(0,i.localize)("We've sent you an email"),subtitle:(0,i.localize)("Please click on the link in the email to change your {{platform}} password.",{platform:(0,c.getCFDPlatformLabel)(a)}),lbl_no_receive:(0,i.localize)("Didn't receive the email?"),txt_resend:(0,i.localize)("Resend email"),txt_resend_in:(0,i.localize)("Resend email in"),onClickSendEmail:l})};const m=function(e){var t=e.platform,a=e.email,n=e.account_group,c=r().useRef(),l=[{component:r().createElement(d,{platform:t,onConfirm:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.goNextStep()}})},{component:r().createElement(u.Z,{confirm_label:(0,i.localize)("Confirm"),platform:t,onConfirm:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.goNextStep()},onCancel:function(){var e;return null===(e=c.current)||void 0===e?void 0:e.goPrevStep()}})},{component:r().createElement(_,{platform:t,email:a,account_group:n})}];return r().createElement("div",{className:"cfd-trading-password"},r().createElement(o.MultiStep,{ref:c,steps:l}))};var f=a("../../node_modules/prop-types/index.js"),p=a.n(f),g=a("../../node_modules/formik/dist/formik.esm.js");function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},h.apply(this,arguments)}var v=function(e){var t=e.toggleModal,a=e.is_investor;return r().createElement("div",{className:"cfd-password-manager__success"},r().createElement(o.Icon,{icon:"IcPasswordUpdated",size:128}),r().createElement(o.Text,{as:"p",size:"xxs",align:"center"},a?r().createElement(i.Localize,{i18n_default_text:"Your investor password has been changed."}):r().createElement(i.Localize,{i18n_default_text:"Your password has been changed."})),r().createElement(o.Button,{onClick:t,className:"cfd-password-manager__success-btn",primary:!0,large:!0},r().createElement("p",{className:"dc-btn__text"},(0,i.localize)("OK"))))},b=function(e){var t=e.error_message_investor,a=e.is_submit_success_investor,n=e.multi_step_ref,l=e.onSubmit,s=e.setPasswordType,u=e.toggleModal,d=e.validatePassword;if(a)return r().createElement(v,{toggleModal:u,is_investor:!0});var _={old_password:"",new_password:"",password_type:"".concat("investor")};return r().createElement("div",{className:"cfd-password-manager__investor-wrapper"},r().createElement(o.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},r().createElement(i.Localize,{i18n_default_text:"Use this password to grant viewing access to another user. While they may view your trading account, they will not be able to trade or take any other actions."})),r().createElement(o.Text,{as:"p",size:"xs",className:"cfd-password-manager--paragraph"},r().createElement(i.Localize,{i18n_default_text:"If this is the first time you try to create a password, or you have forgotten your password, please reset it."})),t&&r().createElement(o.Text,{as:"p",color:"loss-danger",size:"xs",className:"cfd-password-manager--error-message","data-testid":"dt_error_message_investor"},t),r().createElement(g.J9,{initialValues:_,validate:d,onSubmit:l},(function(e){var t=e.isSubmitting,a=e.errors,l=e.setFieldTouched,u=e.values,d=e.touched;return r().createElement(g.l0,{className:"cfd-password-manager__investor-form",noValidate:!0},r().createElement(g.gN,{name:"old_password"},(function(e){var t=e.field;return r().createElement(o.PasswordInput,h({},t,{autoComplete:"current-password",label:(0,i.localize)("Current investor password"),error:d.old_password&&a.old_password,required:!0}))})),r().createElement(g.gN,{name:"new_password"},(function(e){var t=e.field;return r().createElement(o.PasswordMeter,{input:t.value,has_error:!(!d.new_password||!a.new_password),custom_feedback_messages:(0,c.getErrorMessages)().password_warnings},(function(e){var n=e.has_warning;return r().createElement(o.PasswordInput,h({},t,{autoComplete:"new-password",label:(0,i.localize)("New investor password"),hint:!n&&(0,i.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters and numbers."),error:d.new_password&&a.new_password,onChange:function(e){l("new_password",!0,!0),t.onChange(e)},className:"cfd-password-manager__new-password",required:!0}))}))})),r().createElement("div",{className:"cfd-password-manager__actions"},r().createElement(o.Button,{className:"cfd-password-manager--button",is_disabled:t||!u.old_password||!u.new_password||Object.keys(a).length>0,is_loading:t,text:(0,i.localize)("Change investor password"),primary:!0,large:!0}),r().createElement(o.Button,{className:"cfd-password-manager--button",type:"button",onClick:function(){var e;s("investor"),null===(e=n.current)||void 0===e||e.goNextStep()},text:(0,i.localize)("Create or reset investor password"),tertiary:!0,large:!0})))})))};b.propTypes={error_message_investor:p().string,is_submit_success_investor:p().bool,multi_step_ref:p().object,onSubmit:p().func,setPasswordType:p().func,toggleModal:p().func,validatePassword:p().func};const y=b;function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function S(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var A=function(e){var t=e.count_from,a=void 0===t?60:t,n=e.onTimeout,o=z(r().useState(a),2),i=o[0],c=o[1];return r().useEffect((function(){var e;return 0!==i?e=setTimeout((function(){c(i-1)}),1e3):n(),function(){clearTimeout(e)}}),[i]),r().createElement("span",{className:"countdown"},i)},T=function(e){var t=e.sendVerifyEmail,a=e.account_type,n=e.account_group,c=e.server,l=(e.context,e.password_type),s=z(r().useState(!1),2),u=s[0],d=s[1],_=z(r().useState(!1),2),m=_[0],f=_[1];r().useEffect((function(){localStorage.setItem("cfd_reset_password_intent",[c,n,a].join(".")),localStorage.setItem("cfd_reset_password_type",l),t()}),[]);return r().createElement("div",{className:"cfd-verification-email-sent"},r().createElement(o.Icon,{icon:"IcEmailSent",size:128}),r().createElement("h2",{className:"cfd-verification-email-sent__title"},r().createElement(i.Localize,{i18n_default_text:"We've sent you an email"})),r().createElement(o.Text,{as:"p",size:"xs",align:"center"},r().createElement(i.Localize,{i18n_default_text:"Please click on the link in the email to reset your password."})),!u&&r().createElement(o.Button,{className:"cfd-verification-email-sent__resend-button",primary:!0,onClick:function(){d(!0)}},r().createElement(i.Localize,{i18n_default_text:"Didn't receive the email?"})),u&&r().createElement(r().Fragment,null,r().createElement(o.Text,{as:"p",size:"xs",align:"center",weight:"bold",className:"cfd-verification-email-sent__title--sub"},r().createElement(i.Localize,{i18n_default_text:"Didn't receive the email?"})),r().createElement(o.Text,{as:"p",size:"xs",align:"center"},r().createElement(i.Localize,{i18n_default_text:"Check your spam or junk folder. If it's not there, try resending the email."})),r().createElement(o.Button,{className:"cfd-verification-email-sent__resend-button",large:!0,primary:!0,disabled:m,onClick:function(){t(),f(!0)}},!m&&r().createElement(i.Localize,{i18n_default_text:"Resend email"}),m&&r().createElement(r().Fragment,null,r().createElement(i.Localize,{i18n_default_text:"Resend in <0 /> seconds",components:[r().createElement(A,{key:0,onTimeout:function(){return f(!1)},count_from:60})]})))))},D=function(e){var t=e.multi_step_ref,a=e.steps;return r().createElement(o.MultiStep,{ref:t,steps:a,className:"cfd-password-manager",lbl_previous:(0,i.localize)("Back")})},M=function(e){var t=e.toggleModal,a=e.selected_login,n=e.email,l=e.setPasswordType,u=e.multi_step_ref,d=e.platform,_=(e.context,e.onChangeActiveTabIndex),f=e.account_group,p=z(r().useState(0),2),g=p[0],h=p[1],v=z(r().useState(""),2),b=v[0],w=v[1],x=z(r().useState(!1),2),k=x[0],A=x[1],T="calc(100vh - 84px - 5.6rem - 8.8rem - 4rem)",D=function(e){var t={};return(0,c.validLength)(e.new_password,{min:8,max:25})?(0,c.validPassword)(e.new_password)?e.new_password.toLowerCase()===n.toLowerCase()&&(t.new_password=(0,i.localize)("Your password cannot be the same as your email address.")):t.new_password=(0,c.getErrorMessages)().password():t.new_password=(0,i.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.old_password||void 0===e.old_password||(t.old_password=(0,i.localize)("This field is required")),t},M=r().useCallback(function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s.default.changePassword(E({login:a},t));case 4:(n=e.sent)?w(n):(w(""),A(!0));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){S(o,n,r,i,c,"next",e)}function c(e){S(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),[a]),C=r().createElement(r().Fragment,null,r().createElement(o.DesktopWrapper,null,r().createElement(o.ThemedScrollbars,{height:T,is_bypassed:(0,c.isMobile)(),autohide:!1},r().createElement(m,{toggleModal:t,platform:d,email:n,account_group:f}))),r().createElement(o.MobileWrapper,null,r().createElement(o.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},r().createElement(m,{toggleModal:t,platform:d,email:n,account_group:f}))));return d===c.CFD_PLATFORMS.DXTRADE?C:r().createElement(o.Tabs,{active_index:g,onTabItemClick:function(e){h(e),_(e),w(""),A(!1)},top:!0},r().createElement("div",{label:(0,i.localize)("{{platform}} password",{platform:(0,c.getCFDPlatformLabel)(d)})},C),r().createElement("div",{label:(0,i.localize)("Investor password")},r().createElement(o.DesktopWrapper,null,r().createElement(o.ThemedScrollbars,{height:T},r().createElement(y,{is_submit_success_investor:k,toggleModal:t,error_message_investor:b,validatePassword:D,onSubmit:M,setPasswordType:l,multi_step_ref:u}))),r().createElement(o.MobileWrapper,null,r().createElement(o.Div100vhContainer,{className:"cfd-password-manager__scroll-wrapper",height_offset:"120px"},r().createElement(y,{is_submit_success_investor:k,toggleModal:t,error_message_investor:b,validatePassword:D,onSubmit:M,setPasswordType:l,multi_step_ref:u})))))};const C=(0,l.$j)((function(e){var t=e.modules.cfd,a=e.client,n=e.ui;return{email:a.email,enableApp:n.enableApp,disableApp:n.disableApp,is_eu:a.is_eu,sendVerifyEmail:t.sendVerifyEmail}}))((function(e){var t=e.enableApp,a=e.email,n=e.disableApp,l=e.is_visible,s=e.platform,u=(e.is_eu,e.context),d=e.selected_login,_=(e.selected_account,e.toggleModal),m=e.selected_account_type,f=e.selected_account_group,p=e.selected_server,g=e.sendVerifyEmail,h=r().useRef(),v=z(r().useState(0),2),b=v[0],y=v[1],w=z(r().useState("main"),2),E=w[0],x=w[1];if(!d)return null;var S,k=[{component:r().createElement(M,{email:a,selected_login:d,toggleModal:_,setPasswordType:x,multi_step_ref:h,platform:s,context:u,onChangeActiveTabIndex:function(e){y(e)},account_group:f})},{component:r().createElement(T,{server:p,context:u,sendVerifyEmail:g,account_type:m,account_group:f,password_type:E})}];return r().createElement(r().Suspense,{fallback:r().createElement(o.UILoader,null)},r().createElement(o.DesktopWrapper,null,r().createElement(o.Modal,{className:"cfd-password-manager__modal",disableApp:n,enableApp:t,is_open:l,title:(0,i.localize)("Manage {{platform}} password",{platform:(0,c.getCFDPlatformLabel)(s)}),toggleModal:_,height:"688px",width:"904px",should_header_stick_body:!1},r().createElement(D,{steps:k,multi_step_ref:h}))),r().createElement(o.MobileWrapper,null,r().createElement(o.PageOverlay,{is_open:l,portal_id:"deriv_app",header:(S=b,0===S?(0,i.localize)("Manage {{platform}} password",{platform:(0,c.getCFDPlatformLabel)(s)}):(0,i.localize)("Manage password")),onClickClose:_},r().createElement(D,{steps:k,multi_step_ref:h}))))}))},"./src/Containers/cfd-password-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>A});var n=a("../../node_modules/formik/dist/formik.esm.js"),r=a("react"),o=a.n(r),i=a("react-router"),c=a("@deriv/account/dist/account/js/sent-email-modal"),l=a.n(c),s=a("./src/Stores/Modules/CFD/Helpers/cfd-config.ts"),u=a("@deriv/components"),d=a("@deriv/shared"),_=a("@deriv/translations"),m=a("./src/Components/success-dialog.jsx"),f=a("./src/Stores/connect.js"),p=a("./src/Containers/cfd-change-password-confirmation.tsx");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var y=function(e){var t=e.should_set_trading_password,a=e.is_password_reset_error,n=e.platform,r=(e.context,(0,d.isMobile)()?"p":"span"),i=(0,d.isMobile)()?{padding:"2rem"}:{};return o().createElement(u.Text,{styles:i,as:r,line_height:"m",weight:"bold",size:"s",align:"center"},!t&&!a&&o().createElement(_.Localize,{i18n_default_text:"Enter your {{platform}} password",values:{platform:(0,d.getCFDPlatformLabel)(n)}}),a&&o().createElement(_.Localize,{i18n_default_text:"Too many attempts"}))},w=function(e){var t=e.is_selected_mt5_verified,a=e.jurisdiction_selected_shortcode,n=e.manual_status;return t?o().createElement(_.Localize,{i18n_default_text:"To start trading, transfer funds from your Deriv account into this account."}):["bvi","vanuatu"].includes(a)?"pending"===n?o().createElement(_.Localize,{i18n_default_text:"Were reviewing your documents. This should take about 1 to 3 days."}):o().createElement(_.Localize,{i18n_default_text:"Were reviewing your documents. This should take about 5 minutes."}):["labuan","maltainvest"].includes(a)?o().createElement(_.Localize,{i18n_default_text:"Were reviewing your documents. This should take about 1 to 3 days."}):null},E=o().memo((function(e){var t=e.platform,a=e.type,n=e.is_eu;if(t===d.CFD_PLATFORMS.DXTRADE)switch(a){case"all":default:return o().createElement(u.Icon,{icon:"IcDxtradeDerivxPlatform",size:128});case"synthetic":return o().createElement(u.Icon,{icon:"IcDxtradeSyntheticPlatform",size:128});case"financial":return o().createElement(u.Icon,{icon:"IcDxtradeFinancialPlatform",size:128})}switch(a){case"synthetic":return o().createElement(u.Icon,{icon:"IcMt5SyntheticPlatform",size:128});case"financial":return n?o().createElement(u.Icon,{icon:"IcMt5CfdPlatform",size:128}):o().createElement(u.Icon,{icon:"IcMt5FinancialPlatform",size:128});default:return o().createElement(u.Icon,{icon:"IcMt5FinancialStpPlatform",size:128})}}));E.displayName="IconType";var x=function(e,t,a,n){t(e),a().then((function(){n("password",!0)}))},S=function(e){var t=e.password,a=e.platform,r=e.validatePassword,i=e.context,c=e.onSubmit,l=e.error_message,s=e.is_real_financial_stp;return o().createElement(n.J9,{initialValues:{password:t},enableReinitialize:!0,validate:r,onSubmit:c},(function(e){var t=e.errors,n=e.isSubmitting,r=e.handleBlur,c=e.handleChange,m=e.handleSubmit,f=e.setFieldTouched,p=e.touched,g=e.values,h=e.validateForm;return o().createElement("form",{onSubmit:m},o().createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body cfd-password-modal__create-password-content","data-testid":"dt_create_password"},o().createElement(u.Icon,{icon:a===d.CFD_PLATFORMS.MT5?"IcMt5OnePassword":"IcDxtradeOnePassword",width:"122",height:"108"}),o().createElement(u.Text,{size:"s",weight:"bold",className:"cfd-password-modal__create-password-title"},o().createElement(_.Localize,{i18n_default_text:"Create a {{platform}} password",values:{platform:(0,d.getCFDPlatformLabel)(a)}})),o().createElement(u.Text,{size:"xs",align:"center",className:"cfd-password-modal__create-password-description"},o().createElement(_.Localize,{i18n_default_text:"You can use this password for all your {{platform}} accounts.",values:{platform:(0,d.getCFDPlatformLabel)(a)}})),o().createElement("div",{className:"input-element"},o().createElement(u.PasswordMeter,{input:g.password,context:i,has_error:!(!p.password||!t.password),custom_feedback_messages:(0,d.getErrorMessages)().password_warnings},(function(){return o().createElement(u.PasswordInput,{autoComplete:"new-password",label:(0,_.localize)("{{platform}} password",{platform:(0,d.getCFDPlatformLabel)(a)}),error:p.password&&t.password||(0===g.password.length?l:""),name:"password",value:g.password,onBlur:r,onChange:function(e){x(e,c,h,f)},data_testId:"dt_".concat(a,"_password")})}))),s&&o().createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},o().createElement(_.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through Deriv (FX) Ltd. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA)."})),o().createElement(u.FormSubmitButton,{is_disabled:!g.password||Object.keys(t).length>0,is_loading:n,label:(0,_.localize)("Create {{platform}} password",{platform:(0,d.getCFDPlatformLabel)(a)}),is_center:!0,context:i})))}))},z=function(e){var t=e.has_mt5_account,a=e.platform,n=e.error_message,r=e.context,i=e.validatePassword,c=e.submitPassword,l=e.is_real_financial_stp,s=o().useRef(),_=v(o().useState(""),2),m=_[0],f=_[1],g=[{component:o().createElement(S,{password:m,context:r,platform:a,error_message:n,validatePassword:i,onSubmit:function(e,n){var r;a===d.CFD_PLATFORMS.MT5&&t?(f(e.password),null===(r=s.current)||void 0===r||r.goNextStep()):c(e,n)},is_real_financial_stp:l})},{component:o().createElement(p.Z,{className:"cfd-password-modal__change-password-confirmation",platform:a,onConfirm:function(e,t){return c({password:m},t)},onCancel:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.goPrevStep()},context:r})}];return o().createElement(u.MultiStep,{ref:s,steps:g})},k=function(e){var t,a,r,i=o().useMemo((function(){return"PasswordReset"===e.error_type?(0,_.localize)("Try later"):(0,_.localize)("Add account")}),[e.error_type]),c=!(0,d.isDesktop)()||!e.should_set_trading_password||"PasswordReset"===e.error_type,l=(a=(t=e).should_set_trading_password,r=t.error_type,a&&"PasswordReset"!==r?(0,d.isDesktop)()?null:(0,_.localize)("Cancel"):(0,_.localize)("Forgot password?")),m=function(){if(c)return e.should_set_trading_password?e.onCancel():e.onForgotPassword()};return"PasswordReset"===e.error_type?o().createElement(o().Fragment,null,o().createElement("div",{className:"cfd-password-reset"},o().createElement("div",{className:"cfd-password-modal__content cfd-password-modal__content--password-reset"},o().createElement(u.Text,{as:"p",line_height:"24",size:"xs"},o().createElement(_.Localize,{i18n_default_text:"Please try again in a minute."}))),o().createElement(n.J9,{onSubmit:e.closeModal,initialValues:{}},(function(t){var a=t.handleSubmit;return o().createElement("form",{onSubmit:a},o().createElement(u.FormSubmitButton,{has_cancel:c,cancel_label:l,onCancel:m,context:e.context,is_absolute:(0,d.isMobile)(),label:i}))})))):e.should_set_trading_password?o().createElement(z,{platform:e.platform,context:e.context,error_message:e.error_message,validatePassword:e.validatePassword,submitPassword:e.submitPassword,has_mt5_account:e.has_mt5_account,is_real_financial_stp:e.is_real_financial_stp}):o().createElement(n.J9,{initialValues:{password:""},enableReinitialize:!0,validate:e.validatePassword,onSubmit:e.submitPassword},(function(t){var a=t.errors,n=t.isSubmitting,r=t.handleBlur,f=t.handleChange,p=t.handleSubmit,g=t.setFieldTouched,h=t.touched,v=t.values,b=t.validateForm;return o().createElement("form",{onSubmit:p},o().createElement("div",{className:"cfd-password-modal__content dc-modal__container_cfd-password-modal__body"},!e.should_set_trading_password&&o().createElement(u.Text,{size:"xs",className:"dc-modal__container_cfd-password-modal__account-title"},"real"===e.account_type.category&&o().createElement(_.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} {{jurisdiction_shortcode}} account.",values:{platform:(0,d.getCFDPlatformLabel)(e.platform),account:e.account_title,jurisdiction_shortcode:(0,s.g6)(e.jurisdiction_selected_shortcode)}}),"demo"===e.account_type.category&&o().createElement(_.Localize,{i18n_default_text:"Enter your {{platform}} password to add a {{platform}} {{account}} account.",values:{platform:(0,d.getCFDPlatformLabel)(e.platform),account:e.account_title}})),o().createElement("div",{className:"input-element"},o().createElement(u.PasswordInput,{autoComplete:"new-password",label:(0,_.localize)("{{platform}} password",{platform:(0,d.getCFDPlatformLabel)(e.platform)}),error:h.password&&a.password||(0===v.password.length?e.error_message:""),name:"password",value:v.password,onBlur:r,onChange:function(e){x(e,f,b,g)},data_testId:"dt_".concat(e.platform,"_password")})),e.is_real_financial_stp&&o().createElement("div",{className:"dc-modal__container_cfd-password-modal__description"},o().createElement(_.Localize,{i18n_default_text:"Your MT5 Financial STP account will be opened through {{legal_entity_name}}. All trading in this account is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA). None of your other accounts, including your Deriv account, is subject to the regulations and guidelines of the Labuan Financial Service Authority (LFSA).",values:{legal_entity_name:(0,d.getLegalEntityName)("fx")}})),"PasswordError"===e.error_type&&o().createElement(u.Text,{size:"xs",as:"p",className:"dc-modal__container_mt5-password-modal__hint"},o().createElement(_.Localize,{i18n_default_text:"Hint: You may have entered your Deriv password, which is different from your {{platform}} password.",values:{platform:(0,d.getCFDPlatformLabel)(e.platform)}}))),o().createElement(u.FormSubmitButton,{is_disabled:!v.password,has_cancel:c,cancel_label:l,onCancel:m,is_absolute:(0,d.isMobile)(),is_loading:n,label:i,context:e.context,is_center:e.should_set_trading_password,form_error:e.form_error}))}))};const A=(0,f.$j)((function(e){var t=e.client,a=e.modules;return{email:t.email,account_title:a.cfd.account_title,account_type:a.cfd.account_type,account_status:t.account_status,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,error_message:a.cfd.error_message,error_type:a.cfd.error_type,getAccountStatus:a.cfd.getAccountStatus,has_cfd_error:a.cfd.has_cfd_error,landing_companies:t.landing_companies,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_logged_in:t.is_logged_in,is_cfd_success_dialog_enabled:a.cfd.is_cfd_success_dialog_enabled,is_cfd_password_modal_enabled:a.cfd.is_cfd_password_modal_enabled,is_dxtrade_allowed:t.is_dxtrade_allowed,jurisdiction_selected_shortcode:a.cfd.jurisdiction_selected_shortcode,setMt5Error:a.cfd.setError,setCFDSuccessDialog:a.cfd.setCFDSuccessDialog,submitMt5Password:a.cfd.submitMt5Password,submitCFDPassword:a.cfd.submitCFDPassword,cfd_new_account:a.cfd.new_account_response,mt5_trading_servers:t.mt5_trading_servers,mt5_login_list:t.mt5_login_list,updateAccountStatus:t.updateAccountStatus}}))((0,i.withRouter)((function(e){var t,a,n=e.account_title,r=e.account_type,i=e.account_status,c=e.disableCFDPasswordModal,f=e.email,p=e.error_message,b=e.error_type,x=e.form_error,S=e.getAccountStatus,z=e.history,A=e.is_eu,T=e.is_logged_in,D=e.context,M=e.is_cfd_password_modal_enabled,C=e.is_cfd_success_dialog_enabled,O=e.is_dxtrade_allowed,F=e.jurisdiction_selected_shortcode,P=e.platform,N=e.has_cfd_error,j=e.landing_companies,L=e.mt5_login_list,R=e.cfd_new_account,I=e.setCFDSuccessDialog,V=e.setMt5Error,B=e.submitMt5Password,U=e.submitCFDPassword,W=e.updateAccountStatus,X=v(o().useState(!0),2),q=X[0],G=X[1],J="bvi"===(null==j||null===(t=j.mt_financial_company)||void 0===t||null===(a=t.financial_stp)||void 0===a?void 0:a.shortcode),H=Boolean(null==L?void 0:L.length),$=Array.isArray(null==i?void 0:i.status)&&i.status.includes(P===d.CFD_PLATFORMS.MT5?"mt5_password_not_set":"dxtrade_password_not_set"),Y="PasswordError"===b,K="PasswordReset"===b,Z=v(o().useState(!1),2),Q=Z[0],ee=Z[1],te=(0,d.getAuthenticationStatusInfo)(i),ae=te.poi_verified_for_bvi_labuan,ne=te.poi_verified_for_vanuatu_maltainvest,re=te.poa_verified,oe=te.manual_status,ie=v(o().useState(!1),2),ce=ie[0],le=ie[1];o().useEffect((function(){T&&W()}),[]),o().useEffect((function(){"svg"===F?le(!0):"bvi"===F?le(ae):"vanuatu"===F?le(ne):"labuan"===F?le(ae&&re):"maltainvest"===F&&le(ne&&re)}),[F,i]);var se=function(){I(!1),V(!1)},ue=function(){se(),c()},de=function(){ue();var e=P===d.CFD_PLATFORMS.MT5?1:2;"real"===r.category?e=Number("".concat(e,"0")):"demo"===r.category&&(e=Number("".concat(e,"1")));var t=P===d.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";d.WS.verifyEmail(f,t,{url_parameters:{redirect_to:e}}),ee(!0)},_e=M&&!C&&(!N||Y||K),me=!N&&C&&M&&q,fe=Q&&q,pe="real_financial_stp"===[r.category,r.type].join("_"),ge=o().useMemo((function(){return!!_e&&(!!$||(0,d.isDesktop)())}),[$,_e]),he=o().useMemo((function(){return!(!_e||$)&&(0,d.isMobile)()}),[$,_e]),ve=o().useMemo((function(){return"real"===r.category?P===d.CFD_PLATFORMS.MT5?ce?(0,_.localize)("Transfer now"):(0,_.localize)("Ok"):(0,_.localize)("Transfer now"):(0,_.localize)("Continue")}),[P,r,ce]),be=o().createElement(k,{is_bvi:J,context:D,account_title:n,account_type:r,closeModal:ue,error_type:b,error_message:p,has_mt5_account:H,form_error:x,jurisdiction_selected_shortcode:F,should_set_trading_password:$,is_real_financial_stp:pe,validatePassword:function(e){var t,a={};return(0,d.validLength)(e.password,{min:8,max:25})?(0,d.validPassword)(e.password)||(a.password=(0,d.getErrorMessages)().password()):a.password=(0,_.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),(null===(t=e.password)||void 0===t?void 0:t.toLowerCase())===f.toLowerCase()&&(a.password=(0,_.localize)("Your password cannot be the same as your email address.")),a},onForgotPassword:de,submitPassword:function(e,t){P===d.CFD_PLATFORMS.MT5?B(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e),t):(e.platform=P,U(e,t))},platform:P,is_dxtrade_allowed:O,onCancel:ue}),ye=o().createElement(u.Modal,{className:"cfd-password-modal",has_close_icon:!0,is_open:ge,toggleModal:ue,should_header_stick_body:!0,renderTitle:function(){return o().createElement(y,{should_set_trading_password:$,is_password_reset_error:K,platform:P,context:D})},onUnmount:function(){return S(P)},onExited:function(){return G(!0)},onEntered:function(){return G(!1)},width:(0,d.isMobile)()?"32.8rem":"auto"},be),we=o().createElement(u.MobileDialog,{has_full_height:!0,portal_element_id:"modal_root",visible:he,onClose:ue,wrapper_classname:"cfd-password-modal"},o().createElement(y,{should_set_trading_password:$,has_mt5_account:H,is_password_reset_error:K,platform:P,context:D}),be);return o().createElement(o().Fragment,null,ye,we,o().createElement(m.Z,{is_open:me,toggleModal:ue,onCancel:ue,onSubmit:P!==d.CFD_PLATFORMS.MT5||ce?function(){c(),se(),"real"===r.category&&(sessionStorage.setItem("cfd_transfer_to_login_id",R.login||""),z.push(d.routes.cashier_acc_transfer))}:ue,classNameMessage:"cfd-password-modal__message",message:function(){var e=r.category,t=r.type;if(!e&&!t)return"";var a="real"===e?(0,_.localize)("real"):(0,_.localize)("demo"),n=(0,s.D_)(A)[e][t].short_title,i=F&&(0,s.g6)(F);return"real"===e?o().createElement(o().Fragment,null,o().createElement(_.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}} {{jurisdiction_selected_shortcode}}</1> account. ",values:{type:"dxtrade"===P&&"Derived"===n?"Synthetic":n,platform:(0,d.getCFDPlatformLabel)(P),category:a,jurisdiction_selected_shortcode:P!==d.CFD_PLATFORMS.MT5||A?"":i},components:[o().createElement("span",{key:0,className:"cfd-account__platform"}),o().createElement("strong",{key:1})]}),P===d.CFD_PLATFORMS.DXTRADE?o().createElement(_.Localize,{i18n_default_text:"To start trading, transfer funds from your Deriv account into this account."}):o().createElement(w,{is_selected_mt5_verified:ce,jurisdiction_selected_shortcode:F,manual_status:oe})):o().createElement(_.Localize,{i18n_default_text:"Congratulations, you have successfully created your {{category}} <0>{{platform}}</0> <1>{{type}}</1> account.",values:{type:n,platform:(0,d.getCFDPlatformLabel)(P),category:a},components:[o().createElement("span",{key:0,className:"cfd-account__platform"}),o().createElement("strong",{key:1})]})}(),icon:o().createElement(E,{platform:P,type:r.type,is_eu:A}),icon_size:"xlarge",text_submit:ve,has_cancel:P===d.CFD_PLATFORMS.MT5?ce:"real"===r.category,has_close_icon:!1,width:(0,d.isMobile)()?"32.8rem":"auto",is_medium_button:(0,d.isMobile)()}),o().createElement(l(),{is_open:fe,identifier_title:"trading_password",onClose:function(){return ee(!1)},onClickSendEmail:de}))})))},"./src/Containers/cfd-reset-password-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var n=a("../../node_modules/prop-types/index.js"),r=a.n(n),o=a("../../node_modules/formik/dist/formik.esm.js"),i=a("react"),c=a.n(i),l=a("react-router-dom"),s=a("@deriv/components"),u=a("@deriv/shared"),d=a("@deriv/translations"),_=a("./src/Stores/connect.js"),m=a("./src/Stores/Modules/CFD/Helpers/cfd-config.ts"),f=["current_list","context","children","is_eu"];function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var w=function(e){var t,a,n,r,o,i=e.current_list,c=(e.context,e.children),l=e.is_eu,s=y(e,f),u=localStorage.getItem("cfd_reset_password_intent"),d=localStorage.getItem("cfd_reset_password_type")||"main";if(u&&/(real|demo)\.(financial_stp|financial|synthetic|synthetic_svg|synthetic_bvi|financial_svg|financial_bvi|financial_fx|financial_v)/.test(u)&&i){var _=v(u.split("."),3);o=_[0],t=_[1],a=_[2],n=i["mt5.".concat(t,".").concat(a,"@").concat(o)].login,r=(0,m.D_)(l)[t][a].title}else if(i){var p,h,b,w,E,x,S=v(Object.keys(i).pop().split("."),3);o=S[0],t=S[1],a=S[2],n=null!==(p=null===(h=i["mt5.".concat(t,".").concat(a,"@").concat(o)])||void 0===h?void 0:h.login)&&void 0!==p?p:"",r=null!==(b=null===(w=(0,m.D_)(l))||void 0===w||null===(E=w[t])||void 0===E||null===(x=E[a])||void 0===x?void 0:x.title)&&void 0!==b?b:""}else n="",r="";return c(g({login:n,title:r,type:d},s))},E=function(e){var t=e.current_list,a=e.email,n=e.is_cfd_reset_password_modal_enabled,r=e.is_eu,i=e.context,l=e.is_logged_in,_=e.platform,m=e.setCFDPasswordResetModal,f=e.history,p=v(c().useState({error_code:void 0,has_error:!1,error_message:void 0,is_finished:!1,changed_password_type:""}),2),h=p[0],b=p[1],y=function(){localStorage.removeItem("cfd_reset_password_intent"),localStorage.removeItem("cfd_reset_password_type"),localStorage.removeItem("cfd_reset_password_code"),f.location.pathname!==u.routes.mt5&&f.push("".concat(u.routes.mt5))},E=function(e){var t={};return(0,u.validLength)(e.new_password,{min:8,max:25})?(0,u.validPassword)(e.new_password)||(t.new_password=(0,u.getErrorMessages)().password()):t.new_password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),e.new_password.toLowerCase()===a.toLowerCase()&&(t.new_password=(0,d.localize)("Your password cannot be the same as your email address.")),t},x=function(e,t,a,n){var r=n.setSubmitting;r(!0);var o={account_id:a,platform:u.CFD_PLATFORMS.MT5,new_password:e.new_password,verification_code:localStorage.getItem("cfd_reset_password_code")};u.WS.tradingPlatformInvestorPasswordReset(o).then((function(e){var a,n;null!=e&&null!==(a=e.error)&&void 0!==a&&a.code?(n=e.error,b(g(g({},h),{},{error_code:n.code,has_error:!0,error_message:n.message}))):(b(g(g({},h),{},{is_finished:!0,changed_password_type:t})),y()),r(!1)}))},S=function(){return 0!==Object.keys(t).length},z=!S()&&localStorage.getItem("cfd_reset_password_code");return c().createElement(s.Modal,{className:"cfd-reset-password-modal",context:i,is_open:n&&!z,toggleModal:function(){return m(!1)},title:_===u.CFD_PLATFORMS.DXTRADE?(0,d.localize)("Reset Deriv X investor password"):(0,d.localize)("Reset Deriv MT5 investor password"),onMount:function(){return(0,u.redirectToLogin)(l,(0,d.getLanguage)(),!0)},should_header_stick_body:!1},!S()&&!h.has_error&&c().createElement(s.Loading,{is_fullscreen:!1}),S()&&!h.has_error&&!h.is_finished&&c().createElement(w,{context:i,current_list:t,is_eu:r},(function(e){var t=e.type,a=e.login;return c().createElement(o.J9,{initialValues:{new_password:""},validate:E,onSubmit:function(e,n){return x(e,t,a,n)}},(function(e){var a=e.handleSubmit,n=e.errors,r=e.values,o=e.isSubmitting,i=e.handleChange,l=e.handleBlur,_=e.touched;return c().createElement("form",{autoComplete:"off",onSubmit:a},c().createElement("div",{className:"cfd-reset-password"},c().createElement("div",{className:"cfd-reset-password__container"},c().createElement("div",{className:"cfd-reset-password__password-area"},c().createElement(s.PasswordMeter,{input:r.new_password,has_error:!(!_.new_password||!n.new_password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},(function(e){var a=e.has_warning;return c().createElement(s.PasswordInput,{autoComplete:"new-password",className:"cfd-reset-password__password-field",name:"new_password",label:(0,d.localize)("New {{type}} password",{type:t}),onChange:i,onBlur:l,error:_.new_password&&n.new_password,value:r.new_password,"data-lpignore":"true",required:!0,hint:!a&&(0,d.localize)("Strong passwords contain at least 8 characters, combine uppercase and lowercase letters, numbers, and symbols.")})}))),o&&c().createElement(s.Loading,{is_fullscreen:!1}),!o&&c().createElement(s.FormSubmitButton,{is_disabled:o||!r.new_password||Object.keys(n).length>0,errors:n,is_center:!0,large:!0,label:(0,d.localize)("Create {{type}} password",{type:t})}))))}))})),h.has_error&&c().createElement("div",{className:"cfd-reset-password__error"},c().createElement(s.Icon,{icon:"IcMt5Expired",size:128}),c().createElement(s.Text,{as:"p",size:"xs",weight:"bold",align:"center",className:"cfd-reset-password__heading"},h.error_message),"InvalidToken"===h.error_code&&c().createElement(s.Text,{as:"p",color:"prominent",size:"xs",align:"center",className:"cfd-reset-password__description--is-centered"},c().createElement(d.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),c().createElement(s.Button,{primary:!0,large:!0,className:"cfd-reset-password__confirm-button",onClick:function(){y(),m(!1)}},c().createElement(d.Localize,{i18n_default_text:"Ok"}))),h.is_finished&&c().createElement("div",{className:"cfd-reset-password__success"},c().createElement(s.Icon,{icon:"IcMt5PasswordUpdated",size:128}),c().createElement("div",{className:"cfd-reset-password__description"},c().createElement(s.Text,{as:"p",size:"xs",align:"center",weight:"bold",line_height:"xxl"},c().createElement(d.Localize,{i18n_default_text:"Password saved"})),c().createElement(d.Localize,{i18n_default_text:"Your {{account_type}} password has been changed.",values:{account_type:"main"===h.changed_password_type?(0,d.localize)("main"):(0,d.localize)("investor")}})),c().createElement(s.Button,{primary:!0,large:!0,onClick:function(){return m(!1)}},c().createElement(d.Localize,{i18n_default_text:"Ok"}))))};E.propTypes={current_list:r().oneOfType([r().array,r().object]),email:r().string,is_cfd_reset_password_modal_enabled:r().bool,is_eu:r().bool,is_logged_in:r().bool,platform:r().string,setCFDPasswordResetModal:r().func,history:r().object,context:r().object};const x=c().memo((0,l.withRouter)((0,_.$j)((function(e){var t=e.modules.cfd,a=e.client;return{email:a.email,is_eu:a.is_eu,is_cfd_reset_password_modal_enabled:t.is_cfd_reset_password_modal_enabled,setCFDPasswordResetModal:t.setCFDPasswordResetModal,current_list:t.current_list,is_logged_in:a.is_logged_in}}))(E)))},"./src/Containers/cfd-server-error-dialog.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/translations"),c=a("../stores/src/index.ts");const l=(0,c.Pi)((function(){var e=(0,c.oR)(),t=e.ui,a=e.modules,n=t.enableApp,l=t.disableApp,s=a.cfd,u=s.clearCFDError,d=s.error_message,_=s.error_type,m=s.has_cfd_error,f=s.is_cfd_success_dialog_enabled,p=m&&!f&&_&&!["PasswordReset","PasswordError"].includes(_);return r().createElement(o.Dialog,{title:(0,i.localize)("Somethings not right"),confirm_button_text:(0,i.localize)("OK"),onConfirm:u,disableApp:l,enableApp:n,is_visible:p},d||r().createElement(i.Localize,{i18n_default_text:"Sorry, an error occured while processing your request."}))}))},"./src/Containers/cfd-top-up-demo-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var n=a("react"),r=a.n(n),o=a("./src/Components/success-dialog.jsx"),i=a("@deriv/components"),c=a("@deriv/shared"),l=a("@deriv/translations"),s=a("./src/Stores/connect.js"),u=a("./src/Helpers/constants.ts");const d=(0,s.$j)((function(e){var t=e.ui,a=e.modules;return{is_top_up_virtual_open:t.is_top_up_virtual_open,is_top_up_virtual_in_progress:t.is_top_up_virtual_in_progress,is_top_up_virtual_success:t.is_top_up_virtual_success,closeTopUpModal:t.closeTopUpModal,closeSuccessTopUpModal:t.closeSuccessTopUpModal,current_account:a.cfd.current_account,dxtrade_companies:a.cfd.dxtrade_companies,mt5_companies:a.cfd.mt5_companies,topUpVirtual:a.cfd.topUpVirtual}}))((function(e){var t=e.dxtrade_companies,a=e.mt5_companies,n=e.current_account,s=e.closeSuccessTopUpModal,d=e.closeTopUpModal,_=e.is_top_up_virtual_open,m=e.is_top_up_virtual_in_progress,f=e.is_top_up_virtual_success,p=e.platform,g=e.context,h=e.topUpVirtual,v=r().useCallback((function(){return(a||t)&&n?a[n.category][n.type].title:""}),[a,t,n]),b=(0,c.getCFDPlatformLabel)(p);if(!a&&!t||!n)return null;var y=(0,u.tY)(),w=y.minimum_amount,E=y.additional_amount;return r().createElement(r().Fragment,null,r().createElement(i.Modal,{toggleModal:d,is_open:_,context:g,className:"top-up-virtual",title:(0,l.localize)("Fund top up"),width:"384px"},r().createElement("div",{className:"dc-modal__container_top-up-virtual__body"},r().createElement(i.Text,{as:"p",align:"center",size:"xxs",line_height:"xs",className:"dc-modal__container_top-up-virtual__description","data-testid":"dt_top_up_virtual_description"},r().createElement(l.Localize,{i18n_default_text:"You can top up your demo account with an additional <0></0> if your balance is <1></1> or less.",components:[r().createElement(i.Money,{key:0,amount:E,currency:n.currency,show_currency:!0}),r().createElement(i.Money,{key:1,amount:w,currency:n.currency,show_currency:!0})]})),r().createElement("h4",{className:"dc-modal__container_top-up-virtual--h4"},r().createElement(l.Localize,{i18n_default_text:"{{ platform }} {{ account_title }} account",values:{platform:b,account_title:v()}})),r().createElement("div",null,r().createElement(i.Text,{as:"p",align:"center",size:"xxs"},r().createElement(l.Localize,{i18n_default_text:"Current balance"})),r().createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},r().createElement(i.Money,{amount:n.display_balance,currency:n.currency,has_sign:n.balance<0}))),r().createElement("div",{className:"dc-modal__container_top-up-virtual--button"},r().createElement(i.Button,{is_disabled:n.balance>1e3||m,type:"button",is_loading:m,onClick:function(){return h(p)},primary:!0,large:!0},!m&&r().createElement(l.Localize,{i18n_default_text:"Top up <0></0>",components:[r().createElement(i.Money,{key:0,amount:E,currency:n.currency,show_currency:!0})]}))))),r().createElement(o.Z,{is_open:f,toggleModal:function(){s()},has_close_icon:!0,title:(0,l.localize)("Fund top up"),icon:r().createElement(i.Icon,{icon:"IcCashierWallet",size:128}),heading:r().createElement("h3",{className:"cfd-success-topup__heading"},r().createElement(l.Localize,{i18n_default_text:"<0></0> has been credited into your {{platform}} {{title}} account.",values:{platform:b,title:v()},components:[r().createElement(i.Money,{key:0,amount:E,currency:n.currency,show_currency:!0})]})),message:r().createElement("div",{className:"cfd-success-topup__description"},r().createElement("p",null,r().createElement(l.Localize,{i18n_default_text:"New current balance"})),r().createElement("div",{className:"dc-modal__container_top-up-virtual--balance"},r().createElement(i.Money,{amount:n.balance,currency:n.currency}))),icon_size:"large",has_cancel:!1,has_submit:!1,width:"384px"}))}))},"./src/Containers/compare-accounts-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>X});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/translations"),c=a("./src/Stores/connect.js"),l=a("@deriv/shared");function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var f=function(e){var t,a,n,c=e.landing_companies,s=e.platform,u=e.is_logged_in,d=e.is_uk,_=u?(s===l.CFD_PLATFORMS.MT5?[null==c||null===(t=c.mt_gaming_company)||void 0===t?void 0:t.financial,null==c||null===(a=c.mt_financial_company)||void 0===a?void 0:a.financial,(null==c||null===(n=c.mt_financial_company)||void 0===n?void 0:n.financial_stp)&&s===l.CFD_PLATFORMS.MT5]:[null==c?void 0:c.dxtrade_gaming_company,null==c?void 0:c.dxtrade_financial_company]).filter(Boolean).length:s===l.CFD_PLATFORMS.MT5?3:2,m=d?r().createElement("div",null,(0,i.localize)("Forex, stocks, stock indices, cryptocurrencies"),r().createElement(o.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"**"),(0,i.localize)(", synthetic indices")):(0,i.localize)("Forex, stocks, stock indices, cryptocurrencies, synthetic indices");return[{attribute:(0,i.localize)("Account currency"),mt5:{synthetic:(0,i.localize)("USD"),synthetic_eu:(0,i.localize)("EUR"),financial:(0,i.localize)("USD"),financial_au:(0,i.localize)("USD"),financial_eu:(0,i.localize)("EUR/GBP/USD"),financial_stp:(0,i.localize)("USD"),footnote:null},dxtrade:{synthetic:(0,i.localize)("USD"),synthetic_eu:(0,i.localize)("EUR"),financial:(0,i.localize)("USD"),financial_au:(0,i.localize)("USD"),financial_eu:(0,i.localize)("EUR/GBP"),footnote:null}},{attribute:(0,i.localize)("Maximum leverage"),mt5:{synthetic:(0,i.localize)("Up to 1:1000"),synthetic_eu:(0,i.localize)("Up to 1:1000"),financial:(0,i.localize)("Up to 1:1000"),financial_au:(0,i.localize)("Up to 1:30"),financial_eu:(0,i.localize)("Up to 1:30"),financial_stp:(0,i.localize)("Up to 1:100"),footnote:(0,i.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")},dxtrade:{synthetic:(0,i.localize)("Up to 1:1000"),synthetic_eu:(0,i.localize)("Up to 1:1000"),financial:(0,i.localize)("Up to 1:1000"),financial_au:(0,i.localize)("Up to 1:30"),financial_eu:(0,i.localize)("Up to 1:30"),footnote:(0,i.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}},{attribute:(0,i.localize)("Order execution"),mt5:{synthetic:(0,i.localize)("Market"),synthetic_eu:(0,i.localize)("Market"),financial:(0,i.localize)("Market"),financial_au:(0,i.localize)("Market"),financial_eu:(0,i.localize)("Market"),financial_stp:(0,i.localize)("Market"),footnote:(0,i.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:_})},dxtrade:{synthetic:(0,i.localize)("Market"),synthetic_eu:(0,i.localize)("Market"),financial:(0,i.localize)("Market"),financial_au:(0,i.localize)("Market"),financial_eu:(0,i.localize)("Market"),footnote:(0,i.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:_})}},{attribute:(0,i.localize)("Spread"),mt5:{synthetic:(0,i.localize)("Fixed/Variable"),synthetic_eu:(0,i.localize)("Fixed/Variable"),financial:(0,i.localize)("Variable"),financial_au:(0,i.localize)("Variable"),financial_eu:(0,i.localize)("Fixed/Variable"),financial_stp:(0,i.localize)("Variable"),footnote:(0,i.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")},dxtrade:{synthetic:(0,i.localize)("Fixed/Variable"),synthetic_eu:(0,i.localize)("Fixed/Variable"),financial:(0,i.localize)("Variable"),financial_au:(0,i.localize)("Variable"),financial_eu:(0,i.localize)("Variable"),footnote:(0,i.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}},{attribute:(0,i.localize)("Commission"),mt5:{synthetic:(0,i.localize)("No"),synthetic_eu:(0,i.localize)("No"),financial:(0,i.localize)("No"),financial_au:(0,i.localize)("No"),financial_eu:(0,i.localize)("No"),financial_stp:(0,i.localize)("No"),footnote:(0,i.localize)("Deriv charges no commission across all account types.")},dxtrade:{synthetic:(0,i.localize)("No"),synthetic_eu:(0,i.localize)("No"),financial:(0,i.localize)("No"),financial_au:(0,i.localize)("No"),financial_eu:(0,i.localize)("No"),footnote:(0,i.localize)("Deriv charges no commission across all account types.")}},{attribute:(0,i.localize)("Minimum deposit"),mt5:{synthetic:(0,i.localize)("No"),synthetic_eu:(0,i.localize)("No"),financial:(0,i.localize)("No"),financial_au:(0,i.localize)("No"),financial_eu:(0,i.localize)("No"),financial_stp:(0,i.localize)("No"),footnote:null},dxtrade:{synthetic:(0,i.localize)("No"),synthetic_eu:(0,i.localize)("No"),financial:(0,i.localize)("No"),financial_au:(0,i.localize)("No"),financial_eu:(0,i.localize)("No"),footnote:null}},{attribute:(0,i.localize)("Margin call"),mt5:{synthetic:(0,i.localize)("100%"),synthetic_eu:(0,i.localize)("100%"),financial:(0,i.localize)("100%"),financial_au:(0,i.localize)("100%"),financial_eu:(0,i.localize)("100%"),financial_stp:(0,i.localize)("100%"),footnote:(0,i.localize)("Youll get a warning, known as margin call, if your account balance drops down close to the stop out level.")},dxtrade:{synthetic:(0,i.localize)("100%"),synthetic_eu:(0,i.localize)("100%"),financial:(0,i.localize)("100%"),financial_au:(0,i.localize)("100%"),financial_eu:(0,i.localize)("100%"),footnote:(0,i.localize)("Youll get a warning, known as margin call, if your account balance drops down close to the stop out level.")}},{attribute:(0,i.localize)("Stop out level"),mt5:{synthetic:(0,i.localize)("50%"),synthetic_eu:(0,i.localize)("50%"),financial:(0,i.localize)("50%"),financial_au:(0,i.localize)("50%"),financial_eu:(0,i.localize)("50%"),financial_stp:(0,i.localize)("50%"),footnote:(0,i.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")},dxtrade:{synthetic:(0,i.localize)("50%"),synthetic_eu:(0,i.localize)("50%"),financial:(0,i.localize)("50%"),financial_au:(0,i.localize)("50%"),financial_eu:(0,i.localize)("50%"),footnote:(0,i.localize)("To understand stop out, first you need to learn about margin level, which is  the ratio of your equity (the total balance you would have if you close all your positions at that point) to the margin you're using at the moment. If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")}},{attribute:(0,i.localize)("Number of assets"),mt5:{synthetic:(0,i.localize)("20+"),synthetic_eu:(0,i.localize)("20+"),financial:(0,i.localize)("150+"),financial_au:(0,i.localize)("100+"),financial_eu:(0,i.localize)("50+"),financial_stp:(0,i.localize)("70+"),footnote:null},dxtrade:{synthetic:(0,i.localize)("20+"),synthetic_eu:(0,i.localize)("20+"),financial:(0,i.localize)("90+"),financial_au:(0,i.localize)("90+"),financial_eu:(0,i.localize)("90+"),footnote:null}},{attribute:(0,i.localize)("Cryptocurrency trading"),mt5:{synthetic:(0,i.localize)("N/A"),synthetic_eu:(0,i.localize)("N/A"),financial:(0,i.localize)("24/7"),financial_au:(0,i.localize)("24/7"),financial_eu:(0,i.localize)("24/7"),financial_stp:(0,i.localize)("24/7"),footnote:(0,i.localize)("Indicates the availability of cryptocurrency trading on a particular account.")},dxtrade:{synthetic:(0,i.localize)("N/A"),synthetic_eu:(0,i.localize)("N/A"),financial:(0,i.localize)("24/7"),financial_au:(0,i.localize)("24/7"),financial_eu:(0,i.localize)("24/7"),footnote:(0,i.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}},{attribute:(0,i.localize)("Trading instruments"),mt5:{synthetic:(0,i.localize)("Synthetics"),synthetic_eu:(0,i.localize)("Synthetics"),financial:(0,i.localize)("FX-majors (standard/micro lots), FX-minors, basket indices, commodities, cryptocurrencies, and stocks and stock indices"),financial_au:(0,i.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies, Stocks, and Stock Indices"),financial_eu:m,financial_stp:(0,i.localize)("FX-majors, FX-minors, FX-exotics, and cryptocurrencies"),footnote:null},dxtrade:{synthetic:(0,i.localize)("Synthetics"),synthetic_eu:(0,i.localize)("Synthetics"),financial:(0,i.localize)("FX majors (standard/micro lots), FX minors, basket indices, commodities, and cryptocurrencies"),financial_au:(0,i.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies"),financial_eu:(0,i.localize)("FX-majors (standard/micro lots), FX-minors, Commodities, Cryptocurrencies (except UK)"),footnote:null}}]},p=function(e){var t=e.name,a=e.counter,n=_(r().useState(!1),2),i=n[0],c=n[1];return a?r().createElement(r().Fragment,null,r().createElement(o.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer",onClick:function(){return c(!i)}},t,r().createElement(o.Text,{weight:"bold",as:"span",line_height:"x",size:"xxxs",className:"counter"},a))):r().createElement(o.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer"},t)},g=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.show_eu_related,o=e.platform,i=e.residence,c=e.is_uk,s="au"===i;return function(e,t,a,n,o,i){var c=function(e,t,a){return i?t:n?a:e},s=0;return t.filter((function(e){return e[o]})).map((function(t){var i,d,_,m=t.attribute,f=t.mt5,g=void 0===f?{}:f,h=t.dxtrade,v=void 0===h?{}:h,b=o===l.CFD_PLATFORMS.MT5?g:v,y=b.synthetic,w=b.synthetic_eu,E=b.financial,x=b.financial_au,S=b.financial_eu,z=b.footnote,k={synthetic:n?w:y},A={financial:c(E,x,S)},T=z?++s:null;return a?u(u(u({attribute:r().createElement(p,{name:m,counter:T})},null!=e&&null!==(i=e.mt_gaming_company)&&void 0!==i&&i.financial?k:{}),null!=e&&null!==(d=e.mt_financial_company)&&void 0!==d&&d.financial?A:{}),null!=e&&null!==(_=e.mt_financial_company)&&void 0!==_&&_.financial_stp&&o===l.CFD_PLATFORMS.MT5?{financial_stp:null==g?void 0:g.financial_stp}:{}):o===l.CFD_PLATFORMS.DXTRADE?u(u({attribute:r().createElement(p,{name:m,counter:T})},k),A):u(u(u({attribute:r().createElement(p,{name:m,counter:T})},k),A),{financial_stp:null==g?void 0:g.financial_stp})}))}(t,f({landing_companies:t,platform:o,is_logged_in:a,is_uk:c}),a,n,o,s)},h=function(e){var t=e.platform,a=e.show_risk_message,n=e.landing_companies,c=e.is_logged_in,s=e.is_uk;return r().createElement("div",{className:"cfd-compare-account--hint"},r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),r().createElement(i.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),a&&r().createElement(r().Fragment,null,r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),r().createElement(i.Localize,{i18n_default_text:"Margin call and stop out level will change from time to time based on market condition."})),r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement(o.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"*"),r().createElement(i.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your {{platform}} account to support your positions at all times.",values:{platform:t===l.CFD_PLATFORMS.MT5?(0,i.localize)("MT5"):(0,i.localize)("Deriv X")}})),s&&r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement(o.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"**"),r().createElement(i.Localize,{i18n_default_text:"Cryptocurrency trading is not available for clients residing in the United Kingdom.",values:{platform:t===l.CFD_PLATFORMS.MT5?(0,i.localize)("MT5"):(0,i.localize)("Deriv X")}}))),f({landing_companies:n,platform:t,is_logged_in:c,is_uk:s}).filter((function(e){var a;return!(null===(a=e[t])||void 0===a||!a.footnote)})).map((function(e,a){return r().createElement("div",{key:a,className:"cfd-compare-accounts__bullet-wrapper"},r().createElement(o.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},a+1),r().createElement("div",{className:"cfd-compare-accounts__footnote"},r().createElement(o.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cfd-compare-accounts__footnote-title"},e.attribute),r().createElement(o.Text,{size:"xs",color:"prominent"},e[t].footnote)))})))};const v=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.platform,c=e.show_eu_related,s=e.residence,u=e.is_eu,d=e.is_uk,m=_(r().useState([]),2),f=m[0],p=m[1],v=_(r().useState(n===l.CFD_PLATFORMS.DXTRADE?"1.5fr 1fr 2fr":"1.5fr 1fr 2fr 1fr"),2),b=v[0],y=v[1];r().useEffect((function(){var e,r,o;(p(g({landing_companies:t,is_logged_in:a,platform:n,show_eu_related:c,residence:s,is_uk:d})),a&&n===l.CFD_PLATFORMS.MT5)?y("1.5fr ".concat(null!=t&&null!==(e=t.mt_gaming_company)&&void 0!==e&&e.financial?"1fr":""," ").concat(null!=t&&null!==(r=t.mt_financial_company)&&void 0!==r&&r.financial?"2fr":""," ").concat(null!=t&&null!==(o=t.mt_financial_company)&&void 0!==o&&o.financial_stp?" 1fr ":"")):a&&n===l.CFD_PLATFORMS.DXTRADE&&y("1.5fr ".concat(null!=t&&t.dxtrade_gaming_company?"1fr":""," ").concat(null!=t&&t.dxtrade_financial_company?"2fr":""))}),[null==t?void 0:t.mt_financial_company,null==t?void 0:t.mt_gaming_company,a,d,t,n,c,s]);var w=n===l.CFD_PLATFORMS.MT5||!c,E=u?(0,i.localize)("CFDs"):(0,i.localize)("Financial");return r().createElement(o.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,l.isDesktop)()},r().createElement(o.ThemedScrollbars,{className:"cfd-compare-accounts",style:{"--cfd-compare-accounts-template-columns":b}},r().createElement("div",{className:"cfd-compare-accounts__table-wrapper"},r().createElement(o.Table,{className:"cfd-compare-accounts__table"},r().createElement(o.Table.Header,null,r().createElement(o.Table.Row,{className:"cfd-compare-accounts__table-row"},r().createElement(o.Table.Head,{fixed:!0}),a?r().createElement(r().Fragment,null,(0,l.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"gaming"})&&r().createElement(o.Table.Head,null,(0,i.localize)("Derived")),(0,l.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"financial"})&&r().createElement(o.Table.Head,null,E,r().createElement(o.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),(0,l.isLandingCompanyEnabled)({landing_companies:t,platform:n,type:"financial_stp"})&&r().createElement(o.Table.Head,null,(0,i.localize)("Financial STP"),r().createElement(o.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))):r().createElement(r().Fragment,null,r().createElement(o.Table.Head,null,(0,i.localize)("Derived")),r().createElement(o.Table.Head,null,(0,i.localize)("Financial"),r().createElement(o.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*")),n===l.CFD_PLATFORMS.MT5&&r().createElement(o.Table.Head,null,(0,i.localize)("Financial STP"),r().createElement(o.Text,{size:"s",weight:"bold",className:"cfd-compare-accounts__star"},"*"))))),r().createElement(o.Table.Body,null,f.map((function(e,t){return r().createElement(o.Table.Row,{key:t,className:"cfd-compare-accounts__table-row"},Object.keys(e).map((function(t,a){return r().createElement(o.Table.Cell,{key:a,fixed:0===a},e[t])})))}))))),r().createElement(h,{platform:n,show_risk_message:w,landing_companies:t,is_logged_in:a,is_uk:d})))};var b=a("../../node_modules/classnames/index.js"),y=a.n(b),w=["derivx"];function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},E.apply(this,arguments)}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function k(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function A(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var C=[{id:"jurisdiction",attribute:(0,i.localize)("Jurisdiction"),values:{financial_maltainvest:{text:(0,i.localize)("Malta")}}},{id:"counterparty",attribute:(0,i.localize)("Counterparty company"),values:{financial_maltainvest:{text:(0,i.localize)("Deriv Investments (Europe) Limited")}}},{id:"regulator",attribute:(0,i.localize)("Regulator"),values:{financial_maltainvest:{text:(0,i.localize)("Malta Financial Services Authority (MFSA) (Licence no. IS/70156)")}}},{id:"leverage",attribute:(0,i.localize)("Maximum leverage"),values:{financial_maltainvest:{text:(0,i.localize)("Up to 1:30")}}},{id:"instruments",attribute:(0,i.localize)("Trading instruments"),values:{financial_maltainvest:{text:[(0,i.localize)("Forex"),(0,i.localize)("Stocks"),(0,i.localize)("Commodities"),(0,i.localize)("Stock indices"),(0,i.localize)("Synthetic indices"),(0,i.localize)("Cryptocurrencies")]}}}],O=[{id:"jurisdiction",attribute:(0,i.localize)("Jurisdiction"),values:{synthetic_svg:{text:(0,i.localize)("St. Vincent & Grenadines")},synthetic_bvi:{text:(0,i.localize)("British Virgin Islands")},financial_svg:{text:(0,i.localize)("St. Vincent & Grenadines")},financial_bvi:{text:(0,i.localize)("British Virgin Islands")},financial_vanuatu:{text:(0,i.localize)("Vanuatu")},financial_labuan:{text:(0,i.localize)("Labuan"),tooltip_msg:(0,i.localize)("Choosing this jurisdiction will give you a Financial STP account. Your trades will go directly to the market and have tighter spreads.")},derivx:{text:(0,i.localize)("St. Vincent & Grenadines")}}},{id:"counterparty",attribute:(0,i.localize)("Counterparty company"),values:{synthetic_svg:{text:(0,i.localize)("Deriv (SVG) LLC")},synthetic_bvi:{text:(0,i.localize)("Deriv (BVI) Ltd")},financial_svg:{text:(0,i.localize)("Deriv (SVG) LLC")},financial_bvi:{text:(0,i.localize)("Deriv (BVI) Ltd")},financial_vanuatu:{text:(0,i.localize)("Deriv (V) Ltd")},financial_labuan:{text:(0,i.localize)("Deriv (FX) Ltd")},derivx:{text:(0,i.localize)("Deriv (SVG) LLC")}}},{id:"regulator",attribute:(0,i.localize)("Regulator"),values:{synthetic_svg:{text:(0,i.localize)("-")},synthetic_bvi:{text:(0,i.localize)("British Virgin Islands Financial Services Commission (licence no. SIBA/L/18/1114)")},financial_svg:{text:(0,i.localize)("-")},financial_bvi:{text:(0,i.localize)("British Virgin Islands Financial Services Commission (licence no. SIBA/L/18/1114)")},financial_vanuatu:{text:(0,i.localize)("Vanuatu Financial Services Commission")},financial_labuan:{text:(0,i.localize)("Labuan Financial Services Authority (Licence no. MB/18/0024)")},derivx:{text:"-"}}},{id:"leverage",attribute:(0,i.localize)("Maximum leverage"),values:{synthetic_svg:{text:(0,i.localize)("Up to 1:1000")},synthetic_bvi:{text:(0,i.localize)("Up to 1:1000")},financial_vanuatu:{text:(0,i.localize)("Up to 1:1000")},financial_labuan:{text:(0,i.localize)("Up to 1:100")},derivx:{text:(0,i.localize)("Up to 1:1000")}}},{id:"instruments",attribute:(0,i.localize)("Trading instruments"),values:{synthetic_svg:{text:[(0,i.localize)("Synthetics"),(0,i.localize)("Basket indices")]},financial_svg:{text:[(0,i.localize)("Forex: standard/micro"),(0,i.localize)("Stocks"),(0,i.localize)("Stock indices"),(0,i.localize)("Commodities"),(0,i.localize)("Cryptocurrencies")]},financial_vanuatu:{text:[(0,i.localize)("Forex"),(0,i.localize)("Stock indices"),(0,i.localize)("Commodities"),(0,i.localize)("Cryptocurrencies")]},financial_labuan:{text:[(0,i.localize)("Forex"),(0,i.localize)("Cryptocurrencies")]},derivx:{text:[(0,i.localize)("Synthetics"),(0,i.localize)("Forex: standard/micro"),(0,i.localize)("Stocks"),(0,i.localize)("Commodities"),(0,i.localize)("Basket indices"),(0,i.localize)("Cryptocurrencies")]}}}],F=[{label:(0,i.localize)("Add"),action:"synthetic_svg"},{label:(0,i.localize)("Add"),action:"synthetic_bvi"},{label:(0,i.localize)("Add"),action:"financial_svg"},{label:(0,i.localize)("Add"),action:"financial_bvi"},{label:(0,i.localize)("Add"),action:"financial_vanuatu"},{label:(0,i.localize)("Add"),action:"financial_labuan"},{label:(0,i.localize)("Add"),action:"derivx"}],P=[{label:(0,i.localize)("Add"),action:"financial_maltainvest"}];const N=(0,c.$j)((function(e){var t=e.modules,a=e.client,n=e.common,r=e.ui;return{account_settings:a.account_settings,account_status:a.account_status,account_type:t.cfd.account_type,clearCFDError:t.cfd.clearCFDError,current_list:t.cfd.current_list,has_real_account:a.has_active_real_account,has_real_mt5_login:a.has_real_mt5_login,is_virtual:a.is_virtual,openSwitchToRealAccountModal:r.openSwitchToRealAccountModal,setAccountSettings:a.setAccountSettings,setAccountType:t.cfd.setAccountType,setJurisdictionSelectedShortcode:t.cfd.setJurisdictionSelectedShortcode,should_restrict_bvi_account_creation:a.should_restrict_bvi_account_creation,toggleCFDVerificationModal:t.cfd.toggleCFDVerificationModal,trading_platform_available_accounts:a.trading_platform_available_accounts,updateMT5Status:a.updateMT5Status,upgradeable_landing_companies:a.upgradeable_landing_companies,setAppstorePlatform:n.setAppstorePlatform}}))((function(e){var t=e.account_settings,a=e.account_status,n=e.clearCFDError,c=e.current_list,s=e.has_real_account,u=e.is_demo_tab,d=e.is_logged_in,_=e.is_real_enabled,m=e.is_virtual,f=e.openDerivRealAccountNeededModal,p=e.openPasswordModal,g=e.openSwitchToRealAccountModal,h=e.setAccountSettings,v=e.setAccountType,b=e.setJurisdictionSelectedShortcode,x=e.should_restrict_bvi_account_creation,D=e.show_eu_related,M=e.toggleCFDVerificationModal,N=e.toggleCompareAccounts,j=e.trading_platform_available_accounts,L=e.updateMT5Status,R=e.upgradeable_landing_companies,I=e.setAppstorePlatform,V=e.should_show_derivx,B=e.real_account_creation_unlock_date,U=e.setShouldShowCooldownModal,W=T(r().useState(!1),2),X=W[0],q=W[1],G=j.map((function(e){return"".concat("gaming"===e.market_type?"synthetic":e.market_type,"_").concat(e.shortcode)})),J=j.some((function(e){return"gaming"===e.market_type})),H=[].concat(A(G),A(V&&J?["derivx"]:[])),$=D?1:6,Y=d?H.length:$,K=d||D?H.filter((function(e){return e.startsWith("synthetic")})).length:2,Z=d||D?H.filter((function(e){return e.startsWith("financial")})).length||1:4,Q=(0,l.getAuthenticationStatusInfo)(a),ee=Q.poi_or_poa_not_submitted,te=Q.poi_acknowledged_for_vanuatu_maltainvest,ae=Q.poi_acknowledged_for_bvi_labuan,ne=Q.poa_acknowledged,re=Q.poa_pending;r().useEffect((function(){if(d&&!m&&L(),!X){var e={};t?e=t:l.WS.authorized.storage.getSettings().then((function(t){e=t.get_settings,h(t.get_settings)}));var a=e,n=a.citizen,r=a.place_of_birth,o=a.tax_residence,i=a.tax_identification_number,c=a.account_opening_reason;n&&r&&o&&i&&c&&q(!0)}}),[]);var oe,ie=function(e){return Object.entries(c).some((function(t){var a=T(t,2),n=a[0],r=a[1],o=T(e.action.split("_"),2),i=o[0],c=o[1],s=u?"demo":"real";return r.market_type===i&&r.landing_company_short===c&&r.account_type===s&&n.includes(l.CFD_PLATFORMS.MT5)}))},ce=function(e){var t=d&&!s&&(null==R?void 0:R.length)>0&&_;N(),t?B?U(!0):f():m&&!["synthetic_svg","financial_svg"].includes(e.action)?g():function(e){var t=e.action.startsWith("financial")?"financial":"synthetic",a={category:u?"demo":"real",type:t};switch(n(),v(a),e.action){case"synthetic_svg":case"financial_svg":I(l.CFD_PLATFORMS.MT5),b("svg"),p(a);break;case"synthetic_bvi":case"financial_bvi":I(l.CFD_PLATFORMS.MT5),b("bvi"),ae&&!ee&&!x&&X&&ne?p(a):M();break;case"financial_vanuatu":I(l.CFD_PLATFORMS.MT5),b("vanuatu"),te&&!ee&&X&&ne?p(a):M();break;case"financial_labuan":I(l.CFD_PLATFORMS.MT5),b("labuan"),ae&&ne&&X?p(a):M();break;case"financial_maltainvest":I(l.CFD_PLATFORMS.MT5),b("maltainvest"),te&&ne?p(a):M();break;case"derivx":I(l.CFD_PLATFORMS.DXTRADE),p(a)}}(e)},le=D?C:O,se=D?P:F,ue=function(e){return"counterparty"===e||"leverage"===e?(0,l.isDesktop)()?"xxs":"xxxs":(0,l.isDesktop)()?"xxxs":"xxxxs"},de=function(e){var t=e.action.split("_")[1];return!function(e){return Object.entries(c).some((function(t){var a=T(t,2),n=a[0],r=a[1],o=T(e.action.split("_"),2),i=o[0],c=o[1];return r.market_type===i&&r.landing_company_short===c&&"real"===r.account_type&&n.includes(l.CFD_PLATFORMS.MT5)}))}(e)&&("derivx"!==e.action&&!("bvi"!==t||!x||!re))},_e=V&&K?"__pre-appstore":"",me=function(e){var t=e.attr,a=e.val;return r().createElement(o.Table.Row,{className:D?"cfd-real-compare-accounts-row-eu":y()("cfd-real-compare-accounts__table-row--instruments".concat(_e),z({},"cfd-real-compare-accounts__row-with-columns-count-".concat(Y+1),Y<6))},r().createElement(o.Table.Cell,{fixed:!0},r().createElement(o.Text,{as:"p",weight:"bold",align:"center",color:"prominent",size:"xxs"},t)),Object.keys(a).map((function(e){var t,n,i;return r().createElement(o.Table.Cell,{key:e,className:"cfd-real-compare-accounts__table-row-item"},Array.isArray(null===(t=a[e])||void 0===t?void 0:t.text)?(null===(n=a[e])||void 0===n?void 0:n.text).map((function(e,t){return r().createElement(o.Text,{key:t,as:"p",weight:" normal",align:"center",color:"prominent",size:"xxxs"},e)})):r().createElement(o.Text,{as:"p",weight:"normal",align:"center",color:"prominent",size:"xxxs"},null===(i=a[e])||void 0===i?void 0:i.text))})))},fe=function(e){var t,a=e.id,n=e.attribute,i=e.values,c="leverage"===a;return"instruments"===a?r().createElement(me,{attr:n,val:i}):r().createElement(o.Table.Row,{className:D?"cfd-real-compare-accounts-row-eu":y()("cfd-real-compare-accounts__table-row".concat(_e),(t={},z(t,"cfd-real-compare-accounts__table-row--leverage".concat(_e),c),z(t,"cfd-real-compare-accounts__row-with-columns-count-".concat(Y+1),Y<6),t))},r().createElement(o.Table.Cell,{fixed:!0},r().createElement(o.Text,{as:"p",weight:"bold",align:"center",color:"prominent",size:"xxs"},n)),Object.keys(i).map((function(e){var t,n,c,l;return r().createElement(o.Table.Cell,{key:e,className:y()("cfd-real-compare-accounts__table-row-item",{"cfd-real-compare-accounts__table-row-item--tooltip":null===(t=i[e])||void 0===t?void 0:t.tooltip_msg})},r().createElement(r().Fragment,null,r().createElement(o.Text,{as:"p",weight:"jurisdiction"===a?"bold":"normal",align:"center",color:"prominent",size:ue(a)},null===(n=i[e])||void 0===n?void 0:n.text),(null===(c=i[e])||void 0===c?void 0:c.tooltip_msg)&&r().createElement(o.Popover,{alignment:"left",className:"cfd-compare-accounts-tooltip",classNameBubble:"cfd-compare-accounts-tooltip--msg",icon:"info",disable_message_icon:!0,is_bubble_hover_enabled:!0,message:null===(l=i[e])||void 0===l?void 0:l.tooltip_msg,zIndex:9999})))})))};return r().createElement(o.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,l.isDesktop)(),className:"cfd-real-compare-accounts"},r().createElement("div",{className:"cfd-real-compare-accounts"},r().createElement("div",{className:"cfd-real-compare-accounts__table-wrapper"},r().createElement(o.Table,{className:"cfd-real-compare-accounts__table"},r().createElement(o.Table.Header,null,r().createElement(o.Table.Row,{className:D?"cfd-real-compare-accounts-row-eu":y()("cfd-real-compare-accounts__table-header".concat(_e),z({},"cfd-real-compare-accounts__table-header-for-synthetic-".concat(K,"-financial-").concat(Z).concat(_e),Y<6))},r().createElement(o.Table.Head,{fixed:!0,className:"cfd-real-compare-accounts__table-empty-cell"}),!D&&K>0&&r().createElement(o.Table.Head,{className:"cfd-real-compare-accounts__table-header-item"},(0,i.localize)("Derived")),Z>0&&r().createElement(o.Table.Head,{className:"cfd-real-compare-accounts__table-header-item"},D?(0,i.localize)("CFDs"):(0,i.localize)("Financial")),V&&K>0&&r().createElement(o.Table.Head,{className:"cfd-real-compare-accounts__table-header-item"},(0,i.localize)("Deriv X")))),r().createElement(o.Table.Body,null,function(e){return d?e.map((function(e){var t=Object.entries(e.values).reduce((function(e,t){var a=T(t,2),n=a[0],r=a[1];return H.includes(n)?S(S({},e),{},z({},n,r)):e}),{}),a=S(S({},e),{},{values:{}}),n=V?7:6;if(H.length<n&&!D){var r=["synthetic_svg","synthetic_bvi","financial_svg","financial_bvi","financial_vanuatu","financial_labuan"].concat(A(V&&K>0?["derivx"]:[]));a.values=r.reduce((function(e,t){return H.includes(t)?S(S({},e),{},z({},t,void 0)):e}),{}),H.forEach((function(t){"leverage"!==e.id||"financial_svg"!==t&&"financial_bvi"!==t?"instruments"===e.id&&"synthetic_bvi"===t?a.values[t]=e.values.synthetic_svg:"instruments"===e.id&&"financial_bvi"===t&&(a.values[t]=e.values.financial_svg):a.values[t]=e.values.financial_vanuatu}))}return S(S({},a),{},{values:S(S({},a.values),t)})})):D?e:e.map((function(e){var t=e.values,a=(t.derivx,k(t,w));return S(S({},e),{},{values:a})}))}(le).map((function(e){return r().createElement(fe,E({key:e.id},e))}))),d&&r().createElement(o.Table.Row,{className:D?"cfd-real-compare-accounts-row-eu columns-2":y()("cfd-real-compare-accounts__table-footer".concat(_e),z({},"cfd-real-compare-accounts__row-with-columns-count-".concat(Y+1),Y<6))},r().createElement(o.Table.Cell,{fixed:!0,className:"cfd-real-compare-accounts__table-empty-cell"}),(oe=se,oe.filter((function(e){return H.includes(e.action)}))).map((function(e,t){return r().createElement(o.Table.Cell,{key:t,className:"cfd-real-compare-accounts__table-footer__item"},de(e)?r().createElement("div",{className:"cfd-real-compare-accounts__table-footer__item--verification-pending"},r().createElement(o.Text,{size:l.isDesktop?"xxs":"xxxs",align:"center"},(0,i.localize)("Pending verification"))):r().createElement(o.Button,{className:"cfd-real-compare-accounts__table-footer__button",disabled:"derivx"===e.action?Object.entries(c).some((function(e){var t=T(e,2),a=t[0],n=t[1],r=u?"demo":"real";return n.account_type===r&&a.includes(l.CFD_PLATFORMS.DXTRADE)})):ie(e),type:"button",primary_light:!0,onClick:function(){return ce(e)}},e.label))})))))))}));function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var R=function(e){var t=e.landing_companies,a=e.is_logged_in,n=[null==t?void 0:t.dxtrade_all_company].length,r=a?n:2;return[{attribute:(0,i.localize)("Currency"),dxtrade:{derivx:(0,i.localize)("USD"),footnote:null}},{attribute:(0,i.localize)("Maximum leverage"),dxtrade:{derivx:(0,i.localize)("Up to 1:1000"),footnote:(0,i.localize)("Leverage gives you the ability to trade a larger position using your existing capital. Leverage varies across different symbols.")}},{attribute:(0,i.localize)("Order execution"),dxtrade:{derivx:(0,i.localize)("Market"),footnote:(0,i.localize)("All {{count}} account types use market execution. This means you agree with the broker's price in advance and will place orders at the broker's price.",{count:r})}},{attribute:(0,i.localize)("Spread"),dxtrade:{derivx:(0,i.localize)("Fixed/Variable"),footnote:(0,i.localize)("The spread is the difference between the buy price and sell price. A variable spread means that the spread is constantly changing, depending on market conditions. A fixed spread remains constant but is subject to alteration, at the Broker's absolute discretion.")}},{attribute:(0,i.localize)("Commission"),dxtrade:{derivx:(0,i.localize)("No"),footnote:(0,i.localize)("Deriv charges no commission across all account types.")}},{attribute:(0,i.localize)("Minimum deposit"),dxtrade:{derivx:(0,i.localize)("No"),footnote:null}},{attribute:(0,i.localize)("Margin call"),dxtrade:{derivx:(0,i.localize)("100%"),footnote:(0,i.localize)("Youll get a warning, named margin call, if your account balance drops down close to the stop out level.")}},{attribute:(0,i.localize)("Stop out level"),dxtrade:{derivx:(0,i.localize)("50%"),footnote:(0,i.localize)("If your margin level drops below our stop out level, your positions may be closed automatically to protect you from further losses.")}},{attribute:(0,i.localize)("Negative Balance Protection"),dxtrade:{derivx:(0,i.localize)("Available"),footnote:null}},{attribute:(0,i.localize)("Number of assets"),dxtrade:{derivx:(0,i.localize)("110+"),footnote:null}},{attribute:(0,i.localize)("Cryptocurrency trading"),dxtrade:{derivx:(0,i.localize)("N/A"),footnote:(0,i.localize)("Indicates the availability of cryptocurrency trading on a particular account.")}},{attribute:(0,i.localize)("Trading instruments"),dxtrade:{derivx:(0,i.localize)("Synthetics, FX majors (standard/micro lots), FX minors, basket indices, commodities, and cryptocurrencies"),footnote:null}}]},I=function(e){var t=e.name,a=e.counter,n=j(r().useState(!1),2),i=(n[0],n[1]);return a?r().createElement(r().Fragment,null,r().createElement(o.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer",onClick:function(){return i((function(e){return!e}))}},t,r().createElement(o.Text,{weight:"bold",as:"span",line_height:"x",size:"xxxs",className:"counter"},a))):r().createElement(o.Text,{as:"p",weight:"bold",size:"xs",line_height:"s",className:"cfd-attribute-describer"},t)},V=function(e){var t=e.landing_companies,a=e.is_logged_in,n=(e.show_eu_related,e.platform),o=(e.residence,e.is_uk);return function(e,t,a,n,o){var i=0;return t.filter((function(e){return e[o]})).map((function(e){var t=e.attribute,a=e.dxtrade,n=void 0===a?{}:a,c=n.derivx,s=n.footnote?++i:null;return o===l.CFD_PLATFORMS.DXTRADE?{attribute:r().createElement(I,{name:t,counter:s}),derivx:c}:{attribute:r().createElement(I,{name:t,counter:s})}}))}(0,R({landing_companies:t,platform:n,is_logged_in:a,is_uk:o}),0,0,n)},B=function(e){var t=e.platform,a=e.show_risk_message,n=e.landing_companies,c=e.is_logged_in,l=e.is_uk;return r().createElement("div",{className:"cfd-compare-account--hint"},r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),r().createElement(i.Localize,{i18n_default_text:"At bank rollover, liquidity in the forex markets is reduced and may increase the spread and processing time for client orders. This happens around 21:00 GMT during daylight saving time, and 22:00 GMT non-daylight saving time."})),a&&r().createElement(r().Fragment,null,r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement("span",{className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--circle"}),r().createElement(i.Localize,{i18n_default_text:"Margin call and stop out level will change from time to time based on market condition."})),r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement(o.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"*"),r().createElement(i.Localize,{i18n_default_text:"To protect your portfolio from adverse market movements due to the market opening gap, we reserve the right to decrease leverage on all offered symbols for financial accounts before market close and increase it again after market open. Please make sure that you have enough funds available in your {{platform}} account to support your positions at all times.",values:{platform:(0,i.localize)("Deriv X")}})),l&&r().createElement("div",{className:"cfd-compare-accounts__bullet-wrapper"},r().createElement(o.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},"**"),r().createElement(i.Localize,{i18n_default_text:"Cryptocurrency trading is not available for clients residing in the United Kingdom.",values:{platform:(0,i.localize)("Deriv X")}}))),R({landing_companies:n,platform:t,is_logged_in:c,is_uk:l}).filter((function(e){var a;return!(null===(a=e[t])||void 0===a||!a.footnote)})).map((function(e,a){return r().createElement("div",{key:a,className:"cfd-compare-accounts__bullet-wrapper"},r().createElement(o.Text,{size:"xs",line_height:"x",weight:"bold",className:"cfd-compare-accounts__bullet cfd-compare-accounts__bullet--star cfd-compare-accounts__star"},a+1),r().createElement("div",{className:"cfd-compare-accounts__footnote"},r().createElement(o.Text,{as:"p",size:"xs",weight:"bold",color:"prominent",className:"cfd-compare-accounts__footnote-title"},e.attribute),r().createElement(o.Text,{size:"xs",color:"prominent"},e[t].footnote)))})))};const U=function(e){var t=e.landing_companies,a=e.is_logged_in,n=e.platform,c=e.show_eu_related,s=e.residence,u=e.is_uk,d=j(r().useState([]),2),_=d[0],m=d[1],f=j(r().useState("1fr 1.5fr"),2),p=f[0],g=f[1];r().useEffect((function(){m(V({landing_companies:t,is_logged_in:a,platform:n,show_eu_related:c,residence:s,is_uk:u})),g("1fr 1.5fr")}),[null==t?void 0:t.mt_financial_company,null==t?void 0:t.mt_gaming_company,a,u,t,n,c,s]);var h=!c;return r().createElement(o.Div100vhContainer,{height_offset:"40px",is_bypassed:(0,l.isDesktop)()},r().createElement(o.ThemedScrollbars,{className:"cfd-compare-accounts",style:{"--cfd-compare-accounts-template-columns":p}},r().createElement("div",{className:"cfd-compare-accounts__table-wrapper"},r().createElement(o.Table,{className:"cfd-compare-accounts__table"},r().createElement(o.Table.Header,null,r().createElement(o.Table.Row,{className:"cfd-compare-accounts__table-row"},r().createElement(o.Table.Head,{fixed:!0}),r().createElement(o.Table.Head,null,(0,i.localize)("Deriv X")))),r().createElement(o.Table.Body,null,_.map((function(e,t){return r().createElement(o.Table.Row,{key:t,className:"cfd-compare-accounts__table-row"},Object.keys(e).map((function(t,a){return r().createElement(o.Table.Cell,{key:a,fixed:0===a},e[t])})))}))))),r().createElement(B,{platform:n,show_risk_message:h,landing_companies:t,is_logged_in:a,is_uk:u})))};var W=function(e){var t=e.is_demo_tab,a=e.is_logged_in,n=e.landing_companies,o=e.platform,i=e.show_eu_related,c=e.has_unmerged_account,l=e.residence,s=e.is_eu,u=e.is_uk;return t||!c?r().createElement(U,{is_logged_in:a,landing_companies:n,platform:o,show_eu_related:i,residence:l,is_eu:s,is_uk:u}):r().createElement(v,{is_logged_in:a,landing_companies:n,platform:o,show_eu_related:i,residence:l,is_eu:s,is_uk:u})};const X=(0,c.$j)((function(e){var t=e.modules,a=e.ui,n=e.client;return{disableApp:a.disableApp,enableApp:a.enableApp,is_compare_accounts_visible:t.cfd.is_compare_accounts_visible,is_loading:n.is_populating_mt5_account_list,is_eu:n.is_eu,is_uk:n.is_uk,is_eu_country:n.is_eu_country,is_logged_in:n.is_logged_in,landing_companies:n.landing_companies,residence:n.residence,toggleCompareAccounts:t.cfd.toggleCompareAccountsModal,openDerivRealAccountNeededModal:a.openDerivRealAccountNeededModal}}))((function(e){var t,a,n,c=e.disableApp,s=e.enableApp,u=e.is_compare_accounts_visible,d=e.landing_companies,_=e.is_loading,m=e.is_logged_in,f=e.is_eu,p=e.is_uk,g=e.is_eu_country,h=e.is_real_enabled,v=e.has_unmerged_account,b=e.platform,y=e.residence,w=e.is_demo_tab,E=e.toggleCompareAccounts,x=e.openPasswordModal,S=e.openDerivRealAccountNeededModal,z=e.context,k=e.real_account_creation_unlock_date,A=e.setShouldShowCooldownModal,T=r().useContext(l.PlatformContext).is_pre_appstore,D=window.location.pathname,M=T&&D.startsWith("/appstore/traders-hub"),C=(0,l.isLandingCompanyEnabled)({landing_companies:d,platform:l.CFD_PLATFORMS.DXTRADE,type:"financial"})||(0,l.isLandingCompanyEnabled)({landing_companies:d,platform:l.CFD_PLATFORMS.DXTRADE,type:"gaming"}),O=M&&C,F=m&&f||!m&&g,P=b&&b===l.CFD_PLATFORMS.DXTRADE,j=1===[null==d||null===(t=d.mt_gaming_company)||void 0===t?void 0:t.financial,null==d||null===(a=d.mt_financial_company)||void 0===a?void 0:a.financial,null==d||null===(n=d.mt_financial_company)||void 0===n?void 0:n.financial_stp].filter(Boolean).length||w&&b===l.CFD_PLATFORMS.DXTRADE||!v&&b===l.CFD_PLATFORMS.DXTRADE?(0,i.localize)("Account Information"):(0,i.localize)("Compare accounts"),L=function(){return P?j:(0,i.localize)("Compare available accounts")},R=function(){return O?{height:"506px",width:"1200px"}:P?{height:"696px",width:"903px"}:F?{height:"506px",width:"300px"}:{height:"506px",width:"996px"}};return r().createElement(r().Fragment,null,r().createElement("div",{className:"cfd-compare-accounts-modal__wrapper",style:{marginTop:P?"5rem":"2.4rem"}},!(w&&"mt5"===b&&!M)&&r().createElement(o.Button,{className:"cfd-dashboard__welcome-message--button",has_effect:!0,text:j,onClick:E,secondary:!0,disabled:_}),r().createElement(r().Suspense,{fallback:r().createElement(o.UILoader,null)},r().createElement(o.DesktopWrapper,null,r().createElement(o.Modal,{className:P?"cfd-dashboard__compare-accounts":"cfd-real-compare-accounts",disableApp:c,enableApp:s,is_open:u,title:L(),toggleModal:E,type:"button",height:R().height,width:R().width,exit_classname:P?"":"cfd-modal--custom-exit"},P?r().createElement(W,{is_demo_tab:w,is_logged_in:m,landing_companies:d,platform:b,show_eu_related:F,residence:y,has_unmerged_account:v,is_eu:f,is_uk:p}):r().createElement(N,{context:z,is_logged_in:m,openDerivRealAccountNeededModal:S,openPasswordModal:x,is_demo_tab:w,show_eu_related:F,is_real_enabled:h,toggleCompareAccounts:E,should_show_derivx:O,real_account_creation_unlock_date:k,setShouldShowCooldownModal:A}))),r().createElement(o.MobileWrapper,null,r().createElement(o.MobileDialog,{portal_element_id:"deriv_app",title:L(),wrapper_classname:"cfd-dashboard__compare-accounts",visible:u,onClose:E,header_classname:P?"":"cfd-real-compare-accounts-mobile-header"},P&&!O?r().createElement(W,{is_demo_tab:w,is_logged_in:m,landing_companies:d,platform:b,show_eu_related:F,has_unmerged_account:v,residence:y,is_eu:f,is_uk:p}):r().createElement(N,{context:z,is_logged_in:m,openDerivRealAccountNeededModal:S,openPasswordModal:x,is_demo_tab:w,show_eu_related:F,is_real_enabled:h,toggleCompareAccounts:E,should_show_derivx:O,real_account_creation_unlock_date:k,setShouldShowCooldownModal:A}))))))}))},"./src/Containers/jurisdiction-modal/jurisdiction-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("@deriv/translations"),c=a("./src/Stores/connect.js"),l=a("@deriv/shared");const s=function(e){var t=e.class_name,a=e.is_checked,n=e.jurisdiction_selected_shortcode,c=e.onCheck,s=e.context,u=e.should_restrict_bvi_account_creation,d={bvi:{name:"Deriv (BVI) Ltd",tnc_url:"tnc/deriv-(bvi)-ltd.pdf"},labuan:{name:"Deriv (FX) Ltd",tnc_url:"tnc/deriv-(fx)-ltd.pdf"},maltainvest:{name:"Deriv Investments (Europe) Limited",tnc_url:"tnc/deriv-investments-(europe)-limited.pdf"},vanuatu:{name:"Deriv (V) Ltd",tnc_url:"tnc/general-terms.pdf"}};return r().createElement(r().Fragment,null,!!n&&!("svg"===n||"bvi"===n&&u)&&r().createElement("div",{className:t},r().createElement(o.Checkbox,{context:s,value:a,onChange:c,label:r().createElement(o.Text,{as:"p",align:(0,l.isMobile)()?"":"center",size:"xs",line_height:"xs"},r().createElement(i.Localize,{i18n_default_text:"I confirm and accept {{company}} 's <0>Terms and Conditions</0>",values:{company:d[n].name},components:[r().createElement(o.StaticUrl,{key:0,className:"link",href:d[n].tnc_url})]})),defaultChecked:!!a})))};var u=a("../../node_modules/classnames/index.js"),d=a.n(u),_={svg:{is_over_header_available:!1,header:(0,i.localize)("St. Vincent & Grenadines"),synthetic_contents:["".concat((0,i.localize)("Selecting this will onboard you through Deriv (SVG) LLC (company no. 273 LLC 2020)")),"".concat((0,i.localize)("25+ assets: synthetics")),"".concat((0,i.localize)("Leverage up to 1:1000"))],financial_contents:["".concat((0,i.localize)("Selecting this will onboard you through Deriv (SVG) LLC (company no. 273 LLC 2020)")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("170+ assets: forex (standard/micro), stocks, stock indices, commodities, basket indices, and cryptocurrencies")),"".concat((0,i.localize)("Leverage up to 1:1000"))]},vanuatu:{over_header:(0,i.localize)("Better spreads"),is_over_header_available:!0,header:(0,i.localize)("Vanuatu"),synthetic_contents:["".concat((0,i.localize)("Regulated by the Vanuatu Financial Services Commission")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("30+ assets: forex and commodities")),"".concat((0,i.localize)("Leverage up to 1:1000"))],financial_contents:["".concat((0,i.localize)("Regulated by the Vanuatu Financial Services Commission")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("30+ assets: forex and commodities")),"".concat((0,i.localize)("Leverage up to 1:1000"))]},labuan:{over_header:(0,i.localize)("Straight-through processing"),is_over_header_available:!0,header:(0,i.localize)("Labuan"),synthetic_contents:["".concat((0,i.localize)("Regulated by the Labuan Financial Services Authority (Licence no. MB/18/0024)")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("80+ assets: forex and cryptocurrencies")),"".concat((0,i.localize)("Leverage up to 1:100"))],financial_contents:["".concat((0,i.localize)("Regulated by the Labuan Financial Services Authority (Licence no. MB/18/0024)")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("80+ assets: forex and cryptocurrencies")),"".concat((0,i.localize)("Leverage up to 1:100")),"".concat((0,i.localize)("Straight-through processing"))]},maltainvest:{over_header:(0,i.localize)("Better spreads"),is_over_header_available:!0,header:(0,i.localize)("Malta Financial"),synthetic_contents:["".concat((0,i.localize)("Regulated by the Malta Financial Services Authority (MFSA) (licence no. IS/70156)")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("50+ assets: forex, stocks, stock indices, synthetics indices, and cryptocurrencies.")),"".concat((0,i.localize)("Leverage up to 1:30"))],financial_contents:["".concat((0,i.localize)("Regulated by the Malta Financial Services Authority (MFSA) (licence no. IS/70156)")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("50+ assets: forex, stocks, stock indices, synthetics indices, and cryptocurrencies.")),"".concat((0,i.localize)("Leverage up to 1:30"))]},bvi:{is_over_header_available:!1,header:(0,i.localize)("British Virgin Islands"),synthetic_contents:["".concat((0,i.localize)("Regulated by the British Virgin Islands Financial Services Commission (License no. SIBA/L/18/1114)")),"".concat((0,i.localize)("25+ assets: synthetics")),"".concat((0,i.localize)("Leverage up to 1:1000"))],financial_contents:["".concat((0,i.localize)("Regulated by the British Virgin Islands Financial Services Commission (License no. SIBA/L/18/1114)")),"".concat((0,i.localize)("Registered with the Financial Commission")),"".concat((0,i.localize)("170+ assets: forex (standard/micro), stocks, stock indices, commodities, basket indices, and cryptocurrencies")),"".concat((0,i.localize)("Leverage up to 1:1000"))]}},m=function(e){var t=e.account_status,a=e.account_type,n=e.card_classname,c=e.disabled,s=(e.context,e.is_virtual),u=e.type_of_card,d=e.should_restrict_bvi_account_creation,_=e.real_synthetic_accounts_existing_data,m=e.real_financial_accounts_existing_data,f=(0,l.getAuthenticationStatusInfo)(t),p=f.poi_not_submitted_for_vanuatu_maltainvest,g=f.poi_or_poa_not_submitted,h=f.poi_resubmit_for_vanuatu_maltainvest,v=f.poi_resubmit_for_bvi_labuan,b=f.need_poa_resubmission,y=f.need_poi_for_bvi_labuan,w=f.poa_pending,E="svg"===u,x="vanuatu"===u,S="bvi"===u,z="labuan"===u,k="maltainvest"===u;return c&&("synthetic"===a?null==_?void 0:_.some((function(e){return e.landing_company_short===u})):null==m?void 0:m.some((function(e){return e.landing_company_short===u})))?r().createElement("div",{className:"".concat(n,"__verification-status--account_added")},r().createElement(o.Text,{size:"xxs",weight:"bold",color:"colored-background"},r().createElement(i.Localize,{i18n_default_text:"Account added"}))):s&&!E?r().createElement("div",{className:"".concat(n,"__verification-status--not_submitted")},r().createElement(o.Text,{as:"p",size:"xxxs",align:"center",color:"prominent"},r().createElement(i.Localize,{i18n_default_text:"Switch to your real account to create a Deriv MT5 {{account_title}} {{type_title}} account.",values:{account_title:function(){switch(a){case"synthetic":return"Derived";case"financial":return"Financial";default:return""}}(),type_title:function(){switch(u){case"bvi":return"BVI";case"vanuatu":return"Vanuatu";case"labuan":return"STP";default:return""}}()}}))):E?r().createElement("div",{className:"".concat(n,"__verification-status--hint")},r().createElement(o.Text,{size:"xxxs",align:"center","line-height":"s",color:"less-prominent"},r().createElement(i.Localize,{i18n_default_text:"You will need to submit proof of identity and address once you reach certain thresholds"}))):g?r().createElement("div",{className:"".concat(n,"__verification-status--not_submitted")},r().createElement(o.Text,{as:"p",size:"xxs",align:"center",color:"prominent"},r().createElement(i.Localize,{i18n_default_text:"Proof of identity and address are required"}))):S&&d?w?r().createElement("div",{className:"".concat(n,"__verification-status--pending")},r().createElement(o.Text,{size:"xxs",color:"prominent"},r().createElement(i.Localize,{i18n_default_text:"Pending proof of address review"}))):r().createElement("div",{className:"".concat(n,"__verification-status--failed")},r().createElement(o.Text,{size:"xxs",color:"colored-background"},r().createElement(i.Localize,{i18n_default_text:"Resubmit proof of address"}))):x&&p?r().createElement("div",{className:"".concat(n,"__verification-status--not_submitted")},r().createElement(o.Text,{as:"p",size:"xxs",align:"center",color:"prominent"},r().createElement(i.Localize,{i18n_default_text:"You will need to submit proof of identity"}))):(S||z)&&y&&b||(x||k)&&h&&b?r().createElement("div",{className:"".concat(n,"__verification-status--failed")},r().createElement(o.Text,{size:"xxs",color:"colored-background"},r().createElement(i.Localize,{i18n_default_text:"Resubmit your proof of identity and address"}))):(S||z)&&v||(x||k)&&h?r().createElement("div",{className:"".concat(n,"__verification-status--failed")},r().createElement(o.Text,{size:"xxs",color:"colored-background"},r().createElement(i.Localize,{i18n_default_text:"Resubmit proof of identity"}))):!E&&b?r().createElement("div",{className:"".concat(n,"__verification-status--failed")},r().createElement(o.Text,{size:"xxs",color:"colored-background"},r().createElement(i.Localize,{i18n_default_text:"Resubmit proof of address"}))):null};const f=(0,c.$j)((function(e){var t=e.modules.cfd,a=e.client;return{account_status:a.account_status,is_virtual:a.is_virtual,should_restrict_bvi_account_creation:a.should_restrict_bvi_account_creation,real_financial_accounts_existing_data:t.real_financial_accounts_existing_data,real_synthetic_accounts_existing_data:t.real_synthetic_accounts_existing_data}}))((function(e){return r().createElement("div",{className:"".concat(e.card_classname,"__verification-status")},r().createElement(m,e))}));function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const h=function(e){var t,a,n,c=e.account_type,l=e.disabled,s=e.context,u=e.jurisdiction_selected_shortcode,m=e.financial_available_accounts,g=e.setJurisdictionSelectedShortcode,h=e.synthetic_available_accounts,v=e.type_of_card,b="cfd-jurisdiction-card--".concat(c),y=null==h?void 0:h.length,w=null==m?void 0:m.length,E="synthetic"===c,x=p(r().useState(E?y:w),1)[0],S=[1,2].includes(x),z=_[v],k=E?z.synthetic_contents:z.financial_contents,A=function(){return r().createElement(o.Icon,{icon:"IcCheckmark",className:"".concat(b,"__bullet-wrapper--checkmark"),color:"green",size:18})};return r().createElement(r().Fragment,null,r().createElement("div",{className:d()(b,(t={},a="".concat(b,"--selected"),n=u===v,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t)),onClick:l?function(){}:function(){var e;g(u===(e=v)?"":e)},style:S?{width:"32em"}:{width:"27.6em"}},z.is_over_header_available&&r().createElement("div",{className:d()("".concat(b,"__over-header"))},r().createElement(o.Text,{as:"p",color:"info-blue",line_height:"xxl",weight:"bold"},r().createElement(i.Localize,{i18n_default_text:z.over_header}))),r().createElement("div",{className:"".concat(b,"__info-container")},r().createElement(o.Text,{as:"p",color:"prominent",weight:"bold",size:"sm",className:"".concat(b,"__h2-header")},r().createElement(i.Localize,{i18n_default_text:z.header})),k.map((function(e,t){return r().createElement("div",{className:"".concat(b,"__bullet-wrapper"),key:t},r().createElement("div",null,r().createElement(A,null)),r().createElement(o.Text,{as:"p",size:"xs",color:"prominent"},r().createElement(i.Localize,{i18n_default_text:e})),/Straight-through processing/.test(e)&&r().createElement(o.Popover,{alignment:"left",className:"cfd-compare-accounts-tooltip",classNameBubble:"cfd-compare-accounts-tooltip--msg",icon:"info",disable_message_icon:!0,is_bubble_hover_enabled:!0,message:(0,i.localize)("Choosing this jurisdiction will give you a Financial STP account. Your trades will go directly to the market and have tighter spreads."),zIndex:9999}))}))),r().createElement(f,{type_of_card:v,card_classname:b,disabled:l,context:s,account_type:c})))};var v=function(e){var t=e.account_status,a=e.account_type,n=(e.context,e.card_classname),o=e.jurisdiction_selected_shortcode,c=e.should_restrict_bvi_account_creation,s="synthetic"===a?"Derived":"Financial",u=(0,l.getAuthenticationStatusInfo)(t).poa_pending;return"svg"===o?r().createElement(i.Localize,{i18n_default_text:"Add your Deriv MT5 <0>{{account_type_name}}</0> account under Deriv (SVG) LLC (company no. 273 LLC 2020).",values:{account_type_name:s}}):"bvi"===o?c?u?r().createElement(i.Localize,{i18n_default_text:"<0>You can open this account once your submitted documents have been verified.</0>",components:[r().createElement("span",{key:0,className:"".concat(n,"__footnote--pending")})]}):r().createElement(i.Localize,{i18n_default_text:"To create this account first we need you to resubmit your proof of address."}):r().createElement(i.Localize,{i18n_default_text:"Add your Deriv MT5 <0>{{account_type_name}}</0>  account under Deriv (BVI) Ltd, regulated by the British Virgin Islands Financial Services Commission (License no. SIBA/L/18/1114).",values:{account_type_name:s}}):"vanuatu"===o?r().createElement(i.Localize,{i18n_default_text:"Add Your Deriv MT5 <0>{{account_type_name}}</0>  account under Deriv (V) Ltd, regulated by the Vanuatu Financial Services Commission.",values:{account_type_name:s}}):"labuan"===o?r().createElement(i.Localize,{i18n_default_text:"Add your Deriv MT5 <0>{{account_type_name}}</0>  STP account under Deriv (FX) Ltd regulated by Labuan Financial Services Authority (Licence no. MB/18/0024).",values:{account_type_name:s}}):"maltainvest"===o?r().createElement(i.Localize,{i18n_default_text:"Add your Deriv MT5 CFDs account under Deriv Investments (Europe) Limited regulated by the Malta Financial Services Authority (MFSA) (licence no. IS/70156)."}):null};const b=function(e){return r().createElement("div",{className:"".concat(e.card_classname,"__footnote")},r().createElement(o.Text,{as:"p",color:"prominent",align:"center",size:"xs",weight:"bold",line_height:"xs"},r().createElement(v,e)))};const y=function(e){var t=e.account_status,a=e.account_type,n=e.is_virtual,o=e.jurisdiction_selected_shortcode,i=e.setJurisdictionSelectedShortcode,c=e.synthetic_available_accounts,l=e.financial_available_accounts,u=e.checked,d=e.context,_=e.setChecked,m=e.real_synthetic_accounts_existing_data,f=e.real_financial_accounts_existing_data,p=e.should_restrict_bvi_account_creation,g="cfd-jurisdiction-card--".concat(a),v=function(e){return!(!n||"svg"===e)||("synthetic"===a?null==m?void 0:m.some((function(t){return t.landing_company_short===e})):null==f?void 0:f.some((function(t){return t.landing_company_short===e})))};return r().createElement(r().Fragment,null,r().createElement("div",{className:"".concat(g,"__wrapper")},["svg","bvi","vanuatu","labuan","maltainvest"].map((function(e){return t=e,("synthetic"===a?null==c?void 0:c.some((function(e){return e.shortcode===t})):null==l?void 0:l.some((function(e){return e.shortcode===t})))&&r().createElement(h,{key:"".concat(a,"_").concat(e),type_of_card:e,context:d,disabled:v(e),jurisdiction_selected_shortcode:o,synthetic_available_accounts:c,financial_available_accounts:l,account_type:a,setJurisdictionSelectedShortcode:i});var t}))),r().createElement(b,{account_status:t,account_type:a,card_classname:g,context:d,jurisdiction_selected_shortcode:o,should_restrict_bvi_account_creation:p}),r().createElement(s,{is_checked:u,context:d,onCheck:function(){return _(!u)},class_name:"".concat(g,"__jurisdiction-checkbox"),jurisdiction_selected_shortcode:o,should_restrict_bvi_account_creation:p}))};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const x=(0,c.$j)((function(e){var t=e.modules.cfd,a=e.ui,n=e.client;return{account_type:t.account_type,account_settings:n.account_settings,account_status:n.account_status,disableApp:a.disableApp,enableApp:a.enableApp,is_eu:n.is_eu,is_jurisdiction_modal_visible:t.is_jurisdiction_modal_visible,is_virtual:n.is_virtual,jurisdiction_selected_shortcode:t.jurisdiction_selected_shortcode,real_financial_accounts_existing_data:t.real_financial_accounts_existing_data,real_synthetic_accounts_existing_data:t.real_synthetic_accounts_existing_data,setAccountSettings:n.setAccountSettings,setJurisdictionSelectedShortcode:t.setJurisdictionSelectedShortcode,should_restrict_bvi_account_creation:n.should_restrict_bvi_account_creation,trading_platform_available_accounts:n.trading_platform_available_accounts,toggleCFDVerificationModal:t.toggleCFDVerificationModal,toggleJurisdictionModal:t.toggleJurisdictionModal,updateMT5Status:n.updateMT5Status,fetchAccountSettings:n.fetchAccountSettings,has_submitted_cfd_personal_details:t.has_submitted_cfd_personal_details}}))((function(e){var t=e.account_status,a=e.account_type,n=e.disableApp,c=e.enableApp,s=e.is_jurisdiction_modal_visible,u=e.is_eu,d=e.context,_=e.is_virtual,m=e.jurisdiction_selected_shortcode,f=e.openPasswordModal,p=e.real_synthetic_accounts_existing_data,g=e.real_financial_accounts_existing_data,h=e.trading_platform_available_accounts,v=e.toggleJurisdictionModal,b=e.setJurisdictionSelectedShortcode,E=e.should_restrict_bvi_account_creation,x=e.toggleCFDVerificationModal,S=e.updateMT5Status,z=e.fetchAccountSettings,k=e.has_submitted_cfd_personal_details,A=w(r().useState(!1),2),T=A[0],D=A[1],M=(0,l.getAuthenticationStatusInfo)(t),C=M.poi_or_poa_not_submitted,O=M.poi_acknowledged_for_bvi_labuan,F=M.poi_acknowledged_for_vanuatu_maltainvest,P=M.poa_acknowledged;r().useEffect((function(){s&&!_&&(S(),b(""),z())}),[s]),r().useEffect((function(){m&&D(!1)}),[m,s]);var N=h.filter((function(e){return"financial"===e.market_type})),j=h.filter((function(e){return"gaming"===e.market_type})),L=u?(0,i.localize)("Jurisdiction for your Deriv MT5 CFDs account"):(0,i.localize)("Choose a jurisdiction for your Deriv MT5 {{account_type}} account",{account_type:"synthetic"===a.type?"Derived":"Financial"}),R="svg"===m,I="bvi"===m,V="vanuatu"===m,B="labuan"===m,U="maltainvest"===m,W=function(){return r().createElement(r().Fragment,null,r().createElement(y,{account_status:t,account_type:a.type,checked:T,financial_available_accounts:N,is_virtual:_,real_financial_accounts_existing_data:g,real_synthetic_accounts_existing_data:p,jurisdiction_selected_shortcode:m,setChecked:D,context:d,setJurisdictionSelectedShortcode:b,synthetic_available_accounts:j,should_restrict_bvi_account_creation:E}),r().createElement(o.Modal.Footer,{has_separator:!0},r().createElement(o.Button,{disabled:!m||!!("synthetic"===a.type?null==p?void 0:p.some((function(e){return e.landing_company_short===m})):null==g?void 0:g.some((function(e){return e.landing_company_short===m})))||!R&&!T,primary:!0,style:{width:(0,l.isMobile)()?"100%":"unset"},onClick:function(){var e;v(),e={category:a.category,type:a.type},R?f(e):V?F&&!C&&P&&k?f(e):x():I?O&&!C&&!E&&P&&k?f(e):x():B?O&&P&&k?f(e):x():U&&(F&&P?f(e):x())}},(0,i.localize)("Next"))))};return r().createElement("div",null,r().createElement(r().Suspense,{fallback:r().createElement(o.UILoader,null)},r().createElement(o.DesktopWrapper,null,r().createElement(o.Modal,{className:"jurisdiction-modal",disableApp:n,enableApp:c,exit_classname:"cfd-modal--custom-exit",is_open:s,title:L,toggleModal:v,type:"button",context:d,width:"synthetic"===a.type?"1040px":"1200px"},r().createElement(W,null))),r().createElement(o.MobileWrapper,null,r().createElement(o.MobileDialog,{portal_element_id:"deriv_app",title:L,context:d,visible:s,onClose:v},r().createElement(W,null)))))}))},"./src/Containers/mt5-trade-modal.tsx":(e,t,a)=>{"use strict";a.d(t,{default:()=>f});var n=a("react"),r=a.n(n),o=a("@deriv/components"),i=a("./src/Stores/connect.js"),c=a("@deriv/translations"),l=a("./src/Components/cfd-account-copy.tsx"),s=a("@deriv/shared"),u=a("./src/Helpers/constants.ts"),d=function(e){var t=e.platform,a=e.onClick;return r().createElement("div",{className:"cfd-trade-modal__password-box"},r().createElement("div",{className:"cfd-trade-modal__password-text"},r().createElement(o.Popover,{alignment:"right",message:(0,c.localize)("Use these credentials to log in to your {{platform}} account on the website and mobile apps.",{platform:(0,s.getCFDPlatformLabel)(t)}),classNameBubble:"cfd-trade-modal__password-tooltip",zIndex:9999},r().createElement(o.Text,{size:"xs"},"***************"))),r().createElement(o.Popover,{className:"cfd-trade-modal__password-popover",alignment:"left",message:(0,c.localize)("Change Password"),relative_render:!0,zIndex:9999},r().createElement(o.Button,{className:"cfd-trade-modal__password-action",transparent:!0,onClick:a,icon:r().createElement(o.Icon,{icon:"IcEdit",className:"da-article__learn-more-icon",custom_color:"var(--text-less-prominent)"})})))},_=function(e){var t=e.value,a=e.is_bold;return r().createElement("div",{className:"cfd-trade-modal__spec-box"},r().createElement(o.Text,{size:"xs",weight:a?"bold":"",className:"cfd-trade-modal__spec-text"},t),r().createElement(l.O,{text:t,className:"cfd-trade-modal__spec-copy"}))},m={mt5:{synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",cfd:"IcMt5CfdPlatform"}};const f=(0,i.$j)((function(e){var t=e.modules,a=e.ui;return{disableApp:a.disableApp,enableApp:a.enableApp,mt5_trade_account:t.cfd.mt5_trade_account}}))((function(e){var t=e.mt5_trade_account,a=e.disableApp,n=e.enableApp,i=e.is_eu_user,l=e.is_open,f=(e.context,e.onPasswordManager),p=e.toggleModal,g=function(){if("demo"===t.account_type&&"financial"===t.market_type&&"labuan"===t.landing_company_short||"real"===t.account_type)return t.landing_company_short},h=function(){var e,a;return r().createElement("div",{className:"cfd-trade-modal-container"},r().createElement("div",{className:"cfd-trade-modal"},r().createElement(o.Icon,{icon:m.mt5[i?"cfd":t.market_type],size:24}),r().createElement("div",{className:"cfd-trade-modal__desc"},r().createElement(o.Text,{size:"xs",line_height:"l",className:"cfd-trade-modal__desc-heading"},(0,s.getCFDAccountDisplay)({market_type:t.market_type,sub_account_type:t.sub_account_type,platform:s.CFD_PLATFORMS.MT5,is_eu:i,shortcode:g(),is_mt5_trade_modal:!0})),(null==t?void 0:t.display_login)&&r().createElement(o.Text,{color:"less-prominent",size:"xxxs",line_height:"xxxs"},null==t?void 0:t.display_login)),(null==t?void 0:t.display_balance)&&r().createElement(o.Text,{size:"xs",color:"profit-success",className:"cfd-trade-modal__desc-balance",weight:"bold"},r().createElement(o.Money,{amount:t.display_balance,currency:t.currency,has_sign:!!t.balance&&t.balance<0,show_currency:!0}))),r().createElement("div",{className:"cfd-trade-modal__login-specs"},r().createElement("div",{className:"cfd-trade-modal__login-specs-item"},r().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,c.localize)("Broker")),r().createElement(_,{value:"Deriv Limited"})),r().createElement("div",{className:"cfd-trade-modal__login-specs-item"},r().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,c.localize)("Server")),r().createElement(_,{value:null==t||null===(e=t.server_info)||void 0===e?void 0:e.environment})),r().createElement("div",{className:"cfd-trade-modal__login-specs-item"},r().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,c.localize)("Login ID")),r().createElement(_,{value:null==t?void 0:t.display_login})),r().createElement("div",{className:"cfd-trade-modal__login-specs-item"},r().createElement(o.Text,{className:"cfd-trade-modal--paragraph"},(0,c.localize)("Password")),r().createElement("div",{className:"cfd-trade-modal--paragraph"},r().createElement(d,{platform:"mt5",onClick:function(){var e=(0,s.getCFDAccountKey)({market_type:t.market_type,sub_account_type:t.sub_account_type,platform:s.CFD_PLATFORMS.DMT5,shortcode:t.landing_company_short});f(null==t?void 0:t.login,function(e,t){return t&&(0,c.localize)("MT5 CFDs"),e}(t.market_type,i),t.account_type,e,null==t?void 0:t.server),p()}})))),r().createElement("div",{className:"cfd-trade-modal__download-center-app"},r().createElement("div",{className:"cfd-trade-modal__download-center-app--option"},r().createElement(o.Icon,{icon:"IcMt5Logo",size:32}),r().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},(0,c.localize)("MetaTrader 5 web")),r().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--option-link",type:"button",href:(0,u.FJ)({category:t.account_type,loginid:t.display_login,server_name:null==t||null===(a=t.server_info)||void 0===a?void 0:a.environment}),target:"_blank",rel:"noopener noreferrer"},r().createElement(o.Text,{size:"xxs",weight:"bold"},(0,c.localize)("Open")))),r().createElement("div",{className:"cfd-trade-modal__download-center-app--option"},r().createElement(o.Icon,{icon:"IcWindowsLogo",size:32}),r().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},(0,c.localize)("MetaTrader 5 Windows app")),r().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--option-link",type:"button",href:(0,u.gG)("windows"),target:"_blank",rel:"noopener noreferrer"},r().createElement(o.Text,{size:"xxs",weight:"bold"},(0,c.localize)("Download")))),r().createElement("div",{className:"cfd-trade-modal__download-center-app--option"},r().createElement(o.Icon,{icon:"IcMacosLogo",size:32}),r().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},(0,c.localize)("MetaTrader 5 MacOS app")),r().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--option-link",type:"button",href:(0,u.gG)("macos"),target:"_blank",rel:"noopener noreferrer"},r().createElement(o.Text,{size:"xxs",weight:"bold"},(0,c.localize)("Download")))),r().createElement("div",{className:"cfd-trade-modal__download-center-app--option"},r().createElement(o.Icon,{icon:"IcLinuxLogo",size:32}),r().createElement(o.Text,{className:"cfd-trade-modal__download-center-app--option-item",size:"xs"},(0,c.localize)("MetaTrader 5 Linux app")),r().createElement("a",{className:"dc-btn cfd-trade-modal__download-center-app--option-link",type:"button",href:(0,u.gG)("linux"),target:"_blank",rel:"noopener noreferrer"},r().createElement(o.Text,{size:"xxs",weight:"bold"},(0,c.localize)("Learn more"))))),r().createElement("div",{className:"cfd-trade-modal__download-center-options"},r().createElement("div",{className:"cfd-trade-modal__download-center-options--mobile-links"},r().createElement("a",{href:(0,u.gG)("android"),target:"_blank",rel:"noopener noreferrer"},r().createElement(o.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),r().createElement("a",{href:(0,u.gG)("huawei"),target:"_blank",rel:"noopener noreferrer"},r().createElement(o.Icon,{icon:"IcInstallationHuawei",width:135,height:40}))),r().createElement("div",{className:"cfd-trade-modal__download-center-options--qrcode"},r().createElement("img",{src:(0,s.getUrlBase)("/public/images/common/mt5_download.png"),width:80,height:80}),r().createElement(o.Text,{align:"center",size:"xxs"},(0,c.localize)("Scan the QR code to download Deriv MT5.")))))};return r().createElement(r().Suspense,{fallback:r().createElement(o.UILoader,null)},r().createElement(o.DesktopWrapper,null,r().createElement(o.Modal,{disableApp:a,enableApp:n,is_open:l,title:(0,c.localize)("Trade"),toggleModal:p,should_header_stick_body:!1,width:"600px",height:"709px",exit_classname:"cfd-modal--custom-exit"},h())),r().createElement(o.MobileWrapper,null,r().createElement(o.PageOverlay,{is_open:l,portal_id:"deriv_app",header:"Trade",onClickClose:p,header_classname:"cfd-trade-modal__mobile-title"},r().createElement(o.Div100vhContainer,{className:"cfd-trade-modal__mobile-view-wrapper",height_offset:"80px"},h()))))}))},"./src/Helpers/constants.ts":(e,t,a)=>{"use strict";a.d(t,{H9:()=>o,gG:()=>i,Nu:()=>c,FJ:()=>l,tY:()=>r});var n=a("@deriv/shared"),r=function(){return{minimum_amount:1e3,additional_amount:1e4}},o=function(e){switch(e){case"ios":return"https://apps.apple.com/us/app/deriv-x/id1563337503";case"huawei":return"https://appgallery.huawei.com/app/C104633219";default:return"https://play.google.com/store/apps/details?id=com.deriv.dx"}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;switch(e||(0,n.OSDetect)()){case"windows":return"https://download.mql5.com/cdn/web/deriv.limited/mt5/derivmt5setup.exe";case"linux":return"https://www.metatrader5.com/en/terminal/help/start_advanced/install_linux";case"macos":return"https://download.mql5.com/cdn/web/metaquotes.software.corp/mt5/MetaTrader5.dmg";case"huawei":return"https://appgallery.huawei.com/#/app/C102015329";case"android":return"https://download.mql5.com/cdn/mobile/mt5/android?server=Deriv-Demo,Deriv-Server";default:return l({category:"real"})}},c=function(e,t){var a="real"===e?"https://dx.deriv.com":"https://dx-demo.deriv.com";return t&&(a+="?token=".concat(t)),a},l=function(e){var t=e.category,a=e.loginid,n=e.server_name,r="demo"===t?"Deriv-Demo":void 0===n?"Deriv-Server":n,o=null!=a?a:"";return"https://trade.mql5.com/trade?servers=".concat(r,"&trade_server=").concat(r).concat(o&&"&login=".concat(o))}},"./src/Stores/Modules/CFD/Helpers/cfd-config.ts":(e,t,a)=>{"use strict";a.d(t,{Df:()=>r,D_:()=>o,g6:()=>i});var n=a("@deriv/translations"),r=function(){var e={account_type:"",leverage:500,short_title:(0,n.localize)("Derived")},t={account_type:"financial",leverage:1e3,short_title:(0,n.localize)("Financial")};return{demo:{synthetic:{dxtrade_account_type:e.account_type,leverage:e.leverage,title:(0,n.localize)("Demo Derived"),short_title:e.short_title},financial:{dxtrade_account_type:t.account_type,leverage:t.leverage,title:(0,n.localize)("Demo Financial"),short_title:t.short_title}},real:{synthetic:{dxtrade_account_type:e.account_type,leverage:e.leverage,title:(0,n.localize)("Derived"),short_title:e.short_title},financial:{dxtrade_account_type:t.account_type,leverage:t.leverage,title:(0,n.localize)("Financial"),short_title:t.short_title}}}},o=function(e){var t={account_type:"",leverage:500,short_title:(0,n.localize)("CFDs")},a={account_type:"",leverage:500,short_title:(0,n.localize)("Derived")},r={account_type:"financial",leverage:1e3,short_title:e?(0,n.localize)("CFDs"):(0,n.localize)("Financial")},o={account_type:"financial_stp",leverage:100,short_title:(0,n.localize)("Financial STP")};return{demo:{all:{mt5_account_type:t.account_type,leverage:t.leverage,title:(0,n.localize)("Demo"),short_title:t.short_title},synthetic:{mt5_account_type:a.account_type,leverage:a.leverage,title:(0,n.localize)("Demo Derived"),short_title:a.short_title},financial:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("Demo CFDs"):(0,n.localize)("Demo Financial"),short_title:r.short_title},synthetic_svg:{mt5_account_type:a.account_type,leverage:a.leverage,title:(0,n.localize)("Demo Derived SVG"),short_title:a.short_title},financial_svg:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("Demo CFDs"):(0,n.localize)("Demo Financial SVG"),short_title:r.short_title},financial_stp:{mt5_account_type:o.account_type,leverage:o.leverage,title:(0,n.localize)("Demo Financial STP"),short_title:o.short_title}},real:{all:{mt5_account_type:t.account_type,leverage:t.leverage,title:(0,n.localize)("Real"),short_title:t.short_title},dxtrade:{mt5_account_type:t.account_type,leverage:t.leverage,title:(0,n.localize)("Real"),short_title:t.short_title},synthetic:{mt5_account_type:a.account_type,leverage:a.leverage,title:(0,n.localize)("Derived"),short_title:a.short_title},synthetic_svg:{mt5_account_type:a.account_type,leverage:a.leverage,title:(0,n.localize)("Derived SVG"),short_title:a.short_title},synthetic_bvi:{mt5_account_type:a.account_type,leverage:a.leverage,title:(0,n.localize)("Derived BVI"),short_title:a.short_title},financial:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("CFDs"):(0,n.localize)("Financial"),short_title:r.short_title},financial_svg:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("CFDs"):(0,n.localize)("Financial SVG"),short_title:r.short_title},financial_bvi:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("CFDs"):(0,n.localize)("Financial BVI"),short_title:r.short_title},financial_fx:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("CFDs"):(0,n.localize)("Financial Labuan"),short_title:r.short_title},financial_v:{mt5_account_type:r.account_type,leverage:r.leverage,title:e?(0,n.localize)("CFDs"):(0,n.localize)("Financial Vanuatu"),short_title:r.short_title},financial_stp:{mt5_account_type:o.account_type,leverage:o.leverage,title:(0,n.localize)("Financial STP"),short_title:o.short_title}}}},i=function(e){var t="";switch(e){case"svg":t=(0,n.localize)("SVG");break;case"bvi":t=(0,n.localize)("BVI");break;case"labuan":t=(0,n.localize)("Labuan");break;case"vanuatu":t=(0,n.localize)("Vanuatu");break;default:t=null==e?void 0:e.toUpperCase()}return t}},"./src/Stores/Modules/CFD/cfd-store.js":(e,t,a)=>{"use strict";a.d(t,{default:()=>P});var n=a("mobx"),r=a("@deriv/shared"),o=a("./src/_common/utility.js");function i(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,a,n;return t=e,(a=[{key:"add",value:function(e,t){this.has(e)||(this.errors[e]=[]),-1===this.errors[e].indexOf(t)&&this.errors[e].push(t)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(e){return this.has(e)?this.errors[e][0]:null}},{key:"get",value:function(e){return this.has(e)?this.errors[e]:[]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}}])&&i(t.prototype,a),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const u=function(){function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,e),this.input=t,this.rules=a,this.store=n,this.errors=new c,this.error_count=0}var t,a,n;return t=e,n=[{key:"getRuleObject",value:function(e){var t="string"==typeof e,a={name:t?e:e[0],options:t?{}:e[1]||{}};return a.validator="custom"===a.name?e[1].func:(0,r.getPreBuildDVRs)()[a.name].func,a}}],(a=[{key:"addFailure",value:function(e,t,a){var n=a||t.options.message||(0,r.getPreBuildDVRs)()[t.name].message();"length"===t.name?n=(0,o.template)(n,[t.options.min===t.options.max?t.options.min:"".concat(t.options.min,"-").concat(t.options.max)]):"min"===t.name?n=(0,o.template)(n,[t.options.min]):"not_equal"===t.name&&(n=(0,o.template)(n,[t.options.name1,t.options.name2])),this.errors.add(e,n),this.error_count++}},{key:"check",value:function(){var t=this;return Object.keys(this.input).forEach((function(a){Object.prototype.hasOwnProperty.call(t.rules,a)&&t.rules[a].forEach((function(n){var r=e.getRuleObject(n);if((r.validator||"function"==typeof r.validator)&&(!r.options.condition||r.options.condition(t.store))&&(""!==t.input[a]||"req"===r.name)){var o,i;if("number"===r.name){var c=r.validator(t.input[a],r.options,t.store,t.input);o=c.is_ok,i=c.message}else o=r.validator(t.input[a],r.options,t.store,t.input);o||t.addFailure(a,r,i)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}])&&s(t.prototype,a),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function _(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){d(o,n,r,i,c,"next",e)}function c(e){d(o,n,r,i,c,"throw",e)}i(void 0)}))}}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,e),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,n.makeObservable)(this,{validation_errors:n.observable,validation_rules:n.observable,partial_fetch_time:n.observable,retrieveFromStorage:n.action,setValidationErrorMessages:n.action,setValidationRules:n.action,addRule:n.action,validateProperty:n.action,validateAllProperties:n.action,onSwitchAccount:n.action.bound,onPreSwitchAccount:n.action.bound,onLogout:n.action.bound,onClientInit:n.action.bound,onNetworkStatusChange:n.action.bound,onThemeChange:n.action.bound,onRealAccountSignupEnd:n.action.bound,disposePreSwitchAccount:n.action.bound,disposeSwitchAccount:n.action.bound,disposeLogout:n.action.bound,disposeClientInit:n.action.bound,disposeNetworkStatusChange:n.action.bound,disposeThemeChange:n.action.bound,disposeRealAccountSignupEnd:n.action.bound,onUnmount:n.action.bound,assertHasValidCache:n.action.bound});var r=a.root_store,o=a.local_storage_properties,i=a.session_storage_properties,c=a.validation_rules,l=a.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var s=o&&o.length||i&&i.length;if(s){if(!l)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:l,enumerable:!1,writable:!1})}this.root_store=r,this.local_storage_properties=o||[],this.session_storage_properties=i||[],setTimeout((function(){t.setValidationRules(c),t.setupReactionForLocalStorage(),t.setupReactionForSessionStorage(),t.retrieveFromStorage()}),0)}var t,a,o;return t=e,a=[{key:"getSnapshot",value:function(e){var t=(0,n.toJS)(this);return(0,r.isEmptyObject)(this.root_store)||(t.root_store=this.root_store),e&&e.length&&(t=e.reduce((function(e,a){return Object.assign(e,p({},a,t[a]))}),{})),t}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,n.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,e.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,n.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,e.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(t,a){var n=JSON.stringify(this.getSnapshot(t),(function(e,t){if(null!==t)return t}));a===e.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,n):a===e.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,n)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),a=JSON.parse(sessionStorage.getItem(this.store_name,{})),n=f(f({},t),a);Object.keys(n).forEach((function(t){return e[t]=n[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var a=this;this.validation_errors[e]&&!a.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!a.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(a){e.addRule(a,t[a])}))}},{key:"addRule",value:function(e,t){var a=this;this.validation_rules[e]=t,(0,n.intercept)(this,e,(function(t){return a.validateProperty(e,t.newValue),t}))}},{key:"validateProperty",value:function(e,t){var a=this,n=this.validation_rules[e].trigger,r=p({},e,void 0!==t?t:this[e]),o=p({},e,this.validation_rules[e].rules||[]);n&&Object.hasOwnProperty.call(this,n)&&(r[n]=this[n],o[n]=this.validation_rules[n].rules||[]);var i=new u(r,o,this);i.isPassed(),Object.keys(r).forEach((function(e){a.setValidationErrorMessages(e,i.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),a=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),a.forEach((function(a){t.includes(a)||delete e.validation_errors[a]}))}},{key:"onSwitchAccount",value:function(e){var t=this;e&&(this.switch_account_listener=e,this.switchAccountDisposer=(0,n.when)((function(){return t.root_store.client.switch_broadcast}),(function(){try{var e=t.switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Switching account listeners are required to return a promise.");e.then((function(){t.root_store.client.switchEndSignal(),t.onSwitchAccount(t.switch_account_listener)}))}catch(e){(0,r.isProduction)()||console.error(e)}})))}},{key:"onPreSwitchAccount",value:function(e){var t=this;e&&(this.pre_switch_account_listener=e,this.preSwitchAccountDisposer=(0,n.when)((function(){return t.root_store.client.pre_switch_broadcast}),(function(){try{var e=t.pre_switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Pre-switch account listeners are required to return a promise.");e.then((function(){t.root_store.client.setPreSwitchAccount(!1),t.onPreSwitchAccount(t.pre_switch_account_listener)}))}catch(e){(0,r.isProduction)()||console.error(e)}})))}},{key:"onLogout",value:function(e){var t=this;this.logoutDisposer=(0,n.when)((function(){return t.root_store.client.has_logged_out}),_(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=t.logout_listener())||!a.then||"function"!=typeof a.then){e.next=6;break}a.then((function(){t.root_store.client.setLogout(!1),t.onLogout(t.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,r.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=e}},{key:"onClientInit",value:function(e){var t=this;this.clientInitDisposer=(0,n.when)((function(){return t.root_store.client.initialized_broadcast}),_(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(a=t.client_init_listener())||!a.then||"function"!=typeof a.then){e.next=6;break}a.then((function(){t.root_store.client.setInitialized(!1),t.onClientInit(t.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,r.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=e}},{key:"onNetworkStatusChange",value:function(e){var t=this;this.networkStatusChangeDisposer=(0,n.reaction)((function(){return t.root_store.common.is_network_online}),(function(e){try{t.network_status_change_listener(e)}catch(e){(0,r.isProduction)()||console.error(e)}})),this.network_status_change_listener=e}},{key:"onThemeChange",value:function(e){var t=this;this.themeChangeDisposer=(0,n.reaction)((function(){return t.root_store.ui.is_dark_mode_on}),(function(e){try{t.theme_change_listener(e)}catch(e){(0,r.isProduction)()||console.error(e)}})),this.theme_change_listener=e}},{key:"onRealAccountSignupEnd",value:function(e){var t=this;this.realAccountSignupEndedDisposer=(0,n.when)((function(){return t.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=t.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){t.root_store.ui.setRealAccountSignupEnd(!1),t.onRealAccountSignupEnd(t.real_account_signup_ended_listener)}))}catch(e){(0,r.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=e}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];a.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}],a&&h(t.prototype,a),o&&h(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();v.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var b=a("./src/Stores/Modules/CFD/Helpers/cfd-config.ts");function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function w(e,t,a,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,r)}function E(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var o=e.apply(t,a);function i(e){w(o,n,r,i,c,"next",e)}function c(e){w(o,n,r,i,c,"throw",e)}i(void 0)}))}}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=F(e);if(t){var r=F(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return C(this,a)}}function C(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(f,e);var t,a,o,i,c,l,s,u,d,_,m=M(f);function f(e){var t,a=e.root_store;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=m.call(this,{root_store:a})).is_compare_accounts_visible=!1,t.is_cfd_personal_details_modal_visible=!1,t.is_jurisdiction_modal_visible=!1,t.is_mt5_trade_modal_visible=!1,t.jurisdiction_selected_shortcode="",t.account_type={category:void 0,type:void 0},t.mt5_trade_account={},t.new_account_response={},t.map_type={},t.has_cfd_error=!1,t.error_message="",t.is_cfd_success_dialog_enabled=!1,t.is_mt5_financial_stp_modal_open=!1,t.is_cfd_password_modal_enabled=!1,t.is_cfd_reset_password_modal_enabled=!1,t.current_account=void 0,t.error_type=void 0,t.is_cfd_verification_modal_visible=!1,t.dxtrade_tokens={demo:"",real:""},t.real_synthetic_accounts_existing_data=[],t.real_financial_accounts_existing_data=[],(0,n.makeObservable)(O(t),{is_compare_accounts_visible:n.observable,is_cfd_personal_details_modal_visible:n.observable,is_jurisdiction_modal_visible:n.observable,is_mt5_trade_modal_visible:n.observable,jurisdiction_selected_shortcode:n.observable,account_type:n.observable,mt5_trade_account:n.observable,new_account_response:n.observable,map_type:n.observable,has_cfd_error:n.observable,error_message:n.observable,is_cfd_success_dialog_enabled:n.observable,is_mt5_financial_stp_modal_open:n.observable,is_cfd_password_modal_enabled:n.observable,is_cfd_reset_password_modal_enabled:n.observable,current_account:n.observable,is_cfd_verification_modal_visible:n.observable,error_type:n.observable,dxtrade_tokens:n.observable,account_title:n.computed,current_list:n.computed,has_created_account_for_selected_jurisdiction:n.computed,has_submitted_cfd_personal_details:n.computed,onMount:n.action.bound,onUnmount:n.override,checkShouldOpenAccount:n.action.bound,realAccountSignupEndListener:n.action.bound,resetFormErrors:n.action.bound,clearCFDError:n.action.bound,createCFDAccount:n.action.bound,disableCFDPasswordModal:n.action.bound,enableCFDPasswordModal:n.action.bound,getName:n.action.bound,openMT5Account:n.action.bound,openCFDAccount:n.action.bound,beginRealSignupForMt5:n.action.bound,enableMt5FinancialStpModal:n.action.bound,setAccountType:n.action.bound,setCurrentAccount:n.action.bound,setMT5TradeAccount:n.action.bound,setError:n.action.bound,setCFDNewAccount:n.action.bound,setCFDSuccessDialog:n.action.bound,storeProofOfAddress:n.action.bound,getAccountStatus:n.action.bound,creatMT5Password:n.action.bound,submitMt5Password:n.action.bound,createCFDPassword:n.action.bound,submitCFDPassword:n.action.bound,toggleCompareAccountsModal:n.action.bound,getRealSyntheticAccountsExistingData:n.action.bound,getRealFinancialAccountsExistingData:n.action.bound,toggleJurisdictionModal:n.action.bound,toggleMT5TradeModal:n.action.bound,disableMt5FinancialStpModal:n.action.bound,topUpVirtual:n.action.bound,sendVerifyEmail:n.action.bound,setJurisdictionSelectedShortcode:n.action.bound,toggleCFDVerificationModal:n.action.bound,setCFDPasswordResetModal:n.action.bound,setDxtradeToken:n.action.bound,loadDxtradeTokens:n.action.bound}),(0,n.reaction)((function(){return[t.root_store.client.dxtrade_accounts_list]}),(function(){t.root_store.client.dxtrade_accounts_list.length>0&&t.loadDxtradeTokens()})),t}return t=f,a=[{key:"account_title",get:function(){return this.account_type.category?(0,b.D_)(this.root_store.client.is_eu)[this.account_type.category][this.account_type.type].title:""}},{key:"has_submitted_cfd_personal_details",get:function(){var e=this.root_store.client.account_settings,t=e.citizen,a=e.place_of_birth,n=e.tax_residence,r=e.tax_identification_number,o=e.account_opening_reason;return!!(t&&a&&n&&r&&o)}},{key:"current_list",get:function(){var e={};return this.root_store.client.mt5_login_list.forEach((function(t){e[(0,r.getAccountListKey)(t,r.CFD_PLATFORMS.MT5,t.landing_company_short)]=k({},t)})),this.root_store.client.dxtrade_accounts_list.forEach((function(t){e[(0,r.getAccountListKey)(t,r.CFD_PLATFORMS.DXTRADE)]=k({},t)})),e}},{key:"mt5_companies",get:function(){return(0,b.D_)(this.root_store.client.is_eu)}},{key:"dxtrade_companies",get:function(){return(0,b.Df)()}},{key:"has_created_account_for_selected_jurisdiction",get:function(){var e,t,a=this;return"synthetic"===this.account_type.type?null===(e=this.real_synthetic_accounts_existing_data)||void 0===e?void 0:e.some((function(e){return e.landing_company_short===a.jurisdiction_selected_shortcode})):null===(t=this.real_financial_accounts_existing_data)||void 0===t?void 0:t.some((function(e){return e.landing_company_short===a.jurisdiction_selected_shortcode}))}},{key:"onMount",value:function(){this.checkShouldOpenAccount(),this.onRealAccountSignupEnd(this.realAccountSignupEndListener),this.root_store.ui.is_cfd_page=!0}},{key:"onUnmount",value:function(){this.disposeRealAccountSignupEnd(),this.root_store.ui.is_cfd_page=!1}},{key:"checkShouldOpenAccount",value:function(){var e=sessionStorage.getItem("open_cfd_account_type");if(e){var t=x(e.split("."),4),a=t[0],n=t[1],r=t[2],o=t[3];this.createCFDAccount({category:a,platform:n,type:r,set_password:o}),sessionStorage.removeItem("open_cfd_account_type")}}},{key:"realAccountSignupEndListener",value:function(){var e=JSON.parse(sessionStorage.getItem("post_real_account_signup"));return e&&e.category&&e.type&&(sessionStorage.removeItem("post_real_account_signup"),this.enableCFDPasswordModal()),Promise.resolve()}},{key:"resetFormErrors",value:function(){this.error_message="",this.error_type=void 0,this.has_cfd_error=!1}},{key:"clearCFDError",value:function(){this.resetFormErrors(),this.is_cfd_password_modal_enabled=!1}},{key:"createCFDAccount",value:function(e){var t=e.category,a=e.platform,n=e.type,o=e.set_password;this.clearCFDError(),this.setAccountType({category:t,type:n}),a===r.CFD_PLATFORMS.DXTRADE?"real"===t?this.realCFDSignup(o):this.demoCFDSignup():a===r.CFD_PLATFORMS.MT5&&("real"===t?this.toggleJurisdictionModal():(this.root_store.client.is_eu?this.setJurisdictionSelectedShortcode("maltainvest"):this.setJurisdictionSelectedShortcode("svg"),this.demoCFDSignup()))}},{key:"demoCFDSignup",value:function(){this.enableCFDPasswordModal()}},{key:"disableCFDPasswordModal",value:function(){this.is_cfd_password_modal_enabled=!1}},{key:"enableCFDPasswordModal",value:function(){this.is_cfd_password_modal_enabled=!0}},{key:"getName",value:function(){var e=(this.root_store.client.account_settings&&this.root_store.client.account_settings).first_name,t=this.mt5_companies[this.account_type.category][this.account_type.type].title;return e?[e,t].join(" "):t}},{key:"openMT5Account",value:function(e){var t=this.getName(),a=this.mt5_companies[this.account_type.category][this.account_type.type].leverage,n=(0,r.getAccountTypeFields)(this.account_type),o=this.root_store.client.account_settings,i=o.address_line_1,c=o.address_line_2,l=o.address_postcode,s=o.address_city,u=o.address_state,d=o.country_code,_=o.phone;return r.WS.mt5NewAccount(k(k(k({mainPassword:e.password,email:this.root_store.client.email_address,leverage:a,name:t,address:i||c,city:s,country:d,phone:_,state:u,zipCode:l},e.server?{server:e.server}:{}),this.jurisdiction_selected_shortcode?{company:this.jurisdiction_selected_shortcode}:{}),"labuan"!==this.jurisdiction_selected_shortcode?n:{account_type:"financial",mt5_account_type:"financial_stp"}))}},{key:"openCFDAccount",value:function(e){return r.WS.tradingPlatformNewAccount({password:e.password,platform:e.platform,account_type:this.account_type.category,market_type:"dxtrade"===this.account_type.type?"all":this.account_type.type})}},{key:"beginRealSignupForMt5",value:function(){sessionStorage.setItem("post_real_account_signup",JSON.stringify(this.account_type)),this.root_store.ui.openRealAccountSignup()}},{key:"realCFDSignup",value:function(e){switch(this.account_type.type){case"financial":case"synthetic":case"dxtrade":case"all":this.enableCFDPasswordModal();break;case"financial_stp":this.root_store.client.fetchResidenceList(),this.root_store.client.fetchStatesList(),this.root_store.client.fetchAccountSettings(),e?this.enableCFDPasswordModal():this.enableMt5FinancialStpModal();break;default:throw new Error("Cannot determine mt5 account signup.")}}},{key:"enableMt5FinancialStpModal",value:function(){this.is_mt5_financial_stp_modal_open=!0}},{key:"setAccountType",value:function(e){this.account_type=e}},{key:"setCurrentAccount",value:function(e,t){this.current_account=k(k({},t),e)}},{key:"setMT5TradeAccount",value:function(e){this.mt5_trade_account=e}},{key:"setError",value:function(e,t){var a;this.has_cfd_error=e,this.error_message=t?t.message:"",this.error_type=null!==(a=null==t?void 0:t.code)&&void 0!==a?a:void 0}},{key:"setCFDNewAccount",value:function(e){this.new_account_response=e}},{key:"setCFDSuccessDialog",value:function(e){this.is_cfd_success_dialog_enabled=!!e}},{key:"storeProofOfAddress",value:function(e,t,a){var n=this,o=a.setStatus;return new Promise((function(a,i){o({msg:""}),n.setState({is_btn_loading:!0}),r.WS.setSettings(t).then((function(t){t.error?(o({msg:t.error.message}),i(t)):(n.root_store.fetchAccountSettings(),e.current.upload().then((function(e){e.warning?(o({msg:e.message}),i(e)):r.WS.authorized.storage.getAccountStatus().then((function(e){var t=e.error,n=e.get_account_status;t&&i(t);var r=n.authentication.identity,o=!(r&&"none"===r.status);a({identity:r,has_poi:o})}))})))}))}))}},{key:"getAccountStatus",value:(_=E(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t===r.CFD_PLATFORMS.MT5&&this.root_store.client.is_mt5_password_not_set||t===r.CFD_PLATFORMS.DXTRADE&&this.root_store.client.is_dxtrade_password_not_set)){e.next=4;break}return e.next=4,r.WS.getAccountStatus();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"creatMT5Password",value:(d=E(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.WS.tradingPlatformPasswordChange({new_password:t.password,platform:r.CFD_PLATFORMS.MT5});case 2:if(!(n=e.sent).error){e.next=9;break}return this.setError(!0,n.error),a.resetForm({}),a.setSubmitting(!1),a.setStatus({success:!1}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return d.apply(this,arguments)})},{key:"submitMt5Password",value:(u=E(regeneratorRuntime.mark((function e(t,a){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root_store.client.is_mt5_password_not_set){e.next=6;break}return e.next=3,this.creatMT5Password(t,a);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return this.resetFormErrors(),e.next=9,this.openMT5Account(t);case 9:if((n=e.sent).error){e.next=30;break}return a.setStatus({success:!0}),a.setSubmitting(!1),this.setError(!1),this.setCFDSuccessDialog(!0),e.next=17,this.getAccountStatus(r.CFD_PLATFORMS.MT5);case 17:return e.next=19,r.WS.authorized.mt5LoginList();case 19:return o=e.sent,this.root_store.client.responseMt5LoginList(o),r.WS.transferBetweenAccounts(),e.t0=this.root_store.client,e.next=25,r.WS.tradingServers(r.CFD_PLATFORMS.MT5);case 25:e.t1=e.sent,e.t0.responseMT5TradingServers.call(e.t0,e.t1),this.setCFDNewAccount(n.mt5_new_account),e.next=36;break;case 30:return e.next=32,this.getAccountStatus(r.CFD_PLATFORMS.MT5);case 32:this.setError(!0,n.error),a.resetForm({}),a.setSubmitting(!1),a.setStatus({success:!1});case 36:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"createCFDPassword",value:(s=E(regeneratorRuntime.mark((function e(t,a){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.WS.tradingPlatformPasswordChange({new_password:t.password,platform:r.CFD_PLATFORMS.DXTRADE});case 2:if(!(n=e.sent).error){e.next=9;break}return this.setError(!0,n.error),a.resetForm({}),a.setSubmitting(!1),a.setStatus({success:!1}),e.abrupt("return",!0);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"submitCFDPassword",value:(l=E(regeneratorRuntime.mark((function e(t,a){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root_store.client.is_dxtrade_password_not_set){e.next=6;break}return e.next=3,this.createCFDPassword(t,a);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this.openCFDAccount(t);case 8:if((n=e.sent).error){e.next=24;break}return a.setStatus({success:!0}),a.setSubmitting(!1),this.setError(!1),this.setCFDSuccessDialog(!0),e.next=16,this.getAccountStatus(r.CFD_PLATFORMS.DXTRADE);case 16:return e.next=18,r.WS.tradingPlatformAccountsList(t.platform);case 18:o=e.sent,this.root_store.client.responseTradingPlatformAccountsList(o),r.WS.transferBetweenAccounts(),this.setCFDNewAccount(n.trading_platform_new_account),e.next=30;break;case 24:return e.next=26,this.getAccountStatus(r.CFD_PLATFORMS.DXTRADE);case 26:this.setError(!0,n.error),a.resetForm({}),a.setSubmitting(!1),a.setStatus({success:!1});case 30:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"toggleCompareAccountsModal",value:function(){this.is_compare_accounts_visible=!this.is_compare_accounts_visible}},{key:"getRealSyntheticAccountsExistingData",value:function(e){this.real_synthetic_accounts_existing_data=e}},{key:"getRealFinancialAccountsExistingData",value:function(e){this.real_financial_accounts_existing_data=e}},{key:"toggleJurisdictionModal",value:function(){this.is_jurisdiction_modal_visible=!this.is_jurisdiction_modal_visible}},{key:"toggleMT5TradeModal",value:function(){this.is_mt5_trade_modal_visible=!this.is_mt5_trade_modal_visible}},{key:"disableMt5FinancialStpModal",value:function(){this.is_mt5_financial_stp_modal_open=!1}},{key:"topUpVirtual",value:(c=E(regeneratorRuntime.mark((function e(t){var a,o,i,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.root_store.ui.setTopUpInProgress(!0),e.t0=t,e.next=e.t0===r.CFD_PLATFORMS.DXTRADE?4:e.t0===r.CFD_PLATFORMS.MT5?8:12;break;case 4:return e.next=6,r.WS.authorized.send({trading_platform_deposit:1,platform:r.CFD_PLATFORMS.DXTRADE,to_account:this.current_account.account_id});case 6:return a=e.sent,e.abrupt("break",14);case 8:return e.next=10,r.WS.authorized.mt5Deposit({to_mt5:this.current_account.login});case 10:return a=e.sent,e.abrupt("break",14);case 12:return a.error="Invalid platform",e.abrupt("break",14);case 14:if(a.error){e.next=31;break}e.t1=t,e.next=e.t1===r.CFD_PLATFORMS.DXTRADE?18:e.t1===r.CFD_PLATFORMS.MT5?22:26;break;case 18:return e.next=20,r.WS.authorized.tradingPlatformAccountsList(r.CFD_PLATFORMS.DXTRADE).then(this.root_store.client.responseTradingPlatformAccountsList);case 20:return o=null===(i=this.root_store.client.dxtrade_accounts_list.find((function(e){return e.account_id===l.current_account.account_id})))||void 0===i?void 0:i.balance,e.abrupt("break",27);case 22:return e.next=24,r.WS.authorized.mt5LoginList().then(this.root_store.client.responseMt5LoginList);case 24:return o=null===(c=this.root_store.client.mt5_login_list.find((function(e){return e.login===l.current_account.login})))||void 0===c?void 0:c.balance,e.abrupt("break",27);case 26:return e.abrupt("break",27);case 27:(0,n.runInAction)((function(){l.root_store.ui.is_top_up_virtual_open=!1,l.current_account.balance=o})),setTimeout((function(){(0,n.runInAction)((function(){l.root_store.ui.is_top_up_virtual_success=!0}))}),250),e.next=32;break;case 31:console.error(a);case 32:this.root_store.ui.setTopUpInProgress(!1);case 33:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"sendVerifyEmail",value:function(){return r.WS.verifyEmail(this.root_store.client.email,"trading_platform_investor_password_reset")}},{key:"setCFDPasswordResetModal",value:function(e){this.is_cfd_reset_password_modal_enabled=!!e}},{key:"setDxtradeToken",value:function(e,t){if(!e.error){var a=e.service_token.dxtrade;this.dxtrade_tokens[t]=a.token}}},{key:"loadDxtradeTokens",value:function(){var e=this;["demo","real"].forEach((function(t){var a=e.root_store.client.dxtrade_accounts_list.some((function(e){return e.account_type===t}));!e.dxtrade_tokens[t]&&a&&r.WS.getServiceToken(r.CFD_PLATFORMS.DXTRADE,t).then((function(a){return e.setDxtradeToken(a,t)}))}))}},{key:"setJurisdictionSelectedShortcode",value:function(e){this.jurisdiction_selected_shortcode=e}},{key:"toggleCFDVerificationModal",value:function(){this.is_cfd_verification_modal_visible=!this.is_cfd_verification_modal_visible}}],o=[{key:"changePassword",value:(i=E(regeneratorRuntime.mark((function e(t){var a,n,o,i,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.login,i=t.old_password,c=t.new_password,"investor"!==t.password_type){e.next=7;break}return e.next=4,r.WS.authorized.tradingPlatformInvestorPasswordChange({account_id:o,old_password:i,new_password:c,platform:r.CFD_PLATFORMS.MT5});case 4:l=e.sent,e.next=10;break;case 7:return e.next=9,r.WS.authorized.tradingPlatformPasswordChange({account_id:o,old_password:i,new_password:c,platform:r.CFD_PLATFORMS.MT5});case 9:l=e.sent;case 10:return e.abrupt("return",null===(a=l)||void 0===a||null===(n=a.error)||void 0===n?void 0:n.message);case 11:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}],a&&T(t.prototype,a),o&&T(t,o),Object.defineProperty(t,"prototype",{writable:!1}),f}(v)},"./src/Stores/connect.js":(e,t,a)=>{"use strict";a.d(t,{z1:()=>u,$j:()=>d});var n=a("mobx-react"),r=a("react"),o=a.n(r);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=o().createContext(null);var u=function(e){var t=e.store,a=e.children;return o().createElement(s.Provider,{value:c(c({},t),{},{mobxStores:t})},a)},d=function(e){return function(t){return function(e,t){var a=function(a){var r=o().useContext(s),i=t;(function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)})(t)&&(i=function(e){return o().createElement(t,e)});var l=a.context||r;return(0,n.useObserver)((function(){return i(c(c({},a),e(l,a)))}))};return a.displayName=t.name,a}(e,t)}}},"./src/_common/utility.js":e=>{function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var n,r=a((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.promise=new Promise((function(e,a){t.reject=a,t.resolve=e}))}));e.exports={template:function(e,t){var a=t;return t&&!Array.isArray(t)&&(a=[t]),e.replace(/\[_(\d+)]/g,(function(e,t){return a[+t-1]}))},createElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElement(e);return Object.keys(t).forEach((function(e){var n=t[e];"text"===e?a.textContent=n:"html"===e?a.html(n):a.setAttribute(e,n)})),a},getStaticHash:function(){return n=n||(document.querySelector('script[src*="main"]').getAttribute("src")||"").split(".")[1]},PromiseClass:r}},"./src/app.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ge});var n=a("../../node_modules/prop-types/index.js"),r=a.n(n),o=a("react"),i=a.n(o),c=a("../stores/src/index.ts"),l=a("mobx-react"),s=a("react-router"),u=a("react-router-dom"),d=a("@deriv/shared"),_=a("@deriv/components"),m=a("@deriv/translations"),f=a("@deriv/account/dist/account/js/reset-trading-password-modal"),p=a.n(f),g=(a("@deriv/account/dist/account/css/reset-trading-password-modal.css"),a("./src/Stores/connect.js"));const h=function(e){var t=e.onClickSignup,a=e.platform;return i().createElement("div",{className:"cfd-dashboard__missing-real"},i().createElement("div",{className:"cfd-dashboard__missing-real-wrapper"},i().createElement(_.Text,{className:"cfd-dashboard__missing-real--heading",as:"h1",weight:"bold",line_height:"l"},a===d.CFD_PLATFORMS.MT5?i().createElement(m.Localize,{i18n_default_text:"You need a real account (fiat currency or cryptocurrency) in Deriv to create a real Deriv MT5 account."}):i().createElement(m.Localize,{i18n_default_text:"To create a Deriv X real account, create a Deriv real account first."}))),i().createElement("div",null,i().createElement(_.Button,{className:"cfd-dashboard__missing-real--button",onClick:t,type:"button",primary:!0,large:!0},i().createElement("span",{className:"btn__text"},i().createElement(m.Localize,{i18n_default_text:"Create a Deriv account"})))))};var v=a("../../node_modules/classnames/index.js"),b=a.n(v);const y=function(e){var t=e.className,a=e.is_invisible,n=e.theme,r=e.id;return i().createElement("div",{id:r,"data-testid":"dt_barspinner",className:b()("barspinner","barspinner--".concat(n||"dark"),{invisible:a},t)},Array.from(new Array(5)).map((function(e,t){return i().createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))};const w=function(){return i().createElement("div",{className:"cfd-real-accounts-display"},i().createElement(y,null))};var E=a("./src/Containers/compare-accounts-modal.tsx"),x=a("./src/Containers/jurisdiction-modal/jurisdiction-modal.tsx"),S=a("./src/Containers/mt5-trade-modal.tsx"),z=a("./src/Containers/cfd-dbvi-onboarding.tsx"),k=a("../../node_modules/react-qrcode/lib/qrcode.js"),A=a("./src/Helpers/constants.ts"),T=function(e,t){return t===d.CFD_PLATFORMS.DXTRADE?e?(0,m.localize)("Welcome to your Deriv X dashboard"):(0,m.localize)("Welcome to Deriv X"):t===d.CFD_PLATFORMS.MT5?(0,m.localize)("Welcome to Deriv MT5 dashboard"):(0,m.localize)("")},D=function(e){return e===d.CFD_PLATFORMS.DXTRADE?(0,m.localize)("Run Deriv X on your browser or download the mobile app"):e===d.CFD_PLATFORMS.MT5?(0,m.localize)("Run MT5 from your browser or download the MT5 app for your devices"):""},M=function(e,t){return e===d.CFD_PLATFORMS.DXTRADE?(0,m.localize)("Trade forex, basket indices, commodities, and cryptocurrencies with high leverage."):e===d.CFD_PLATFORMS.MT5?t?(0,m.localize)("Trade CFDs on forex, stocks, stock indices, synthetic indices, cryptocurrencies, and commodities with leverage."):(0,m.localize)("Trade CFDs on forex, stocks & stock indices, commodities, and crypto."):""},C=function(e,t){return e===d.CFD_PLATFORMS.MT5?(0,A.gG)(t):(0,A.H9)(t)},O=function(e){var t=e.active_index,a=e.dxtrade_tokens;return i().createElement(i().Fragment,null,i().createElement("h1",{className:"cfd-dashboard__download-container-heading"},(0,m.localize)("Run Deriv X on your browser")),i().createElement("a",{className:"cfd-dashboard__download-container-dxtrade-button",href:(0,A.Nu)(0===t?"real":"demo",a&&a[0===t?"real":"demo"]),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{className:"cfd-dashboard__download-container-dxtrade-button-icon",icon:"IcBrandDxtrade",width:32,height:32}),i().createElement("div",{className:"cfd-dashboard__download-container-dxtrade-button-text"},i().createElement(_.Text,{color:"colored-background",size:"xxs",weight:"bold"},i().createElement(m.Localize,{i18n_default_text:"Web terminal"})))))},F=function(){return i().createElement(i().Fragment,null,i().createElement("div",{className:"cfd-dashboard__download-container-links-icons"},i().createElement(_.Icon,{icon:"IcMt5DeviceDesktop",width:118,height:85}),i().createElement(_.Icon,{icon:"IcMt5DeviceLaptop",width:75,height:51})),i().createElement("div",{className:"cfd-dashboard__download-container-links-download-buttons"},i().createElement("a",{href:(0,A.gG)("windows"),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{icon:"IcInstallationWindows",width:138,height:40})),i().createElement("a",{href:(0,A.gG)("macos"),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{icon:"IcInstallationMacos",width:138,height:40})),i().createElement("a",{href:(0,A.gG)("linux"),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{icon:"IcInstallationLinux",width:138,height:40}))),i().createElement(_.Text,{as:"p",align:"center",size:"xxxs",className:"cfd-dashboard__download-center--hint"},i().createElement(m.Localize,{i18n_default_text:"The MT5 desktop app is not supported by Windows XP, Windows 2003, and Windows Vista."})))},P=function(e){var t=e.is_dark_mode_on,a=e.platform;return i().createElement(i().Fragment,null,a===d.CFD_PLATFORMS.DXTRADE&&i().createElement("h1",{className:"cfd-dashboard__download-container-heading"},(0,m.localize)("Download the Deriv X mobile app")),i().createElement("div",{className:b()({"cfd-dashboard__download-container-links-icons":(0,d.isMobile)()||a===d.CFD_PLATFORMS.MT5})},(0,d.isMobile)()&&a===d.CFD_PLATFORMS.DXTRADE&&i().createElement(i().Fragment,null,i().createElement(_.Icon,{icon:t?"IcDxtradeDeviceTabletLight":"IcDxtradeDeviceTablet",width:133,height:106}),i().createElement(_.Icon,{icon:t?"IcDxtradeDevicePhoneLight":"IcDxtradeDevicePhone",width:48,height:74})),a===d.CFD_PLATFORMS.MT5&&i().createElement(i().Fragment,null,i().createElement(_.Icon,{icon:"IcMt5DeviceTablet",width:133,height:106}),i().createElement(_.Icon,{icon:"IcMt5DevicePhone",width:48,height:74}))),i().createElement("div",{className:b()("cfd-dashboard__download-container-links-download-buttons",{"cfd-dashboard__download-container-links-download-buttons--column":(0,d.isMobile)()&&a===d.CFD_PLATFORMS.MT5})},i().createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:C(a,"android"),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{icon:"IcInstallationGoogle",width:135,height:40})),a===d.CFD_PLATFORMS.DXTRADE&&i().createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:C(a,"ios"),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{icon:"IcInstallationApple",width:120,height:40})),i().createElement("a",{className:"cfd-dashboard__download-center-options--mobile-link",href:C(a,"huawei"),target:"_blank",rel:"noopener noreferrer"},i().createElement(_.Icon,{icon:"IcInstallationHuawei",width:120,height:40}))))},N=function(e){var t=e.platform;return i().createElement(_.DesktopWrapper,null,i().createElement("div",{className:"cfd-dashboard__download-container-qrcode"},i().createElement(k.s,{value:C(t,"android"),size:160}),i().createElement("span",{className:"cfd-dashboard__download-container-qrcode__hint"},(0,m.localize)("Scan the QR code to download the Deriv X Mobile App"))))};const j=function(e){var t=e.platform,a=e.is_dark_mode_on,n=e.active_index,r=e.dxtrade_tokens;return i().createElement(i().Fragment,null,i().createElement(_.MobileWrapper,null,i().createElement(_.Text,{className:"cfd-dashboard__download-container-mobile-hint",color:"general",size:"xxs",weight:"400",align:"center"},i().createElement(m.Localize,{i18n_default_text:"If you have the app, launch it to start trading."}))),i().createElement("div",{className:b()("cfd-dashboard__download-container",{"cfd-dashboard__download-container--is-mt5":t===d.CFD_PLATFORMS.MT5}),"data-testid":"dt_cfd_dashboard_download_center_container"},t===d.CFD_PLATFORMS.MT5&&i().createElement("h1",{className:"cfd-dashboard__download-container-heading"},(0,d.isDesktop)()?D(t):(0,m.localize)("Download the MT5 app")),i().createElement("div",{className:b()("cfd-dashboard__download-container-links",{"cfd-dashboard__download-container-links--is-mt5":t===d.CFD_PLATFORMS.MT5})},i().createElement(_.DesktopWrapper,null,i().createElement("div",{className:"cfd-dashboard__download-container-links--desktop"},t===d.CFD_PLATFORMS.DXTRADE&&i().createElement(O,{active_index:n,dxtrade_tokens:r}),t===d.CFD_PLATFORMS.MT5&&i().createElement(F,null))),i().createElement("div",{className:"cfd-dashboard__download-container-links--mobile"},i().createElement(P,{is_dark_mode_on:a,platform:t}))),t===d.CFD_PLATFORMS.DXTRADE&&i().createElement(N,{platform:t})))};var L=a("./src/Containers/cfd-password-manager-modal.tsx"),R=a("./src/Containers/cfd-password-modal.tsx"),I=a("./src/Containers/cfd-server-error-dialog.tsx"),V=a("./src/Containers/cfd-top-up-demo-modal.tsx"),B=a("./src/Containers/cfd-reset-password-modal.tsx");const U=(0,g.$j)((function(e){var t=e.ui;return{is_open:t.is_switch_to_deriv_account_modal_visible,onClose:t.openSwitchToRealAccountModal,disableApp:t.disableApp,enableApp:t.enableApp}}))((function(e){var t=e.is_open,a=e.onClose,n=e.disableApp,r=e.enableApp;return i().createElement(_.Dialog,{className:"switch-to-real-account-modal",confirm_button_text:(0,m.localize)("Ok"),onConfirm:a,disableApp:n,enableApp:r,is_closed_on_confirm:!0,is_visible:t},i().createElement(_.Icon,{icon:"IcPoaLock",size:60}),i().createElement(_.Text,{className:"da-icon-with-message__text",as:"p",size:(0,d.isMobile)()?"xxs":"xs",color:"general",line_height:"m",align:"center"},(0,m.localize)("Switch to your real account to create a Deriv MT5 account")))}));var W=a("../../node_modules/react-transition-group/esm/CSSTransition.js"),X=a("./src/Components/cfd-account-copy.tsx"),q={mt5:{synthetic:"IcMt5SyntheticPlatform",financial:"IcMt5FinancialPlatform",financial_stp:"IcMt5FinancialStpPlatform",cfd:"IcMt5CfdPlatform"},dxtrade:{synthetic:"IcDxtradeSyntheticPlatform",financial:"IcDxtradeFinancialPlatform",cfd:"IcMt5CfdPlatform",all:"IcDxtradeDerivxPlatform"}},G=i().forwardRef((function(e,t){var a=e.onSelectAccount,n=e.is_disabled;return i().createElement("div",{onClick:n?function(){}:a,className:b()("cfd-account-card__add-server",{"cfd-account-card__add-server--disabled":n}),ref:t},i().createElement("span",{className:"cfd-account-card__add-server--icon"},"+"),i().createElement(m.Localize,{i18n_default_text:"Add account"}))}));G.displayName="AddAccountButton";var J=function(e){var t=e.value,a=e.is_bold;return i().createElement("div",{className:"cfd-account-card__spec-box"},i().createElement(_.Text,{size:"xs",weight:a?"bold":"",className:"cfd-account-card__spec-text"},t),i().createElement(X.O,{text:t,className:"cfd-account-card__spec-copy"}))},H=function(e){var t=e.platform,a=e.onClick;return i().createElement("div",{className:"cfd-account-card__password-box"},i().createElement("div",{className:"cfd-account-card__password-text"},i().createElement(_.Popover,{alignment:"right",message:(0,m.localize)("Use these credentials to log in to your {{platform}} account on the website and mobile apps.",{platform:(0,d.getCFDPlatformLabel)(t)}),classNameBubble:"cfd-account-card__password-tooltip"},i().createElement(_.Text,{size:"xs"},""))),i().createElement(_.Popover,{alignment:"bottom",message:(0,m.localize)("Change Password")},i().createElement(_.Button,{className:"cfd-account-card__password-action",transparent:!0,onClick:a,icon:i().createElement(_.Icon,{icon:"IcEdit",className:"da-article__learn-more-icon",custom_color:"var(--text-less-prominent)"})})))},$=function(e){var t=e.button_label,a=e.handleClickSwitchAccount,n=e.has_real_account,r=e.is_accounts_switcher_on,o=e.is_button_primary,c=e.is_disabled,l=e.is_virtual,s=e.onSelectAccount,u=e.type,f=e.platform,p=e.title,g=e.real_account_creation_unlock_date,h=e.setShouldShowCooldownModal;if(l&&"real"===u.category&&"function"==typeof a&&(f!==d.CFD_PLATFORMS.MT5||n&&"financial_stp"===u.type))return i().createElement("div",{className:"cfd-account-card__action-wrapper"},i().createElement(m.Localize,{i18n_default_text:"<0>Switch to your real account</0><1> to create a {{platform}} {{account_title}} account.</1>",values:{platform:(0,d.getCFDPlatformLabel)(f),account_title:"Deriv X"===p?"":p},components:[i().createElement("a",{className:b()("cfd-account-card__action-wrapper__link link link--orange",{"cfd-account-card__action-wrapper__link--disabled":r}),key:0,onClick:a}),i().createElement(_.Text,{key:1,line_height:"s",size:"xxs"})]}));var v="real"===u.category?i().createElement(m.Localize,{i18n_default_text:"Add real account"}):i().createElement(m.Localize,{i18n_default_text:"Add demo account"}),y=t||v;return i().createElement(_.Button,{className:"cfd-account-card__account-selection",onClick:function(){g?h(!0):s()},type:"button",is_disabled:c,primary:o,secondary:!o,large:!0},y)},Y=(0,g.$j)((function(e){var t=e.modules.cfd,a=e.client,n=e.ui;return{dxtrade_tokens:t.dxtrade_tokens,isEligibleForMoreDemoMt5Svg:a.isEligibleForMoreDemoMt5Svg,isEligibleForMoreRealMt5:a.isEligibleForMoreRealMt5,setAccountType:t.setAccountType,setJurisdictionSelectedShortcode:t.setJurisdictionSelectedShortcode,setIsAcuityModalOpen:n.setIsAcuityModalOpen,setMT5TradeAccount:t.setMT5TradeAccount,toggleCFDVerificationModal:t.toggleCFDVerificationModal,updateAccountStatus:a.updateAccountStatus}}))((function(e){var t=e.button_label,a=e.commission_message,n=e.descriptor,r=e.dxtrade_tokens,o=e.existing_accounts_data,c=e.has_banner,l=e.has_cfd_account_error,s=e.has_real_account,u=e.is_accounts_switcher_on,f=e.is_button_primary,p=e.is_disabled,g=e.is_eu,h=e.is_logged_in,v=e.is_virtual,y=e.isEligibleForMoreDemoMt5Svg,w=e.isEligibleForMoreRealMt5,E=e.onClickFund,x=e.onPasswordManager,S=e.onSelectAccount,z=e.platform,k=e.setAccountType,T=e.setJurisdictionSelectedShortcode,D=e.setIsAcuityModalOpen,M=e.setMT5TradeAccount,C=e.specs,O=e.title,F=e.toggleAccountsDialog,P=e.toggleCFDVerificationModal,N=e.toggleMT5TradeModal,j=e.toggleShouldShowRealAccountsList,L=e.type,R=e.updateAccountStatus,I=e.real_account_creation_unlock_date,V=e.setShouldShowCooldownModal,B=null!=o&&o.length?null==o?void 0:o[0]:o,U=h&&!g&&z===d.CFD_PLATFORMS.MT5&&("demo"===L.category?y(L.type)&&!!B:w(L.type)&&!!B),X=g&&z===d.CFD_PLATFORMS.MT5?"cfd":L.type,Y=L.type?i().createElement(_.Icon,{icon:q[L.platform][X],size:64}):null,K="synthetic"===L.type,Z="demo"===L.category,Q=h&&B&&"real"===L.category&&"synthetic"===L.type&&(null==B?void 0:B.server_info),ee=i().useRef(null),te=i().useRef(null),ae=i().useRef(null),ne=i().useCallback((function(e){if(e){var t,a,n,r,o,i,c=null===(t=e.server_info)||void 0===t||null===(a=t.geolocation)||void 0===a?void 0:a.region;if(c)return"".concat(c," ").concat(1===(null==e||null===(n=e.server_info)||void 0===n||null===(r=n.geolocation)||void 0===r?void 0:r.sequence)?"":null==e||null===(o=e.server_info)||void 0===o||null===(i=o.geolocation)||void 0===i?void 0:i.sequence)}return""}),[]),re=(0,d.isMobile)()&&z===d.CFD_PLATFORMS.DXTRADE,oe=z===d.CFD_PLATFORMS.DXTRADE&&i().createElement(i().Fragment,null,i().createElement("tr",{className:"cfd-account-card__login-specs-table-row"},i().createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i().createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Username"))),i().createElement("td",{className:"cfd-account-card__login-specs-table-data"},i().createElement("div",{className:"cfd-account-card--paragraph"},i().createElement(J,{value:null==B?void 0:B.login,is_bold:!0})))));return i().createElement("div",{ref:te,className:"cfd-account-card__wrapper"},i().createElement("div",{className:b()("cfd-account-card",{"cfd-account-card__logged-out":!h}),ref:ee},K&&i().createElement("div",{className:"cfd-account-card__banner"},i().createElement(m.Localize,{i18n_default_text:"Most popular"})),Z&&i().createElement("div",{className:"cfd-account-card__banner cfd-account-card__banner--demo"},i().createElement(m.Localize,{i18n_default_text:"DEMO"})),i().createElement("div",{className:b()("cfd-account-card__type",{"cfd-account-card__type--has-banner":c||K||Q}),id:"".concat(z===d.CFD_PLATFORMS.DXTRADE?d.CFD_PLATFORMS.DXTRADE:d.CFD_PLATFORMS.MT5,"_").concat(L.category,"_").concat(L.type)},Y,i().createElement("div",{className:"cfd-account-card__type--description"},i().createElement(_.Text,{size:"xxl",className:"cfd-account-card--heading"},O),z===d.CFD_PLATFORMS.DXTRADE?(!B||!h)&&i().createElement("p",{className:"cfd-account-card--paragraph"},n):i().createElement("p",{className:"cfd-account-card--paragraph"},n),(null==B?void 0:B.display_balance)&&h&&z===d.CFD_PLATFORMS.DXTRADE&&i().createElement(_.Text,{size:"xxl",className:"cfd-account-card__balance--value"},i().createElement(_.Money,{amount:B.display_balance,currency:B.currency,has_sign:!!B.balance&&B.balance<0,show_currency:!0})),(null==B?void 0:B.display_login)&&h&&z===d.CFD_PLATFORMS.DXTRADE&&i().createElement(_.Text,{color:"less-prominent",size:"xxxs",line_height:"s"},null==B?void 0:B.display_login))),z===d.CFD_PLATFORMS.MT5&&(0,d.isDesktop)()&&h&&i().createElement("div",{className:"cfd-account-card__acuity-container"},"financial"===L.type&&i().createElement(_.Button,{onClick:function(){return D(!0)},className:"cfd-account-card__acuity-banner",type:"button",transparent:!0},i().createElement("div",{className:"cfd-account-card__acuity-banner--wrapper"},i().createElement(_.Icon,{icon:"icMt5Acuity"}),i().createElement(_.Text,{as:"p",size:"xxs",weight:"bold",color:"prominent"},i().createElement(m.Localize,{i18n_default_text:"Get Acuity trading tools"})),i().createElement(_.Icon,{icon:"IcAddOutline",color:"secondary"})))),B&&i().createElement("div",{className:"cfd-account-card__divider"}),i().createElement("div",{className:"cfd-account-card__cta",style:null!=B&&B.login?{}:{marginTop:"auto"}},i().createElement("div",{className:"cfd-account-card__cta-wrapper"},z===d.CFD_PLATFORMS.DXTRADE&&(!(null!=B&&B.login)||!h)&&i().createElement("div",{className:"cfd-account-card__specs"},i().createElement("table",{className:"cfd-account-card__specs-table"},i().createElement("tbody",null,void 0!==C&&Object.keys(C).map((function(e,t){return i().createElement("tr",{key:t,className:"cfd-account-card__specs-table-row"},i().createElement("td",{className:"cfd-account-card__specs-table-attribute"},i().createElement("p",{className:"cfd-account-card--paragraph"},C[e].key())),i().createElement("td",{className:"cfd-account-card__specs-table-data"},i().createElement("p",{className:"cfd-account-card--paragraph"},C[e].value())))}))))),(null==B?void 0:B.login)&&h&&z===d.CFD_PLATFORMS.MT5&&"demo"===L.category&&(null==o?void 0:o.length)&&(null==o?void 0:o.map((function(e,t){return i().createElement("div",{className:"cfd-account-card__item",key:t},(null==e?void 0:e.display_balance)&&h&&"labuan"===e.landing_company_short&&i().createElement("div",{className:"cfd-account-card__item--banner"},i().createElement(m.Localize,{i18n_default_text:"Labuan"})),(null==e?void 0:e.display_login)&&i().createElement("div",{className:"cfd-account-card--login-id".concat("labuan"===e.landing_company_short?"":"-demo")},i().createElement(_.Text,{size:"xxxs",weight:"bold"},null==e?void 0:e.display_login)),(null==e?void 0:e.display_balance)&&h&&i().createElement("div",{className:"cfd-account-card__balance"},i().createElement(_.Text,{size:"xxl",className:"cfd-account-card__balance--value"},i().createElement(_.Money,{amount:e.display_balance,currency:e.currency,has_sign:!!e.balance&&e.balance<0,show_currency:!0}))),i().createElement("div",{className:"cfd-account-card__manage--mt5"},e&&h&&i().createElement(_.Button,{onClick:function(){return E(e)},type:"button",secondary:!0},i().createElement(m.Localize,{i18n_default_text:"Top up"})),e&&h&&!re&&i().createElement(_.Button,{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",onClick:function(){N(),M(e)},primary:!0,large:!0},i().createElement(m.Localize,{i18n_default_text:"Trade"}))))}))),(null==B?void 0:B.login)&&h&&z===d.CFD_PLATFORMS.MT5&&!(null!=o&&o.length)&&"demo"===L.category&&i().createElement("div",{className:"cfd-account-card__item"},(null==B?void 0:B.display_login)&&i().createElement("div",{className:"cfd-account-card--login-id-demo"},i().createElement(_.Text,{size:"xxxs",weight:"bold"},null==B?void 0:B.display_login)),(null==B?void 0:B.display_balance)&&h&&i().createElement("div",{className:"cfd-account-card__balance"},i().createElement(_.Text,{size:"xxl",className:"cfd-account-card__balance--value"},i().createElement(_.Money,{amount:B.display_balance,currency:B.currency,has_sign:!!B.balance&&B.balance<0,show_currency:!0}))),i().createElement("div",{className:"cfd-account-card__manage--mt5"},B&&h&&i().createElement(_.Button,{onClick:function(){return E(B)},type:"button",secondary:!0},i().createElement(m.Localize,{i18n_default_text:"Top up"})),B&&h&&!re&&i().createElement(_.Button,{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",onClick:function(){N(),M(B)},primary:!0,large:!0},i().createElement(m.Localize,{i18n_default_text:"Trade"})))),(null==B?void 0:B.login)&&h&&z===d.CFD_PLATFORMS.MT5&&"real"===L.category&&(null==o?void 0:o.map((function(e,t){var a,n,r,c,l;return i().createElement("div",{className:"cfd-account-card__item",key:t},(null==B?void 0:B.display_balance)&&h&&!g&&i().createElement("div",{className:"cfd-account-card__item--banner"},i().createElement(m.Localize,{i18n_default_text:e.landing_company_short&&!["svg","bvi"].includes(null==e?void 0:e.landing_company_short)?(null===(a=e.landing_company_short)||void 0===a?void 0:a.charAt(0).toUpperCase())+e.landing_company_short.slice(1):null===(n=e.landing_company_short)||void 0===n?void 0:n.toUpperCase()})),(null==e?void 0:e.display_login)&&i().createElement("div",{className:"cfd-account-card--login-id"},i().createElement(_.Text,{size:"xxxs",weight:"bold"},null==e?void 0:e.display_login)),(null==B?void 0:B.display_balance)&&h&&i().createElement("div",{className:"cfd-account-card__balance"},i().createElement(_.Text,{size:"xxl",className:"cfd-account-card__balance--value"},i().createElement(_.Money,{amount:e.display_balance,currency:e.currency,has_sign:!!e.balance&&e.balance<0,show_currency:!0})),(null===(l=[],null==o||o.map((function(e){"svg"===e.landing_company_short&&(l.length?l.forEach((function(t){return t.server!==e.server&&l.push(e),l})):l.push(e))})),r=l)||void 0===r?void 0:r.length)>1&&"svg"===e.landing_company_short&&i().createElement(_.Text,{className:"cfd-account-card__balance--region",color:"colored-background",size:"xxxs",weight:"bold"},ne(e))),i().createElement("div",{className:"cfd-account-card__manage--mt5"},null!==(c=function(e){var t=e.landing_company_short,a=e.status;if(t&&a&&["proof_failed","verification_pending"].includes(a)){var n="verification_pending"===a;return i().createElement(_.Button,{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",onClick:function(){k({category:L.category,type:L.type}),T(t),R(),P()},primary:!0,large:!0,disabled:n},n?i().createElement(m.Localize,{i18n_default_text:"Pending verification"}):i().createElement(m.Localize,{i18n_default_text:"Resubmit document"}))}return null}(e))&&void 0!==c?c:i().createElement(i().Fragment,null,B&&h&&i().createElement(_.Button,{onClick:function(){var t=null==o?void 0:o.find((function(t){return t.landing_company_short===e.landing_company_short&&t.login===e.login}));E(t)},type:"button",secondary:!0},i().createElement(m.Localize,{i18n_default_text:"Top up"})),B&&h&&!re&&i().createElement(_.Button,{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",onClick:function(){var t=null==o?void 0:o.find((function(t){return t.landing_company_short===e.landing_company_short&&t.login===e.login}));N(),M(t)},primary:!0,large:!0},i().createElement(m.Localize,{i18n_default_text:"Trade"})))))}))),(null==B?void 0:B.login)&&h&&z===d.CFD_PLATFORMS.DXTRADE&&i().createElement(i().Fragment,null,i().createElement("div",{className:"cfd-account-card__login-specs"},i().createElement("table",{className:"cfd-account-card__login-specs-table"},i().createElement("tbody",null,oe,i().createElement("tr",{className:"cfd-account-card__login-specs-table-row cfd-account-card__login-specs-table-row--account-id"},i().createElement("td",{className:"cfd-account-card__login-specs-table-attribute"},i().createElement("div",{className:"cfd-account-card--paragraph"},(0,m.localize)("Password"))),i().createElement("td",{className:"cfd-account-card__login-specs-table-data"},i().createElement("div",{className:"cfd-account-card--paragraph"},i().createElement(H,{platform:z,onClick:function(){x(null==B?void 0:B.login,O,L.category,L.type,null==B?void 0:B.server)}})))))))),(!B&&a||!h)&&z===d.CFD_PLATFORMS.DXTRADE&&i().createElement("div",{className:"cfd-account-card__commission"},i().createElement(_.Text,{as:"p",color:"general",size:"xs",styles:{margin:"1.6rem auto"}},a)),B&&h&&z===d.CFD_PLATFORMS.DXTRADE&&i().createElement("div",{className:"cfd-account-card__manage"},i().createElement(_.Button,{onClick:function(){return E(B)},type:"button",secondary:!0},"real"===L.category&&i().createElement(m.Localize,{i18n_default_text:"Fund transfer"}),"demo"===L.category&&i().createElement(m.Localize,{i18n_default_text:"Top up"}))),B&&h&&!re&&z===d.CFD_PLATFORMS.DXTRADE&&i().createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:(0,A.Nu)(L.category,r[L.category]),target:"_blank",rel:"noopener noreferrer"},i().createElement(m.Localize,{i18n_default_text:"Trade on web terminal"})),B&&h&&re&&i().createElement("a",{className:"dc-btn cfd-account-card__account-selection cfd-account-card__account-selection--primary",type:"button",href:"iOS"===(0,d.mobileOSDetect)()?(0,A.H9)("ios"):(0,A.H9)("android"),target:"_blank",rel:"noopener noreferrer"},i().createElement(m.Localize,{i18n_default_text:"Download the app"})),!B&&h&&i().createElement($,{button_label:t,handleClickSwitchAccount:function(){null==j||j(!0),null==F||F(!0)},has_real_account:s,is_accounts_switcher_on:u,is_button_primary:f,is_disabled:p,is_virtual:v,onSelectAccount:S,type:L,platform:z,title:O,real_account_creation_unlock_date:I,setShouldShowCooldownModal:V}))),i().createElement(i().Fragment,null,U&&i().createElement(_.MobileWrapper,null,i().createElement(G,{ref:ae,onSelectAccount:S,is_disabled:l})))),i().createElement(_.DesktopWrapper,null,i().createElement(W.Z,{in:U,timeout:0,classNames:"cfd-account-card__add-server",unmountOnExit:!0},i().createElement(G,{ref:ae,onSelectAccount:S,is_disabled:l}))))}));const K={mt5:{real_synthetic_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("150+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("50+")}}},real_financial_stp_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("70+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("100+")}}},demo_financial_stp_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:100")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("70+")}}}},dxtrade:{demo_all_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("110+")}}},real_all_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("110+")}}},real_synthetic_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("20+")}}},real_financial_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:1000")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("90+")}}},eu_real_financial_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("90+")}}},au_real_financial_specs:{leverage:{key:function(){return(0,m.localize)("Leverage")},value:function(){return(0,m.localize)("Up to 1:30")}},"margin-call":{key:function(){return(0,m.localize)("Margin call")},value:function(){return(0,m.localize)("100%")}},"stop-out-level":{key:function(){return(0,m.localize)("Stop out level")},value:function(){return(0,m.localize)("50%")}},"number-of-assets":{key:function(){return(0,m.localize)("Number of assets")},value:function(){return(0,m.localize)("90+")}}}}};const Z=function(e){var t,a=e.has_cfd_account_error,n=e.standpoint,r=e.is_loading,o=e.is_logged_in,c=e.onSelectAccount,l=e.openAccountTransfer,s=e.platform,u=e.current_list,d=e.openPasswordManager,_=Object.keys(u).find((function(e){return e.startsWith("".concat(s,".demo.dxtrade"))}))||"";return i().createElement("div",{className:"cfd-demo-accounts-display","data-testid":"dt_cfd_demo_accounts_display"},r?i().createElement(y,null):i().createElement(Y,{key:"cfd",title:(0,m.localize)("Deriv X"),type:{category:"demo",platform:"dxtrade",type:"all"},is_disabled:a||n.malta,is_logged_in:o,existing_accounts_data:(t="dxtrade",Object.keys(u).some((function(e){return e.startsWith("".concat(s,".demo.").concat(t))&&1===u[e].enabled}))?Object.keys(u).filter((function(e){return e.startsWith("".concat(s,".demo.").concat(t))})).reduce((function(e,t){return e.push(u[t]),e}),[]):void 0),commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){return c({category:"demo",platform:"dxtrade",type:"all"})},onPasswordManager:d,onClickFund:function(){return l(u[_],{category:"demo",type:"all"})},platform:s,descriptor:(0,m.localize)("Trade CFDs on forex, derived indices, cryptocurrencies, and commodities with high leverage."),specs:K.dxtrade.demo_all_specs,has_banner:!0}))};const Q=function(e){var t=e.is_eu,a=e.is_eu_country,n=e.has_maltainvest_account,r=e.has_cfd_account_error,o=e.openAccountNeededModal,c=e.standpoint,l=e.is_loading,s=e.is_logged_in,u=e.isSyntheticCardVisible,d=e.isFinancialCardVisible,_=e.onSelectAccount,f=e.openAccountTransfer,p=e.platform,g=e.current_list,h=e.openPasswordManager,v=e.residence,b=e.toggleMT5TradeModal,w=s&&t||!s&&a,E=function(e){return Object.keys(g).find((function(t){return t.startsWith("".concat(p,".demo.").concat(e))}))||""},x=i().useMemo((function(){var e=s&&t||!s&&a;return"au"===v?K[p].au_real_financial_specs:e?K[p].eu_real_financial_specs:K[p].real_financial_specs}),[s,t,a,v,p]);return i().createElement(i().Fragment,null,l?i().createElement(y,null):i().createElement("div",{className:"cfd-demo-accounts-display","data-testid":"dt_cfd_demo_accounts_display"},u("demo")&&i().createElement(Y,{title:(0,m.localize)("Derived"),type:{category:"demo",type:"synthetic",platform:p},is_disabled:r||c.malta,is_logged_in:s,existing_accounts_data:g[E("synthetic")],commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){return _({category:"demo",type:"synthetic",platform:p})},onPasswordManager:h,onClickFund:function(){return f(g[E("synthetic")],{category:"demo",type:"synthetic"})},platform:p,descriptor:(0,m.localize)("Trade CFDs on our synthetics, baskets, and derived FX."),specs:K[p].real_synthetic_specs,has_banner:!0,toggleMT5TradeModal:b}),d()&&i().createElement(Y,{title:w?(0,m.localize)("CFDs"):(0,m.localize)("Financial"),is_disabled:r,is_logged_in:s,is_eu:w,type:{category:"demo",type:"financial",platform:p},existing_accounts_data:Object.keys(g).some((function(e){return e.startsWith("".concat(p,".demo.financial"))}))?Object.keys(g).filter((function(e){return e.startsWith("".concat(p,".demo.financial"))})).reduce((function(e,t){return e.push(g[t]),e}),[]):void 0,commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){t&&!n&&c.iom?o("maltainvest",(0,m.localize)("Deriv Multipliers"),(0,m.localize)("demo CFDs")):_({category:"demo",type:"financial",platform:p})},onPasswordManager:h,onClickFund:function(){return f(g[E("financial")],{category:"demo",type:"financial"})},platform:p,descriptor:M(p,w),specs:x,has_banner:!0,toggleMT5TradeModal:b})))};var ee=function(e){var t=e.has_real_account,a=e.is_accounts_switcher_on,n=e.is_eu,r=e.is_eu_country,o=e.has_cfd_account_error,c=e.is_virtual,l=e.isSyntheticCardVisible,s=e.isFinancialCardVisible,u=e.isDxtradeAllCardVisible,f=e.onSelectAccount,p=e.realSyntheticAccountsExistingData,g=e.realFinancialAccountsExistingData,h=e.openAccountTransfer,v=e.isAccountOfTypeDisabled,y=e.current_list,w=e.openPasswordManager,E=e.platform,x=e.standpoint,S=e.is_logged_in,z=e.toggleAccountsDialog,k=e.toggleMT5TradeModal,A=e.toggleShouldShowRealAccountsList,T=e.residence,D=e.openDerivRealAccountNeededModal,C=e.should_enable_add_button,O=e.setIsAcuityModalOpen,F=e.real_account_creation_unlock_date,P=e.setShouldShowCooldownModal,N=S&&n||!S&&r,j=i().useMemo((function(){var e=S&&n||!S&&r;return"au"===T?K[E].au_real_financial_specs:e?K[E].eu_real_financial_specs:K[E].real_financial_specs}),[T,S,n,r,E]),L=function(e){C?D():f({type:e,category:"real",platform:E})},R=function(e){return"dxtrade"===E?h(y[(0,d.getAccountListKey)(e,E)],{category:e.account_type,type:(0,d.getCFDAccountKey)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:E})}):h(e,{category:e.account_type,type:(0,d.getCFDAccountKey)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:"mt5"})})},I=function(e){if(o)return!0;if("synthetic"===e&&x.malta)return!0;if(n){var a=(0,d.getAccountTypeFields)({category:"real",type:e});return v(null==a?void 0:a.account_type)}switch(e){case"synthetic":case"financial":return!C&&!t;default:return!1}},V=function(e){var t="all"===e?"".concat(E,".real.").concat(E,"@").concat(e):"".concat(E,".real.").concat(e);return Object.keys(y).some((function(e){return e.startsWith(t)&&(a=y[e],"dxtrade"!==E||1===a.enabled);var a}))?Object.keys(y).filter((function(e){return e.startsWith(t)})).reduce((function(e,t){return e.push(y[t]),e}),[]):void 0};p(V("synthetic")),g(V("financial"));var B=[l("real")&&i().createElement(Y,{key:"real.synthetic",has_cfd_account_error:o,title:"mt5"===E?(0,m.localize)("Derived"):(0,m.localize)("Synthetic"),has_real_account:t,is_accounts_switcher_on:a,is_disabled:I("synthetic"),is_logged_in:S,type:{category:"real",type:"synthetic",platform:E},existing_accounts_data:V("synthetic"),commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){return L("synthetic")},onPasswordManager:w,onClickFund:R,platform:E,descriptor:"mt5"===E?(0,m.localize)("Trade CFDs on our synthetics, baskets, and derived FX."):(0,m.localize)("Trade CFDs on our synthetic indices that simulate real-world market movements."),specs:K[E].real_synthetic_specs,is_virtual:c,toggleShouldShowRealAccountsList:A,toggleAccountsDialog:z,toggleMT5TradeModal:k}),s()&&i().createElement(Y,{key:"real.financial",has_real_account:t,is_disabled:I("financial"),title:N?(0,m.localize)("CFDs"):(0,m.localize)("Financial"),type:{category:"real",type:"financial",platform:E},existing_accounts_data:V("financial"),commission_message:(0,m.localize)("No commission"),onSelectAccount:function(){return L("financial")},onPasswordManager:w,onClickFund:R,platform:E,descriptor:M(E,N),specs:j,is_accounts_switcher_on:a,is_eu:N,is_logged_in:S,is_virtual:c,toggleShouldShowRealAccountsList:A,toggleAccountsDialog:z,toggleMT5TradeModal:k,setIsAcuityModalOpen:O,real_account_creation_unlock_date:F,setShouldShowCooldownModal:P}),"dxtrade"===E&&u("real")&&i().createElement(Y,{commission_message:(0,m.localize)("No commission"),descriptor:(0,m.localize)("Trade CFDs on forex, derived indices, cryptocurrencies, and commodities with high leverage."),existing_accounts_data:V("all"),has_real_account:t,is_accounts_switcher_on:a,is_disabled:o||x.malta,is_eu:N,is_logged_in:S,is_virtual:c,key:"cfd",onClickFund:R,onPasswordManager:w,onSelectAccount:function(){return L("all")},platform:E,specs:K.dxtrade.real_all_specs,title:(0,m.localize)("Deriv X"),toggleAccountsDialog:z,toggleShouldShowRealAccountsList:A,type:{category:"real",type:"all",platform:E}})].filter(Boolean);return i().createElement("div",{"data-testid":"dt_cfd_real_accounts_display",className:b()("cfd-real-accounts-display")},i().createElement(_.DesktopWrapper,null,i().createElement(_.Carousel,{list:B,width:328,nav_position:"middle",show_bullet:!1,item_per_window:2,is_mt5:!0})),i().createElement(_.MobileWrapper,null,B))},te=["children","is_loading","loading_component"];function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function re(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var oe=function(e){var t=e.children,a=e.is_loading,n=e.loading_component,r=re(e,te),o=n;return a?i().createElement(o,null):i().createElement(_.Tabs,r,t)};const ie=(0,s.withRouter)((0,g.$j)((function(e){var t=e.client,a=e.modules,n=e.notifications,r=e.ui;return{beginRealSignupForMt5:a.cfd.beginRealSignupForMt5,checkShouldOpenAccount:a.cfd.checkShouldOpenAccount,country:t.account_settings.residence,client_email:t.email_address,createCFDAccount:a.cfd.createCFDAccount,current_list:a.cfd.current_list,dxtrade_tokens:a.cfd.dxtrade_tokens,landing_companies:t.landing_companies,isAccountOfTypeDisabled:t.isAccountOfTypeDisabled,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_eu:t.is_eu,is_eu_country:t.is_eu_country,is_virtual:t.is_virtual,is_mt5_allowed:t.is_mt5_allowed,is_dxtrade_allowed:t.is_dxtrade_allowed,mt5_disabled_signup_types:t.mt5_disabled_signup_types,dxtrade_disabled_signup_types:t.dxtrade_disabled_signup_types,has_maltainvest_account:t.has_maltainvest_account,can_upgrade_to:t.can_upgrade_to,disableCFDPasswordModal:a.cfd.disableCFDPasswordModal,dxtrade_accounts_list_error:t.dxtrade_accounts_list_error,is_compare_accounts_visible:a.cfd.is_compare_accounts_visible,is_mt5_trade_modal_visible:a.cfd.is_mt5_trade_modal_visible,is_fully_authenticated:t.is_fully_authenticated,openPasswordModal:a.cfd.enableCFDPasswordModal,openAccountNeededModal:r.openAccountNeededModal,getRealSyntheticAccountsExistingData:a.cfd.getRealSyntheticAccountsExistingData,getRealFinancialAccountsExistingData:a.cfd.getRealFinancialAccountsExistingData,is_loading:t.is_populating_mt5_account_list,residence:t.residence,has_mt5_real_account_error:t.has_account_error_in_mt5_real_list,has_mt5_demo_account_error:t.has_account_error_in_mt5_demo_list,has_dxtrade_real_account_error:t.has_account_error_in_dxtrade_real_list,has_dxtrade_demo_account_error:t.has_account_error_in_dxtrade_demo_list,has_real_account:t.has_active_real_account,setAccountType:a.cfd.setAccountType,setCFDPasswordResetModal:a.cfd.setCFDPasswordResetModal,setCurrentAccount:a.cfd.setCurrentAccount,standpoint:t.standpoint,toggleCompareAccounts:a.cfd.toggleCompareAccountsModal,toggleMT5TradeModal:a.cfd.toggleMT5TradeModal,is_accounts_switcher_on:r.is_accounts_switcher_on,openTopUpModal:r.openTopUpModal,NotificationMessages:r.notification_messages_ui,onMount:a.cfd.onMount,onUnmount:a.cfd.onUnmount,refreshNotifications:n.refreshNotifications,toggleAccountsDialog:r.toggleAccountsDialog,toggleShouldShowRealAccountsList:r.toggleShouldShowRealAccountsList,upgradeable_landing_companies:t.upgradeable_landing_companies,is_dark_mode_on:r.is_dark_mode_on,disableApp:r.disableApp,enableApp:r.enableApp,is_reset_trading_password_modal_visible:r.is_reset_trading_password_modal_visible,toggleResetTradingPasswordModal:r.setResetTradingPasswordModalOpen,mt5_verification_code:t.verification_code.trading_platform_mt5_password_reset,dxtrade_verification_code:t.verification_code.trading_platform_dxtrade_password_reset,mt5_status_server:t.website_status.mt5_status,openDerivRealAccountNeededModal:r.openDerivRealAccountNeededModal,setIsAcuityModalOpen:r.setIsAcuityModalOpen,setShouldShowCooldownModal:r.setShouldShowCooldownModal,real_account_creation_unlock_date:t.real_account_creation_unlock_date}}))((function(e){var t=ae(i().useState(!1),2),a=t[0],n=t[1],r=ae(i().useState(!1),2),o=r[0],c=r[1],l=ae(i().useState(0),2),s=l[0],f=l[1],g=ae(i().useState(!1),2),v=g[0],b=g[1],y=ae(i().useState(!1),2),k=y[0],A=y[1],D=ae(i().useState({is_visible:!1,selected_login:"",selected_account:"",selected_account_type:"",selected_account_group:"",selected_server:""}),2),M=D[0],C=D[1];i().useEffect((function(){return P(F()),O(),e.refreshNotifications(),e.onMount(),function(){e.onUnmount()}}),[]),i().useEffect((function(){e.checkShouldOpenAccount(),e.is_logged_in&&["demo","real"].forEach((function(e){var t=G(e)||J(e)||H();"real"===e&&o!==t&&c(t),"demo"===e&&a!==t&&n(t)})),e.is_logged_in||o&&a||(c(!0),n(!0)),"#demo"===window.location.hash&&(n(!0),f(1))}));var O=function(){/reset-password/.test(e.location.hash)&&e.setCFDPasswordResetModal(!0)},F=function(){return o?0:a?1:e.location.hash?/demo/.test(e.location.hash)?1:0:void 0},P=function(e){if(void 0!==e){var t={};1===e?t.is_demo_tab=!0:0===e&&(t.is_demo_tab=!1),s!==e&&(t.active_index=e),(0,d.isEmptyObject)(t)||(f(t.active_index),b(t.is_demo_tab))}},N=function(t,a){"real"===a.category?(t.platform===d.CFD_PLATFORMS.DXTRADE?sessionStorage.setItem("cfd_transfer_to_login_id",t.account_id):sessionStorage.setItem("cfd_transfer_to_login_id",t.login),e.disableCFDPasswordModal(),e.history.push(d.routes.cashier_acc_transfer)):(e.setCurrentAccount(t,a),e.openTopUpModal())},W=function(e,t,a,n,r){C((function(o){return{is_visible:!o.is_visible,selected_login:"string"==typeof e?e:"",selected_account:"string"==typeof t?t:"",selected_account_group:a,selected_account_type:n,selected_server:r}}))},X=function(t){e.setAccountType(t),e.openPasswordModal()},q=function(e,t){return Object.keys(ne).some((function(a){return a.startsWith("".concat(De,".").concat(e,".").concat(t))}))},G=function(t){var a=e.platform,n=e.landing_companies,r=q(t,"synthetic"),o=q(t,"financial");return!r&&!o&&(!(!e.is_dxtrade_allowed||e.is_logged_in)||(0,d.isLandingCompanyEnabled)({landing_companies:n,platform:a,type:"all"}))},J=function(t){var a=e.platform,n=e.is_eu,r=e.is_eu_country,o=e.landing_companies,i=e.is_logged_in,c=q(t,"synthetic"),l=q(t,"financial");return!(!i&&r)&&(!(n&&!c&&a===d.CFD_PLATFORMS.DXTRADE)&&(!(!c&&!l&&a===d.CFD_PLATFORMS.DXTRADE)&&((0,d.isLandingCompanyEnabled)({landing_companies:o,platform:a,type:"gaming"})||!i)))},H=function(){var t=e.platform,a=e.landing_companies,n=e.is_logged_in,r=q("real","synthetic"),o=q("real","financial");return!(!r&&!o&&t===d.CFD_PLATFORMS.DXTRADE)&&(!n||(0,d.isLandingCompanyEnabled)({landing_companies:a,platform:t,type:"financial"}))},$=e.account_status,Y=e.beginRealSignupForMt5,K=e.country,te=e.createCFDAccount,ne=e.current_list,re=e.dxtrade_tokens,ie=e.dxtrade_accounts_list_error,ce=e.isAccountOfTypeDisabled,le=e.is_accounts_switcher_on,se=e.is_dark_mode_on,ue=e.is_eu,de=e.is_eu_country,_e=e.is_loading,me=e.is_logged_in,fe=e.is_logging_in,pe=e.is_mt5_allowed,ge=e.is_mt5_trade_modal_visible,he=e.is_dxtrade_allowed,ve=e.is_virtual,be=e.landing_companies,ye=e.has_maltainvest_account,we=e.has_mt5_real_account_error,Ee=e.has_mt5_demo_account_error,xe=e.has_dxtrade_real_account_error,Se=e.has_dxtrade_demo_account_error,ze=e.mt5_disabled_signup_types,ke=e.dxtrade_disabled_signup_types,Ae=e.has_real_account,Te=e.NotificationMessages,De=e.platform,Me=e.openAccountNeededModal,Ce=e.residence,Oe=e.standpoint,Fe=e.toggleAccountsDialog,Pe=e.toggleMT5TradeModal,Ne=e.toggleShouldShowRealAccountsList,je=e.upgradeable_landing_companies,Le=e.is_reset_trading_password_modal_visible,Re=e.toggleResetTradingPasswordModal,Ie=e.enableApp,Ve=e.disableApp,Be=e.mt5_verification_code,Ue=e.dxtrade_verification_code,We=e.mt5_status_server,Xe=e.getRealSyntheticAccountsExistingData,qe=e.getRealFinancialAccountsExistingData,Ge=e.openDerivRealAccountNeededModal,Je=e.setIsAcuityModalOpen,He=e.real_account_creation_unlock_date,$e=e.setShouldShowCooldownModal,Ye=me&&!Ae&&(null==je?void 0:je.length)>0,Ke=Ye&&d.CFD_PLATFORMS.MT5&&o;if(!K&&me||fe)return i().createElement(_.Loading,null);var Ze=function(e){return null==e?void 0:e.map((function(e){return e.all})).some((function(e){return 1===e}))},Qe=Ze(We.demo),et=Ze(We.real),tt=v?Qe||Ee||ze.demo:et||we||ze.real,at=v?Se||ke.demo:xe||ke.real,nt=De===d.CFD_PLATFORMS.MT5?tt:at||!!ie,rt=De===d.CFD_PLATFORMS.MT5?Be:Ue;return De!==d.CFD_PLATFORMS.DXTRADE||he?me&&!be||_e?i().createElement(_.Loading,null):i().createElement(i().Fragment,null,pe||De===d.CFD_PLATFORMS.DXTRADE||!me?i().createElement("div",{className:"cfd-dashboard__container"},i().createElement(Te,{is_mt5:!0,is_notification_loaded:k,stopNotificationLoading:function(){A(!0)}}),i().createElement("div",{className:"cfd-dashboard"},i().createElement("div",{className:"cfd-dashboard__welcome-message"},i().createElement("h1",{className:"cfd-dashboard__welcome-message--heading"},T(me,De))),me&&nt&&i().createElement("div",{className:"cfd-dashboard__accounts-error"},i().createElement(_.Text,{as:"p",className:"cfd-dashboard__accounts-error-message",line_height:"l",size:"xxs",color:"prominent",weight:"normal",align:"center"},i().createElement(m.Localize,{i18n_default_text:"Due to an issue on our server, some of your {{platform}} accounts are unavailable at the moment. Please bear with us and thank you for your patience.",values:{platform:(0,d.getCFDPlatformLabel)(De)}}))),i().createElement("div",{className:"cfd-dashboard__accounts-display"},i().createElement(L.default,{is_visible:M.is_visible,platform:De,selected_login:M.selected_login,selected_account:M.selected_account,selected_account_group:M.selected_account_group,selected_account_type:M.selected_account_type,selected_server:M.selected_server,toggleModal:W}),i().createElement(oe,{active_index:s,top:!0,center:!0,is_loading:_e,is_logged_in:me,loading_component:w,onTabItemClick:P,should_update_hash:!0},o&&i().createElement("div",{label:(0,m.localize)("Real account"),hash:"real"},i().createElement(i().Fragment,null,Ye&&i().createElement(h,{onClickSignup:function(){He?$e(!0):Y()},platform:De}),i().createElement(ee,{is_accounts_switcher_on:le,is_eu:ue,is_eu_country:de,is_logged_in:me,has_cfd_account_error:De===d.CFD_PLATFORMS.MT5?et||ze.real:et||ke.real||!!ie,current_list:ne,account_status:$,onSelectAccount:te,realSyntheticAccountsExistingData:Xe,realFinancialAccountsExistingData:qe,is_virtual:ve,isSyntheticCardVisible:J,isFinancialCardVisible:H,isDxtradeAllCardVisible:G,openAccountTransfer:N,openPasswordManager:W,platform:De,isAccountOfTypeDisabled:ce,has_real_account:Ae,standpoint:Oe,toggleAccountsDialog:Fe,toggleMT5TradeModal:Pe,toggleShouldShowRealAccountsList:Ne,residence:Ce,openDerivRealAccountNeededModal:Ge,should_enable_add_button:Ke,setIsAcuityModalOpen:Je,real_account_creation_unlock_date:He,setShouldShowCooldownModal:$e}))),a&&i().createElement("div",{label:(0,m.localize)("Demo account"),hash:"demo"},De===d.CFD_PLATFORMS.DXTRADE&&i().createElement(Z,{is_logged_in:me,has_cfd_account_error:Qe||ke.demo||!!ie,standpoint:Oe,is_loading:_e,current_list:ne,onSelectAccount:te,landing_companies:be,openAccountTransfer:N,openPasswordManager:W,platform:De}),De===d.CFD_PLATFORMS.MT5&&i().createElement(Q,{is_eu:ue,is_eu_country:de,is_logged_in:me,has_maltainvest_account:ye,has_cfd_account_error:Qe||ze.demo,openAccountNeededModal:Me,standpoint:Oe,is_loading:_e,isSyntheticCardVisible:J,isFinancialCardVisible:H,current_list:ne,onSelectAccount:te,landing_companies:be,openAccountTransfer:N,openPasswordManager:W,toggleMT5TradeModal:Pe,platform:De,residence:Ce}))),i().createElement(E.default,{platform:De,is_demo_tab:v,openPasswordModal:X,is_real_enabled:o,real_account_creation_unlock_date:He,setShouldShowCooldownModal:$e,has_unmerged_account:q("real","synthetic")||q("real","financial")}),i().createElement(U,null),i().createElement(x.default,{openPasswordModal:X}),i().createElement(S.default,{current_list:ne,is_open:ge,onPasswordManager:W,toggleModal:Pe,is_eu_user:me&&ue||!me&&de}),i().createElement("div",{className:"cfd-dashboard__maintenance"},i().createElement(_.Icon,{icon:"IcAlertWarning",size:(0,d.isMobile)()?28:16,className:"cfd-dashboard__maintenance-icon"}),i().createElement("div",{className:"cfd-dashboard__maintenance-text"},De===d.CFD_PLATFORMS.DXTRADE&&i().createElement(m.Localize,{i18n_default_text:"Server maintenance starts at 06:00 GMT every Sunday and may last up to 2 hours. You may experience service disruption during this time."}),De===d.CFD_PLATFORMS.MT5&&i().createElement(m.Localize,{i18n_default_text:"Server maintenance starts at 01:00 GMT every Sunday, and this process may take up to 2 hours to complete. Service may be disrupted during this time."})))),i().createElement(j,{platform:De,active_index:s,is_dark_mode_on:se,dxtrade_tokens:re}),i().createElement(V.default,{platform:De}),i().createElement(R.default,{platform:De,has_suspended_account:nt}),i().createElement(I.default,null),De===d.CFD_PLATFORMS.MT5&&me&&i().createElement(z.default,{openPasswordModal:X}),i().createElement(B.default,{platform:De}),i().createElement(p(),{platform:De,enableApp:Ie,disableApp:Ve,toggleResetTradingPasswordModal:Re,is_visible:Le,is_loading:_e,verification_code:rt}))):i().createElement(_.PageError,{buttonSize:"medium",header:i().createElement(m.Localize,{i18n_default_text:"{{platform_name_mt5}} is not available in {{country}}",values:{country:K,platform_name_mt5:(0,d.getPlatformSettings)("mt5").name},components:[i().createElement("br",{key:0})]}),messages:[i().createElement(m.Localize,{key:0,i18n_default_text:"Please explore our other platforms."})],redirect_urls:[d.routes.trade,d.routes.bot],redirect_labels:[i().createElement(m.Localize,{key:0,i18n_default_text:"Explore {{platform_name_trader}}",values:{platform_name_trader:(0,d.getPlatformSettings)("trader").name}}),i().createElement(m.Localize,{key:1,i18n_default_text:"Explore {{platform_name_dbot}}",values:{platform_name_dbot:(0,d.getPlatformSettings)("dbot").name}})]})):i().createElement(u.Redirect,{to:d.routes.mt5})})));function ce(){return ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ce.apply(this,arguments)}var le,se=i().lazy((function(){return a.e("404").then(a.bind(a,"./src/Modules/Page404/index.js"))})),ue={path:d.routes.error404,component:se,getTitle:function(){return(0,m.localize)("Error 404")}};const de=function(){return le||(le=[{path:d.routes.dxtrade,component:function(e){return i().createElement(ie,ce({},e,{platform:"dxtrade"}))},getTitle:function(){return(0,m.localize)("Deriv X")},is_authenticated:!1},{path:d.routes.mt5,component:function(e){return i().createElement(ie,ce({},e,{platform:"mt5"}))},getTitle:function(){return(0,m.localize)("MT5")},is_authenticated:!1}]).push(ue),le};var _e=function e(t,a){var n;return a.some((function(a){var r;try{r=(0,s.matchPath)(t,a)}catch(e){if(/undefined/.test(e.message))return}return r?(n=a,!0):!!a.routes&&(n=e(t,a.routes))})),n},me=["active_class","to","children"];function fe(){return fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},fe.apply(this,arguments)}function pe(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ge=function(e){var t=e.active_class,a=e.to,n=e.children,r=pe(e,me),o=i().useContext(d.PlatformContext).is_dashboard,c=function(e){return/^\//.test(e)?e:"/".concat(e||"")}(a),l=_e(c,de({is_dashboard:o}));if(!l)throw new Error("Route not found: ".concat(a));return a?i().createElement(u.NavLink,fe({to:c,activeClassName:t||"active",exact:l.exact},r),n):i().createElement("a",r,n)};ge.propTypes={active_class:r().string,children:r().oneOfType([r().object,r().array,r().string]),to:r().string};function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},he.apply(this,arguments)}function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function be(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){ye(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const we=function(e){return i().createElement(u.Route,{exact:e.exact,path:e.path,render:function(t){var a,n=null;if(e.component===u.Redirect){var r=e.to;if(e.path===d.routes.index)r=t.location.pathname.toLowerCase().replace(e.path,"");n=i().createElement(u.Redirect,{to:r})}else if(!e.is_authenticated||e.is_logged_in||e.is_logging_in){var o,c=(null!==(o=e.routes)&&void 0!==o?o:[]).reduce((function(e,t){return be(be({},e),t.subroutes.find((function(e){return e.default})))}),{}),l=!(0,d.isEmptyObject)(c),s=(0,d.removeBranchName)(location.pathname);n=i().createElement(i().Fragment,null,l&&s===e.path&&i().createElement(u.Redirect,{to:c.path}),i().createElement(e.component,he({},t,{routes:e.routes})))}else(0,d.redirectToLogin)(e.is_logged_in,(0,m.getLanguage)());var _=(null===(a=e.getTitle)||void 0===a?void 0:a.call(e))||"";return document.title="".concat(_," | ").concat(d.default_title),n}})};function Ee(){return Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ee.apply(this,arguments)}const xe=function(e){var t=i().useContext(d.PlatformContext).is_dashboard;return i().createElement(i().Suspense,{fallback:function(){return i().createElement("div",null,i().createElement(m.Localize,{i18n_default_text:"Loading..."}))}},i().createElement(u.Switch,null,de({is_dashboard:t}).map((function(t){return i().createElement(we,Ee({key:t.path},t,e))}))))};var Se=function(e){var t=e.header,a=e.message,n=e.is_dialog,r=e.redirect_label,o=e.redirectOnClick,c=e.should_show_refresh,l=void 0===c||c?(0,m.localize)("Please refresh this page to continue."):"";return n?i().createElement(_.Dialog,{title:t||(0,m.localize)("There was an error"),is_visible:!0,confirm_button_text:r||(0,m.localize)("Ok"),onConfirm:o||function(){return location.reload()}},a||(0,m.localize)("Sorry, an error occured while processing your request.")):i().createElement(_.PageError,{header:t||(0,m.localize)("Somethings not right"),messages:a?[a,l]:[(0,m.localize)("Sorry, an error occured while processing your request."),l],redirect_urls:[d.routes.trade],redirect_labels:[r||(0,m.localize)("Refresh")],buttonOnClick:o||function(){return location.reload()}})};Se.propTypes={header:r().string,is_dialog:r().bool,message:r().oneOfType([r().node,r().string,r().object]),redirect_label:r().string,redirectOnClick:r().func,should_show_refresh:r().bool,type:r().string};const ze=Se;var ke=function(e){return e.has_error?i().createElement(ze,e.error):i().createElement(xe,{is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,passthrough:e.passthrough})};ke.propTypes={error:l.PropTypes.objectOrObservableObject,has_error:r().bool,is_logged_in:r().bool,is_logging_in:r().bool,is_virtual:r().bool,passthrough:r().object};const Ae=(0,s.withRouter)((0,g.$j)((function(e){var t=e.client,a=e.common;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,error:a.error,has_error:a.has_error}}))(ke));var Te=a("mobx"),De=a("./src/Stores/Modules/CFD/cfd-store.js");function Me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ce(e,t,a){return t&&Me(e.prototype,t),a&&Me(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var Oe=Ce((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cfd=new De.default({root_store:t})}));function Fe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pe(e,t,a){return t&&Fe(e.prototype,t),a&&Fe(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ne,je,Le,Re=Pe((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t.client,this.common=t.common,this.modules=new Oe(this,t),this.ui=t.ui,this.gtm=t.gtm,this.rudderstack=t.rudderstack,this.pushwoosh=t.pushwoosh,this.notifications=t.notifications})),Ie=a("./src/_common/utility.js");const Ve=(je=!1,Le=new Ie.PromiseClass,{init:function(e){je||(Ne=e,Le.resolve(Ne.server_time),je=!0)},get:function(){return je&&Ne.server_time?Ne.server_time.clone():void 0},timePromise:function(){return je?Promise.resolve(Ne.server_time):Le.promise}});var Be;(0,Te.configure)({enforceActions:"observed"});const Ue=function(e,t){return Be||(Ve.init(e.common),(0,d.setWebsocket)(t),Be=new Re(e))};function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw r}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var qe=function(e){var t=e.passthrough,a=We(i().useState(Ue(t.root_store,t.WS)),1)[0];return i().createElement(g.z1,{store:a},i().createElement(c.g3,{store:a},i().createElement(i().Fragment,null,i().createElement(Ae,null))))};qe.propTypes={passthrough:r().shape({root_store:r().object,WS:r().object})};const Ge=qe},"../stores/src/index.ts":(e,t,a)=>{"use strict";a.d(t,{g3:()=>f,Pi:()=>n.Pi,oR:()=>p});var n=a("../../node_modules/mobx-react-lite/es/index.js"),r=a("react"),o=a.n(r),i=a("mobx"),c=a("../../node_modules/mobx-persist-store/lib/esm5/index.js");function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,(0,i.makeObservable)(this,{count:i.observable,increment:i.action.bound,decrement:i.action.bound,unmount:i.action.bound}),(0,c.Ko)(this,{name:"CounterStore",properties:["count"],storage:window.localStorage})}var t,a,n;return t=e,(a=[{key:"increment",value:function(){this.count=++this.count}},{key:"decrement",value:function(){this.count=--this.count}},{key:"unmount",value:function(){(0,c.Rf)(this)}}])&&l(t.prototype,a),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){_(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=(0,r.createContext)(null),f=function(e){var t=e.children,a=e.store,n=(0,r.useMemo)((function(){return d(d({},a),{},{counter:new s})}),[a]);return(0,r.useEffect)((function(){return function(){return n.counter.unmount()}}),[n]),o().createElement(m.Provider,{value:n},t)},p=function(){var e=(0,r.useContext)(m);if(!e)throw new Error("useStore must be used within StoreContext");return e}}}]);