{"version":3,"file":"bot/js/bot.bot-web-ui-app.ba4b06bcfc0bf7f3ea8a.js","mappings":"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KAAM,SAKVzW,QAAQokD,YAAc,EAOtBpkD,QAAQqkD,mBAAqB,cC7B7BrkD,QAAQskD,IAAIC,QAAU,CAClB,2BACA,OACA,gCACA,qBACA,IACA,QACA,iCACA,qBACA,IACA,SACA,gCACA,qBACA,IACA,IAEA,6CACA,gCACA,qBACA,IAEA,2BACA,MACA,qBACA,IACA,OACA,qBACA,qBACA,IACA,QACA,qBACA,KAEA,iDACA,mBACA,8BACA,IAEA,iCACA,sCACA,IAEA,gBACA,iBACA,oBACA,sBACA,kBACA,IAGA,4BACA,sBACA,eACA,gBACA,IAEA,sBACA,iBACA,sBACA,kBACA,IAEA,kBACA,+BACA,sBACA,oBACA,sBACA,IAEA,0BACA,qBACA,0BACA,6BACA,yBACA,IAEA,qCACA,oBACA,qBACA,0BACA,yBACA,6BACA,8BACA,iCACA,IAEA,wDACA,qBACA,IAEA,8BACA,sBACA,IAEA,2BACA,sBACA,eACA,gBACA,cACA,aACA,sBACA,mBACA,IAEA,0BACA,qBACA,0BACA,6BACA,yBACA,IAEA,0BACA,iBACA,sBACA,UACA,WACA,IAIA,iDACA,qBACA,IAEA,6BACA,iBACA,sBACA,UACA,WACA,YACA,aACA,gCACA,eACA,IAEA,uBACA,oBACA,6BACA,sBACA,kBACA,gBACA,mBACA,gCACA,oBACA,0BACA,sBACA,mBACA,IAEA,wBACA,mBACA,WACA,UACA,iBACA,iBACA,qBACA,sBAAqB,sCACUvkD,QAAQkC,QAAQsiD,eAAc,KAC7D,gBACA,6BACA,mBACA,IAEA,4BACA,qBACA,kBACA,IAEA,0BACA,sBACA,WACA,UACA,eACA,gBACA,eACA,6BACA,yBACA,IAEA,2BACA,yBACA,eACA,cACA,eACA,sBACA,iBACA,qBACA,8BACA,mBACA,IAEA,gCAA+B,sCACAxkD,QAAQkC,QAAQuiD,YAAW,KAC1D,IAEA,kCAAiC,sCACFzkD,QAAQkC,QAAQuiD,YAAW,KAC1D,IAEA,iCACA,cACA,eACA,iBACA,IAEA,gCACA,yBACA,eACA,cACA,eACA,IAEA,yBACA,yBACA,eACA,cACA,eACA,gBACA,eACA,sBACA,wCACA,kBACA,iBACA,0CACA,mBACA,oBACA,mBACA,8CACA,IAEA,+BACA,mBACA,cACA,eACA,qBACA,IAEA,gCACA,8CACA,8CACA,IAEA,cACA,yBACA,0BACA,+BACA,yBACA,IAEA,iBACA,4BACA,2BACA,mCACA,yBACA,IAEA,oBACA,mBACA,oBACA,qBACA,kBACA,yBACA,sBACA,mBACA,IAEA,qBACA,qBACA,cACA,IAEA,qBACA,qBACA,cACA,IAEA,uBACA,gBACA,mBACA,IAEA,sCACA,cACA,gBACA,qBACA,IAEA,iBACA,uBAEA,IAEA,kCACA,mBACA,qBACA,IAEA,uCACA,iBACA,IAEA,sBAEA,gDACA,gBACA,wBACA,qBACA,IAEA,qBAEA,kDACA,oBACA,4BACA,yBACA,IAGA,6BAEA,kDACA,oBACA,4BACA,yBACA,IAIA,+CAEA,kDACA,oBACA,4BACA,yBACA,IAEA,2CACA,kDACA,IAEA,iDACA,wBACA,IAEA,0BACA,kDACA,IAEA,wBACA,kDACA,oBACA,4BACA,IAEA,iCACA,uCACA,qBACA,uBACA,IAEA,kCACA,IAEA,kCACA,oBACA,sBACA,IAEA,yCACA,gBACA,IAEA,iBACA,iBACA,wBACA,iCACA,uBACA,wBACA,sBACA,oBACA,0BACA,IAEA,0BACA,mBACA,IAEA,iCACA,wBACA,IAEA,gCACA,8BACA,+BAEA,IAEA,+CACA,+BACA,IAEA,yBACA,yCACA,IAEA,uBACA,sBACA,IACA,mBACA,sBACA,eACA,IACA,yBACA,cACA,uBACA,IAEA,mCACA,mBACA,IAEA,sCACA,sBACA,IAEA,+BACA,qBACA,IAEA,+BACA,eACA,mBACA,IAEA,wBACA,mBACA,IAEA,kCACA,cACA,IAEA,4BACA,mBACA,iBACA,qBACA,IAMA,kGACA,qBACA,0BACA,6BACA,mBACA,IAEA,mBACA,iBACA,IAEA,8CACA,kBACA,IAEA,sBACA,mBACA,IAEA,iCACA,8BACA,eACA,IAEA,sBACA,cACA,gBACA,qBACA,IAEA,uBACA,cACA,IAEA,wBACA,aACA,cACA,IAEA,iCACA,sBACA,cACA,IAEA,wBACA,iBACA,mBACA,oBACA,IAEA,0BACA,qBACA,mBACA,IAEA,iCACA,cACA,IAEA,gCACA,cACA,IAEA,uCACA,qBACA,IAEA,wCACA,iBACA,mBACA,IAEA,2CACA,gBACA,qBACA,IAEA,4BACA,6BACA,aACA,cACA,aACA,gBACA,gBACA,kBACA,oBACA,IAEA,8BACA,mBACA,cACA,gBACA,IAEA,iDACA,iBACA,IAEA,4BACA,cACA,gBACA,qBACA,IAEA,yDACA,gBACA,IAIA,iCACA,sBACA,IAEA,wBACA,6BACA,sBACA,IAEA,wBACA,iBACA,IAEA,0BACA,qBACA,IAEA,mCACA,mBACA,qBACA,IAEA,iCACA,cACA,IAEA,0BACA,iBACA,oBACA,IAEA,wBAEA,mBACA,oBACA,IAEA,4BACA,6BACA,aACA,cACA,cACA,gBACA,oBACA,IAEA,4BACA,qBACA,qBACA,IAEA,4BACA,qBACA,qBACA,IAEA,sBACA,gBAEA,mBACA,gBACA,aACA,iBACA,0BACA,eACA,sBACA,uBACA,oBACA,IAEA,2BACA,mBAEA,IAEA,8BACA,cACA,gBACA,mBACA,IAEA,6BACA,wBACA,oBACA,IAEA,mCACA,eACA,IAEA,4BACA,eACA,IAEA,2DACA,sBACA,iBACA,IAEA,gCACA,cACA,IAEA,4BACA,2BACA,IAEA,6DACA,kCACA,gCACA,IAEA,uBACA,cACA,IAIA,2CACA,cACA,IAEA,4EACA,iDACA,cACA,IAEA,yBACA,oBACA,IAEA,wBAAuB,kBACZzkD,QAAQkC,QAAQwiD,OAAOC,SAAQ,KAC1C,mBAAkB,gBACT3kD,QAAQkC,QAAQwiD,OAAOE,UAAS,KACzC,IAEA,6BACA,gBACA,mBACA,cACA,IAEA,4BACA,gBACA,mBACA,wBACA,cACA,mBACA,IAEA,2BACA,uBACA,IAEA,uBACA,gBACA,mBACA,uBACA,IAEA,uBACA,cACA,sBACA,IAEA,sBACA,gBACA,mBACA,yBACA,wBACA,IAEA,wBACA,sBACA,oBACA,IAEA,yBACA,yBACA,IAEA,2BACA,8CACA,IAGA,mEACA,gEACA,4EACA,IAGA,uBACA,qCACA,8BACA,uBACA,oBACA,sBAEA,eACA,4CACA,IAEA,qBACA,kBACA,IAEA,2BACA,iBACA,IAEA,oBACA,gBACA,qBACA,sBACA,sBACA,uBACA,IAEA,2BACA,eACA,yBACA,IAEA,8BACA,gBACA,yBACA,IAEA,kDACA,oBACA,IAEA,oDACA,6BACA,IAEA,0BACA,oCACA,aACA,iBACA,IAEA,oCACA,mCACA,YACA,kBACA,iBACA,IAEA,qBACA,iDACA,gBACA,0BACA,eACA,IAEA,8BACA,mCACA,IAEA,8BACA,iCACA,IAEA,yBACA,mCACA,IAEA,mDACA,oCACA,IAEA,mDACA,kCACA,IAEA,8CACA,oCACA,IAEA,wBACA,8CACA,mCACA,IAEA,sBACA,mBAEA,mBACA,kBACA,0BACA,IAEA,4CACA,kDACA,IAEA,2CACA,eACA,IAEA,gDACA,eACA,gBACA,gBACA,sBACA,iBACA,uBACA,uBACA,IAEA,mEACA,eACA,gBACA,aACA,sBACA,2BACA,uBACA,qDACA,kDACA,6CACA,IAEA,uBACA,oBACA,iBACA,gBACA,eACA,sBACA,8BACA,oBACA,mBACA,IAEA,8BAEA,sBACA,8BACA,eACA,IAEA,kCACA,qBACA,IAEA,gCACA,qBACA,IAEA,4BACA,cACA,sBACA,eACA,IAEA,+BAEA,sBACA,sBACA,wBACA,IAgBA,iCACA,oBACA,qCACA,uBACA,qBACA,mBACA,6DACA,aACA,iBACA,kBACA,sBACA,oBACA,sBACA,kBACA,IAEA,mCACA,mBACA,6DACA,iBACA,kBACA,IA+BA,qCACA,eACA,6DACA,oBACA,aAEA,6BACA,uBACA,IAEA,uCACA,kBACA,6DACA,qBACA,oBACA,aACA,oBAEA,6BACA,uBACA,IAIA,uDACA,yDAEA,qBACA,uBACA,IAGA,0DACA,uDACA,4DACA,0DACA,sBACA,IAMA,wDACA,0DACA,uBACA,IAEA,4CACA,+CACA,eACA,6DACA,IAGA,kEACA,qEACA,oEACA,uEACA,0BACA,IAEA,kEACA,oEACA,gBACA,qBACA,6BACA,IAGA,8CACA,2CACA,6BAGA,yBACA,wBACA,uBACA,uBACA,oBACA,IAEA,gDACA,6CACA,wCACA,IAGA,6CACA,0CACA,+CACA,4CACA,gCACA,gBACA,aACA,sBACA,eACA,0BACA,eACA,IAEA,mEACA,+DACA,qEACA,kEAEA,4EACA,oBACA,eACA,sBACA,IAIA,gEACA,4DACA,kEACA,+DAEA,gBACA,uBACA,IAGA,2CACA,6CACA,eAGA,kBACA,cACA,kBACA,sBACA,YACA,qBACA,IAIA,8DACA,gEAEA,WACA,eACA,oBACA,IAGA,mDACA,qDACA,8BACA,IAEA,wDACA,0DACA,eACA,mBACA,qBACA,IAgBA,0CACA,4CACA,8BACA,iBACA,cACA,IAEA,2BACA,eACA,mBACA,IAEA,mCAAkC,gBACzB5kD,QAAQkC,QAAQwiD,OAAOG,QAAO,uBAC5B7kD,QAAQkC,QAAQwiD,OAAOC,SAAQ,KAC1C,IAEA,+BACA,iBACA,mBACA,yBACA,0BACA,IAEA,yBACA,eACA,+BACA,8BACA,oBACA,qBACA,6BACA,0BACA,yBACA,IAEA,mCACA,eACA,gBACA,+BACA,8BACA,mBACA,qBACA,6BACA,0BACA,yBACA,IAEA,2DACA,eACA,eACA,IAEA,4BACA,IAEA,6BACA,yBACA,mBACA,sBACA,IAEA,4DACA,oBACA,IAEA,8CACA,uCACA,IAEA,+BACA,kBACA,mBACA,qBACA,uBACA,2BACA,IAEA,6BACA,kBACA,mBACA,2BACA,yBACA,IAEA,mCACA,0CACA,IACA,gBC3tCJ3kD,QAAQqB,WAAa,SAAUyY,EAAKC,EAAOC,EAAQ8qC,EAAQC,EAAYC,GACnEhvD,KAAK8oD,aAAe,KAGpB9oD,KAAKivD,QAAU/2C,OAAO8L,GACtBhkB,KAAKkvD,OAASh3C,OAAO6L,GACrB/jB,KAAKmvD,MAAQ,IAAIplD,KAAKqlD,KAAKC,KAAKrvD,KAAKkvD,OAAQlvD,KAAKivD,SAClDjvD,KAAKsvD,SAAWN,E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AM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAMw2F,GAASE,WAAY,qBAC7B,CAAE12F,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAMw2F,GAASE,WAAY,uBAC7B,CAAE12F,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAMw2F,GAASE,WAAY,aAC7B,CAAE12F,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAMs2F,GAAOr+E,MAAO,OAAQuI,IAAK,GAAF,OAAK44B,EAAAA,EAAuB,sCAGjE71B,iBAAkB,CACd,CAAEvjB,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAM04B,IACR,CAAE14B,KAAMu2F,KAEZxuE,8BAA+B,CAAC,CAAE/nB,KAAM04B,IAAQ,CAAE14B,KAAMu2F,KACxDvnE,4BAA6B,CAAC,CAAEhvB,KAAM04B,IAAQ,CAAE14B,KAAM04B,IAAQ,CAAE14B,KAAM04B,IAAQ,CAAE14B,KAAM04B,KACtFrf,gBAAiB,CAAC,CAAErZ,KAAM04B,IAAQ,CAAE14B,KAAMu2F,IAAS,CAAEv2F,KAAM04B,KAC3D9d,gBAAiB,CACb,CAAE5a,KAAM04B,IACR,CAAE14B,KAAMu2F,IACR,CAAEv2F,KAAM04B,IACR,CAAE14B,KAAMw2F,GAASE,WAAY,mBAEjC57E,eAAgB,CACZ,CAAE9a,KAAM04B,IACR,CAAE14B,KAAMu2F,IACR,CAAEv2F,KAAM04B,IACR,CAAE14B,KAAM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","sources":["webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/server_time.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/network_monitor.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/constants/config.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/constants/messages.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/constants/save-type.ts","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blockly.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/images.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_defnoreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_defreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_callnoreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_callreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Functions/procedures_ifreturn.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_create_with.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_repeat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_length.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_isEmpty.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_indexOf.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_getIndex.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_setIndex.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_getSublist.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_split.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_sort.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/List/lists_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_repeat_ext.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_repeat.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_whileUntil.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_for.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_forEach.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Loops/controls_flow_statements.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Variable/variables_get.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Advanced/Variable/variables_set.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/after_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/check_result.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/read_details.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/After Purchase/trade_again.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/before_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/ask_price.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Before Purchase/payout.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/during_purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/sell_at_market.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/check_sell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/During Purchase/sell_price.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/bb_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/bba_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/ema_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/emaa_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/rsi_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/rsia_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/sma_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/smaa_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/macda_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/input_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_up.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/std_dev_multiplier_down.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/fast_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/slow_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Indicators/Parts/signal_ema_period.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/tick.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ticks.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ohlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/ohlc_values.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/readOhlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/get_ohlc.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/check_direction.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/tick_analysis.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/last_digit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tick Analysis/lastDigitList.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/is_candle_black.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/ohlc_values_in_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Candle/read_ohlc_obj.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/balance.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/barrier_offset.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/block_holder.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/loader.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/notify.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/notify_telegram.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/total_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/total_runs.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/useless_block.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Misc/console.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/epoch.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/timeout.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/todatetime.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Tools/Time/totimestamp.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_market.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_tradetype.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_contracttype.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_candleinterval.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_restartbuysell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_restartonerror.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_tradeoptions.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/trade_definition_multiplier.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/multiplier_stop_loss.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Binary/Trade Definition/multiplier_take_profit.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_compare.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/controls_if.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_boolean.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_operation.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_null.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_ternary.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Logic/logic_negate.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_change.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_constant.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_constrain.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_modulo.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number_positive.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_number_property.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_on_list.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_random_float.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_random_int.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_round.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_arithmetic.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_single.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Math/math_trig.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_join.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_statement.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_append.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_length.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_isEmpty.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_indexOf.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_charAt.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_getSubstring.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_changeCase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_trim.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_print.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/blocks/Text/text_prompt_ext.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/dbot-store.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/ticks_service.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/cliTools.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/sanitize.js","webpack://@deriv/bot-web-ui/../indicators/src/utils/math.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/simple-moving-average.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/bollinger-bands.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/exponential-moving-average.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/macd.js","webpack://@deriv/bot-web-ui/../indicators/src/indicators/relative-strength-index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/IndicatorsInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/ToolsInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/CandleInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/MiscInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/TicksInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/BotInterface.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Balance.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/state/constants.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/state/actions/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Purchase.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/state/reducers/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Ticks.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Total.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Sell.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/OpenContract.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/trade/Proposal.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/Interface/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/interpreter.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/xml/main.xml","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/dbot.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/block_render_svg_vertical.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/connection.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/constant.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/css.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field_image.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field_textinput.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/gesture.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/icon.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/block.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/block_svg.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/contextmenu.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/data_category.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field_dropdown.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/field.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/flyout_base.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/procedures.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/workspace.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/workspace_svg.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/tooltip.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/inject.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/scratch_block_comment.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/utils.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/variable_map.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/variables.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/workspace_audio.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/xml.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/shared.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/backward-compatibility.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/utils/index.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/active-symbols.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/api-middleware.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/appId.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/api-base.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/account-limits.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/api-helpers.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/contracts-for.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/api/trading-times.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/broadcast.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/services/tradeEngine/utils/helpers.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/error-config.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/error.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/contract.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/html-helper.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/date-time-helper.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/colours.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/strategy-helper.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/error-handling.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/local-storage.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/observer.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/pending-promise.js","webpack://@deriv/bot-web-ui/../bot-skeleton/src/utils/workspace.js","webpack://@deriv/bot-web-ui/./src/public-path.ts","webpack://@deriv/bot-web-ui/../stores/src/storeContext.ts","webpack://@deriv/bot-web-ui/../api/src/APIContext.ts","webpack://@deriv/bot-web-ui/../api/src/useAPI.ts","webpack://@deriv/bot-web-ui/../api/src/APIProvider.tsx","webpack://@deriv/bot-web-ui/../api/src/useSubscription.ts","webpack://@deriv/bot-web-ui/../stores/src/useStore.ts","webpack://@deriv/bot-web-ui/../stores/src/providers/ExchangeRatesProvider.tsx","webpack://@deriv/bot-web-ui/../stores/src/stores/BaseStore.ts","webpack://@deriv/bot-web-ui/../stores/src/stores/ExchangeRatesStore.ts","webpack://@deriv/bot-web-ui/../stores/src/stores/FeatureFlagsStore.ts","webpack://@deriv/bot-web-ui/../stores/src/storeProvider.tsx","webpack://@deriv/bot-web-ui/./src/stores/app-store.js","webpack://@deriv/bot-web-ui/./src/constants/bot-contents.ts","webpack://@deriv/bot-web-ui/./src/utils/settings.js","webpack://@deriv/bot-web-ui/./src/stores/blockly-store.ts","webpack://@deriv/bot-web-ui/./src/stores/chart-store.js","webpack://@deriv/bot-web-ui/./src/constants/load-modal.js","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/utils/index.ts","webpack://@deriv/bot-web-ui/./src/stores/dashboard-store.ts","webpack://@deriv/bot-web-ui/./src/stores/data-collection-store.js","webpack://@deriv/bot-web-ui/./src/stores/download-store.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-content.config.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/after_purchase.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/balance.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/before_purchase.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/check_direction.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/console.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/contract_check_result.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_flow_statements.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_for.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_forEach.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_if.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/controls_whileUntil.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/during_purchase.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/epoch.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/get_ohlc.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/is_candle_black.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/last_digit.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/logic_operation.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/math_arithmetic.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/math_constrain.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/math_single.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/notify_telegram.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/ohlc.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/ohlc_values.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/ohlc_values_in_list.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/procedures_ifreturn.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/read_details.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/read_ohlc.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/read_ohlc_obj.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/sell_at_market.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/sell_price.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/sma_statement.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/text_print.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/text_prompt_ext.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/tick_analysis.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/todatetime.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/totimestamp.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_again.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_definition.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_definition_multiplier.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/trade_definition_tradeoptions.js","webpack://@deriv/bot-web-ui/./src/utils/help-content/help-strings/variables_set.js","webpack://@deriv/bot-web-ui/./src/stores/flyout-help-store.js","webpack://@deriv/bot-web-ui/./src/utils/gtm.js","webpack://@deriv/bot-web-ui/./src/stores/flyout-store.js","webpack://@deriv/bot-web-ui/./src/constants/button-status.js","webpack://@deriv/bot-web-ui/./src/stores/google-drive-store.js","webpack://@deriv/bot-web-ui/./src/components/audio/audio.tsx","webpack://@deriv/bot-web-ui/./src/components/audio/index.ts","webpack://@deriv/bot-web-ui/./src/components/bot-notification-messages/bot-notification-messages.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-notification-messages/index.ts","webpack://@deriv/bot-web-ui/./src/components/chart/toolbar-widgets.tsx","webpack://@deriv/bot-web-ui/./src/components/chart/chart.tsx","webpack://@deriv/bot-web-ui/./src/components/chart/index.ts","webpack://@deriv/bot-web-ui/./src/components/contract-card-loading/contract-card-loading.tsx","webpack://@deriv/bot-web-ui/./src/components/contract-card-loading/index.ts","webpack://@deriv/bot-web-ui/./src/components/contract-result-overlay/index.ts","webpack://@deriv/bot-web-ui/./src/components/contract-result-overlay/contract-result-overlay.tsx","webpack://@deriv/bot-web-ui/../bot-skeleton/src/scratch/hooks/trashcan.js","webpack://@deriv/bot-web-ui/./src/constants/contract-stage.js","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/date-item.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/filter-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/filters.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/format-message.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/journal-item.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/journal-loader.tsx","webpack://@deriv/bot-web-ui/./src/components/download/download.tsx","webpack://@deriv/bot-web-ui/./src/components/download/index.ts","webpack://@deriv/bot-web-ui/./src/components/journal/journal-components/journal-tools.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/journal.tsx","webpack://@deriv/bot-web-ui/./src/components/journal/index.ts","webpack://@deriv/bot-web-ui/./src/components/self-exclusion/self-exclusion.jsx","webpack://@deriv/bot-web-ui/./src/components/self-exclusion/index.js","webpack://@deriv/bot-web-ui/./src/utils/multiplier.js","webpack://@deriv/bot-web-ui/./src/constants/contract.js","webpack://@deriv/bot-web-ui/./src/components/summary/summary-card.tsx","webpack://@deriv/bot-web-ui/./src/components/summary/summary.tsx","webpack://@deriv/bot-web-ui/./src/components/summary/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-stop-notification.tsx","webpack://@deriv/bot-web-ui/./src/components/trade-animation/trade-animation.jsx","webpack://@deriv/bot-web-ui/./src/components/trade-animation/index.js","webpack://@deriv/bot-web-ui/./src/constants/transactions.js","webpack://@deriv/bot-web-ui/./src/constants/z-indexes.js","webpack://@deriv/bot-web-ui/./src/components/transactions/transaction.jsx","webpack://@deriv/bot-web-ui/./src/components/transactions/transactions.jsx","webpack://@deriv/bot-web-ui/./src/components/transactions/index.js","webpack://@deriv/bot-web-ui/./src/components/run-panel/run-panel.tsx","webpack://@deriv/bot-web-ui/./src/components/run-panel/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/run-strategy.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/react-joyride-wrapper.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-steps.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/config/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-start-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/hooks/useTourHandler.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/onboarding-tour/onboarding-tour-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-button.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/onboarding-tour/onboarding-tour-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/onboarding-tour/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/workspace-control.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/bot-preview.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/local.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/google-drive.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/delete-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/hooks/useComponentVisibility.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/constants.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/recent-workspace.tsx","webpack://@deriv/bot-web-ui/./src/utils/dom-observer.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/icon-radio.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/save-modal.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/recent.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/cards.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/constants.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/info-panel.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/user-guide.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/dashboard-component.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/strategy-notification.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/faq-content.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/guide-content.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/tutorial-content.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/sidebar.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/tutorial-tab/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/container.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/data/common-input-properties.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/data/data-fields.ts","webpack://@deriv/bot-web-ui/./src/stores/quick-strategy-store.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/data/data-uniq-input-obj.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/description.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/duration-fields.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/fields.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/footer.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/form.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/input-field.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/inputs.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/market-option.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/select-field.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/selects.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy-components/trade-type-option.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/quick-strategy.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/quick-strategy/index.ts","webpack://@deriv/bot-web-ui/./src/components/flyout/flyout-block.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/flyout-block-group.jsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-img.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-text.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-video.tsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/flyout-help-base.jsx","webpack://@deriv/bot-web-ui/./src/components/flyout/help-contents/index.js","webpack://@deriv/bot-web-ui/./src/components/flyout/flyout.jsx","webpack://@deriv/bot-web-ui/./src/components/flyout/index.js","webpack://@deriv/bot-web-ui/./src/components/load-modal/local-footer.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/workspace-control.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/local.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/recent-workspace.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/recent.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/recent-footer.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/load-modal.tsx","webpack://@deriv/bot-web-ui/./src/components/load-modal/index.ts","webpack://@deriv/bot-web-ui/./src/components/network-toast-popup/network-toast-popup.tsx","webpack://@deriv/bot-web-ui/./src/components/network-toast-popup/index.ts","webpack://@deriv/bot-web-ui/./src/components/notify-item/notify-item.jsx","webpack://@deriv/bot-web-ui/./src/components/route-prompt-dialog/route-prompt-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/route-prompt-dialog/index.ts","webpack://@deriv/bot-web-ui/./src/utils/journal-notifications.js","webpack://@deriv/bot-web-ui/./src/utils/session-storage.js","webpack://@deriv/bot-web-ui/./src/stores/journal-store.js","webpack://@deriv/bot-web-ui/./src/stores/load-modal-store.ts","webpack://@deriv/bot-web-ui/./src/stores/route-prompt-dialog-store.js","webpack://@deriv/bot-web-ui/./src/constants/run-panel.js","webpack://@deriv/bot-web-ui/./src/utils/bot-notifications.js","webpack://@deriv/bot-web-ui/./src/stores/run-panel-store.js","webpack://@deriv/bot-web-ui/./src/stores/save-modal-store.ts","webpack://@deriv/bot-web-ui/./src/stores/self-exclusion-store.js","webpack://@deriv/bot-web-ui/./src/stores/summary-card-store.js","webpack://@deriv/bot-web-ui/./src/stores/summary-store.js","webpack://@deriv/bot-web-ui/./src/stores/toolbar-store.ts","webpack://@deriv/bot-web-ui/./src/stores/toolbox-store.js","webpack://@deriv/bot-web-ui/./src/stores/transactions-store.js","webpack://@deriv/bot-web-ui/./src/stores/root-store.ts","webpack://@deriv/bot-web-ui/./src/stores/useDBotStore.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-snackbar/bot-snackbar.tsx","webpack://@deriv/bot-web-ui/./src/components/bot-snackbar/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/tour-end-dialog.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/bot-builder-tour/bot-builder-tour-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/common/accordion.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/bot-builder-tour/bot-builder-tour-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dbot-tours/bot-builder-tour/index.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/stop-bot-modal-content.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/dashboard-component/load-bot-preview/stop-bot-modal.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/toolbar-button.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/toolbar-icon.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/workspace-group.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/toolbar.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbar/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/search-box/search-icon.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/search-box/search-box.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/search-box/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/toolbox-items.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/toolbox.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/toolbox/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/workspace-wrapper.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/bot-builder.tsx","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-builder/index.ts","webpack://@deriv/bot-web-ui/./src/components/dashboard/bot-stopped.tsx","webpack://@deriv/bot-web-ui/./src/components/draggable/draggable.tsx","webpack://@deriv/bot-web-ui/./src/components/draggable/index.ts","webpack://@deriv/bot-web-ui/./src/components/transaction-details/desktop-transaction-table.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/transaction-details-desktop.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/mobile-transaction-card.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/transaction-details-mobile.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/transaction-details.tsx","webpack://@deriv/bot-web-ui/./src/components/transaction-details/index.tsx","webpack://@deriv/bot-web-ui/./src/components/blockly-loading/index.ts","webpack://@deriv/bot-web-ui/./src/components/blockly-loading/blockly-loading.tsx","webpack://@deriv/bot-web-ui/./src/app/app-content.jsx","webpack://@deriv/bot-web-ui/./src/utils/hotjar.js","webpack://@deriv/bot-web-ui/./src/app/dbot-providers.tsx","webpack://@deriv/bot-web-ui/./src/app/app-main.tsx","webpack://@deriv/bot-web-ui/./src/utils/window-size.js","webpack://@deriv/bot-web-ui/../../node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://@deriv/bot-web-ui/./src/xml/ lazy ^\\.\\/.*\\.xml$ chunkName: [request] namespace object"],"sourcesContent":["import PendingPromise from '../../utils/pending-promise';\n\nconst ServerTime = (() => {\n    let clock_started = false;\n    const pending = new PendingPromise();\n    let common_store;\n\n    const init = store => {\n        if (!clock_started) {\n            common_store = store;\n            pending.resolve(common_store.server_time);\n            clock_started = true;\n        }\n    };\n\n    const get = () => (clock_started && common_store.server_time ? common_store.server_time.clone() : undefined);\n\n    return {\n        init,\n        get,\n        timePromise: () => (clock_started ? Promise.resolve(common_store.server_time) : pending.promise),\n    };\n})();\n\nexport default ServerTime;\n","export default class NetworkMonitor {\n    constructor(apiInstance, parentElement) {\n        this.api = apiInstance;\n        this.parentElement = parentElement;\n        this.addEvents();\n    }\n\n    addEvents() {\n        if ('onLine' in navigator) {\n            window.addEventListener('online', () => this.setStatus());\n            window.addEventListener('offline', () => this.setStatus());\n        } else {\n            navigator.onLine = true;\n            setInterval(() => this.setStatus(), 10000);\n        }\n        this.setStatus();\n    }\n\n    setStatus() {\n        if (navigator.onLine) {\n            this.parentElement.html(\"<span class='connecting'></span>\");\n            this.api.send({ ping: '1' }).then(() => {\n                this.parentElement.html(\"<span class='online'></span>\");\n            });\n        } else {\n            this.parentElement.html(\"<span class='offline'></span>\");\n        }\n    }\n}\n","import { localize } from '@deriv/translations';\n\nconst CRYPTO_CURRENCIES = ['BTC', 'ETH', 'LTC', 'BCH', 'UST'];\n\nexport const config = {\n    lists: {\n        PAYOUTTYPE: [\n            // [localize('Payout'), 'payout'],\n            [localize('Stake'), 'stake'],\n        ],\n        CRYPTO_CURRENCIES,\n        DETAILS: [\n            [localize('deal reference id'), '1'],\n            [localize('purchase price'), '2'],\n            [localize('payout'), '3'],\n            [localize('profit'), '4'],\n            [localize('contract type'), '5'],\n            [localize('entry spot time'), '6'],\n            [localize('entry spot price'), '7'],\n            [localize('exit spot time'), '8'],\n            [localize('exit spot price'), '9'],\n            [localize('barrier'), '10'],\n            [localize('result'), '11'],\n        ],\n        CHECK_RESULT: [\n            [localize('Win'), 'win'],\n            [localize('Loss'), 'loss'],\n        ],\n        CHECK_DIRECTION: [\n            [localize('Rise'), 'rise'],\n            [localize('Fall'), 'fall'],\n            [localize('No Change'), ''],\n        ],\n        BALANCE_TYPE: [\n            [localize('string'), 'STR'],\n            [localize('number'), 'NUM'],\n        ],\n        NOTIFICATION_TYPE: [\n            [localize('green'), 'success'],\n            [localize('blue'), 'info'],\n            [localize('yellow'), 'warn'],\n            [localize('red'), 'error'],\n        ],\n        NOTIFICATION_SOUND: [\n            [localize('Silent'), 'silent'],\n            [localize('Announcement'), 'announcement'],\n            [localize('Earned money'), 'earned-money'],\n            [localize('Job done'), 'job-done'],\n            [localize('Error'), 'error'],\n            [localize('Severe error'), 'severe-error'],\n        ],\n        CURRENCY: ['USD', 'EUR', 'GBP', 'AUD', ...CRYPTO_CURRENCIES],\n    },\n    opposites: {\n        MULTIPLIER: [\n            {\n                MULTUP: localize('Up'),\n            },\n            {\n                MULTDOWN: localize('Down'),\n            },\n        ],\n        CALLPUT: [\n            {\n                CALL: localize('Rise'),\n            },\n            {\n                PUT: localize('Fall'),\n            },\n        ],\n        CALLPUTEQUAL: [\n            {\n                CALLE: localize('Rise Equals'),\n            },\n            {\n                PUTE: localize('Fall Equals'),\n            },\n        ],\n        HIGHERLOWER: [\n            {\n                CALL: localize('Higher'),\n            },\n            {\n                PUT: localize('Lower'),\n            },\n        ],\n        TOUCHNOTOUCH: [\n            {\n                ONETOUCH: localize('Touch'),\n            },\n            {\n                NOTOUCH: localize('No Touch'),\n            },\n        ],\n        ENDSINOUT: [\n            {\n                EXPIRYRANGE: localize('Ends Between'),\n            },\n            {\n                EXPIRYMISS: localize('Ends Outside'),\n            },\n        ],\n        STAYSINOUT: [\n            {\n                RANGE: localize('Stays Between'),\n            },\n            {\n                UPORDOWN: localize('Goes Outside'),\n            },\n        ],\n        ASIANS: [\n            {\n                ASIANU: localize('Asian Up'),\n            },\n            {\n                ASIAND: localize('Asian Down'),\n            },\n        ],\n        MATCHESDIFFERS: [\n            {\n                DIGITMATCH: localize('Matches'),\n            },\n            {\n                DIGITDIFF: localize('Differs'),\n            },\n        ],\n        EVENODD: [\n            {\n                DIGITEVEN: localize('Even'),\n            },\n            {\n                DIGITODD: localize('Odd'),\n            },\n        ],\n        OVERUNDER: [\n            {\n                DIGITOVER: localize('Over'),\n            },\n            {\n                DIGITUNDER: localize('Under'),\n            },\n        ],\n        HIGHLOWTICKS: [\n            {\n                TICKHIGH: localize('High Tick'),\n            },\n            {\n                TICKLOW: localize('Low Tick'),\n            },\n        ],\n        RESET: [\n            {\n                RESETCALL: localize('Reset Call'),\n            },\n            {\n                RESETPUT: localize('Reset Put'),\n            },\n        ],\n        RUNS: [\n            {\n                RUNHIGH: localize('Only Ups'),\n            },\n            {\n                RUNLOW: localize('Only Downs'),\n            },\n        ],\n        CALLPUTSPREAD: [\n            {\n                CALLSPREAD: localize('Call Spread'),\n            },\n            {\n                PUTSPREAD: localize('Put Spread'),\n            },\n        ],\n    },\n    BARRIER_TYPES: [\n        ['Offset +', '+'],\n        ['Offset -', '-'],\n    ],\n    ohlcFields: [\n        [localize('Open'), 'open'],\n        [localize('High'), 'high'],\n        [localize('Low'), 'low'],\n        [localize('Close'), 'close'],\n        [localize('Open Time'), 'epoch'],\n    ],\n    candleIntervals: [\n        [localize('Default'), 'default'],\n        [localize('1 minute'), '60'],\n        [localize('2 minutes'), '120'],\n        [localize('3 minutes'), '180'],\n        [localize('5 minutes'), '300'],\n        [localize('10 minutes'), '600'],\n        [localize('15 minutes'), '900'],\n        [localize('30 minutes'), '1800'],\n        [localize('1 hour'), '3600'],\n        [localize('2 hours'), '7200'],\n        [localize('4 hours'), '14400'],\n        [localize('8 hours'), '28800'],\n        [localize('1 day'), '86400'],\n    ],\n    mainBlocks: ['trade_definition', 'before_purchase', 'during_purchase', 'after_purchase'],\n    mandatoryMainBlocks: ['trade_definition', 'purchase', 'before_purchase'],\n    procedureDefinitionBlocks: ['procedures_defnoreturn', 'procedures_defreturn'],\n    single_instance_blocks: ['trade_definition', 'before_purchase', 'during_purchase', 'after_purchase'],\n    TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING: {\n        callput: ['callput', 'higherlower'],\n        asian: ['asians'],\n        digits: ['matchesdiffers', 'evenodd', 'overunder'],\n    },\n    TRADE_TYPE_CATEGORIES: {\n        multiplier: ['multiplier'],\n        callput: ['callput', 'callputequal', 'higherlower'],\n        touchnotouch: ['touchnotouch'],\n        inout: ['endsinout', 'staysinout'],\n        asian: ['asians'],\n        digits: ['matchesdiffers', 'evenodd', 'overunder'],\n        reset: ['reset'],\n        callputspread: ['callputspread'],\n        highlowticks: ['highlowticks'],\n        runs: ['runs'],\n    },\n    TRADE_TYPE_CATEGORY_NAMES: {\n        callput: localize('Up/Down'),\n        touchnotouch: localize('Touch/No Touch'),\n        inout: localize('In/Out'),\n        asian: localize('Asians'),\n        digits: localize('Digits'),\n        reset: localize('Reset Call/Reset Put'),\n        callputspread: localize('Call Spread/Put Spread'),\n        highlowticks: localize('High/Low Ticks'),\n        runs: localize('Only Ups/Only Downs'),\n        multiplier: localize('Multipliers'),\n    },\n    BARRIER_CATEGORIES: {\n        euro_atm: ['callput', 'callputequal'],\n        euro_non_atm: ['endsinout', 'higherlower', 'callputspread'],\n        american: ['staysinout', 'touchnotouch', 'highlowticks', 'runs', 'multiplier'],\n        non_financial: ['digits', 'overunder', 'evenodd', 'matchesdiffers'],\n        asian: ['asians'],\n        reset: ['reset'],\n        lookback: ['lookback'],\n    },\n    DEFAULT_DURATION_DROPDOWN_OPTIONS: [\n        [localize('Ticks'), 't'],\n        [localize('Seconds'), 's'],\n        [localize('Minutes'), 'm'],\n        [localize('Hours'), 'h'],\n        [localize('Days'), 'd'],\n    ],\n    BARRIER_LABELS: [localize('High barrier'), localize('Low barrier')],\n    ABSOLUTE_BARRIER_DROPDOWN_OPTION: [[localize('Absolute'), 'absolute']],\n    NOT_AVAILABLE_DROPDOWN_OPTIONS: [[localize('Not available'), 'na']],\n    NOT_AVAILABLE_DURATIONS: [{ display: localize('Not available'), unit: 'na', min: 0 }],\n    BARRIER_TRADE_TYPES: ['higherlower', 'touchnotouch', 'endsinout', 'staysinout', 'callputspread'],\n    PREDICTION_TRADE_TYPES: ['matchesdiffers', 'overunder', 'highlowticks'],\n    DIGIT_CATEGORIES: ['digits', 'highlowticks'],\n    INDEPEDENT_BLOCKS: ['block_holder', 'tick_analysis', 'loader', 'procedures_defreturn', 'procedures_defnoreturn'],\n    bbResult: [\n        [localize('upper'), '1'],\n        [localize('middle'), '0'],\n        [localize('lower'), '2'],\n    ],\n    macdFields: [\n        [localize('Histogram'), '0'],\n        [localize('MACD'), '1'],\n        [localize('Signal'), '2'],\n    ],\n    gd: {\n        scope: 'https://www.googleapis.com/auth/drive.file',\n        discovery_docs: 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest',\n    },\n    workspaces: {\n        flyoutWorkspacesStartScale: 0.7,\n        mainWorkspaceStartScale: 0.9,\n        previewWorkspaceStartScale: 0.6,\n    },\n    strategies: {\n        martingale: {\n            index: 0,\n            label: localize('Martingale'),\n            description: localize(\n                'The Martingale Strategy is a classic trading technique that has been used for more than a hundred years, popularised by the French mathematician Paul Pierre Levy in the 18th century.'\n            ),\n        },\n        dalembert: {\n            index: 1,\n            label: localize(\"D'Alembert\"),\n            description: localize(\n                'The concept of the D’Alembert Strategy is said to be similar to the Martingale Strategy where you will increase your contract size after a loss. With the D’Alembert Strategy, you will also decrease your contract size after a successful trade.'\n            ),\n        },\n        oscars_grind: {\n            index: 2,\n            label: localize(\"Oscar's Grind\"),\n            description: localize(\n                \"The Oscar's Grind Strategy is a low-risk positive progression strategy that first appeared in 1965. By using this strategy, the size of your contract will increase after successful trades, but remains unchanged after unsuccessful trades.\"\n            ),\n        },\n    },\n    default_file_name: localize('Untitled Bot'),\n};\n","export const unrecoverable_errors = [\n    'InsufficientBalance',\n    'CustomLimitsReached',\n    'OfferingsValidationError',\n    'InvalidCurrency',\n    'ContractBuyValidationError',\n    'NotDefaultCurrency',\n    'PleaseAuthenticate',\n    'FinancialAssessmentRequired',\n    'PositiveIntegerExpected',\n    'OptionError',\n    'IncorrectPayoutDecimals',\n    'IncorrectStakeDecimals',\n    'NoMFProfessionalClient',\n    'AuthorizationRequired',\n    'InvalidToken',\n    'DailyLossLimitExceeded',\n    'InputValidationFailed',\n    'ClientUnwelcome',\n    'PriceMoved',\n];\n\nexport const message_types = Object.freeze({\n    ERROR: 'error',\n    NOTIFY: 'notify',\n    SUCCESS: 'success',\n});\n\nexport const error_types = Object.freeze({\n    RECOVERABLE_ERRORS: 'recoverable_errors',\n    UNRECOVERABLE_ERRORS: 'unrecoverable_errors',\n});\n\nexport const log_types = Object.freeze({\n    LOAD_BLOCK: 'load_block',\n    PURCHASE: 'purchase',\n    SELL: 'sell',\n    NOT_OFFERED: 'not_offered',\n    PROFIT: 'profit',\n    LOST: 'lost',\n    WELCOME_BACK: 'welcome_back',\n    WELCOME: 'welcome',\n});\n","export const save_types = Object.freeze({\n    UNSAVED: 'unsaved',\n    LOCAL: 'local',\n    GOOGLE_DRIVE: 'google drive',\n});\n","/* eslint import/no-webpack-loader-syntax: 0 */\nconst {\n    goog,\n    Blockly,\n} = require('imports-loader?this=>window!exports-loader?goog&Blockly!scratch-blocks/blockly_compressed_vertical');\n\nBlockly.JavaScript = require('blockly/javascript');\n\nwindow.goog = goog;\nwindow.Blockly = Blockly;\n\nrequire('imports-loader!scratch-blocks/msg/messages');\nrequire('./blocks');\nrequire('./hooks');\n","export const defineContract =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAlQTFRFAAAAMzMzMzMzaARWNQAAAAN0Uk5TAID/7PezGAAAACFJREFUeJxjYEAFUqtWLQFSCgwMHDipplXUF0ShoI5ABgDTPwulgF1l+wAAAABJRU5ErkJggg==';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAAGXcA1uAAAAAXNSR0IArs4c6QAAAK9JREFUSA3tVUkOgCAMROP/f4PfU4iOaWQKLYmBg71AOksXTAyhGkeKKuECjTSDUwcFxVdNawNgQ10omJNKROqiJbMJsKJZgKgEouuESRYVFVxO35JTnxGDvk9aWQ5GCXfSPbRbsLHysr0lBeMESaKE3hkmbKk230SY9Ulky5rG/SVJU8udPrMU5s7w9bEugUlN886MWiJN86/o2dywFQ17g10b+dlJefH9X0t9X+YETM6gfmoeI+MAAAAASUVORK5CYII=';\n\nexport const blueInfo =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAEKADAAQAAAABAAAAEAAAAAA0VXHyAAABOUlEQVQ4EaVTu07DQBDcOVuUpEaEUEETiY9IYYnHLyAaGlq+IF9AF9HQIEV8AQjJBR+BlAYqQhA1lCj2smPrEMFrIsQVPt3uzO6sbw7yY/WOXvs6L45FNFNFj2lAp/bNkSYX08u1yXcK4qE/1JX3x9mZCk5ENcT4wg6UED1f3eqeTob4YK4qQPLbw8utdR0sEFoPuOtsr++ySNWJnT1yksh+EnDQrKODmmMKOHM5L+492SwgChSlXjeK2DghTXbS6oe1zFwUcmPKGtwqYBxybQTNPAS7z6424I8QGZqFeFUxFPe6u8jTuGsq/EWuf10+3o2G2iRubmmQXFOAfCmyFYA80J7m1bIV05agK40b6G3a08NtHj7vMe7dBDk11wD/tjI9TW8DMvp1HMo2THwHVPf1Gnng+utz/gS/LY1YxBZd7wAAAABJRU5ErkJggg==';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAWBJREFUOI2dk81KQmEQhp/5zgHRjhtz0apMXBUSdAcVLWrnxhswsHARSLcRhYm00CvIRbugrCtIaJHtIqlFQUsPBeY50yINM7WfZzV8M+/MOzCfMED8wE2q0Q0VVgSJASjaNEJNoHy7Fb7ur5dekChooGO7ewJZwAw27uIBh6Gok2+kpf3ZIFHQgG+7JwpLI4RfULiYiDprjbS0DYBvu/u/FXenLr88u7sAEj9wk2rp1TDb1VQQXyF9/Dp0HctnwajRjWFiAF9BRxuxOpZmJF5qNRTmfmt/gGujMD0qW00FOUoFxzWYsRnjcnHK+smBGoGHn6rGcG8Qzv6v11MjUObjwr5Rf/K4fByaAvA8IxUBmC21ikDub8Mp3OXC2wYgFHXyCOd/kNcitrMD3QNqpKUdmnTWUYqMWKdnG6UQsZz1elbeoO839kgUW/MdSzOisgrEus9N0FPPSOV+M3zTX/8O8E9xAaZDaSsAAAAASUVORK5CYII=';\n\nexport const purchase =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAIRQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzxeXsBQAAACx0Uk5TAAG7tbYCR//Y2a15rhj7+hmse95G391Iehd4tNIy0bJSsZJykXFRMRLxEbk1pp94AAAA7UlEQVR4nO2R2RaCMAxEi1VHQXBfAUXcQP7//xSOgC2J1Vd1Htq0J7dJOkL89auyWrIM263OG0AXvTLso/sGYMMpQwcDc77reW4VD72REXBg14cxJqZ8a/rc9wxz09j3FOsJX2BpAMZYqQ0axl5rY+rnhjb6i/zYEi8lPwV8okaAkC4eYkve7xDRQIQ9eR/jQAMHHJn7mAZinJjKu2KXUlnyXs8kECIodkBZ8t+4kECClAZSXOleUyQUUD7U1MMIHeBsqIyQvrKwNrBGcDawRnA21EY0OqVtqI3QxNmQ/x8jxgYhMjo/4/L/+mbdAKHBEAKASOAzAAAAAElFTkSuQmCC';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAvlJREFUaAXtmU1u00AUxxPEGoluKMcgJ8gCARsW9CZ0ReEU5BwFiYpWqtgYiQuQFSygJ2CRLV2E39+ZZ42dGc84XxIwT3p9X//34VfbsZPRaGNaQkpGPNu4yGESGfHUOtnYte0b6G8NdABJu7NoG4KXmi1GwUTACwtYomzp5r9ripP3/KB8zj7q4P4t0z9o9PfJowM0NhD6D9NN+sFm1xb05Rjybe171nKkDBLqfw6yt1Oqjjo3F4XArbli1dfmT7YpgOQGWPanLgjfFXyn6x9sU+QMfhdKxL/1OfSAGreh4vIR643H8pQ4hydRQCAAPv9owJ7AF1YH/bKr+z7FsPMbdBP8ZNNNOuwE+6v0bPILpJLAXsAvUrgSLxsoG4hsgAtoDDe3CoPhW7uFW8yXOffzcxK++ElOfxzwDXcxafAmhvscfjO8opdBgSfwjedqVPxaXbB5A0op5P+GH8ZwqXgwj6RtaO1kiDYJBiJOJop+HuScRZGyLfcUq2p5nJHVgAnrQzepXF/HnMIVnEckt84Os02qSkdfYN/Pq75KnpPQPFVYMZOBBq2B/EaxFVWApga0x2WT8vu64UIyq0EoMdfXeuC3JFZxhP7L7ByZe0Q5tQqmbKBsoGygbOCv2wAfHU/1SQp9Sw0P5nuNJCeFPUicYY7hW8fHqaYOr4dR5UQfSFN1dhJnAD1a/4RF2RsFq8d10Q0ce+LYyYy9RWiulw/R615gIEiOvuASpb/IDeRv7aLxq7r9FgOQbwvY7g2s72ho0vurgjuIfYmPfbMNijGhvsoSnQxKHABW7brDcvkhN23IBVS5otPc4hvgrHa1QW5/CpvR26loHkKuQuuvc/L7+BDO4sT0tiZ6ZL6dSgrr/VGkd54WrdzpYUM4FVJNF1u0CieM7g90CfjoM4Dn8BTu3v6u8LW2jZ3rA1rXlKz0Zy/Ehk7dlma7bkDdmav9cte1m3o0mLgmweugAW6gUHfuau/n/LeZaHLtGu1DXFufIssGygb+kw38ARimnBqQbBHiAAAAAElFTkSuQmCC';\n\nexport const sellContract =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMZQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzsMQO9wAAAEJ0Uk5TAEnj/xnzWcgSZVrxvQFt9AlD34If9dBpcPij0X7mSLyziAyl7H1k3dYbAu2qn6eA1LGN6G66uPucBP23ERPXJIPGaDxgqAAAAQdJREFUeJztlFlvwjAQhBeP4yQlKVfvg7acvQ+g90H5/3+qViWSjQ2RLfGYebC0q/k2sTw2UaVKG1RNwEGilgFOfk1kAKAXiWDdHwSQSxcDFMJ1QAhlA5FAzDxbdVbEEJEBSCWQpMyz3WjmRZpAKFkAtBKZO1ptoNHJB8jk38KAIIzZ/J1d1PeAffaNOAzMTTMd4DCiIxwXuyXACU5T6p6dOwNd4KJHpkoA6gODoYmUATQaA5dXHgBdqxvcOgN39zqYDxg4A494IppgWgIUD24GPL+84i3vWAdXjMb75EM3Pr+yhh0NM3zf/Z85m2+Hz4r374IVK+JN/hfI64p6PwLez0ylShvQHzxCDnS9VqsZAAAAAElFTkSuQmCC';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAA45JREFUaAXtWDFrFUEQzoU0QhpjFVRs/Cc2Sf6AxD4BQSF/QBFtbPwDYici2ImFIqaVlBEEK7FICBaxCFEQRM/v29vZzO7O3dv3uGCEXdg3M998M7O7d7e37+bmZmpt2y4xEPLITABHazpOC0wLwt5wtVKHDGBeFJEg7og+okTaVY5hUgslSQwGFJhb2tZ6mARI3XQ77x/YbzQR9mlMTpc4u3rDoWEFomXtGe5+0zSXg28oCL69IT8r/kwJYocLF0p1yi2ITwl2YiL6+MTq5iQZiUNvtO24GaAywLc+5FfUqp7tFdCXUeulo0bMMfoy+WY8QdUcMU0O/xfPuZ/6fOJtyZH56chABcC94oMXFWyqOlffs2YFXge4hi3gu05gEU3Mj24ZklvDtkUCfgHdfMiBu+cXMnos3QbGZHDsQVyyEs+CYaYh9yzxNaauQF2BWVaATzL6WG01GwMzE4TgfhSdGzKyAUi8z5HvzEKA5Ez08TOkA34jGInCeDT5H2EX6Di9O+k17+d2nW1kwDjz0JL6Pa85xfKRS5BP0T8oV6aSWwYqFoPQHiqoVyUxc5pgwgLnM3loFxNXZJIQATRMULHgf+5596AfKlemmrkIou2gZxfQJ6b/Lfov9CdZVgDAN9B5fLFnANy9TyH7ijyD72pPch5ZeIu7uynjwOGqQrDI1H+zJJ6Jtb6gK2mH1jVnSFcx+0O86qsrUFegrkBdgboC/9MKZK91vPBG/ac88mLEnxmt5Hxjs2kfTDnHTH3M0HlKdNTioYxtXfM7KB6X9gddiJA8OHHgPESx8UCVXbEQaCjg30bnMf+c4TYh1kCX702szTFwLK6ZQRoUIiSPllwNHjOLBw7uFfQf6GxH6LtO635u6lpDOuicCGtzDO6YCxndGWY8SWymswBE6F2XoG0PIN3EIVfQ36G/KkhhUhDrmunUYDFRByU6cvBsL+0Qyh30iV8QkzSRKcki0DKKiVZwgiHXPDrv4W8+74uEUmz6+Ml3RjGxpzTiP/ocL4UC+5HHvgo2rfTx5ROQAC+5K5hfsNOBgLeAzgH/RtftNYzzKd+yweOuIzuRzlE+AUmMaH6QkK3U/Owi3FQi7gH6+xQfssHnzsPGmu5zDfkOwc9QrPNZRGCyD0/9YWpiwYSAWrJlRlfcGhdDo//dPtca5GMGeFuLxR5cc8bSuQ3rXPwvv6mBqtcVqCtQV+Dfr8BfZ6VurZP8obgAAAAASUVORK5CYII=';\n\nexport const finishSign =\n    // 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABJQTFRFAAAAMzMzMzMzMzMzMzMzMzMzbxxq5QAAAAZ0Uk5TALX/40m0LpdrJAAAADpJREFUeJxjYBi0QBCXhBJOCTRggktCGVkCQiE4g0ACWRTZwwMrMTjDCl/UYk8MDDjAyJUQxSUx6AAAWjIi1ZSdqFYAAAAASUVORK5CYII=';\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAAEgBckRAAAAAXNSR0IArs4c6QAAAa5JREFUaAXtV1tywzAIdDq5Rg/Ui/SGzYl8j1brzqYYidHDYWw60g/iIWABKc6yGOsG+XdaSr/uFLe0dkZkNC25Wt6U7zq7C05zJMH9FofBd0IymZIKR4qYWAyh95LfbCgAxYLwd/e3h+yJm0YQWiurk2V4cXkzaALO5owKAJV7E7gsr9zzQBaBiirVXaV3KYeTbtDVyNOgUIFU9q+CeFj0bBs9sL/k5fhJnSXHOakbnzxmUKH3kl5m0JK1ZQ/fxQBHncqk3Uskg217mX2mHBC4I3APMAB6HglfgXQPXvqaZgXBRTu4PqTT+M+1+00uPtfW+94rRy/cEbgHKJYIY8pRGykLz/7jEkmIslwt8mSzSrtsbznMDBsF7lM0A1Q74V6iagbTYFZgVsC7Ani7sbzjjPrPPhu1o4skv6YPj3edG/jDAOQXjQxgAe+1p0/rXPhfgvAAih+9bJukVgtfNSq9/plb+A6EB9A8QmePCkdG0/AdCA+geYR068hbo0W9pr326Tz+p35qP+SbAVjPHB2dRcOP0ARw1ugwbvgOtFziR0J72T807MSkswKDFfgBlTxsE+QpCHoAAAAASUVORK5CYII=';\n\nexport const caution = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAABsklEQV\nRoQ+1YS07DMBB9VlG2tJuWZVDYU04CN6BHKCfAnACOADcoJyHsiZRtu0m7rYiMItIFldqZ2ONaEc7Wo5d5n7ETK/T8UT3vH5FAaA\ndZDlQ6TbcYPBtgqqBSn00bmFIBeYL6YaTLknoXSaBt/gNQQwpMdt2sE9Q3FAmSwPIxW0CpW9nmmGjGvE+eirtj1TQBnVWnV/+35S\nZOF7q4dCRwZZh6eSmb6K+jIjMc+KcE9pVbajshgjkQCbQTFR2Qyq4Uzv5W520XijMQZ6BVQCq7UjhxBrgfPHGIQw8x1ymqLthJTD\nXGXY8EbLc/rsJUXTAH4i4UeheKDoR2gBpO7rr7EPf9Yqu9WswBdc5VTabObBLUU+erxaaZlU6nBmevAK5lmiNRPhW+Z2Nd5lQl+U\nu5A6h0Otxi8AKoewrUbd28JajnI12uOThsAjuwlc5mBmiICEfKbBQwH+uicZr9dCbgKVLsyHT+IzskhVykukVGjIB7pOwiI07AMl\nLWkfFCoAHlR8otMt4I0JGSiYx3AgciJRaZkxD4Gymgy8HEPgDaQqtzoOtLfNZHAj7V5WD33oEfb0MpQATTN7IAAAAASUVORK5CYI\nI=`;\n\nexport const plusIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==';\n\nexport const plusIconLight =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==';\n\nexport const minusIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC6ElEQVR4Ae2bA6weURCFp7bd4NnaOyeo3Qa1zaiKXpzUbazajJ3UjVXbtm1rGqO6u/sv5uXf74t91nfvHEpISEhISAgO5PAwU4nlvANHcBmP8Z0/8xNcwRHegeWmkochhzRS0hDjsBF3IHb5Nm8yYwoakRZMBVbjA8Sb/I7XooziBbXMGD4I8S8fNGNRi+KgrBnm8hNIAD7EvLJmFCnVeCpeQAL0mZlG1SgauAhHICF4hIsofHgYPkJC8iMPoFCpjsWQcOUloV1KmXV5JyR8eWdmXQqekuZ8DBKNfKykOQVLWTauQyL0elk2BQfa4S4kYu+a9sFdPFchMXilsEUgty5OQmLyVEltShVeAYnR5ZQapg8kZvuRfwpb4FncAfgpWpJfsA2iwG3kD9MRokOnE/mgJi5DlHjZx6IHMyCKnOH5+PNtTQH4FtUkL/AUiDInkxdwWV2AK+Qe0w2iT9NN//M/mPdBeQP+rDLAp/IG5AYzHKJTM1z796dFXkFuwDmIUs+5Wn9B9OpisW96aw5gepMNzIQodqY9wDLVAZaRDd6nOQDvIxs4C3EjBYzLCGfJBt/WHIBv2wO8VB3gpT3AT9UBftgDfFEd4AvZwHPNAfCcbPAtzQH4Vho8RnW/yPaSDSyv6p8SszUH4FlkA/00B3D6ko2CRqoXNA3JDp+B6JTPkAXtt/Hy9PitUt4AnyD65M/lDcgd2KoywBZyC3dVGaBrGvxeV7zBwVO8bjE9UBXgIdUkb/Bs7d9AFlBL0zYr1STvOJ20BDAd03PUgAgt+SkkZp9Zhj20rw5Mnyo98MQrghg5OxFbgBOBTJAWtsAV7UN/Fkx7/WOXFpzMqAdfncxk9Pgvw987IOHLOzLrhtfcWKJ//N6CMxgftBcgLHARHwjl2B/gouhKQFOCLwFFX8Oap7+GZV/0jONDqRXheDxqxV5F5LX8XnkV0f5P24xVXAZ1j5P3Rx33Cz/BFT4aRh03ISEhISHhF9FSCRjypNzcAAAAAElFTkSuQmCC';\n\nexport const lockIconDark =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAACxklEQVR4Ae2aA4wdURSGT223Udf7Gizn/ieo2zg1Yqe23aC2jag2Yie7QW3bto2pMfehO53duTPJ+f54+A0vDgmCUPzkJamuWMM32P6Z61iruuYlUfBRqbyQz7EdJ+d4gUqloJJWEVPwlu3EwVuelFaRgge34etsFzHXrdZBu/Zr2HYXrAnMfcithQNsuw8O5NYi82SXxx62/y/YHalApon38OAT9mAjz/6a9diDT3EkVpNZVLeYJ3+V+3Bdxytel/vgVKx1VTcyh1WTn7Ot5QOmxHswrA58l20tzw2+CVjMtpaHVuOEL3wGburbYDGZgevinXYyd6y0f26Vwnc0gXeqHpkAU7TTf428Im2Xx6+192AqGaA0P9Su5EgqIjxIU39ApclvVCP96XfxZy2DC86tVSPyGx6jXf/xrrYeqOmPIb/BNucp5OWQC6wGmsBW8hs+6TiBG+QSre16gvxGe4ULyCUodL5B5Df47DiBDa633+hsOZHfaK/wCtcCK517CLaACIiACIiACOQkYwQK+SnbJZynKMSInGQqTrKr8k58Ztu/4DPvzK5KxUOkAo6x7X9wzMOokf60mglWkncQwSdjAp8QIa/wNLYNZhp5BUdNCuAYeYXfmBTgV94FbLMJpYAIiIAIiIAIiIAIiMB1zFItrJpf0xKz+HqoBPACnamUYzel0BkvQiKAtyqfYmBZeBsKAdWb4oBeYRC4lmDKtDSuBl4AYykBGBt4AQYlIF8FXiBSnRIQqV7SAiKQrygBlhV4gcRFAzwmDJ/RshSPsnwt1D8y1TskTQlGzD0Bb0PTmOOOemOOO+JFyJrTPFs157pc11xzWnpkIiACIiACIiACIiACz40KPJdSA8wwKjCDvKJSTZbbcAp5BytCWPCklZwdDV/JmVb0hx1+F/1hh9eiPw1O4eH+lF1yAQ8v2rMvCIIgCF8Av9j925HZ5hYAAAAASUVORK5CYII=';\n","import { localize } from '@deriv/translations';\nimport { plusIconLight } from '../../images';\n\nBlockly.Blocks.procedures_defnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        this.jsonInit(this.definition());\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a ➕-icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconLight, 24, 24, '+', () => this.onAddClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: localize('function {{ function_name }} {{ function_params }}', {\n                function_name: '%1',\n                function_params: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Function with no return value'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Function'),\n            description: localize(\n                'This block creates a function, which is a group of instructions that can be executed at any time. Place other blocks in here to perform any kind of action that you need in your strategy. When all the instructions in a function have been carried out, your bot will continue with the remaining blocks in your strategy. Click the “do something” field to give it a name of your choice. Click the plus icon to send a value (as a named variable) to your function.'\n            ),\n        };\n    },\n    /**\n     * Sets the block colour and updates this procedure's caller blocks\n     * to reflect the same name on a change.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        const allowedEvents = [Blockly.Events.BLOCK_DELETE, Blockly.Events.BLOCK_CREATE, Blockly.Events.BLOCK_CHANGE];\n        if (!this.workspace || this.workspace.isFlyout || !allowedEvents.includes(event.type)) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            // Sync names between definition- and execution-block\n            if (event.blockId === this.id && event.name === 'NAME') {\n                this.getProcedureCallers().forEach(block => {\n                    block.setFieldValue(event.newValue, 'NAME');\n                });\n            }\n        }\n    },\n    /**\n     * Prompt the user for parameter name\n     * @this Blockly.Block\n     */\n    onAddClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        // Wrap in setTimeout so block doesn't stick to mouse (Blockly.Events.END_DRAG event isn't blocked).\n        setTimeout(() => {\n            const promptMessage = localize('Specify a parameter name:');\n            Blockly.prompt(promptMessage, '', paramName => {\n                if (paramName) {\n                    const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, paramName, '');\n                    if (variable) {\n                        this.arguments.push(paramName);\n                        this.argument_var_models.push(variable);\n\n                        const paramField = this.getField('PARAMS');\n                        paramField.setText(`${localize('with: ')} ${this.arguments.join(', ')}`);\n\n                        this.getProcedureCallers().forEach(block => {\n                            block.setProcedureParameters(this.arguments);\n                            block.initSvg();\n                            block.render(false);\n                        });\n                    }\n                }\n            });\n        }, 200);\n    },\n    /**\n     * Add or remove the statement block from this function definition.\n     * @param {boolean} hasStatements True if a statement block is needed.\n     * @this Blockly.Block\n     */\n    setStatements(hasStatements) {\n        if (this.hasStatements === hasStatements) {\n            return;\n        }\n\n        if (hasStatements) {\n            this.appendStatementInput('STACK').appendField('');\n            if (this.getInput('RETURN')) {\n                this.moveInputBefore('STACK', 'RETURN');\n            }\n        } else {\n            this.removeInput('STACK', true);\n        }\n\n        this.hasStatements = hasStatements;\n    },\n    /**\n     * Update the display of parameters for this procedure definition block.\n     * @private\n     * @this Blockly.Block\n     */\n    updateParams() {\n        let paramString = '';\n\n        if (this.arguments.length) {\n            paramString = `${localize('with:')} ${this.arguments.join(', ')}`;\n        }\n\n        // The params field is deterministic based on the mutation,\n        // no need to fire a change event.\n        Blockly.Events.disable();\n        try {\n            this.setFieldValue(paramString, 'PARAMS');\n        } finally {\n            Blockly.Events.enable();\n        }\n    },\n    /**\n     * Create XML to represent the argument inputs.\n     * @param {boolean=} optParamIds If true include the IDs of the parameter\n     *     quarks.  Used by Blockly.Procedures.mutateCallers for reconnection.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom(optParamIds) {\n        const container = document.createElement('mutation');\n\n        if (optParamIds) {\n            container.setAttribute('name', this.getFieldValue('NAME'));\n        }\n\n        this.argument_var_models.forEach((arg, i) => {\n            const parameter = document.createElement('arg');\n\n            parameter.setAttribute('name', arg.name);\n            parameter.setAttribute('varid', arg.getId());\n\n            if (optParamIds && this.paramIds) {\n                parameter.setAttribute('paramId', this.paramIds[i]);\n            }\n            container.appendChild(parameter);\n        });\n\n        // Save whether the statement input is visible.\n        if (!this.hasStatements) {\n            container.setAttribute('statements', 'false');\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the argument inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                const var_name = childNode.getAttribute('name');\n                const var_id = childNode.getAttribute('varid') || childNode.getAttribute('varId');\n                const variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, var_id, var_name, '');\n\n                this.arguments.push(var_name);\n\n                if (variable !== null) {\n                    this.argument_var_models.push(variable);\n                } else {\n                    // eslint-disable-next-line no-console\n                    console.log(`Failed to create a variable with name ${var_name}, ignoring.`);\n                }\n            }\n        });\n\n        this.updateParams();\n\n        // Show or hide the statement input.\n        this.setStatements(xmlElement.getAttribute('statements') !== 'false');\n    },\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES NOT have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, false];\n    },\n    /**\n     * Return all procedure callers related to this block.\n     * @return {!Array.<Blockly.Block>} List of procedure caller blocks\n     * @this Blockly.Block\n     */\n    getProcedureCallers() {\n        return this.workspace\n            .getAllBlocks(false)\n            .filter(block => block.type === this.callType && block.data === this.id);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<string>} List of variable names.\n     * @this Blockly.Block\n     */\n    getVars() {\n        return this.arguments;\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argument_var_models;\n    },\n    /**\n     * Add custom menu options to this block's context menu.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        if (this.isInFlyout) {\n            return;\n        }\n        // Add option to create caller.\n        const option = { enabled: true };\n        const name = this.getFieldValue('NAME');\n        option.text = localize('Create \"%1\"').replace('%1', name);\n\n        const xmlMutation = document.createElement('mutation');\n        xmlMutation.setAttribute('name', name);\n\n        this.arguments.forEach(argumentName => {\n            const xmlArg = document.createElement('arg');\n            xmlArg.setAttribute('name', argumentName);\n            xmlMutation.appendChild(xmlArg);\n        });\n\n        const xmlBlock = document.createElement('block');\n        xmlBlock.setAttribute('type', this.callType);\n        xmlBlock.appendChild(xmlMutation);\n        option.callback = Blockly.ContextMenu.callbackFactory(this, xmlBlock);\n        options.push(option);\n\n        // Add options to create getters for each parameter.\n        if (!this.isCollapsed()) {\n            this.argument_var_models.forEach(argumentVarModel => {\n                const getOption = { enabled: true };\n\n                getOption.text = localize('Create \"get %1\"').replace('%1', argumentVarModel.name);\n\n                const xmlField = Blockly.Variables.generateVariableFieldDom(argumentVarModel);\n                const xmlOptionBlock = document.createElement('block');\n\n                xmlOptionBlock.setAttribute('type', 'variables_get');\n                xmlOptionBlock.appendChild(xmlField);\n\n                getOption.callback = Blockly.ContextMenu.callbackFactory(this, xmlOptionBlock);\n                options.push(getOption);\n            });\n        }\n    },\n    callType: 'procedures_callnoreturn',\n};\n\nBlockly.JavaScript.procedures_defnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'STACK');\n\n    if (Blockly.JavaScript.STATEMENT_PREFIX) {\n        const id = block.id.replace(/\\$/g, '$$$$'); // Issue 251.\n\n        branch =\n            Blockly.JavaScript.prefixLines(\n                Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g, `'${id}'`),\n                Blockly.JavaScript.INDENT\n            ) + branch;\n    }\n\n    if (Blockly.JavaScript.INFINITE_LOOP_TRAP) {\n        branch = Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g, `'${block.id}'`) + branch;\n    }\n\n    let returnValue = Blockly.JavaScript.valueToCode(block, 'RETURN', Blockly.JavaScript.ORDER_NONE) || '';\n    if (returnValue) {\n        returnValue = `${Blockly.JavaScript.INDENT}return ${returnValue};\\n`;\n    }\n\n    const args = block.arguments.map(\n        argumentName => Blockly.JavaScript.variableDB_.getName(argumentName, Blockly.Variables.NAME_TYPE) // eslint-disable-line no-underscore-dangle\n    );\n\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.scrub_(\n        block,\n        `\n    function ${functionName}(${args.join(', ')}) {\n        ${branch}\n        ${returnValue}\n    }\\n`\n    );\n\n    // Add % so as not to collide with helper functions in definitions list.\n    // eslint-disable-next-line no-underscore-dangle\n    Blockly.JavaScript.definitions_[`%${functionName}`] = code;\n    return null;\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../../images';\n\nBlockly.Blocks.procedures_defreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n\n        this.jsonInit(this.definition());\n\n        // Enforce unique procedure names\n        const nameField = this.getField('NAME');\n        nameField.setValidator(Blockly.Procedures.rename);\n\n        // Render a ➕-icon for adding parameters\n        const fieldImage = new Blockly.FieldImage(plusIconDark, 24, 24, '+', () => this.onAddClick());\n        this.appendDummyInput('ADD_ICON').appendField(fieldImage);\n        this.moveInputBefore('ADD_ICON', 'RETURN');\n\n        this.setStatements(true);\n    },\n    definition() {\n        return {\n            message0: localize('function {{ function_name }} {{ function_params }} {{ dummy }}', {\n                function_name: '%1',\n                function_params: '%2',\n                dummy: '%3',\n            }),\n            message1: 'return %1',\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'NAME',\n                    text: '',\n                },\n                {\n                    type: 'field_label',\n                    name: 'PARAMS',\n                    text: '',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'RETURN',\n                    check: null,\n                    align: Blockly.ALIGN_RIGHT,\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Function that returns a value'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Function that returns a value'),\n            description: localize(\n                'This block is similar to the one above, except that this returns a value. The returned value can be assigned to a variable of your choice.'\n            ),\n        };\n    },\n    onAddClick: Blockly.Blocks.procedures_defnoreturn.onAddClick,\n    onchange: Blockly.Blocks.procedures_defnoreturn.onchange,\n    setStatements: Blockly.Blocks.procedures_defnoreturn.setStatements,\n    updateParams: Blockly.Blocks.procedures_defnoreturn.updateParams,\n    mutationToDom: Blockly.Blocks.procedures_defnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_defnoreturn.domToMutation,\n    /**\n     * Return the signature of this procedure definition.\n     * @return {!Array} Tuple containing three elements:\n     *     - the name of the defined procedure,\n     *     - a list of all its arguments,\n     *     - that it DOES have a return value.\n     * @this Blockly.Block\n     */\n    getProcedureDef() {\n        return [this.getFieldValue('NAME'), this.arguments, true];\n    },\n    getProcedureCallers: Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,\n    getVars: Blockly.Blocks.procedures_defnoreturn.getVars,\n    getVarModels: Blockly.Blocks.procedures_defnoreturn.getVarModels,\n    renameVarById: Blockly.Blocks.procedures_defnoreturn.renameVarById,\n    displayRenamedVar: Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,\n    customContextMenu: Blockly.Blocks.procedures_defnoreturn.customContextMenu,\n    callType: 'procedures_callreturn',\n    registerWorkspaceListener: Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener,\n};\n\nBlockly.JavaScript.procedures_defreturn = Blockly.JavaScript.procedures_defnoreturn;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.procedures_callnoreturn = {\n    init() {\n        this.arguments = [];\n        this.argument_var_models = [];\n        this.previousDisabledState = false;\n\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Custom function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            display_name: localize('Custom function'),\n            description: '',\n        };\n    },\n    /**\n     * Procedure calls cannot exist without the corresponding procedure\n     * definition.  Enforce this link whenever an event is fired.\n     * @param {!Blockly.Events.Abstract} event Change event.\n     * @this Blockly.Block\n     */\n    onchange(event) {\n        if (!this.workspace || this.workspace.isFlyout) {\n            // Block is deleted or is in a flyout.\n            return;\n        }\n\n        if (!event.recordUndo) {\n            // Events not generated by user. Skip handling.\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.indexOf(this.id) !== -1) {\n            // Look for the case where a procedure call was created (usually through\n            // paste) and there is no matching definition.  In this case, create\n            // an empty definition block with the correct signature.\n            const name = this.getProcedureCall();\n            let def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (\n                def &&\n                (def.type !== this.defType || JSON.stringify(def.arguments) !== JSON.stringify(this.arguments))\n            ) {\n                // The signatures don't match.\n                def = null;\n            }\n\n            if (def) {\n                this.data = def.id;\n                return;\n            }\n\n            Blockly.Events.setGroup(event.group);\n            /**\n             * Create matching definition block.\n             * <xml>\n             *   <block type=\"procedures_defreturn\" x=\"10\" y=\"20\">\n             *     <mutation name=\"test\">\n             *       <arg name=\"x\"></arg>\n             *     </mutation>\n             *     <field name=\"NAME\">test</field>\n             *   </block>\n             * </xml>\n             */\n            const xml = document.createElement('xml');\n            const block = document.createElement('block');\n            block.setAttribute('type', this.defType);\n\n            const xy = this.getRelativeToSurfaceXY();\n            const x = xy.x + Blockly.SNAP_RADIUS * (this.RTL ? -1 : 1);\n            const y = xy.y + Blockly.SNAP_RADIUS * 2;\n\n            block.setAttribute('x', x);\n            block.setAttribute('y', y);\n\n            const mutation = this.mutationToDom();\n\n            block.appendChild(mutation);\n\n            const field = document.createElement('field');\n            field.setAttribute('name', 'NAME');\n            field.appendChild(document.createTextNode(this.getProcedureCall()));\n\n            block.appendChild(field);\n            xml.appendChild(block);\n\n            Blockly.Xml.domToWorkspace(xml, this.workspace);\n            Blockly.Events.setGroup(false);\n\n            const procedure_definition = Blockly.Procedures.getDefinition(name, this.workspace);\n            this.data = procedure_definition.id;\n        } else if (event.type === Blockly.Events.BLOCK_DELETE) {\n            // Look for the case where a procedure definition has been deleted,\n            // leaving this block (a procedure call) orphaned.  In this case, delete\n            // the orphan.\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (!def) {\n                Blockly.Events.setGroup(event.group);\n                this.dispose(true, false);\n                Blockly.Events.setGroup(false);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.element === 'disabled') {\n            const name = this.getProcedureCall();\n            const def = Blockly.Procedures.getDefinition(name, this.workspace);\n\n            if (def && def.id === event.blockId) {\n                // in most cases the old group should be ''\n                const oldGroup = Blockly.Events.getGroup();\n\n                if (oldGroup) {\n                    // This should only be possible programatically and may indicate a problem\n                    // with event grouping. If you see this message please investigate. If the\n                    // use ends up being valid we may need to reorder events in the undo stack.\n                    // eslint-disable-next-line no-console\n                    console.log('Saw an existing group while responding to a definition change');\n                }\n\n                Blockly.Events.setGroup(event.group);\n\n                if (event.newValue) {\n                    this.previousDisabledState = this.disabled;\n                    this.setDisabled(true);\n                } else {\n                    this.setDisabled(this.previousDisabledState);\n                }\n\n                Blockly.Events.setGroup(oldGroup);\n            }\n        }\n    },\n    /**\n     * Returns the related procedure definition block.\n     * @return {Blockly.Block} Procedure definition block.\n     * @this Blockly.Block\n     */\n    getProcedureDefinition(name) {\n        // Assume that a procedure definition is a top block.\n        return this.workspace.getTopBlocks(false).find(block => {\n            if (block.getProcedureDef) {\n                const tuple = block.getProcedureDef();\n                return tuple && Blockly.Names.equals(tuple[0], name);\n            }\n            return false;\n        });\n    },\n    /**\n     * Returns the name of the procedure this block calls.\n     * @return {string} Procedure name.\n     * @this Blockly.Block\n     */\n    getProcedureCall() {\n        // The NAME field is guaranteed to exist, null will never be returned.\n        return /** @type {string} */ (this.getFieldValue('NAME'));\n    },\n    /**\n     * Notification that a procedure is renaming.\n     * If the name matches this block's procedure, rename it.\n     * @param {string} oldName Previous name of procedure.\n     * @param {string} newName Renamed procedure.\n     * @this Blockly.Block\n     */\n    renameProcedure(oldName, newName) {\n        if (Blockly.Names.equals(oldName, this.getProcedureCall())) {\n            this.setFieldValue(newName, 'NAME');\n        }\n    },\n    /**\n     * Notification that the procedure's parameters have changed.\n     * @param {!Array.<string>} paramNames New param names, e.g. ['x', 'y', 'z'].\n     * @private\n     * @this Blockly.Block\n     */\n    setProcedureParameters(paramNames) {\n        // Rebuild the block's arguments.\n        this.arguments = [].concat(paramNames);\n\n        // And rebuild the argument model list.\n        this.argument_var_models = this.arguments.map(argumentName =>\n            Blockly.Variables.getOrCreateVariablePackage(this.workspace, null, argumentName, '')\n        );\n\n        this.updateShape();\n    },\n    /**\n     * Modify this block to have the correct number of arguments.\n     * @private\n     * @this Blockly.Block\n     */\n    updateShape() {\n        this.arguments.forEach((argumentName, i) => {\n            let field = this.getField(`ARGNAME${i}`);\n            if (field) {\n                // Ensure argument name is up to date.\n                // The argument name field is deterministic based on the mutation,\n                // no need to fire a change event.\n                Blockly.Events.disable();\n                try {\n                    field.setValue(argumentName);\n                } finally {\n                    Blockly.Events.enable();\n                }\n            } else {\n                // Add new input.\n                field = new Blockly.FieldLabel(argumentName);\n                const input = this.appendValueInput(`ARG${i}`).appendField(field, `ARGNAME${i}`);\n                input.init();\n            }\n        });\n\n        // Remove deleted inputs.\n        let i = this.arguments.length;\n        while (this.getInput(`ARG${i}`)) {\n            this.removeInput(`ARG${i}`);\n            i++;\n        }\n\n        // Add 'with:' if there are parameters, remove otherwise.\n        const topRow = this.getInput('TOPROW');\n\n        if (topRow) {\n            if (this.arguments.length) {\n                if (!this.getField('WITH')) {\n                    topRow.appendField(localize('with:'), 'WITH');\n                    topRow.init();\n                }\n            } else if (this.getField('WITH')) {\n                topRow.removeField('WITH');\n            }\n        }\n    },\n    /**\n     * Create XML to represent the (non-editable) name and arguments.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('name', this.getProcedureCall());\n\n        this.arguments.forEach(argumentName => {\n            const parameter = document.createElement('arg');\n            parameter.setAttribute('name', argumentName);\n            container.appendChild(parameter);\n        });\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the (non-editable) name and parameters.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const name = xmlElement.getAttribute('name');\n        this.renameProcedure(this.getProcedureCall(), name);\n\n        const args = [];\n        const paramIds = [];\n\n        xmlElement.childNodes.forEach(childNode => {\n            if (childNode.nodeName.toLowerCase() === 'arg') {\n                args.push(childNode.getAttribute('name'));\n                paramIds.push(childNode.getAttribute('paramId'));\n            }\n        });\n\n        this.setProcedureParameters(args, paramIds);\n    },\n    /**\n     * Return all variables referenced by this block.\n     * @return {!Array.<!Blockly.VariableModel>} List of variable models.\n     * @this Blockly.Block\n     */\n    getVarModels() {\n        return this.argument_var_models;\n    },\n    /**\n     * Add menu option to find the definition block for this call.\n     * @param {!Array} options List of menu options to add to.\n     * @this Blockly.Block\n     */\n    customContextMenu(options) {\n        const name = this.getProcedureCall();\n        const { workspace } = this;\n\n        const option = { enabled: true };\n        option.text = localize('Highlight function definition');\n        option.callback = () => {\n            const def = this.getProcedureDefinition(name);\n            if (def) {\n                workspace.centerOnBlock(def.id);\n                def.select();\n            }\n        };\n\n        options.push(option);\n    },\n    defType: 'procedures_defnoreturn',\n};\n\nBlockly.JavaScript.procedures_callnoreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n    const args = block.arguments.map(\n        (arg, i) => Blockly.JavaScript.valueToCode(block, `ARG${i}`, Blockly.JavaScript.ORDER_COMMA) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.procedures_callreturn = {\n    init() {\n        this.arguments = [];\n        this.previousDisabledState = false;\n\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'NAME',\n                    text: this.id,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'TOPROW',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Custom function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Custom function'),\n            description: '',\n        };\n    },\n    onchange: Blockly.Blocks.procedures_callnoreturn.onchange,\n    getProcedureDefinition: Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,\n    getProcedureCall: Blockly.Blocks.procedures_callnoreturn.getProcedureCall,\n    renameProcedure: Blockly.Blocks.procedures_callnoreturn.renameProcedure,\n    setProcedureParameters: Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,\n    updateShape: Blockly.Blocks.procedures_callnoreturn.updateShape,\n    mutationToDom: Blockly.Blocks.procedures_callnoreturn.mutationToDom,\n    domToMutation: Blockly.Blocks.procedures_callnoreturn.domToMutation,\n    getVarModels: Blockly.Blocks.procedures_callnoreturn.getVarModels,\n    customContextMenu: Blockly.Blocks.procedures_callnoreturn.customContextMenu,\n    defType: 'procedures_defreturn',\n};\n\nBlockly.JavaScript.procedures_callreturn = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('NAME'),\n        Blockly.Procedures.NAME_TYPE\n    );\n    const args = block.arguments.map(\n        (arg, i) => Blockly.JavaScript.valueToCode(block, `ARG${i}`, Blockly.JavaScript.ORDER_COMMA) || 'null'\n    );\n\n    const code = `${functionName}(${args.join(', ')})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Block for conditionally returning a value from a procedure.\n * @this Blockly.Block\n */\nBlockly.Blocks.procedures_ifreturn = {\n    init() {\n        this.hasReturnValue = true;\n\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('if {{ condition }} return {{ value }}', { condition: '%1', value: '%2' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'CONDITION',\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Prematurely returns a value within a function'),\n            category: Blockly.Categories.Functions,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Conditional return'),\n            description: localize(\n                'This block returns a value when a condition is true. Use this block within either of the function blocks above.'\n            ),\n        };\n    },\n    /**\n     * Create XML to represent whether this block has a return value.\n     * @return {!Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('value', Number(this.hasReturnValue));\n        return container;\n    },\n    /**\n     * Parse XML to restore whether this block has a return value.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        const value = xmlElement.getAttribute('value');\n        this.hasReturnValue = value === '1';\n\n        if (!this.hasReturnValue) {\n            this.removeInput('VALUE');\n            this.appendDummyInput('VALUE').appendField(localize('return'));\n            this.initSvg();\n            this.render();\n        }\n    },\n    /**\n     * Called whenever anything on the workspace changes.\n     * Add warning if this flow block is not nested inside a loop.\n     * @param {!Blockly.Events.Abstract} e Change event.\n     * @this Blockly.Block\n     */\n    onchange(/* e */) {\n        if (!this.workspace.isDragging || this.workspace.isDragging()) {\n            return; // Don't change state at the start of a drag.\n        }\n\n        let legal = false;\n\n        // Is the block nested in a procedure?\n        let block = this;\n        do {\n            if (this.FUNCTION_TYPES.indexOf(block.type) !== -1) {\n                legal = true;\n                break;\n            }\n            block = block.getSurroundParent();\n        } while (block);\n\n        if (legal) {\n            const rerender = () => {\n                this.initSvg();\n                this.render();\n            };\n\n            // If needed, toggle whether this block has a return value.\n            if (block.type === 'procedures_defnoreturn' && this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendDummyInput('VALUE').appendField(localize('return'));\n                rerender();\n                this.hasReturnValue = false;\n            } else if (block.type === 'procedures_defreturn' && !this.hasReturnValue) {\n                this.removeInput('VALUE');\n                this.appendValueInput('VALUE').appendField(localize('return'));\n                rerender();\n                this.hasReturnValue = true;\n            }\n\n            if (!this.isInFlyout) {\n                this.setDisabled(false);\n            }\n        } else if (!this.isInFlyout && !this.getInheritedDisabled()) {\n            this.setDisabled(true);\n        }\n    },\n    /**\n     * List of block types that are functions and thus do not need warnings.\n     * To add a new function type add this to your code:\n     * Blockly.Blocks['procedures_ifreturn'].FUNCTION_TYPES.push('custom_func');\n     */\n    FUNCTION_TYPES: ['procedures_defnoreturn', 'procedures_defreturn'],\n};\n\nBlockly.JavaScript.procedures_ifreturn = block => {\n    const condition = Blockly.JavaScript.valueToCode(block, 'CONDITION', Blockly.JavaScript.ORDER_NONE) || 'false';\n\n    let branch;\n    if (block.hasReturnValue) {\n        const value = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_NONE) || 'null';\n        branch = `return ${value};\\n`;\n    } else {\n        branch = 'return;\\n';\n    }\n\n    const code = `\n    if (${condition}) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../../images';\nimport { runIrreversibleEvents, runGroupedEvents } from '../../../utils';\n\nBlockly.Blocks.lists_create_with = {\n    protected_statements: ['STACK'],\n    allowed_children: ['lists_statement'],\n    init() {\n        const field_image = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('ADD_ICON').appendField(field_image);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to create list with', { variable: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: localize('list'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block creates a list with strings and numbers.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create list'),\n            description: localize('This block creates a list with strings and numbers.'),\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            const statement_block = this.workspace.newBlock('lists_statement');\n            statement_block.required_parent_id = this.id;\n            statement_block.setMovable(false);\n            statement_block.initSvg();\n            statement_block.render();\n\n            const connection = this.getLastConnectionInStatement('STACK');\n            connection.connect(statement_block.previousConnection);\n        });\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            // Only allow \"text_statement\" type blocks\n            const blocks_in_stack = this.getBlocksInStatement('STACK');\n            blocks_in_stack.forEach(block => {\n                if (!this.allowed_children.includes(block.type)) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(/* healStack */ false);\n                    });\n                }\n            });\n        }\n    },\n};\n\n// Head's up! This is also the code generation for the \"text_join\" block.\nBlockly.JavaScript.lists_create_with = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const blocks_in_stack = block.getBlocksInStatement('STACK');\n    const elements = blocks_in_stack.map(b => {\n        const value = Blockly.JavaScript[b.type](b);\n        return Array.isArray(value) ? value[0] : value;\n    });\n\n    const code = `${var_name} = [${elements.join(', ')}];\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../utils';\n\nBlockly.Blocks.lists_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('create list with item {{ input_item }} repeated {{ number }} times', {\n                input_item: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'ITEM',\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Creates a list by repeating a given item'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat an item'),\n            description: localize('Creates a list with a given item repeated for a specific number of times.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            ITEM: emptyTextValidator,\n            NUM: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_repeat = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const function_name = Blockly.JavaScript.provideFunction_('listsRepeat', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }`,\n    ]);\n\n    const element = Blockly.JavaScript.valueToCode(block, 'ITEM', Blockly.JavaScript.ORDER_COMMA) || 'null';\n    const repeat_count = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const code = `${function_name}(${element}, ${repeat_count})`;\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('length of {{ input_list }}', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the total number of items in a given list.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List Length'),\n            description: localize('This block gives you the total number of items in a given list.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_length = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n\n    const code = `${list}.length`;\n    return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('list {{ input_list }} is empty', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: ['Array'],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Checks if a given list is empty'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Is list empty?'),\n            description: localize(\n                'This block checks if a given list is empty. It returns “True” if the list is empty, “False” if otherwise.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_isEmpty = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === list) !== -1;\n\n    const code = isVariable ? `!${list} || !${list}.length` : `!${list}.length`;\n    return [code, Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in list {{ input_list }} find {{ first_or_last }} occurence of item {{ input_value }}',\n                {\n                    input_list: '%1',\n                    first_or_last: '%2',\n                    input_value: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'END',\n                    options: [\n                        [localize('first'), 'FIRST'],\n                        [localize('last'), 'LAST'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the position of an item in a given list.'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List item position'),\n            description: localize('This block gives you the position of an item in a given list.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n            FIND: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_indexOf = block => {\n    const operator = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const item = Blockly.JavaScript.valueToCode(block, 'FIND', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    const code = `${list}.${operator}(${item})`;\n\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.ORDER_ADDITION];\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_getIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [localize('get'), 'GET'],\n            [localize('get and remove'), 'GET_REMOVE'],\n            [localize('remove'), 'REMOVE'],\n        ];\n        this.WHERE_OPTIONS = [\n            ['#', 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n            [localize('last'), 'LAST'],\n            [localize('random'), 'RANDOM'],\n        ];\n        const modeMenu = new Blockly.FieldDropdown(this.MODE_OPTIONS, value => {\n            const isStatement = value === 'REMOVE';\n            this.updateStatement(isStatement);\n        });\n\n        this.appendValueInput('VALUE').setCheck('Array').appendField(localize('in list'));\n        this.appendDummyInput().appendField(modeMenu, 'MODE');\n        this.appendDummyInput('AT');\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setTooltip(\n            'This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list.'\n        );\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n        this.updateAt(true);\n    },\n    meta() {\n        return {\n            display_name: localize('Get list item'),\n            description: localize(\n                'This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isStatement = !this.outputConnection;\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('statement', isStatement);\n        container.setAttribute('at', isAt);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isStatement = xmlElement.getAttribute('statement') === 'true';\n        this.updateStatement(isStatement);\n\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateStatement(newStatement) {\n        const oldStatement = !this.outputConnection;\n\n        if (newStatement !== oldStatement) {\n            this.unplug(true, true);\n\n            this.setOutput(!newStatement);\n            this.setPreviousStatement(newStatement);\n            this.setNextStatement(newStatement);\n\n            this.initSvg();\n            this.render(false);\n        }\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput('AT').appendField(menu, 'WHERE');\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_getIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'GET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const listOrder = where === 'RANDOM' ? Blockly.JavaScript.ORDER_COMMA : Blockly.JavaScript.ORDER_MEMBER;\n    const list = Blockly.JavaScript.valueToCode(block, 'VALUE', listOrder) || '[]';\n\n    let code, order;\n\n    if (where === 'FIRST') {\n        if (mode === 'GET') {\n            code = `${list}[0]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.shift()`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.shift();\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'GET') {\n            code = `${list}.slice(-1)[0]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.pop()`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'REMOVE') {\n            return `${list}.pop();\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        if (mode === 'GET') {\n            code = `${list}[${at}]`;\n            order = Blockly.JavaScript.ORDER_MEMBER;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n        if (mode === 'GET') {\n            code = `${list}.slice(${at})[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'GET_REMOVE') {\n            code = `${list}.splice(${at}, 1)[0]`;\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${list}.splice(${at}, 1);\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('listsGetRandomItem', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }`,\n        ]);\n\n        code = `${functionName}(${list}, ${mode !== 'GET'})`;\n\n        if (mode === 'GET' || mode === 'GET_REMOVE') {\n            order = Blockly.JavaScript.ORDER_FUNCTION_CALL;\n        } else if (mode === 'REMOVE') {\n            return `${code};\\n`;\n        }\n    }\n\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_setIndex = {\n    init() {\n        this.MODE_OPTIONS = [\n            [localize('set'), 'SET'],\n            [localize('insert at'), 'INSERT'],\n        ];\n        this.WHERE_OPTIONS = [\n            [localize('#'), 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n            [localize('last'), 'LAST'],\n            [localize('random'), 'RANDOM'],\n        ];\n\n        this.appendValueInput('LIST').setCheck('Array').appendField(localize('in list'));\n        this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS), 'MODE');\n        this.appendDummyInput('AT');\n        this.appendValueInput('TO').appendField(localize('as'));\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setPreviousStatement(true, null);\n        this.setNextStatement(true, null);\n        this.setTooltip(\n            localize(\n                'This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.'\n            )\n        );\n        this.updateAt(true);\n    },\n    meta() {\n        return {\n            display_name: localize('Set list item'),\n            description: localize(\n                'This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt = this.getInput('AT').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at', isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        } else {\n            this.appendDummyInput('AT');\n        }\n\n        const menu = new Blockly.FieldDropdown(this.WHERE_OPTIONS, value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.moveInputBefore('AT', 'TO');\n        this.getInput('AT').appendField(menu, 'WHERE');\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_setIndex = block => {\n    const mode = block.getFieldValue('MODE') || 'SET';\n    const where = block.getFieldValue('WHERE') || 'FIRST';\n    const value = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_ASSIGNMENT) || 'null';\n\n    let list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n\n    const cacheList = () => {\n        if (list.match(/^\\w+$/)) {\n            return '';\n        }\n\n        // eslint-disable-next-line no-underscore-dangle\n        const listVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpList', Blockly.Variables.NAME_TYPE);\n        const code = `var ${listVar} = ${list};\\n`;\n\n        list = listVar;\n        return code;\n    };\n\n    let code;\n\n    if (where === 'FIRST') {\n        if (mode === 'SET') {\n            code = `${list}[0] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.unshift(${value});\\n`;\n        }\n    } else if (where === 'LAST') {\n        if (mode === 'SET') {\n            code = cacheList();\n            code += `${list}[${list}.length - 1] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.push(${value});\\n`;\n        }\n    } else if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        if (mode === 'SET') {\n            code = `${list}[${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n        code = cacheList();\n        if (mode === 'SET') {\n            code = `${list}[${list}.length - ${at}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code = `${list}.splice(${list}.length - ${at}, 0, ${value});\\n`;\n        }\n    } else if (where === 'RANDOM') {\n        code = cacheList();\n\n        // eslint-disable-next-line no-underscore-dangle\n        const xVar = Blockly.JavaScript.variableDB_.getDistinctName('tmpX', Blockly.Variables.NAME_TYPE);\n\n        code += `var ${xVar} = Math.floor(Math.random() * ${list}.length);\\n`;\n\n        if (mode === 'SET') {\n            code += `${list}[${xVar}] = ${value};\\n`;\n        } else if (mode === 'INSERT') {\n            code += `${list}.splice(${xVar}, 0, ${value});\\n`;\n        }\n    }\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_getSublist = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [localize('get sub-list from #'), 'FROM_START'],\n            [localize('get sub-list from # from end'), 'FROM_END'],\n            [localize('get sub-list from first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [localize('#'), 'FROM_START'],\n            [localize('# from end'), 'FROM_END'],\n            [localize('last'), 'LAST'],\n        ];\n\n        this.appendValueInput('LIST').appendField(localize('in list'));\n        this.appendDummyInput('AT1');\n        this.appendDummyInput('AT2');\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setOutput(true, null);\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n        this.setTooltip(\n            localize('This block creates a list of items from an existing list, using specific item positions.')\n        );\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    meta() {\n        return {\n            display_name: localize('Get sub-list'),\n            description: localize(\n                'This block creates a list of items from an existing list, using specific item positions.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, isAt) {\n        this.removeInput(`AT${n}`);\n\n        if (isAt) {\n            this.appendValueInput(`AT${n}`).setCheck('Number');\n        } else {\n            this.appendDummyInput(`AT${n}`);\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== isAt) {\n                this.updateAt(n, newAt);\n                this.setFieldValue(value, `WHERE${n}`);\n                return null;\n            }\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_getSublist = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_MEMBER) || '[]';\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1, at2, code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = `${list}.slice(0)`;\n    } else if (list.match(/^\\w+$/) || (where1 !== 'FROM_END' && where2 === 'FROM_START')) {\n        if (where1 === 'FROM_START') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        } else if (where1 === 'FROM_END') {\n            at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at1 = `${list}.length - ${at1}`;\n        } else if (where1 === 'FIRST') {\n            at1 = '0';\n        }\n\n        if (where2 === 'FROM_START') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n        } else if (where2 === 'FROM_END') {\n            at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n            at2 = `${list}.length - ${at2}`;\n        } else if (where2 === 'LAST') {\n            at2 = `${list}.length`;\n        }\n\n        code = `${list}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n        const where_pascal_case = {\n            FROM_START: 'FromStart',\n            FROM_END: 'FromEnd',\n            FIRST: 'First',\n            LAST: 'Last',\n        };\n\n        const getIndex = (list_name, where, opt_at) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${list_name}.length - 1 - ${opt_at}`;\n            } else if (where === 'LAST') {\n                return `${list_name}.length - 1`;\n            }\n            return `${opt_at}`;\n        };\n\n        const has_at1 = where1 === 'FROM_END' || where1 === 'FROM_START';\n        const has_at2 = where2 === 'FROM_END' || where2 === 'FROM_START';\n\n        // eslint-disable-next-line no-underscore-dangle\n        const function_name = Blockly.JavaScript.provideFunction_(\n            `subsequence${where_pascal_case[where1]}${where_pascal_case[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence${has_at1 ? ', at1' : ''}${has_at2 ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end = ${getIndex('sequence', where2, 'at2')} + 1;\n\n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${function_name}(${list}${has_at1 ? `, ${at1}` : ''}${has_at2 ? `, ${at2}` : ''})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_split = {\n    init() {\n        const dropdown = new Blockly.FieldDropdown(\n            [\n                [localize('make list from text'), 'SPLIT'],\n                [localize('make text from list'), 'JOIN'],\n            ],\n            newMode => this.updateType(newMode)\n        );\n\n        this.appendValueInput('INPUT').setCheck('String').appendField(dropdown, 'MODE');\n        this.appendValueInput('DELIM')\n            .setCheck('String')\n            .appendField('', 'SPACE1')\n            .appendField(localize('with delimiter'), 'DELIM_LABEL');\n        this.appendDummyInput().appendField('', 'SPACE2');\n\n        this.setOutput(true, 'Array');\n        this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND);\n\n        // eslint-disable-next-line no-underscore-dangle\n        this.setColourFromRawValues_(\n            Blockly.Colours.Base.colour,\n            Blockly.Colours.Base.colourSecondary,\n            Blockly.Colours.Base.colourTertiary\n        );\n        this.setTooltip(\n            localize(\n                'This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text.'\n            )\n        );\n    },\n    meta() {\n        return {\n            display_name: localize('Create list from text'),\n            description: localize(\n                'This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text.'\n            ),\n            category: Blockly.Categories.List,\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('mode', this.getFieldValue('MODE'));\n        return container;\n    },\n    domToMutation(xmlElement) {\n        this.updateType(xmlElement.getAttribute('mode'));\n    },\n    updateType(newMode) {\n        const delimInput = this.getInput('DELIM');\n        const spaceField = this.getField('SPACE1');\n\n        if (newMode === 'SPLIT') {\n            this.outputConnection.setCheck('Array');\n            this.getInput('INPUT').setCheck('String');\n\n            // Create extra spacing for OUTPUT_SHAPE_SQUARE (i.e. string shapes)\n            if (!spaceField) {\n                delimInput.insertFieldAt(0, '', 'SPACE1');\n            }\n        } else {\n            this.outputConnection.setCheck('String');\n            this.getInput('INPUT').setCheck(null);\n\n            if (spaceField) {\n                delimInput.removeField('SPACE1');\n            }\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n};\n\nBlockly.JavaScript.lists_split = block => {\n    const input = Blockly.JavaScript.valueToCode(block, 'INPUT', Blockly.JavaScript.ORDER_MEMBER);\n    const delimiter = Blockly.JavaScript.valueToCode(block, 'DELIM', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const mode = block.getFieldValue('MODE');\n\n    let code;\n\n    if (mode === 'SPLIT') {\n        code = `${input || \"''\"}.split(${delimiter})`;\n    } else if (mode === 'JOIN') {\n        code = `${input || '[]'}.join(${delimiter})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lists_sort = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('sort {{ sort_type }} {{ sort_direction }} {{ input_list }}', {\n                sort_type: '%1',\n                sort_direction: '%2',\n                input_list: '%3',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE',\n                    options: [\n                        [localize('numeric'), 'NUMERIC'],\n                        [localize('alphabetic'), 'TEXT'],\n                    ],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'DIRECTION',\n                    options: [\n                        [localize('ascending'), '1'],\n                        [localize('descending'), '-1'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Sorts the items in a given list'),\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sort list'),\n            description: localize(\n                'Sorts the items in a given list, by their numeric or alphabetical value, in either ascending or descending order.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            LIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.lists_sort = block => {\n    const list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_FUNCTION_CALL) || '[]';\n    const direction = block.getFieldValue('DIRECTION') === '1' ? 1 : -1;\n    const type = block.getFieldValue('TYPE');\n    // eslint-disable-next-line no-underscore-dangle\n    const getCompareFunctionName = Blockly.JavaScript.provideFunction_('listsGetSortCompare', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString() > b.toString() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }`,\n    ]);\n\n    const code = `${list}.sort().slice(0).sort(${getCompareFunctionName}(\"${type}\", ${direction}))`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { minusIconDark } from '../../images';\nimport { runIrreversibleEvents, runGroupedEvents } from '../../../utils';\n\nBlockly.Blocks.lists_statement = {\n    required_parent_type: 'lists_create_with',\n    init() {\n        this.required_parent_id = '';\n        const field_image = new Blockly.FieldImage(minusIconDark, 25, 25, '', () => this.onIconClick());\n        this.jsonInit(this.definition());\n        this.appendDummyInput('REMOVE_ICON').appendField(field_image);\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.List,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('List Statement'),\n            description: '',\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            this.unplug(true);\n            this.dispose();\n        });\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const surround_parent = this.getSurroundParent();\n\n            if (!surround_parent) {\n                runIrreversibleEvents(() => {\n                    this.dispose();\n                });\n            } else if (!this.required_parent_id && surround_parent.type === this.required_parent_type) {\n                // Create connection between parent and orphaned child.\n                this.required_parent_id = surround_parent.id;\n            } else if (surround_parent.id !== this.required_parent_id) {\n                // Someone pretending to be this child's parent. Find original parent and reconnect.\n                // Happens when someone tries to connect a statement block and Blockly automagically\n                // reconnects the children to this foreign statement block.\n                const all_blocks = this.workspace.getAllBlocks();\n                const original_parent = all_blocks.find(block => block.id === this.required_parent_id);\n\n                if (original_parent) {\n                    const last_connection = original_parent.getLastConnectionInStatement('STACK');\n\n                    runIrreversibleEvents(() => {\n                        last_connection.connect(this.previousConnection);\n                    });\n                } else {\n                    // Dispose child if it became a child of an illegal parent and original parent\n                    // is nowhere to be found.\n                    runIrreversibleEvents(() => {\n                        this.dispose(/* healStack */ true);\n                    });\n                }\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.lists_statement = block => {\n    const code = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_ATOMIC) || 'null';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_repeat_ext = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('repeat {{ number }} times', { number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TIMES',\n                    check: 'Number',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Repeats inside instructions specified number of times'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat (2)'),\n            description: localize(\n                'This block is similar to the block above, except that the number of times it repeats is determined by a given variable.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TIMES: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_repeat_ext = block => {\n    let repeats;\n    if (block.getField('TIMES')) {\n        repeats = String(Number(block.getFieldValue('TIMES')));\n    } else {\n        repeats = Blockly.JavaScript.valueToCode(block, 'TIMES', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n    }\n\n    const branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    let code = '';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const loopVar = Blockly.JavaScript.variableDB_.getDistinctName('count', Blockly.Variables.NAME_TYPE);\n    let endVar = repeats;\n\n    if (!repeats.match(/^\\w+$/) && !Blockly.isNumber(repeats)) {\n        // eslint-disable-next-line no-underscore-dangle\n        endVar = Blockly.JavaScript.variableDB_.getDistinctName('repeat_end', Blockly.Variables.NAME_TYPE);\n        code += `var ${endVar} = ${repeats};\\n`;\n    }\n\n    code += `\n    for (var ${loopVar} = 0; ${loopVar} < ${endVar}; ${loopVar}++) {\n        ${branch}\n    }\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_repeat = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'controls_repeat',\n            message0: localize('repeat {{ number }} times', { number: '%1' }),\n            args0: [\n                {\n                    type: 'field_number',\n                    name: 'TIMES',\n                    value: 10,\n                    min: 0,\n                    precision: 1,\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Repeats inside instructions specified number of times'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat (1)'),\n            description: localize(\n                'This block repeats the instructions contained within for a specific number of times.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_repeat = Blockly.JavaScript.controls_repeat_ext;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_whileUntil = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('repeat {{ while_or_until }} {{ boolean }}', { while_or_until: '%1', boolean: '%2' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MODE',\n                    options: [\n                        [localize('while'), 'WHILE'],\n                        [localize('until'), 'UNTIL'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                    check: 'Boolean',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block repeats instructions as long as a given condition is true'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Repeat While/Until'),\n            description: localize('This block repeats instructions as long as a given condition is true.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            BOOL: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_whileUntil = block => {\n    const branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    const until = block.getFieldValue('MODE') === 'UNTIL';\n    const order = until ? Blockly.JavaScript.ORDER_LOGICAL_NOT : Blockly.JavaScript.ORDER_NONE;\n    let argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) || 'false';\n\n    if (until) {\n        argument0 = `!${argument0}`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const maxLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('maxLoops', Blockly.Variables.NAME_TYPE);\n    // eslint-disable-next-line no-underscore-dangle\n    const currentLoopVar = Blockly.JavaScript.variableDB_.getDistinctName('currentLoop', Blockly.Variables.NAME_TYPE);\n\n    return `\n        var ${maxLoopVar} = 10000;\n        var ${currentLoopVar} = 0;\n\n        while (${argument0}) {\n            if (${currentLoopVar} > ${maxLoopVar}) {\n                throw new Error(\"${localize('Infinite loop detected')}\");\n            } else {\n                ${currentLoopVar}++;\n            }\n            \n            ${branch}\n        }\\n`;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_for = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'count with {{ variable }} from {{ start_number }} to {{ end_number }} by {{ step_size }}',\n                {\n                    variable: '%1',\n                    start_number: '%2',\n                    end_number: '%3',\n                    step_size: '%4',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: null,\n                },\n                {\n                    type: 'input_value',\n                    name: 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TO',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'BY',\n                    check: 'Number',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.'\n            ),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Iterate (1)'),\n            description: localize(\n                'This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            FROM: null,\n            TO: null,\n            BY: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_for = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    const increment = Blockly.JavaScript.valueToCode(block, 'BY', Blockly.JavaScript.ORDER_ASSIGNMENT) || '1';\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    if (Blockly.isNumber(argument0) && Blockly.isNumber(argument1) && Blockly.isNumber(increment)) {\n        const up = parseFloat(argument0) <= parseFloat(argument1);\n        const operator = up ? '<=' : '>=';\n        const step = Math.abs(parseFloat(increment));\n\n        const assignment = `${variable0} = ${argument0}`;\n        const condition = `${variable0} ${operator} ${argument1}`;\n        const statement = `${variable0} ${up ? '+=' : '-='} ${step}`;\n\n        code = `\n        for (${assignment}; ${condition}; ${statement}) {\n            ${branch}\n        }\\n`;\n    } else {\n        // Cache non-trivial values to variables to prevent repeated look-ups.\n        let startVar = argument0;\n        if (!argument0.match(/^\\w+$/) && !Blockly.isNumber(argument0)) {\n            // eslint-disable-next-line no-underscore-dangle\n            startVar = Blockly.JavaScript.variableDB_.getDistinctName(\n                `${variable0}_start`,\n                Blockly.Variables.NAME_TYPE\n            );\n            code = `var ${startVar} = ${argument0};\\n`;\n        }\n\n        let endVar = argument1;\n        if (!argument1.match(/^\\w+$/) && !Blockly.isNumber(argument1)) {\n            // eslint-disable-next-line no-underscore-dangle\n            endVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_end`, Blockly.Variables.NAME_TYPE);\n            code += `var ${endVar} = ${argument1};\\n`;\n        }\n\n        // Determine loop direction at start, in case one of the bounds changes during loop execution.\n        // eslint-disable-next-line no-underscore-dangle\n        const incVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_inc`, Blockly.Variables.NAME_TYPE);\n        const incVal = Blockly.isNumber(increment) ? Math.abs(increment) : `Math.abs(${increment})`;\n\n        code += `\n        var ${incVar} = ${incVal};\n        if (${startVar} > ${endVar}) {\n            ${incVar} = -${incVar};\n        }\n        for (\n           ${variable0} = ${startVar}; \n           ${incVar} >= 0 ? ${variable0} <= ${endVar} : ${variable0} >= ${endVar};\n           ${variable0} += ${incVar}\n        ) {\n            ${branch};\n        }\\n`;\n    }\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_forEach = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('for each item {{ variable }} in list {{ input_list }}', {\n                variable: '%1',\n                input_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: null,\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                    check: 'Array',\n                },\n            ],\n            message1: localize('do %1'),\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Iterates through a given list'),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Iterate (2)'),\n            description: localize(\n                'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            LIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_forEach = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const variable0 = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_ASSIGNMENT) || '[]';\n\n    let branch = Blockly.JavaScript.statementToCode(block, 'DO');\n    branch = Blockly.JavaScript.addLoopTrap(branch, block.id);\n\n    let code = '';\n\n    // Cache non-trivial values to variables to prevent repeated look-ups.\n    let listVar = argument0;\n    if (!argument0.match(/^\\w+$/)) {\n        // eslint-disable-next-line no-underscore-dangle\n        listVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.NAME_TYPE);\n        code = `var ${listVar} = ${argument0};\\n`;\n    }\n\n    // eslint-disable-next-line no-underscore-dangle\n    const indexVar = Blockly.JavaScript.variableDB_.getDistinctName(`${variable0}_list`, Blockly.Variables.NAME_TYPE);\n\n    code += `\n    for (var ${indexVar} in ${listVar}) {\n        ${variable0} = ${listVar}[${indexVar}];\n        ${branch}\n    }\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.controls_flow_statements = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ break_or_continue }} of loop', { break_or_continue: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'FLOW',\n                    options: [\n                        [localize('break out'), 'BREAK'],\n                        [localize('continue with next iteration'), 'CONTINUE'],\n                    ],\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n            ),\n            category: Blockly.Categories.Loop,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Break out/continue'),\n            description: localize(\n                'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.controls_flow_statements = block => {\n    const keyword = block.getFieldValue('FLOW') === 'BREAK' ? 'break' : 'continue';\n    return `${keyword};\\n`;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.variables_get = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'variables_get',\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            tooltip: localize('Gets variable value'),\n            category: Blockly.Categories.Variables,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('User-defined variable'),\n            description: '',\n        };\n    },\n    onchange(event) {\n        if (event.type === Blockly.Events.VAR_RENAME) {\n            const all_blocks = this.workspace.getAllBlocks();\n            const function_blocks = all_blocks.filter(block => block.category_ === 'custom_functions');\n            const old_param = event.oldName;\n            const new_param = event.newName;\n            function_blocks.forEach(block => {\n                if (block.arguments?.length) {\n                    const param_index = block.arguments.findIndex(item => item === old_param);\n                    if (param_index !== -1) {\n                        block.arguments[param_index] = new_param;\n                        const param_field = block.getField('PARAMS');\n                        if (param_field) {\n                            block.setFieldValue(`${localize('with: ')} ${block.arguments.join(', ')}`, 'PARAMS');\n                        }\n                        const with_field = block.getField('WITH');\n                        if (with_field) {\n                            block.updateShape();\n                        }\n                    }\n                }\n            });\n        }\n    },\n};\n\nBlockly.JavaScript.variables_get = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.variables_set = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            type: 'field_variable',\n            message0: localize('set {{ variable }} to {{ value }}', {\n                variable: '%1',\n                value: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            colour: Blockly.Colours.Special2.colour,\n            colourSecondary: Blockly.Colours.Special2.colourSecondary,\n            colourTertiary: Blockly.Colours.Special2.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Sets variable value'),\n            category: Blockly.Categories.Variables,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Set variable'),\n            description: localize('Assigns a given value to a variable'),\n        };\n    },\n};\n\nBlockly.JavaScript.variables_set = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_ASSIGNMENT) || '0';\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n\n    const code = `${varName} = ${argument0};\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { finishSign } from '../../images';\n\nBlockly.Blocks.after_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: finishSign,\n                    width: 25,\n                    height: 25,\n                    alt: 'F',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('4. Restart trading conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'AFTERPURCHASE_STACK',\n                    check: 'TradeAgain',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Get the last trade information and result, then trade again.'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Restart trading conditions'),\n            description: localize('Here is where you can decide if your bot should continue trading.'),\n        };\n    },\n};\n\nBlockly.JavaScript.after_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'AFTERPURCHASE_STACK');\n    const code = `\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n        Bot.isTradeAgain(false);\n        return false;\n    };`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.contract_check_result = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Result is {{ win_or_loss }}', { win_or_loss: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CHECK_RESULT',\n                    options: config.lists.CHECK_RESULT,\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if the result of the last trade matches the selection'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last trade result'),\n            description: localize('You can check the result of the last trade with this block.'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE || event.type === Blockly.Events.END_DRAG) {\n            const top_parent = this.getTopParent();\n\n            if (top_parent) {\n                const is_illegal_root_block = top_parent.isMainBlock() && top_parent.type !== 'after_purchase';\n\n                if (is_illegal_root_block) {\n                    this.setDisabled(true);\n                }\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.contract_check_result = block => {\n    const checkWith = block.getFieldValue('CHECK_RESULT');\n\n    const code = `Bot.isResult('${checkWith}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.read_details = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Contract Details: {{ contract_detail }}', { contract_detail: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'DETAIL_INDEX',\n                    options: config.lists.DETAILS,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND, // TODO: Investigate why block glitches in square shape.\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Reads a selected property from contract details list'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Contract details'),\n            description: localize('This block gives you information about your last contract.'),\n        };\n    },\n    restricted_parents: ['after_purchase'],\n};\n\nBlockly.JavaScript.read_details = block => {\n    const detailIndex = block.getFieldValue('DETAIL_INDEX');\n\n    const code = `Bot.readDetails(${detailIndex})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_again = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Trade again'),\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            tooltip: localize('These blocks transfer control to the Purchase conditions block.'),\n            category: Blockly.Categories.After_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade again'),\n            description: localize(\n                'This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract.'\n            ),\n            key_words: localize('restart'),\n        };\n    },\n    restricted_parents: ['after_purchase'],\n};\n\nBlockly.JavaScript.trade_again = () => {\n    const code = `\n        Bot.isTradeAgain(true);\\n\n        return true;\\n\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { purchase } from '../../images';\n\nBlockly.Blocks.before_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n        this.setDeletable(false);\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: purchase,\n                    width: 25,\n                    height: 25,\n                    alt: 'P',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('2. Purchase conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'BEFOREPURCHASE_STACK',\n                    check: 'Purchase',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Specify contract type and purchase conditions.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase conditions'),\n            description: localize(\n                'This block is mandatory. Only one copy of this block is allowed. You can place the Purchase block (see below) here as well as conditional blocks to define your purchase conditions.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.before_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'BEFOREPURCHASE_STACK');\n\n    const code = `BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { getContractTypeOptions } from '../../../shared';\n\nBlockly.Blocks.purchase = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Purchase {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            previousStatement: null,\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            tooltip: localize('This block purchases contract of a specified type.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase'),\n            description: localize(\n                'Use this block to purchase the specific contract you want. You may add multiple Purchase blocks together with conditional blocks to define your purchase conditions. This block can only be used within the Purchase conditions block.'\n            ),\n            key_words: localize('buy'),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.populatePurchaseList(event);\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TYPE_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.populatePurchaseList(event);\n            }\n        } else if (event.type === Blockly.Events.END_DRAG && event.blockId === this.id) {\n            const purchase_type_list = this.getField('PURCHASE_LIST');\n            const purchase_options = purchase_type_list.menuGenerator_; // eslint-disable-line\n\n            if (purchase_options[0][0] === '') {\n                this.populatePurchaseList(event);\n            }\n        }\n    },\n    populatePurchaseList(event) {\n        const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n\n        if (trade_definition_block) {\n            const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n            const trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n            const contract_type_block = trade_definition_block.getChildByType('trade_definition_contracttype');\n            const contract_type = contract_type_block.getFieldValue('TYPE_LIST');\n            const purchase_type_list = this.getField('PURCHASE_LIST');\n            const purchase_type = purchase_type_list.getValue();\n            const contract_type_options = getContractTypeOptions(contract_type, trade_type);\n\n            purchase_type_list.updateOptions(contract_type_options, {\n                default_value: purchase_type,\n                event_group: event.group,\n                should_pretend_empty: true,\n            });\n        }\n    },\n    restricted_parents: ['before_purchase'],\n};\n\nBlockly.JavaScript.purchase = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.purchase('${purchaseList}');\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.ask_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ask Price {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns the purchase price for the selected trade type.'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Purchase price'),\n            description: localize(\n                'This block returns the purchase price for the selected trade type. This block can be used only in the \"Purchase conditions\" root block.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.purchase.onchange,\n    populatePurchaseList: Blockly.Blocks.purchase.populatePurchaseList,\n    enforceLimitations: Blockly.Blocks.purchase.enforceLimitations,\n};\n\nBlockly.JavaScript.ask_price = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getAskPrice('${purchaseList}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.payout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Payout {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'PURCHASE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns the potential payout for the selected trade type'),\n            category: Blockly.Categories.Before_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Potential payout'),\n            description: localize(\n                'This block returns the potential payout for the selected trade type. This block can be used only in the \"Purchase conditions\" root block.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.purchase.onchange,\n    populatePurchaseList: Blockly.Blocks.purchase.populatePurchaseList,\n    enforceLimitations: Blockly.Blocks.purchase.enforceLimitations,\n};\n\nBlockly.JavaScript.payout = block => {\n    const purchaseList = block.getFieldValue('PURCHASE_LIST');\n\n    const code = `Bot.getPayout('${purchaseList}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { sellContract } from '../../images';\n\nBlockly.Blocks.during_purchase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: sellContract,\n                    width: 25,\n                    height: 25,\n                    alt: 'S',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('3. Sell conditions'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DURING_PURCHASE_STACK',\n                    check: 'SellAtMarket',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Sell your active contract if needed (optional)'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sell conditions'),\n            description: localize(\n                'Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.during_purchase = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'DURING_PURCHASE_STACK');\n\n    const code = `BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        Bot.highlightBlock('${block.id}');\n        ${stack}\n    };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.sell_at_market = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell at market price'),\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Use this block to sell your contract at the market price.'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Sell at market price'),\n            description: localize('Use this block to sell your contract at the market price.'),\n        };\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.sell_at_market = () => 'Bot.sellAtMarket();\\n';\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.check_sell = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell is available'),\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if active contract can be sold before expiration at current market price'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Can contract be sold?'),\n            description: localize(\n                'This block helps you check if your contract can be sold. If your contract can be sold, it returns “True”. Otherwise, it returns an empty string.'\n            ),\n        };\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.check_sell = () => {\n    const code = 'Bot.isSellAvailable()';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.sell_price = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Sell profit/loss'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the profit/loss from selling at market price'),\n            category: Blockly.Categories.During_Purchase,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Profit/loss from selling'),\n            description: localize(\n                'This block gives you the potential profit or loss if you decide to sell your contract.'\n            ),\n        };\n    },\n    restricted_parents: ['during_purchase'],\n};\n\nBlockly.JavaScript.sell_price = () => {\n    const code = 'Bot.getSellPrice()';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.bb_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Bollinger Bands {{ band_type }} {{ dummy }}', {\n                variable: '%1',\n                band_type: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'bb',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Bollinger Bands (BB) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Bollinger Bands (BB)'),\n            description: localize(\n                'BB is a technical analysis indicator that’s commonly used by traders. The idea behind BB is that the market price stays within the upper and lower bands for 95% of the time. The bands are the standard deviations of the market price, while the line in the middle is a simple moving average line. If the price reaches either the upper or lower band, there’s a possibility of a trend reversal.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const blocksInStatement = this.getBlocksInStatement('STATEMENT');\n            blocksInStatement.forEach(block => {\n                if (!this.required_child_blocks.includes(block.type)) {\n                    Blockly.Events.disable();\n                    block.unplug(false);\n                    Blockly.Events.enable();\n                }\n            });\n        }\n    },\n};\n\nBlockly.JavaScript.bb_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const bb_result = block.getFieldValue('BBRESULT_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const std_dev_up = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER');\n    const std_dev_down = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER');\n    const code = `${var_name} = Bot.bb(${input}, { \n        periods: ${period}, \n        stdDevUp: ${std_dev_up}, \n        stdDevDown: ${std_dev_down} \n    }, ${bb_result});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.bba_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period', 'std_dev_multiplier_up', 'std_dev_multiplier_down'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Bollinger Bands Array {{ band_type }} {{ dummy }}', {\n                variable: '%1',\n                band_type: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'bba',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'BBRESULT_LIST',\n                    options: config.bbResult,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Bollinger Bands (BB) list from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Bollinger Bands Array (BBA)'),\n            description: localize(\n                'Similar to BB. This block gives you a choice of returning the values of either the lower band, higher band, or the SMA line in the middle.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.bba_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const bb_result = block.getFieldValue('BBRESULT_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const std_dev_up = block.childValueToCode('std_dev_multiplier_up', 'UPMULTIPLIER');\n    const std_dev_down = block.childValueToCode('std_dev_multiplier_down', 'DOWNMULTIPLIER');\n    const code = `${var_name} = Bot.bba(${input}, { \n        periods: ${period}, \n        stdDevUp: ${std_dev_up}, \n        stdDevDown: ${std_dev_down} \n    }, ${bb_result});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.ema_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Exponential Moving Average {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'ema',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Exponential Moving Average (EMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Exponential Moving Average (EMA)'),\n            description: localize(\n                'EMA is a type of moving average that places more significance on the most recent data points. It’s also known as the exponentially weighted moving average. EMA is different from SMA in that it reacts more significantly to recent price changes.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.ema_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.ema(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.emaa_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Exponential Moving Average Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'emaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Exponential Moving Average (EMA) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Exponential Moving Average Array (EMAA)'),\n            description: localize(\n                'This block is similar to EMA, except that it gives you the entire EMA line based on the input list and the given period.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.emaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.emaa(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.rsi_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Relative Strength Index {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'rsi',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Relative Strength Index (RSI) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Relative Strength Index (RSI)'),\n            description: localize(\n                'RSI is a technical analysis tool that helps you identify the market trend. It will give you a value from 0 to 100. An RSI value of 70 and above means that the asset is overbought and the current trend may reverse, while a value of 30 and below means that the asset is oversold.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.rsi_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.rsi(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.rsia_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Relative Strength Index Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'rsia',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Relative Strength Index (RSI) list from a list of values with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Relative Strength Index Array (RSIA)'),\n            description: localize(\n                'Similar to RSI, this block gives you a list of values for each entry in the input list.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.rsia_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.rsia(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.sma_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Simple Moving Average {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'sma',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Simple Moving Average (SMA) from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Simple Moving Average (SMA)'),\n            description: localize(\n                'SMA is a frequently used indicator in technical analysis. It calculates the average market price over a specified period, and is usually used to identify market trend direction: up or down. For example, if the SMA is moving upwards, it means the market trend is up. '\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.sma_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.sma(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.smaa_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to Simple Moving Average Array {{ dummy }}', {\n                variable: '%1',\n                dummy: '%2',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'smaa',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Simple Moving Average line from a list with a period'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Simple Moving Average Array (SMAA)'),\n            description: localize(\n                'Similar to SMA, this block gives you the entire SMA line containing a list of all values for a given period.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.smaa_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const period = block.childValueToCode('period', 'PERIOD');\n    const code = `${var_name} = Bot.smaa(${input}, ${period});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.macda_statement = {\n    protected_statements: ['STATEMENT'],\n    required_child_blocks: ['input_list', 'fast_ema_period', 'slow_ema_period', 'signal_ema_period'],\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to MACD Array {{ dropdown }} {{ dummy }}', {\n                variable: '%1',\n                dropdown: '%2',\n                dummy: '%3',\n            }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: 'macda',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'MACDFIELDS_LIST',\n                    options: config.macdFields,\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STATEMENT',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Calculates Moving Average Convergence Divergence (MACD) from a list'),\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Indicators,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Moving Average Convergence Divergence'),\n            description: localize(\n                'MACD is calculated by subtracting the long-term EMA (26 periods) from the short-term EMA (12 periods). If the short-term EMA is greater or lower than the long-term EMA than there’s a possibility of a trend reversal.'\n            ),\n        };\n    },\n\n    onchange: Blockly.Blocks.bb_statement.onchange,\n};\n\nBlockly.JavaScript.macda_statement = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const macd_field = block.getFieldValue('MACDFIELDS_LIST');\n    const input = block.childValueToCode('input_list', 'INPUT_LIST');\n    const fast_ema_period = block.childValueToCode('fast_ema_period', 'FAST_EMA_PERIOD');\n    const slow_ema_period = block.childValueToCode('slow_ema_period', 'SLOW_EMA_PERIOD');\n    const signal_ema_period = block.childValueToCode('signal_ema_period', 'SIGNAL_EMA_PERIOD');\n    const code = `${var_name} = Bot.macda(${input}, { \n        fastEmaPeriod: ${fast_ema_period},\n        slowEmaPeriod: ${slow_ema_period},\n        signalEmaPeriod: ${signal_ema_period},\n    }, ${macd_field});\\n`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { runIrreversibleEvents } from '../../../../utils';\n\nBlockly.Blocks.input_list = {\n    init() {\n        this.jsonInit({\n            message0: localize('Input List {{ input_list }}', { input_list: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'INPUT_LIST',\n                    check: 'Array',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const setParentId = () => {\n            const surround_parent = this.getSurroundParent();\n            if (surround_parent && !this.required_parent_id && this.allowed_parents.includes(surround_parent.type)) {\n                this.required_parent_id = surround_parent.id;\n            }\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            setParentId();\n        } else if (event.type === Blockly.Events.END_DRAG) {\n            setParentId();\n\n            const surround_parent = this.getSurroundParent();\n            const has_parent = !!surround_parent;\n            const is_illegal_parent = !has_parent || surround_parent.id !== this.required_parent_id;\n\n            if (!has_parent || is_illegal_parent) {\n                runIrreversibleEvents(() => {\n                    this.unplug(true);\n\n                    // Attempt to re-connect this child to its original parent.\n                    const all_blocks = this.workspace.getAllBlocks();\n                    const parent_block = all_blocks.find(block => block.id === this.required_parent_id);\n\n                    if (parent_block) {\n                        const parent_connection = parent_block.getLastConnectionInStatement('STATEMENT');\n                        parent_connection.connect(this.previousConnection);\n                    } else {\n                        this.dispose();\n                    }\n                });\n            }\n        }\n    },\n    allowed_parents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n    getRequiredValueInputs() {\n        return {\n            INPUT_LIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.input_list = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Period {{ input_period }}', { input_period: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: [\n        'bb_statement',\n        'bba_statement',\n        'ema_statement',\n        'emaa_statement',\n        'macda_statement',\n        'rsi_statement',\n        'rsia_statement',\n        'sma_statement',\n        'smaa_statement',\n    ],\n    getRequiredValueInputs() {\n        return {\n            PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.std_dev_multiplier_up = {\n    init() {\n        this.jsonInit({\n            message0: localize('Standard Deviation Up Multiplier {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'UPMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['bb_statement', 'bba_statement'],\n    getRequiredValueInputs() {\n        return {\n            UPMULTIPLIER: null,\n        };\n    },\n};\n\nBlockly.JavaScript.std_dev_multiplier_up = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.std_dev_multiplier_down = {\n    init() {\n        this.jsonInit({\n            message0: localize('Standard Deviation Down Multiplier {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DOWNMULTIPLIER',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['bb_statement', 'bba_statement'],\n    getRequiredValueInputs() {\n        return {\n            DOWNMULTIPLIER: null,\n        };\n    },\n};\n\nBlockly.JavaScript.std_dev_multiplier_down = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.fast_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Fast EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'FAST_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            FAST_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.fast_ema_period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.slow_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Slow EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'SLOW_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            SLOW_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.slow_ema_period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.signal_ema_period = {\n    init() {\n        this.jsonInit({\n            message0: localize('Signal EMA Period {{ input_number }}', { input_number: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'SIGNAL_EMA_PERIOD',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange: Blockly.Blocks.input_list.onchange,\n    allowed_parents: ['macda_statement'],\n    getRequiredValueInputs() {\n        return {\n            SIGNAL_EMA_PERIOD: null,\n        };\n    },\n};\n\nBlockly.JavaScript.signal_ema_period = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.tick = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Tick'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the value of the last tick'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last tick'),\n            description: localize('This block gives you the value of the last tick.'),\n        };\n    },\n};\n\nBlockly.Blocks.tick_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Tick String'),\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the value of the latest tick in string format'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick value'),\n            description: localize('Tick value Description'),\n        };\n    },\n    onchange: Blockly.Blocks.tick.onchange,\n};\n\nBlockly.JavaScript.tick = block => {\n    const parent = block.getParent();\n    const type_list = ['notify', 'text_print'];\n    return [`Bot.getLastTick(false, ${type_list.includes(parent?.type)})`, Blockly.JavaScript.ORDER_ATOMIC];\n};\nBlockly.JavaScript.tick_string = () => ['Bot.getLastTick(false, true)', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.ticks = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ticks list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a list of the last 1000 tick values.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick list'),\n            description: localize('This block gives you a list of the last 1000 tick values.'),\n        };\n    },\n};\n\nBlockly.Blocks.ticks_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Ticks String List'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of tick values in string format'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Tick List String'),\n            description: localize('Tick List String Description'),\n        };\n    },\n    onchange: Blockly.Blocks.ticks.onchange,\n};\n\nBlockly.JavaScript.ticks = block => {\n    const parent = block.getParent();\n    const type_list = ['notify', 'text_print'];\n    return [`Bot.getTicks(${type_list.includes(parent?.type)})`, Blockly.JavaScript.ORDER_ATOMIC];\n};\nBlockly.JavaScript.ticks_string = () => ['Bot.getTicks(true)', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Candles List'),\n            message1: localize('with interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a list of candles within a selected time interval.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get candle list'),\n            description: localize('This block gives you a list of candles within a selected time interval.'),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n\n    const code = `Bot.getOhlc({ granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.ohlc_values = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Make a List of {{ candle_property }} values in candles list with interval: {{ candle_interval_type }}',\n                {\n                    candle_property: '%1',\n                    candle_interval_type: '%2',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'Returns a list of specific values from a candle list according to selected time interval'\n            ),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create a list of candle values (1)'),\n            description: localize(\n                'This block gives you the selected candle value from a list of candles within the selected time interval.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc_values = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n\n    const code = `Bot.getOhlc({ field: '${ohlcField}', granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.read_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('In candles list read {{ candle_property }} # from end {{ input_number }}', {\n                candle_property: '%1',\n                input_number: '%2',\n            }),\n            message1: localize('with interval: %1'),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Read the selected candle value'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Read candle value (1)'),\n            description: localize('This block gives you the specified candle value for a selected time interval.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            CANDLEINDEX: null,\n        };\n    },\n};\n\nBlockly.JavaScript.read_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const index = Blockly.JavaScript.valueToCode(block, 'CANDLEINDEX', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ field: '${ohlcField}', index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.get_ohlc = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('in candle list get # from end {{ input_number }}', { input_number: '%1' }),\n            message1: localize('with interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'CANDLEINDEX',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals,\n                },\n            ],\n            output: 'Candle',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a specific candle from within the selected time interval.'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get candle'),\n            description: localize('This block gives you a specific candle from within the selected time interval.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            CANDLEINDEX: null,\n        };\n    },\n};\n\nBlockly.JavaScript.get_ohlc = block => {\n    const selectedGranularity = block.getFieldValue('CANDLEINTERVAL_LIST');\n    const granularity = selectedGranularity === 'default' ? 'undefined' : selectedGranularity;\n    const index = Blockly.JavaScript.valueToCode(block, 'CANDLEINDEX', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `Bot.getOhlcFromEnd({ index: ${index}, granularity: ${granularity} })`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.check_direction = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Direction is {{ direction_type }}', { direction_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CHECK_DIRECTION',\n                    options: config.lists.CHECK_DIRECTION,\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('True if the market direction matches the selection'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Market direction'),\n            description: localize(\n                'This block is used to determine if the market price moves in the selected direction or not. It gives you a value of “True” or “False”.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.check_direction = block => {\n    const checkWith = block.getFieldValue('CHECK_DIRECTION');\n\n    const code = `Bot.checkDirection('${checkWith}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.tick_analysis = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: localize('The content of this block is called on every tick'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TICKANALYSIS_STACK',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('You can use this block to analyze the ticks, regardless of your trades'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Run on every tick'),\n            description: localize(\n                'The content of this block is called on every tick. Place this block outside of any root block.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.tick_analysis = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'TICKANALYSIS_STACK') || '';\n    const code = `\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        ${stack}\n    });\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.last_digit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last Digit'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the last digit of the latest tick'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last Digit'),\n            description: localize('This block gives you the last digit of the latest tick value.'),\n        };\n    },\n};\n\nBlockly.JavaScript.last_digit = () => ['Bot.getLastDigit()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.lastDigitList = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Last digits list'),\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the list of last digits of 1000 recent tick values'),\n            category: Blockly.Categories.Tick_Analysis,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Last Digits List'),\n            description: localize('This block gives you a list of the last digits of the last 1000 tick values.'),\n        };\n    },\n};\n\nBlockly.JavaScript.lastDigitList = () => ['Bot.getLastDigitList()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.is_candle_black = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Is candle {{ input_candle }} black?', { input_candle: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                    check: 'Candle',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns \"True\" if the given candle is black'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Is candle black?'),\n            description: localize(\n                'This block returns “True” if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCOBJ: null,\n        };\n    },\n};\n\nBlockly.JavaScript.is_candle_black = block => {\n    const ohlcObj = Blockly.JavaScript.valueToCode(block, 'OHLCOBJ', Blockly.JavaScript.ORDER_ATOMIC) || '{}';\n\n    const code = `Bot.isCandleBlack(${ohlcObj})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.ohlc_values_in_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Make a list of {{ candle_property }} values from candles list {{ candle_list }}', {\n                candle_property: '%1',\n                candle_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCLIST',\n                },\n            ],\n            output: 'Array',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a list of specific values from a given candle list'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Create a list of candle values (2)'),\n            description: localize('This block gives you the selected candle value from a list of candles.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCLIST: null,\n        };\n    },\n};\n\nBlockly.JavaScript.ohlc_values_in_list = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST') || 'open';\n    const ohlcList = Blockly.JavaScript.valueToCode(block, 'OHLCLIST', Blockly.JavaScript.ORDER_ATOMIC) || '[]';\n\n    const code = `Bot.candleValues(${ohlcList}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.read_ohlc_obj = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Read {{ candle_property }} value in candle {{ input_candle }}', {\n                candle_property: '%1',\n                input_candle: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OHLCFIELD_LIST',\n                    options: config.ohlcFields,\n                },\n                {\n                    type: 'input_value',\n                    name: 'OHLCOBJ',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the selected candle value.'),\n            category: Blockly.Categories.Candle,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Read candle value (2)'),\n            description: localize('This block gives you the selected candle value.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            OHLCOBJ: null,\n        };\n    },\n};\n\nBlockly.JavaScript.read_ohlc_obj = block => {\n    const ohlcField = block.getFieldValue('OHLCFIELD_LIST');\n    const ohlcObj = Blockly.JavaScript.valueToCode(block, 'OHLCOBJ', Blockly.JavaScript.ORDER_ATOMIC) || '{}';\n\n    const code = `Bot.candleField(${ohlcObj}, '${ohlcField}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.balance = {\n    init() {\n        this.jsonInit(this.definition());\n        const balanceTypeField = this.getField('BALANCE_TYPE');\n        balanceTypeField.setValidator(value => {\n            if (value === 'STR') {\n                this.setOutput(true, 'String');\n            } else if (value === 'NUM') {\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.render(false);\n            return undefined;\n        });\n    },\n    definition() {\n        return {\n            message0: localize('Balance: %1'),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BALANCE_TYPE',\n                    options: config.lists.BALANCE_TYPE,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block returns account balance'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Account balance'),\n            description: localize(\n                'This block gives you the balance of your account either as a number or a string of text.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.balance = block => {\n    const balanceType = block.getFieldValue('BALANCE_TYPE');\n\n    const code = `Bot.getBalance('${balanceType}')`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../../constants/config';\n\n// This block is a remnant of a very old Binary Bot version.\n// needs to be here for backward compatibility.\nBlockly.Blocks.barrier_offset = {\n    init() {\n        this.jsonInit({\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BARRIEROFFSET_IN',\n                    options: config.BARRIER_TYPES,\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Adds a sign to a number to create a barrier offset. (deprecated)'),\n            category: Blockly.Categories.Miscellaneous,\n        });\n    },\n};\n\nBlockly.JavaScript.barrier_offset = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.block_holder = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: 'Ignore',\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'USELESS_STACK',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Put your blocks in here to prevent them from being removed'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Ignore'),\n            description: localize(\n                'Use this block if you want some instructions to be ignored when your bot runs. Instructions within this block won’t be executed.'\n            ),\n        };\n    },\n};\n\nBlockly.JavaScript.block_holder = () => '';\n","import { localize } from '@deriv/translations';\nimport { loadBlocksFromRemote, runIrreversibleEvents } from '../../../../utils';\nimport { observer as globalObserver } from '../../../../../utils/observer';\nimport { log_types } from '../../../../../constants/messages';\n\nBlockly.Blocks.loader = {\n    init() {\n        this.blocks_added_by_me = [];\n        this.current_url = '';\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Load block from URL: {{ input_url }}', { input_url: '%1' }),\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'URL',\n                    text: 'http://www.example.com/block.xml',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Loads blocks from URL'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Loads from URL'),\n            description: localize(\n                'This block allows you to load blocks from a URL if you have them stored on a remote server, and they will be loaded only when your bot runs.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.current_url = this.getFieldValue('URL');\n            const loader_blocks = this.workspace.getAllBlocks().filter(block => block.type === 'loader');\n\n            loader_blocks.forEach(loader_block => {\n                if (loader_block.id !== this.id && loader_block.current_url === this.current_url) {\n                    this.setDisabled(true);\n                }\n            });\n\n            if (!this.disabled) {\n                this.loadBlocksFromCurrentUrl();\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === this.id) {\n            if (event.newValue && event.oldValue !== event.newValue) {\n                if (event.newValue === this.current_url) {\n                    this.setDisabled(false);\n                } else if (this.isValidUrl(event.newValue) && !this.isKnownUrl(event.newValue)) {\n                    this.setDisabled(false);\n                    this.loadBlocksFromCurrentUrl();\n                } else {\n                    this.setDisabled(true);\n                }\n            }\n        }\n    },\n    loadBlocksFromCurrentUrl() {\n        this.current_url = this.getFieldValue('URL');\n\n        runIrreversibleEvents(() => {\n            // Remove blocks previously loaded by this block.\n            this.blocks_added_by_me.forEach(block => block.dispose());\n        });\n\n        loadBlocksFromRemote(this)\n            .then(() => {\n                globalObserver.emit('ui.log.success', { log_type: log_types.LOAD_BLOCK });\n            })\n            .catch(error_msg => {\n                globalObserver.emit('ui.log.error', error_msg);\n                this.setDisabled(true);\n            });\n    },\n    isKnownUrl(url) {\n        const loader_blocks = this.workspace.getAllBlocks().filter(block => block.type === 'loader');\n        return loader_blocks.some(block => block.id !== this.id && block.current_url === url);\n    },\n    isValidUrl(url) {\n        const url_pattern = /[^/]*\\.[a-zA-Z]{3}$/;\n        return String(url).match(url_pattern);\n    },\n};\n\nBlockly.JavaScript.loader = () => {};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\nimport { config } from '../../../../../constants/config';\n\nBlockly.Blocks.notify = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Notify {{ notification_type }} with sound: {{ notification_sound }} {{ input_message }}',\n                {\n                    notification_type: '%1',\n                    notification_sound: '%2',\n                    input_message: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'NOTIFICATION_TYPE',\n                    options: config.lists.NOTIFICATION_TYPE,\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'NOTIFICATION_SOUND',\n                    options: config.lists.NOTIFICATION_SOUND,\n                },\n                {\n                    type: 'input_value',\n                    name: 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Displays a notification and optionally play selected sound'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Notify'),\n            description: localize(\n                'This block displays a message. You can specify the color of the message and choose from 6 different sound options.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.notify = block => {\n    const notificationType = block.getFieldValue('NOTIFICATION_TYPE');\n    const sound = block.getFieldValue('NOTIFICATION_SOUND');\n    const message_block = block.getInputTargetBlock('MESSAGE');\n    let variable_name = null;\n\n    if (message_block.type === 'variables_get') {\n        const variable_id = message_block.getFieldValue('VAR');\n        variable_name = Blockly.derivWorkspace.getVariableById(variable_id).name;\n    }\n\n    const message =\n        Blockly.JavaScript.valueToCode(block, 'MESSAGE', Blockly.JavaScript.ORDER_ATOMIC) ||\n        `\"${localize('<empty message>')}\"`;\n\n    const code = `Bot.notify({ className: 'journal__text--${notificationType}', message: ${message}, sound: '${sound}', block_id: '${block.id}', variable_name: '${variable_name}' });\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\n\nBlockly.Blocks.notify_telegram = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'Notify Telegram {{ dummy }} Access Token: {{ input_access_token }} Chat ID: {{ input_chat_id }} Message: {{ input_message }}',\n                {\n                    dummy: '%1',\n                    input_access_token: '%2',\n                    input_chat_id: '%3',\n                    input_message: '%4',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_ACCESS_TOKEN',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_CHAT_ID',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TELEGRAM_MESSAGE',\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Sends a message to Telegram'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Notify Telegram'),\n            description: localize('This block sends a message to a Telegram channel.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TELEGRAM_ACCESS_TOKEN: emptyTextValidator,\n            TELEGRAM_CHAT_ID: emptyTextValidator,\n            TELEGRAM_MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.notify_telegram = block => {\n    const access_token =\n        Blockly.JavaScript.valueToCode(block, 'TELEGRAM_ACCESS_TOKEN', Blockly.JavaScript.ORDER_ATOMIC) || '';\n    const chat_id = Blockly.JavaScript.valueToCode(block, 'TELEGRAM_CHAT_ID', Blockly.JavaScript.ORDER_ATOMIC) || '';\n    const message = Blockly.JavaScript.valueToCode(block, 'TELEGRAM_MESSAGE', Blockly.JavaScript.ORDER_ATOMIC) || '';\n\n    if (!access_token || !chat_id || !message) {\n        return '';\n    }\n\n    const code = `Bot.notifyTelegram(${access_token}, ${chat_id}, ${message});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.total_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Total profit/loss'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the total profit/loss'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Total profit/loss'),\n            description: localize(\n                'This block gives you the total profit/loss of your trading strategy since your bot started running. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        if (\n            event.type === Blockly.Events.END_DRAG ||\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id))\n        ) {\n            const input_statement = this.getRootInputTargetBlock();\n\n            if (input_statement === 'INITIALIZATION') {\n                this.unplug(true);\n            }\n        }\n    },\n};\n\nBlockly.Blocks.total_profit_string = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Total Profit String'),\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the total profit in string format'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Total Profit String'),\n            description: localize('Total Profit String Description'),\n        };\n    },\n    onchange: Blockly.Blocks.total_profit.onchange,\n};\n\nBlockly.JavaScript.total_profit = () => ['Bot.getTotalProfit(false)', Blockly.JavaScript.ORDER_ATOMIC];\nBlockly.JavaScript.total_profit_string = () => ['Bot.getTotalProfit(true)', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.total_runs = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Number of runs'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the number of runs'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Number of runs'),\n            description: localize(\n                'This block gives you the total number of times your bot has run. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.'\n            ),\n        };\n    },\n    onchange: Blockly.Blocks.total_profit.onchange,\n};\n\nBlockly.JavaScript.total_runs = () => ['Bot.getTotalRuns()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.useless_block = {\n    init() {\n        this.jsonInit({\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_label',\n                    text: localize('Conversion Helper Block'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('This block was required to correctly convert your old strategy.'),\n            category: Blockly.Categories.Miscellaneous,\n            nextStatement: null,\n            previousStatement: null,\n        });\n    },\n};\n\nBlockly.JavaScript.useless_block = () => {};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\n\nBlockly.Blocks.console = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Console {{ message_type }} value: {{ input_message }}', {\n                message_type: '%1',\n                input_message: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CONSOLE_TYPE',\n                    options: [\n                        [localize('Log'), 'log'],\n                        [localize('Warn'), 'warn'],\n                        [localize('Error'), 'error'],\n                        [localize('Table'), 'table'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'MESSAGE',\n                    check: null,\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Display messages in the developer’s console.'),\n            category: Blockly.Categories.Miscellaneous,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Console'),\n            description: localize(\n                \"This block displays messages in the developer's console with an input that can be either a string of text, a number, boolean, or an array of data.\"\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            MESSAGE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.console = block => {\n    const console_type = block.getFieldValue('CONSOLE_TYPE') || 'log';\n    const message =\n        Blockly.JavaScript.valueToCode(block, 'MESSAGE', Blockly.JavaScript.ORDER_ATOMIC) ||\n        `\"${localize('<empty message>')}\"`;\n\n    const code = `Bot.console({ type: '${console_type}', message: ${message}});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.epoch = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Seconds Since Epoch'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the number of seconds since January 1st, 1970'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Second Since Epoch'),\n            description: localize('This block returns the number of seconds since January 1st, 1970.'),\n        };\n    },\n};\n\nBlockly.JavaScript.epoch = () => ['Bot.getTime()', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.timeout = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ dummy }} {{ stack_input }} Run after {{ number }} second(s)', {\n                dummy: '%1',\n                stack_input: '%2',\n                number: '%3',\n            }),\n            args0: [\n                {\n                    type: 'input_dummy',\n                },\n                {\n                    type: 'input_statement',\n                    name: 'TIMEOUTSTACK',\n                },\n                {\n                    type: 'input_value',\n                    name: 'SECONDS',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Run the blocks inside after a given number of seconds'),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Delayed run'),\n            description: localize(\n                'This block delays execution for a given number of seconds. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            SECONDS: null,\n        };\n    },\n};\n\nBlockly.JavaScript.timeout = block => {\n    const stack = Blockly.JavaScript.statementToCode(block, 'TIMEOUTSTACK');\n    const seconds = Blockly.JavaScript.valueToCode(block, 'SECONDS', Blockly.JavaScript.ORDER_ATOMIC) || '1';\n\n    const code = `sleep(${seconds});\\n${stack}\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.todatetime = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('To date/time {{ input_timestamp }} {{ dummy }}', {\n                input_timestamp: '%1',\n                dummy: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TIMESTAMP',\n                    check: 'Number',\n                },\n                {\n                    // Extra dummy for spacing.\n                    type: 'input_dummy',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.'\n            ),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Convert to date/time'),\n            description: localize(\n                'This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TIMESTAMP: null,\n        };\n    },\n};\n\nBlockly.JavaScript.todatetime = block => {\n    const timestamp = Blockly.JavaScript.valueToCode(block, 'TIMESTAMP', Blockly.JavaScript.ORDER_ATOMIC);\n    const invalid_timestamp = `${localize('Invalid timestamp')}:`;\n\n    // eslint-disable-next-line no-underscore-dangle\n    const function_name = Blockly.JavaScript.provideFunction_('timestampToDateString', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(timestamp) {\n            var datetime = new Date(timestamp * 1000);\n\n            if (!datetime.getTime()) {\n                return \"${invalid_timestamp} \" + timestamp;\n            }\n\n            var getTwoDigitValue = function(input) {\n                return input < 10 ? '0' + input : input;\n            }\n\n            var year    = datetime.getFullYear();\n            var month   = getTwoDigitValue(datetime.getMonth() + 1);\n            var day     = getTwoDigitValue(datetime.getDate());\n            var hours   = getTwoDigitValue(datetime.getHours());\n            var minutes = getTwoDigitValue(datetime.getMinutes());\n            var seconds = getTwoDigitValue(datetime.getSeconds());\n\n            var formatGmtOffset = function() {\n                var gmt_offset_raw = datetime.getTimezoneOffset();\n                var sign           = gmt_offset_raw > 0 ? '-' : '+';\n                var gmt_offset     = Math.abs(gmt_offset_raw);\n                var hour           = Math.floor(gmt_offset / 60);\n                var minute         = gmt_offset - hour * 60;\n\n                return 'GMT' + sign + getTwoDigitValue(hour) + getTwoDigitValue(minute);\n            }\n\n            var date_string = year + '-' + month + '-' + day;\n            var time_string = hours + ':' + minutes + ':' + seconds;\n\n            return date_string + ' ' + time_string + ' ' + formatGmtOffset();\n        }`,\n    ]);\n\n    const code = `${function_name}(${timestamp})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../../../utils';\n\nBlockly.Blocks.totimestamp = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('To timestamp {{ input_datetime }} {{ dummy }}', { input_datetime: '%1', dummy: '%2' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DATETIME',\n                },\n                {\n                    // Extra dummy for spacing.\n                    type: 'input_dummy',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'Converts a string representing a date/time string into seconds since Epoch. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825. Time and time zone offset are optional.'\n            ),\n            category: Blockly.Categories.Time,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Convert to timestamp'),\n            description: localize(\n                'This block converts a string of text that represents the date and time into seconds since the Unix Epoch (1 January 1970). The time and time zone offset are optional. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DATETIME: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.totimestamp = block => {\n    const datetime_string = Blockly.JavaScript.valueToCode(block, 'DATETIME', Blockly.JavaScript.ORDER_ATOMIC);\n    const code = `Bot.dateTimeStringToTimestamp(${datetime_string})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { defineContract } from '../../images';\nimport DBotStore from '../../../dbot-store';\nimport { runIrreversibleEvents } from '../../../utils';\nimport { removeErrorHandlingEventListener, initErrorHandlingListener } from '../../../../utils';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.trade_definition = {\n    init() {\n        this.jsonInit(this.definition());\n        this.setDeletable(false);\n        this.isInit = false;\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            message1: '%1',\n            message2: '%1 %2 %3',\n            message3: '%1',\n            message4: '%1 %2 %3',\n            message5: '%1',\n            args0: [\n                {\n                    type: 'field_image',\n                    src: defineContract,\n                    width: 25,\n                    height: 25,\n                    alt: 'T',\n                },\n                {\n                    type: 'field_label',\n                    text: localize('1. Trade parameters'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'TRADE_OPTIONS',\n                },\n            ],\n            args2: [\n                {\n                    type: 'field_image',\n                    src: '', // this is here to add extra padding\n                    width: 4,\n                    height: 25,\n                },\n                {\n                    type: 'field_label',\n                    text: localize('Run once at start:'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'INITIALIZATION',\n                    check: null,\n                },\n            ],\n            args4: [\n                {\n                    type: 'field_image',\n                    src: '', // this is here to add extra padding\n                    width: 4,\n                    height: 25,\n                },\n                {\n                    type: 'field_label',\n                    text: localize('Trade options:'),\n                    class: 'blocklyTextRootBlockHeader',\n                },\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args5: [\n                {\n                    type: 'input_statement',\n                    name: 'SUBMARKET',\n                },\n            ],\n            colour: Blockly.Colours.RootBlock.colour,\n            colourSecondary: Blockly.Colours.RootBlock.colourSecondary,\n            colourTertiary: Blockly.Colours.RootBlock.colourTertiary,\n            tooltip: localize('Here is where you define the parameters of your contract.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade parameters'),\n            description: localize('Here is where you define the parameters of your contract.'),\n            key_words: localize('market, trade type, contract type'),\n        };\n    },\n    onchange(event) {\n        if (event.type === 'ui' && !this.isInit) {\n            this.isInit = true;\n            initErrorHandlingListener('keydown');\n        } else if (Blockly.selected === null && this.isInit) {\n            this.isInit = false;\n            removeErrorHandlingEventListener('keydown');\n        }\n        if (!this.workspace || this.workspace.isDragging() || this.isInFlyout) {\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE || event.type === Blockly.Events.END_DRAG) {\n            // Enforce only trade_definition_<type> blocks in TRADE_OPTIONS statement.\n            const blocks_in_trade_options = this.getBlocksInStatement('TRADE_OPTIONS');\n\n            if (blocks_in_trade_options.length > 0) {\n                blocks_in_trade_options.forEach(block => {\n                    if (!/^trade_definition_.+$/.test(block.type)) {\n                        runIrreversibleEvents(() => {\n                            block.unplug(true);\n                        });\n                    }\n                });\n            } else {\n                runIrreversibleEvents(() => {\n                    this.dispose();\n                });\n            }\n        }\n    },\n};\n\nBlockly.JavaScript.trade_definition = block => {\n    const { client } = DBotStore.instance;\n\n    if (!client || !client.is_logged_in) {\n        throw new Error('Please login');\n    }\n\n    const { loginid } = client;\n    const account = client.getToken(loginid);\n    const market_block = block.getChildByType('trade_definition_market');\n    const trade_type_block = block.getChildByType('trade_definition_tradetype');\n    const contract_type_block = block.getChildByType('trade_definition_contracttype');\n    const candle_interval_block = block.getChildByType('trade_definition_candleinterval');\n    const restart_on_error_block = block.getChildByType('trade_definition_restartonerror');\n    const restart_on_buy_sell_block = block.getChildByType('trade_definition_restartbuysell');\n\n    const symbol = market_block.getFieldValue('SYMBOL_LIST');\n    const trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n    const contract_type = contract_type_block.getFieldValue('TYPE_LIST');\n    const candle_interval = candle_interval_block.getFieldValue('CANDLEINTERVAL_LIST');\n    const should_restart_on_error = restart_on_error_block.getFieldValue('RESTARTONERROR') !== 'FALSE';\n    const should_restart_on_buy_sell = restart_on_buy_sell_block.getFieldValue('TIME_MACHINE_ENABLED') !== 'FALSE';\n\n    const { opposites } = config;\n    const contract_type_list =\n        contract_type === 'both'\n            ? opposites[trade_type.toUpperCase()].map(opposite => Object.keys(opposite)[0])\n            : [contract_type];\n\n    const initialization = Blockly.JavaScript.statementToCode(block, 'INITIALIZATION');\n    const trade_options_statement = Blockly.JavaScript.statementToCode(block, 'SUBMARKET');\n\n    const code = `  \n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('${account}', {\n          symbol              : '${symbol}',\n          contractTypes       : ${JSON.stringify(contract_type_list)},\n          candleInterval      : '${candle_interval || 'FALSE'}',\n          shouldRestartOnError: ${should_restart_on_error},\n          timeMachineEnabled  : ${should_restart_on_buy_sell},\n        });\n        ${initialization.trim()}\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        BinaryBotPrivateHasCalledTradeOptions = false;\n        Bot.highlightBlock('${block.id}');\n        ${trade_options_statement.trim()}\n      };\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { runIrreversibleEvents } from '../../../utils';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\n/* eslint-disable */\nBlockly.Blocks.trade_definition_market = {\n    init() {\n        this.jsonInit({\n            message0: localize('Market: {{ input_market }} > {{ input_submarket }} > {{ input_symbol }}', {\n                input_market: '%1',\n                input_submarket: '%2',\n                input_symbol: '%3',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'SUBMARKET_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'SYMBOL_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        const allowed_events = ['BLOCK_CREATE', 'BLOCK_CHANGE', 'END_DRAG'];\n        const is_allowed_event =\n            allowed_events.findIndex(event_name => event.type === Blockly.Events[event_name]) !== -1;\n\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging() || !is_allowed_event) {\n            return;\n        }\n\n        this.enforceLimitations();\n\n        const { active_symbols } = ApiHelpers.instance;\n        const market_dropdown = this.getField('MARKET_LIST');\n        const submarket_dropdown = this.getField('SUBMARKET_LIST');\n        const symbol_dropdown = this.getField('SYMBOL_LIST');\n        const market = market_dropdown.getValue();\n        const submarket = submarket_dropdown.getValue();\n        const symbol = symbol_dropdown.getValue();\n\n        // Temporary solution to remove Crytocurrencies from\n        // market options until multipliers are available for DBot\n        const market_options = active_symbols\n            .getMarketDropdownOptions()\n            .filter(option => option[1] !== 'cryptocurrency');\n\n        const populateMarketDropdown = () => {\n            market_dropdown.updateOptions(market_options, {\n                default_value: market,\n                should_pretend_empty: true,\n                event_group: event.group,\n            });\n        };\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            populateMarketDropdown();\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === this.id) {\n            if (event.name === 'MARKET_LIST') {\n                submarket_dropdown.updateOptions(active_symbols.getSubmarketDropdownOptions(market), {\n                    default_value: submarket,\n                    should_pretend_empty: true,\n                    event_group: event.group,\n                });\n            } else if (event.name === 'SUBMARKET_LIST') {\n                symbol_dropdown.updateOptions(active_symbols.getSymbolDropdownOptions(submarket), {\n                    default_value: symbol,\n                    should_pretend_empty: true,\n                    event_group: event.group,\n                });\n            }\n        } else if (event.type === Blockly.Events.END_DRAG && event.blockId === this.getRootBlock().id) {\n            if (market_dropdown.isEmpty() || submarket_dropdown.isEmpty() || symbol_dropdown.isEmpty()) {\n                populateMarketDropdown();\n            }\n        }\n    },\n    enforceLimitations() {\n        runIrreversibleEvents(() => {\n            if (!this.isDescendantOf('trade_definition')) {\n                this.unplug(false); // Unplug without reconnecting siblings\n\n                const top_blocks = this.workspace.getTopBlocks();\n                const trade_definition_block = top_blocks.find(block => block.type === 'trade_definition');\n\n                // Reconnect self to trade definition block.\n                if (trade_definition_block) {\n                    const connection = trade_definition_block.getLastConnectionInStatement('TRADE_OPTIONS');\n                    connection.connect(this.previousConnection);\n                } else {\n                    this.dispose();\n                }\n            }\n            // These blocks cannot be disabled.\n            else if (this.disabled) {\n                this.setDisabled(false);\n            }\n        });\n    },\n};\n\nBlockly.JavaScript.trade_definition_market = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_definition_tradetype = {\n    init() {\n        this.jsonInit({\n            message0: localize('Trade Type: {{ trade_type_category }} > {{ trade_type }}', {\n                trade_type_category: '%1',\n                trade_type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TRADETYPECAT_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'TRADETYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\n\nBlockly.JavaScript.trade_definition_tradetype = () => {};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\nimport { getContractTypeOptions } from '../../../shared';\n\nBlockly.Blocks.trade_definition_contracttype = {\n    init() {\n        this.jsonInit({\n            message0: localize('Contract Type: {{ contract_type }}', { contract_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            tooltip: localize(\n                'If the contract type is “Both”, then the Purchase Conditions should include both Rise and Fall using the “Conditional Block\"'\n            ),\n            previousStatement: null,\n            nextStatement: null,\n        });\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (Blockly.Events.BLOCK_CHANGE) {\n            if (event.name === 'TRADETYPE_LIST') {\n                const trade_type = event.newValue;\n                const contract_type_list = this.getField('TYPE_LIST');\n                const contract_type_options = [];\n\n                const trade_types = getContractTypeOptions('both', trade_type);\n\n                if (trade_types.length > 1) {\n                    contract_type_options.push([localize('Both'), 'both']);\n                }\n\n                contract_type_options.push(...trade_types);\n\n                if (contract_type_options.length === 0) {\n                    contract_type_options.push(...config.NOT_AVAILABLE_DROPDOWN_OPTIONS);\n                }\n\n                contract_type_list.updateOptions(contract_type_options, {\n                    event_group: event.group,\n                    default_value: is_load_event ? contract_type_list.getValue() : undefined,\n                });\n            }\n        }\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\nBlockly.JavaScript.trade_definition_contracttype = () => '';\n","import { localize } from '@deriv/translations';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.trade_definition_candleinterval = {\n    init() {\n        this.jsonInit({\n            message0: localize('Default Candle Interval: {{ candle_interval_type }}', { candle_interval_type: '%1' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CANDLEINTERVAL_LIST',\n                    options: config.candleIntervals.slice(1),\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n};\nBlockly.JavaScript.trade_definition_candleinterval = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_definition_restartbuysell = {\n    init() {\n        this.jsonInit({\n            message0: localize('Restart buy/sell on error (disable for better performance): {{ checkbox }}', {\n                checkbox: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_image_checkbox',\n                    name: 'TIME_MACHINE_ENABLED',\n                    checked: false,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n    required_inputs: ['TIME_MACHINE_ENABLED'],\n};\nBlockly.JavaScript.trade_definition_restartbuysell = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.trade_definition_restartonerror = {\n    init() {\n        this.jsonInit({\n            message0: localize('Restart last trade on error (bot ignores the unsuccessful trade): {{ checkbox }}', {\n                checkbox: '%1',\n            }),\n            args0: [\n                {\n                    type: 'field_image_checkbox',\n                    name: 'RESTARTONERROR',\n                    checked: true,\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n        });\n\n        this.setNextStatement(false);\n        this.setMovable(false);\n        this.setDeletable(false);\n    },\n    onchange(/* event */) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        this.enforceLimitations();\n    },\n    enforceLimitations: Blockly.Blocks.trade_definition_market.enforceLimitations,\n    required_inputs: ['RESTARTONERROR'],\n};\nBlockly.JavaScript.trade_definition_restartonerror = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { runIrreversibleEvents, runGroupedEvents } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\nBlockly.Blocks.trade_definition_tradeoptions = {\n    durations: [],\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        const is_stake = this.type === 'trade_definition_tradeoptions';\n\n        return {\n            message0: localize('Duration: {{ duration_unit }} {{ duration_value }}', {\n                duration_unit: '%1',\n                duration_value: '%2',\n            }),\n            message1: `${is_stake ? localize('Stake') : localize('Payout')}: %1 %2 %3`,\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'DURATIONTYPE_LIST',\n                    options: [['', '']],\n                },\n                {\n                    type: 'input_value',\n                    name: 'DURATION',\n                    check: 'Number',\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_label',\n                    name: 'AMOUNT_LIMITS',\n                    text: '',\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options such as duration and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trade options'),\n            description: localize(\n                'Define your trade options such as duration and stake. Some options are only applicable for certain trade types.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (event.type === 'change') {\n            const selected_block = this.workspace.getBlockById(event.blockId);\n            selected_block?.parentBlock_?.inputList\n                .filter(item => ['DURATION', 'AMOUNT'].includes(item.name))\n                .forEach(input => {\n                    const input_target = input.connection.targetBlock();\n                    const value = input_target.getFieldValue('NUM');\n                    if (value?.startsWith('0')) {\n                        const new_value = value.includes('.') ? parseFloat(`${value}`) : parseInt(`${value}`);\n                        input_target.setFieldValue(new_value.toString(), 'NUM');\n                    }\n                });\n        }\n\n        if (!this.workspace || this.workspace.isDragging() || this.isInFlyout) {\n            return;\n        }\n\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_duration = this.getFieldValue('DURATIONTYPE_LIST');\n        this.selected_barrier_types = [\n            this.getFieldValue('BARRIEROFFSETTYPE_LIST') || config.BARRIER_TYPES[0][1],\n            this.getFieldValue('SECONDBARRIEROFFSETTYPE_LIST') || config.BARRIER_TYPES[1][1],\n        ];\n\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            event.type === Blockly.Events.END_DRAG\n        ) {\n            this.setCurrency();\n            this.updateAmountLimits();\n        }\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateBarrierInputs(false, false);\n                this.updateDurationInput(false, false);\n                this.updatePredictionInput(false);\n                this.updateAmountLimits();\n            } else {\n                this.updateBarrierInputs(true, true);\n                this.enforceSingleBarrierType('BARRIEROFFSETTYPE_LIST', true);\n                this.updateDurationInput(true, true);\n                this.updatePredictionInput(true);\n            }\n        } else if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateBarrierInputs(false, false);\n                    this.enforceSingleBarrierType(false);\n                    this.updateDurationInput(false, false);\n                    this.updatePredictionInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'DURATIONTYPE_LIST': {\n                        this.updateBarrierInputs(true, true);\n                        this.enforceSingleBarrierType('BARRIEROFFSETTYPE_LIST', true);\n                        this.updateDurationInput(false, true);\n                        break;\n                    }\n                    case 'BARRIEROFFSETTYPE_LIST':\n                    case 'SECONDBARRIEROFFSETTYPE_LIST': {\n                        this.updateBarrierInputs(false, true);\n                        this.enforceSingleBarrierType(event.name, false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateBarrierInputs(true, true);\n                this.enforceSingleBarrierType(true);\n                this.updateDurationInput(true, true);\n                this.updatePredictionInput(true);\n                this.updateAmountLimits();\n            }\n        } else if (event.type === Blockly.Events.END_DRAG && event.blockId === this.id) {\n            // Ensure this block is populated after initial drag from flyout.\n            if (!this.selected_duration) {\n                const fake_creation_event = new Blockly.Events.Create(this);\n                fake_creation_event.recordUndo = false;\n                Blockly.Events.fire(fake_creation_event);\n            } else if (this.selected_trade_type === 'multiplier') {\n                this.updateDurationInput(false, false);\n            }\n        }\n    },\n    createPredictionInput(prediction_range) {\n        runIrreversibleEvents(() => {\n            if (prediction_range.length === 0) {\n                this.removeInput('PREDICTION_LABEL', true);\n                this.removeInput('PREDICTION', true);\n            } else if (!this.getInput('PREDICTION')) {\n                this.appendDummyInput('PREDICTION_LABEL').appendField(localize('Prediction:'));\n\n                const prediction_input = this.appendValueInput('PREDICTION');\n                const shadow_block = this.workspace.newBlock('math_number_positive');\n\n                shadow_block.setShadow(true);\n                shadow_block.setFieldValue(prediction_range[0], 'NUM');\n                shadow_block.outputConnection.connect(prediction_input.connection);\n                shadow_block.initSvg();\n                shadow_block.render(true);\n            }\n        });\n    },\n    createBarrierInputs(barriers) {\n        runIrreversibleEvents(() => {\n            const input_names = ['BARRIEROFFSET', 'SECONDBARRIEROFFSET'];\n\n            for (let i = 0; i < barriers.values.length; i++) {\n                const label = barriers.values.length === 1 ? localize('Barrier') : config.BARRIER_LABELS[i];\n                let input = this.getInput(input_names[i]);\n\n                if (input) {\n                    input.fieldRow[0].setText(label);\n                } else {\n                    input = this.appendValueInput(input_names[i])\n                        .appendField(label, `${input_names[i]}_LABEL`)\n                        .appendField(new Blockly.FieldDropdown(config.BARRIER_TYPES), `${input_names[i]}TYPE_LIST`);\n\n                    const shadow_block = this.workspace.newBlock('math_number_positive');\n\n                    shadow_block.setShadow(true);\n                    shadow_block.setFieldValue(barriers.values[i], 'NUM');\n                    shadow_block.outputConnection.connect(input.connection);\n                    shadow_block.initSvg();\n                    shadow_block.render(true);\n                }\n            }\n\n            // Remove any extra inputs (quietly) if not required\n            for (let i = input_names.length; i > barriers.values.length; i--) {\n                this.removeInput(input_names[i - 1], true);\n            }\n        });\n    },\n    updateAmountLimits() {\n        const { account_limits } = ApiHelpers.instance;\n        const { currency, landing_company_shortcode } = DBotStore.instance.client;\n        account_limits.getStakePayoutLimits(currency, landing_company_shortcode, this.selected_market).then(limits => {\n            if (!this.getField('AMOUNT_LIMITS')) {\n                return;\n            }\n            this.amount_limits = limits;\n            const { max_payout, min_stake } = limits;\n            if (max_payout && min_stake) {\n                runIrreversibleEvents(() => {\n                    this.setFieldValue(\n                        localize('(min: {{min_stake}} - max: {{max_payout}})', {\n                            min_stake,\n                            max_payout,\n                        }),\n                        'AMOUNT_LIMITS'\n                    );\n                });\n            }\n        });\n    },\n    updateDurationInput(should_use_default_unit, should_update_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'multiplier' && this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const multiplier_block = this.workspace.newBlock('trade_definition_multiplier');\n                    multiplier_block.initSvg();\n                    multiplier_block.render();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = multiplier_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const stake_input = multiplier_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.render();\n\n                    const take_profit_block = this.workspace.newBlock('multiplier_take_profit');\n                    const take_profit_input = take_profit_block.getInput('AMOUNT');\n\n                    const take_profit_shadow_block = this.workspace.newBlock('math_number_positive');\n                    take_profit_shadow_block.setShadow(true);\n                    take_profit_shadow_block.setFieldValue(0, 'NUM');\n                    take_profit_shadow_block.outputConnection.connect(take_profit_input.connection);\n                    take_profit_shadow_block.initSvg();\n                    take_profit_shadow_block.render();\n\n                    multiplier_block\n                        .getLastConnectionInStatement('MULTIPLIER_PARAMS')\n                        .connect(take_profit_block.previousConnection);\n                    take_profit_block.initSvg();\n                    take_profit_block.render();\n\n                    const stop_loss_block = this.workspace.newBlock('multiplier_stop_loss');\n                    const stop_loss_input = stop_loss_block.getInput('AMOUNT');\n\n                    const stop_loss_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stop_loss_shadow_block.setShadow(true);\n                    stop_loss_shadow_block.setFieldValue(0, 'NUM');\n                    stop_loss_shadow_block.outputConnection.connect(stop_loss_input.connection);\n                    stop_loss_shadow_block.initSvg();\n                    stop_loss_shadow_block.render();\n\n                    multiplier_block\n                        .getLastConnectionInStatement('MULTIPLIER_PARAMS')\n                        .connect(stop_loss_block.previousConnection);\n                    stop_loss_block.initSvg();\n                    stop_loss_block.render();\n\n                    this.dispose();\n                    Blockly.derivWorkspace.cleanUp();\n                });\n            });\n        } else {\n            contracts_for.getDurations(this.selected_symbol, this.selected_trade_type).then(durations => {\n                // Keep duration in memory so we can later reference them for validation\n                this.durations = durations;\n\n                const duration_field_dropdown = this.getField('DURATIONTYPE_LIST');\n                const duration_input = this.getInput('DURATION');\n                const duration_options = durations.map(duration => [duration.display, duration.unit]);\n\n                duration_field_dropdown?.updateOptions(duration_options, {\n                    default_value: should_use_default_unit ? undefined : duration_field_dropdown.getValue(),\n                });\n\n                if (should_update_value && duration_input && duration_input.connection) {\n                    const target_block = duration_input.connection.targetBlock();\n\n                    if (target_block && target_block.isShadow()) {\n                        const min_duration = durations.find(duration => duration.unit === this.selected_duration);\n\n                        if (min_duration) {\n                            runIrreversibleEvents(() => {\n                                target_block.setFieldValue(min_duration.min, 'NUM');\n                            });\n                        }\n                    }\n                }\n            });\n        }\n    },\n    updateBarrierInputs(should_use_default_type, should_use_default_values) {\n        const { contracts_for } = ApiHelpers.instance;\n        const { BARRIER_TYPES } = config;\n\n        contracts_for\n            .getBarriers(\n                this.selected_symbol,\n                this.selected_trade_type,\n                this.selected_duration,\n                this.selected_barrier_types\n            )\n            .then(barriers => {\n                this.createBarrierInputs(barriers);\n\n                const input_names = ['BARRIEROFFSET', 'SECONDBARRIEROFFSET'];\n\n                for (let i = 0; i < barriers.values.length; i++) {\n                    const barrier_field_dropdown = this.getField(`${input_names[i]}TYPE_LIST`);\n                    const { ABSOLUTE_BARRIER_DROPDOWN_OPTION } = config;\n                    const barrier_field_value = should_use_default_type\n                        ? BARRIER_TYPES[i][1]\n                        : barrier_field_dropdown.getValue();\n\n                    if (this.selected_duration === 'd') {\n                        // Only absolute types are allowed.\n                        barrier_field_dropdown.updateOptions(ABSOLUTE_BARRIER_DROPDOWN_OPTION, {\n                            default_value: 'absolute',\n                        });\n                    } else if (barriers.allow_both_types || barriers.allow_absolute_type) {\n                        // Both offset + absolute types are allowed.\n                        const options = [].concat(BARRIER_TYPES, ABSOLUTE_BARRIER_DROPDOWN_OPTION);\n\n                        barrier_field_dropdown.updateOptions(options, {\n                            default_value: barrier_field_value,\n                        });\n                    } else {\n                        // Only offset types are allowed.\n                        barrier_field_dropdown.updateOptions(BARRIER_TYPES, {\n                            default_value: barrier_field_value,\n                        });\n                    }\n\n                    const { connection } = this.getInput(input_names[i]);\n\n                    if (should_use_default_values && connection) {\n                        const target_block = connection.targetBlock();\n\n                        if (target_block && target_block.isShadow()) {\n                            const barrier_value = barriers.values[i] !== false ? barriers.values[i] : '';\n\n                            runIrreversibleEvents(() => {\n                                target_block.setFieldValue(barrier_value, 'NUM');\n                            });\n                        }\n                    }\n                }\n            });\n    },\n    updatePredictionInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        contracts_for.getPredictionRange(this.selected_symbol, this.selected_trade_type).then(prediction_range => {\n            this.createPredictionInput(prediction_range);\n\n            if (prediction_range.length > 0) {\n                const prediction_input = this.getInput('PREDICTION');\n                const { connection } = prediction_input;\n\n                if (should_use_default_value && connection) {\n                    const target_block = connection.targetBlock();\n\n                    if (target_block && target_block.isShadow()) {\n                        const initial_prediction = Math.max(1, prediction_range[0]);\n\n                        runIrreversibleEvents(() => {\n                            target_block.setFieldValue(initial_prediction, 'NUM');\n                        });\n                    }\n                }\n            }\n        });\n    },\n    enforceSingleBarrierType(barrier_input_name, should_force_distinct) {\n        const new_value = this.getFieldValue(barrier_input_name);\n        const other_barrier_input_name =\n            barrier_input_name === 'BARRIEROFFSETTYPE_LIST' ? 'SECONDBARRIEROFFSETTYPE_LIST' : 'BARRIEROFFSETTYPE_LIST';\n        const other_barrier_field = this.getField(other_barrier_input_name);\n        const { BARRIER_TYPES } = config;\n\n        if (other_barrier_field) {\n            const has_other_barrier = BARRIER_TYPES.findIndex(type => type[1] === new_value) !== -1;\n            const other_barrier_type = other_barrier_field.getValue();\n\n            runIrreversibleEvents(() => {\n                if (has_other_barrier && (other_barrier_type === 'absolute' || should_force_distinct)) {\n                    const other_barrier_value = BARRIER_TYPES.find(type => type[1] !== new_value);\n                    other_barrier_field.setValue(other_barrier_value[1]);\n                } else if (new_value === 'absolute' && other_barrier_type !== 'absolute') {\n                    other_barrier_field.setValue('absolute');\n                }\n            });\n        }\n    },\n    domToMutation(xmlElement) {\n        const has_first_barrier = xmlElement.getAttribute('has_first_barrier') === 'true';\n        const has_second_barrier = xmlElement.getAttribute('has_second_barrier') === 'true';\n        const has_prediction = xmlElement.getAttribute('has_prediction') === 'true';\n\n        if (has_first_barrier && has_second_barrier) {\n            this.createBarrierInputs({ values: [1, -1] }); // These values are overwritten with XML values.\n        } else if (has_first_barrier) {\n            this.createBarrierInputs({ values: [1] });\n        } else if (has_prediction) {\n            this.createPredictionInput([1]);\n        }\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n\n        container.setAttribute('has_first_barrier', !!this.getInput('BARRIEROFFSET'));\n        container.setAttribute('has_second_barrier', !!this.getInput('SECONDBARRIEROFFSET'));\n        container.setAttribute('has_prediction', !!this.getInput('PREDICTION'));\n\n        return container;\n    },\n    setCurrency() {\n        const currency_field = this.getField('CURRENCY_LIST');\n        const { currency } = DBotStore.instance.client;\n        currency_field.setText(getCurrencyDisplayCode(currency));\n    },\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n            DURATION: input => {\n                const input_number = Number(input);\n\n                if (isNaN(input_number) || !this.durations.length) {\n                    return false;\n                }\n\n                const duration = this.durations.find(d => d.unit === this.selected_duration);\n\n                if (duration) {\n                    const { min, max } = duration;\n                    const is_valid_duration = input_number >= min && input_number <= max;\n\n                    if (min === max) {\n                        this.error_message = localize(\n                            'Duration value is not allowed. To run the bot, please enter {{min}}.',\n                            { min }\n                        );\n                    } else {\n                        this.error_message = localize(\n                            'Duration value is not allowed. To run the bot, please enter a value between {{min}} to {{max}}.',\n                            { min, max }\n                        );\n                    }\n\n                    return !is_valid_duration;\n                }\n\n                return false;\n            },\n        };\n    },\n};\n\nBlockly.Blocks.trade_definition_tradeoptions_payout = Blockly.Blocks.trade_definition_tradeoptions;\n\nBlockly.JavaScript.trade_definition_tradeoptions = block => {\n    const amount = Blockly.JavaScript.valueToCode(block, 'AMOUNT', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n    const { currency } = DBotStore.instance.client;\n    const duration_type = block.getFieldValue('DURATIONTYPE_LIST') || '0';\n    const duration_value = Blockly.JavaScript.valueToCode(block, 'DURATION', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n\n    // Determine decimal places for rounding the stake, this is done so Martingale multipliers\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const getBarrierValue = (barrier_offset_type, value) => {\n        // Variables should not be encapsulated in quotes\n        if (/^(\\d+(\\.\\d+)?)$/.test(value)) {\n            return barrier_offset_type === 'absolute' ? `'${value}'` : `'${barrier_offset_type}${value}'`;\n        }\n        return barrier_offset_type === 'absolute' ? value : `'${barrier_offset_type}' + ${value}`;\n    };\n\n    let prediction_value, barrier_offset_value, second_barrier_offset_value;\n\n    if (block.getInput('PREDICTION')) {\n        prediction_value = Blockly.JavaScript.valueToCode(block, 'PREDICTION', Blockly.JavaScript.ORDER_ATOMIC) || '-1';\n    }\n\n    if (block.getInput('BARRIEROFFSET')) {\n        const barrier_offset_type = block.getFieldValue('BARRIEROFFSETTYPE_LIST');\n        const value = Blockly.JavaScript.valueToCode(block, 'BARRIEROFFSET', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n        barrier_offset_value = getBarrierValue(barrier_offset_type, value);\n    }\n\n    if (block.getInput('SECONDBARRIEROFFSET')) {\n        const barrier_offset_type = block.getFieldValue('SECONDBARRIEROFFSETTYPE_LIST');\n        const value =\n            Blockly.JavaScript.valueToCode(block, 'SECONDBARRIEROFFSET', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n        second_barrier_offset_value = getBarrierValue(barrier_offset_type, value);\n    }\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            duration           : ${duration_value},\n            duration_unit      : '${duration_type}',\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            prediction         : ${prediction_value || 'undefined'},\n            barrierOffset      : ${barrier_offset_value || 'undefined'},\n            secondBarrierOffset: ${second_barrier_offset_value || 'undefined'},\n            basis              : '${block.type === 'trade_definition_tradeoptions' ? 'stake' : 'payout'}',\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n\nBlockly.JavaScript.trade_definition_tradeoptions_payout = Blockly.JavaScript.trade_definition_tradeoptions;\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode, getDecimalPlaces } from '@deriv/shared';\nimport DBotStore from '../../../dbot-store';\nimport { runGroupedEvents, runIrreversibleEvents } from '../../../utils';\nimport { config } from '../../../../constants/config';\nimport ApiHelpers from '../../../../services/api/api-helpers';\n\nBlockly.Blocks.trade_definition_multiplier = {\n    init() {\n        this.jsonInit(this.definition());\n\n        // Ensure one of this type per statement-stack\n        this.setNextStatement(false);\n    },\n    definition() {\n        return {\n            message0: localize('Multiplier: {{ multiplier }}', {\n                multiplier: '%1',\n            }),\n            message1: `${localize('Stake')}: %1 %2 %3`,\n            message2: '%1',\n            message3: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MULTIPLIERTYPE_LIST',\n                    options: [['', '']],\n                },\n            ],\n            args1: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_label',\n                    name: 'AMOUNT_LIMITS',\n                    text: '',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_dummy',\n                },\n            ],\n            args3: [\n                {\n                    type: 'input_statement',\n                    name: 'MULTIPLIER_PARAMS',\n                },\n            ],\n            colour: Blockly.Colours.Special1.colour,\n            colourSecondary: Blockly.Colours.Special1.colourSecondary,\n            colourTertiary: Blockly.Colours.Special1.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Define your trade options such as multiplier and stake.'),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Multiplier trade options'),\n            description: localize(\n                'Define your trade options such as multiplier and stake. This block can only be used with the multipliers trade type. If you select another trade type, this block will be replaced with the Trade options block.'\n            ),\n        };\n    },\n    validateBlocksInStatement() {\n        // Enforce only multiplier_<type> blocks in MULTIPLIER_PARAMS statement.\n        const blocks_in_multiplier = this.getBlocksInStatement('MULTIPLIER_PARAMS');\n\n        if (blocks_in_multiplier.length > 0) {\n            const block_types_in_multiplier = [];\n            blocks_in_multiplier.forEach(block => {\n                block_types_in_multiplier.push(block.type);\n                const block_multiplier_take_profit = block.childValueToCode('multiplier_take_profit', 'AMOUNT');\n                const block_multiplier_stop_loss = block.childValueToCode('multiplier_stop_loss', 'AMOUNT');\n                if (block_multiplier_take_profit <= 0 || block_multiplier_stop_loss <= 0) {\n                    block.setDisabled(true);\n                }\n\n                if (block.type === 'multiplier_stop_loss' && block_multiplier_stop_loss > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (block.type === 'multiplier_take_profit' && block_multiplier_take_profit > 0) {\n                    block.setDisabled(false);\n                }\n\n                if (\n                    !/^multiplier_.+$/.test(block.type) ||\n                    new Set(block_types_in_multiplier).size !== block_types_in_multiplier.length\n                ) {\n                    runIrreversibleEvents(() => {\n                        block.unplug(true);\n                    });\n                }\n            });\n        }\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const trade_definition_block = this.workspace\n            .getAllBlocks(true)\n            .find(block => block.type === 'trade_definition');\n        if (!trade_definition_block) {\n            return;\n        }\n\n        const market_block = trade_definition_block.getChildByType('trade_definition_market');\n        const trade_type_block = trade_definition_block.getChildByType('trade_definition_tradetype');\n\n        if (!market_block || !trade_type_block) {\n            return;\n        }\n\n        this.selected_symbol = market_block.getFieldValue('SYMBOL_LIST');\n        this.selected_market = market_block.getFieldValue('MARKET_LIST');\n        this.selected_trade_type_category = trade_type_block.getFieldValue('TRADETYPECAT_LIST');\n        this.selected_trade_type = trade_type_block.getFieldValue('TRADETYPE_LIST');\n        this.selected_multiplier = this.getFieldValue('MULTIPLIERTYPE_LIST');\n\n        const is_load_event = /^dbot-load/.test(event.group);\n\n        if (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) {\n            this.setCurrency();\n            this.updateAmountLimits();\n            if (is_load_event) {\n                // Do NOT touch any values when a strategy is being loaded.\n                this.updateMultiplierInput(false);\n            } else {\n                this.updateMultiplierInput(true);\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.BLOCK_CHANGE) {\n            this.validateBlocksInStatement();\n            if (is_load_event) {\n                if (event.name === 'TRADETYPE_LIST') {\n                    this.updateMultiplierInput(false);\n                }\n            } else if (event.blockId === this.id) {\n                switch (event.name) {\n                    case 'MULTIPLIERTYPE_LIST': {\n                        this.updateMultiplierInput(false);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            } else if (event.name === 'SYMBOL_LIST' || event.name === 'TRADETYPE_LIST') {\n                this.updateMultiplierInput(true);\n                this.updateAmountLimits();\n            }\n            return;\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            this.setCurrency();\n            this.updateAmountLimits();\n            this.validateBlocksInStatement();\n            if (event.blockId === this.id) {\n                // Ensure this block is populated after initial drag from flyout.\n                if (!this.selected_multiplier) {\n                    const fake_creation_event = new Blockly.Events.Create(this);\n                    fake_creation_event.recordUndo = false;\n                    Blockly.Events.fire(fake_creation_event);\n                } else if (this.selected_trade_type !== 'multiplier') {\n                    this.updateMultiplierInput(true);\n                }\n            }\n        }\n    },\n    updateAmountLimits: Blockly.Blocks.trade_definition_tradeoptions.updateAmountLimits,\n    updateMultiplierInput(should_use_default_value) {\n        const { contracts_for } = ApiHelpers.instance;\n\n        if (this.selected_trade_type === 'multiplier') {\n            contracts_for.getMultiplierRange(this.selected_symbol, this.selected_trade_type).then(multiplier_range => {\n                if (multiplier_range.length > 0) {\n                    const multiplier_list_dropdown = this.getField('MULTIPLIERTYPE_LIST');\n                    const multiplier_options = multiplier_range.map(value => {\n                        const option = value.toString();\n                        return [option, option];\n                    });\n\n                    multiplier_list_dropdown?.updateOptions(multiplier_options, {\n                        default_value: should_use_default_value ? undefined : multiplier_list_dropdown.getValue(),\n                    });\n                }\n            });\n            return;\n        }\n\n        if (this.isDescendantOf('trade_definition')) {\n            runIrreversibleEvents(() => {\n                runGroupedEvents(false, () => {\n                    const duration_block = this.workspace.newBlock('trade_definition_tradeoptions');\n                    duration_block.initSvg();\n                    duration_block.render();\n\n                    const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n                    const parent_connection = trade_definition_block.getInput('SUBMARKET').connection;\n                    const child_connection = duration_block.previousConnection;\n                    parent_connection.connect(child_connection);\n\n                    const duration_input = duration_block.getInput('DURATION');\n\n                    const duration_shadow_block = this.workspace.newBlock('math_number_positive');\n                    duration_shadow_block.setShadow(true);\n                    duration_shadow_block.outputConnection.connect(duration_input.connection);\n                    duration_shadow_block.initSvg();\n                    duration_shadow_block.render(true);\n\n                    const stake_input = duration_block.getInput('AMOUNT');\n\n                    const stake_shadow_block = this.workspace.newBlock('math_number_positive');\n                    stake_shadow_block.setShadow(true);\n                    stake_shadow_block.setFieldValue(1, 'NUM');\n                    stake_shadow_block.outputConnection.connect(stake_input.connection);\n                    stake_shadow_block.initSvg();\n                    stake_shadow_block.render(true);\n\n                    this.dispose();\n                    Blockly.derivWorkspace.cleanUp();\n                });\n            });\n        }\n    },\n    setCurrency: Blockly.Blocks.trade_definition_tradeoptions.setCurrency,\n    restricted_parents: ['trade_definition'],\n    getRequiredValueInputs() {\n        return {\n            AMOUNT: input => {\n                const input_number = Number(input);\n                const max_payout = this.amount_limits?.max_payout;\n                const min_stake = this.amount_limits?.min_stake;\n                if (min_stake && input_number < min_stake) {\n                    this.error_message = localize(\"Please enter a stake amount that's at least {{min_stake}}.\", {\n                        min_stake,\n                    });\n                    return input_number < min_stake;\n                }\n                if (max_payout && input_number > max_payout) {\n                    this.error_message = localize(\"Please enter a payout amount that's lower than {{max_payout}}.\", {\n                        max_payout,\n                    });\n                    return input_number > max_payout;\n                }\n                this.error_message = localize('Amount must be a positive number.');\n                return !isNaN(input_number) && input_number <= 0;\n            },\n        };\n    },\n};\n\nBlockly.JavaScript.trade_definition_multiplier = block => {\n    const amount = Blockly.JavaScript.valueToCode(block, 'AMOUNT', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n    const { currency } = DBotStore.instance.client;\n    const { setContractUpdateConfig } = DBotStore.instance;\n    const multiplier_value = block.getFieldValue('MULTIPLIERTYPE_LIST') || '1';\n    const stop_loss =\n        !block.getChildByType('multiplier_stop_loss')?.disabled &&\n        block.childValueToCode('multiplier_stop_loss', 'AMOUNT');\n    const take_profit =\n        !block.getChildByType('multiplier_take_profit')?.disabled &&\n        block.childValueToCode('multiplier_take_profit', 'AMOUNT');\n    const limit_order = {\n        stop_loss: stop_loss ? `+(Number(${stop_loss}).toFixed(2))` : undefined,\n        take_profit: take_profit ? `+(Number(${take_profit}).toFixed(2))` : undefined,\n    };\n\n    setContractUpdateConfig(take_profit, stop_loss);\n    // Determine decimal places for rounding the stake, this is done so Martingale multipliers\n    // are not affected by fractional values e.g. USD 12.232323 will become 12.23.\n    const decimal_places = getDecimalPlaces(currency);\n    const stake_amount = `+(Number(${amount}).toFixed(${decimal_places}))`;\n\n    const code = `\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            multiplier         : ${multiplier_value},\n            currency           : '${currency}',\n            amount             : ${stake_amount},\n            limit_order        : ${JSON.stringify(limit_order)},\n            basis              : 'stake',\n            stop_loss          : ${limit_order.stop_loss},\n            take_profit        : ${limit_order.take_profit},\n        });\n        BinaryBotPrivateHasCalledTradeOptions = true;\n    `;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.multiplier_stop_loss = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Stop Loss: {{ currency }} {{ stop_loss }}', {\n                currency: '%1',\n                stop_loss: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Stop loss'),\n            description: localize(\n                'Your contract is closed automatically when your loss is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            event.type === Blockly.Events.END_DRAG\n        ) {\n            this.setCurrency();\n        }\n    },\n    restricted_parents: ['trade_definition_multiplier'],\n    setCurrency: Blockly.Blocks.trade_definition_tradeoptions.setCurrency,\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Stop loss must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.multiplier_stop_loss = () => {};\n","import { localize } from '@deriv/translations';\nimport { getCurrencyDisplayCode } from '@deriv/shared';\nimport { config } from '../../../../constants/config';\n\nBlockly.Blocks.multiplier_take_profit = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Take Profit: {{ currency }} {{ take_profit }}', {\n                currency: '%1',\n                take_profit: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_label',\n                    name: 'CURRENCY_LIST',\n                    text: getCurrencyDisplayCode(config.lists.CURRENCY[0]),\n                },\n                {\n                    type: 'input_value',\n                    name: 'AMOUNT',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize(\n                'Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n            category: Blockly.Categories.Trade_Definition,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Take Profit'),\n            description: localize(\n                'Your contract is closed automatically when your profit is more than or equals to this amount. This block can only be used with the multipliers trade type.'\n            ),\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n        if (\n            (event.type === Blockly.Events.BLOCK_CREATE && event.ids.includes(this.id)) ||\n            event.type === Blockly.Events.END_DRAG\n        ) {\n            this.setCurrency();\n        }\n    },\n    restricted_parents: ['trade_definition_multiplier'],\n    setCurrency: Blockly.Blocks.trade_definition_tradeoptions.setCurrency,\n    getRequiredValueInputs() {\n        const field_input = this.getInput('AMOUNT');\n        if (field_input.connection.targetBlock()) {\n            return {\n                AMOUNT: input => {\n                    const input_number = Number(input);\n                    this.error_message = localize('Take profit must be a positive number.');\n                    return !isNaN(input_number) && input_number <= 0;\n                },\n            };\n        }\n        return {};\n    },\n};\n\nBlockly.JavaScript.multiplier_take_profit = () => {};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_compare = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['=', 'EQ'],\n                        ['\\u2260', 'NEQ'],\n                        ['\\u200F<', 'LT'],\n                        ['\\u200F\\u2264', 'LTE'],\n                        ['\\u200F>', 'GT'],\n                        ['\\u200F\\u2265', 'GTE'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Compares two values'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Compare'),\n            description: localize('This block compares two values and is used to build a conditional structure.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_compare = block => {\n    const operatorMapping = {\n        EQ: '==',\n        NEQ: '!=',\n        LT: '<',\n        LTE: '<=',\n        GT: '>',\n        GTE: '>=',\n    };\n\n    const operator = operatorMapping[block.getFieldValue('OP') || 'EQ'];\n    const order = ['==', '!='].includes(operator)\n        ? Blockly.JavaScript.ORDER_EQUALITY\n        : Blockly.JavaScript.ORDER_RELATIONAL;\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || 'false';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || 'false';\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark, minusIconDark } from '../images';\n\nBlockly.Blocks.controls_if = {\n    init() {\n        this.value_connections = [null];\n        this.statement_connections = [null];\n        this.else_statement_connection = null;\n        this.else_if_count = 0;\n        this.else_count = 0;\n\n        this.jsonInit(this.definition());\n        this.updateShape();\n    },\n    definition() {\n        return {\n            message0: localize('if {{ condition }} then', { condition: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'IF0',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'DO0',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Conditional block'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Conditional block'),\n            description: localize(\n                'This block evaluates a statement and will perform an action only when the statement is true.'\n            ),\n        };\n    },\n    /**\n     * Create XML to represent the number of else-if and else inputs.\n     * @return {Element} XML storage element.\n     * @this Blockly.Block\n     */\n    mutationToDom() {\n        const container = document.createElement('mutation');\n\n        if (this.else_if_count) {\n            container.setAttribute('elseif', this.else_if_count);\n        }\n\n        if (this.else_count) {\n            container.setAttribute('else', 1);\n        }\n\n        return container;\n    },\n    /**\n     * Parse XML to restore the else-if and else inputs.\n     * @param {!Element} xmlElement XML storage element.\n     * @this Blockly.Block\n     */\n    domToMutation(xmlElement) {\n        this.else_if_count = parseInt(xmlElement.getAttribute('elseif')) || 0;\n        this.else_count = parseInt(xmlElement.getAttribute('else')) || 0;\n        this.rebuildShape();\n    },\n    rebuildShape() {\n        const value_connections = [null];\n        const statement_connections = [null];\n        const else_statement_connection = this.getInput('ELSE')?.connection?.targetConnection || null;\n\n        let i = 1;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const input_names = this.getIfInputNames(i);\n            const if_input = this.getInput(input_names.IF);\n\n            if (!if_input) {\n                break;\n            }\n\n            const do_input = this.getInput(input_names.DO);\n            value_connections.push(if_input.connection.targetConnection);\n            statement_connections.push(do_input.connection.targetConnection);\n            i++;\n        }\n\n        this.updateShape();\n        this.reconnectChildBlocks(value_connections, statement_connections, else_statement_connection);\n    },\n    update(updateFn) {\n        Blockly.Events.setGroup(true);\n\n        const old_mutation_dom = this.mutationToDom();\n        const old_mutation = old_mutation_dom && Blockly.Xml.domToText(old_mutation_dom);\n        const is_rendered = this.rendered;\n\n        this.rendered = false;\n\n        if (updateFn) {\n            updateFn.call(this);\n        }\n\n        this.updateShape();\n        this.rendered = is_rendered;\n        this.initSvg();\n\n        const group = Blockly.Events.getGroup();\n        const new_mutation_dom = this.mutationToDom();\n        const new_mutation = new_mutation_dom && Blockly.Xml.domToText(new_mutation_dom);\n\n        if (old_mutation !== new_mutation) {\n            const change_event = new Blockly.Events.BlockChange(this, 'mutation', null, old_mutation, new_mutation);\n            Blockly.Events.fire(change_event);\n\n            setTimeout(() => {\n                Blockly.Events.setGroup(group);\n                this.bumpNeighbours_();\n                Blockly.Events.setGroup(false);\n            }, Blockly.BUMP_DELAY);\n        }\n\n        if (this.rendered) {\n            this.render();\n        }\n\n        Blockly.Events.setGroup(false);\n    },\n    updateShape() {\n        if (this.getInput('ELSE')) {\n            this.removeInput('ELSE');\n            this.removeInput('ELSE_LABEL');\n            this.removeInput('DELETE_ELSE');\n        }\n\n        let i = 1;\n\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const input_names = this.getIfInputNames(i);\n\n            if (!this.getInput(input_names.IF)) {\n                break;\n            }\n\n            this.removeInput(input_names.IF_LABEL);\n            this.removeInput(input_names.IF);\n            this.removeInput(input_names.THEN_LABEL);\n            this.removeInput(input_names.DELETE_ICON);\n            this.removeInput(input_names.DO);\n\n            i++;\n        }\n\n        if (this.getInput('MUTATOR')) {\n            this.removeInput('MUTATOR'); // \"+\" icon.\n        }\n\n        // Rebuild else if statements\n        for (let j = 1; j <= this.else_if_count; j++) {\n            const input_names = this.getIfInputNames(j);\n            const removeElseIf = () => this.modifyElseIf(false, j);\n\n            this.appendDummyInput(input_names.IF_LABEL).appendField(localize('else if'));\n            this.appendValueInput(input_names.IF).setCheck('Boolean');\n            this.appendDummyInput(input_names.THEN_LABEL).appendField(localize('then'));\n            this.appendDummyInput(input_names.DELETE_ICON).appendField(\n                new Blockly.FieldImage(minusIconDark, 24, 24, '-', removeElseIf)\n            );\n            this.appendStatementInput(input_names.DO);\n        }\n\n        // Rebuild else statement\n        if (this.else_count > 0) {\n            const removeElse = () => this.modifyElse(false);\n            this.appendDummyInput('ELSE_LABEL').appendField(localize('else'));\n            this.appendDummyInput('DELETE_ELSE').appendField(\n                new Blockly.FieldImage(minusIconDark, 24, 24, '-', removeElse, false)\n            );\n            this.appendStatementInput('ELSE');\n        }\n\n        const addElseIf = () => {\n            if (this.else_count === 0) {\n                this.modifyElse(true);\n            } else {\n                if (!this.else_if_count) {\n                    this.else_if_count = 0;\n                }\n\n                this.modifyElseIf(true);\n            }\n        };\n\n        // Re-add the \"+\" icon\n        this.appendDummyInput('MUTATOR').appendField(\n            new Blockly.FieldImage(plusIconDark, 24, 24, '+', addElseIf, false)\n        );\n\n        this.initSvg();\n        this.render();\n    },\n    storeConnections(arg = 0) {\n        this.value_connections = [null];\n        this.statement_connections = [null];\n        this.else_statement_connection = null;\n\n        for (let i = 1; i <= this.else_if_count; i++) {\n            if (arg !== i) {\n                const input_names = this.getIfInputNames(i);\n\n                this.value_connections.push(this.getInput(input_names.IF).connection.targetConnection);\n                this.statement_connections.push(this.getInput(input_names.DO).connection.targetConnection);\n            }\n        }\n\n        const else_input = this.getInput('ELSE');\n\n        if (else_input) {\n            this.else_statement_connection = else_input.connection.targetConnection;\n        }\n    },\n    reconnectChildBlocks(opt_value_conns, opt_statement_conns, opt_else_statement_conns) {\n        const value_connections = opt_value_conns ?? this.value_connections;\n        const statement_connections = opt_statement_conns ?? this.statement_connections;\n        const else_statement_connection = opt_else_statement_conns ?? this.else_statement_connection;\n\n        for (let i = 1; i <= this.else_if_count; i++) {\n            const input_names = this.getIfInputNames(i);\n            const value_connection = value_connections[i];\n            const statement_connection = statement_connections[i];\n\n            if (value_connection && this.getInput(input_names.IF)) {\n                Blockly.Mutator.reconnect(value_connection, this, input_names.IF);\n            }\n            if (statement_connection && this.getInput(input_names.DO)) {\n                Blockly.Mutator.reconnect(statement_connection, this, input_names.DO);\n            }\n        }\n\n        if (else_statement_connection && this.getInput('ELSE')) {\n            Blockly.Mutator.reconnect(else_statement_connection, this, 'ELSE');\n        }\n    },\n    modifyElse(is_add) {\n        const update = () => {\n            this.else_count += is_add ? 1 : -1;\n        };\n\n        this.storeConnections();\n        this.update(update);\n        this.reconnectChildBlocks();\n    },\n    modifyElseIf(is_add, opt_idx) {\n        this.storeConnections(opt_idx);\n\n        const update = () => {\n            this.else_if_count += is_add ? 1 : -1;\n        };\n\n        this.update(update);\n        this.reconnectChildBlocks();\n    },\n    getRequiredValueInputs() {\n        const required_inputs = {};\n        this.inputList\n            .filter(input => /^IF[0-9]*?$/.test(input.name))\n            .forEach(input => (required_inputs[input.name] = null));\n\n        return required_inputs;\n    },\n    getIfInputNames: idx => {\n        return {\n            IF_LABEL: `IF_LABEL${idx}`,\n            IF: `IF${idx}`,\n            THEN_LABEL: `THEN_LABEL${idx}`,\n            DELETE_ICON: `DELETE_ICON${idx}`,\n            DO: `DO${idx}`,\n        };\n    },\n};\n\nBlockly.JavaScript.controls_if = block => {\n    // If/elseif/else condition.\n    let n = 0;\n    let code = '';\n\n    do {\n        const condition = Blockly.JavaScript.valueToCode(block, `IF${n}`, Blockly.JavaScript.ORDER_NONE) || 'false';\n\n        // i.e. (else)? if { // code }\n        const keyword = n > 0 ? 'else if' : 'if';\n        code += `\n        ${keyword} (${condition}) {\n            ${Blockly.JavaScript.statementToCode(block, `DO${n}`)}\n        }`;\n        n++;\n    } while (block.getInput(`IF${n}`));\n\n    if (block.getInput('ELSE')) {\n        code += `\n        else {\n            ${Blockly.JavaScript.statementToCode(block, 'ELSE')}\n        }`;\n    }\n\n    return `${code}\\n`;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_boolean = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'BOOL',\n                    options: [\n                        [localize('true'), 'TRUE'],\n                        [localize('false'), 'FALSE'],\n                    ],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns either True or False'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('True-False'),\n            description: localize('This is a single block that returns a boolean value, either true or false.'),\n        };\n    },\n};\n\nBlockly.JavaScript.logic_boolean = block => {\n    const code = block.getFieldValue('BOOL') === 'TRUE' ? 'true' : 'false';\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_operation = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('and'), 'AND'],\n                        [localize('or'), 'OR'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Performs selected logic operation'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Logic operation'),\n            description: localize('This block performs the \"AND\" or the \"OR\" logic operation.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_operation = block => {\n    const selectedOperator = block.getFieldValue('OP');\n\n    let operator, order;\n\n    if (selectedOperator === 'AND') {\n        operator = '&&';\n        order = Blockly.JavaScript.ORDER_LOGICAL_AND;\n    } else if (selectedOperator === 'OR') {\n        operator = '||';\n        order = Blockly.JavaScript.ORDER_LOGICAL_OR;\n    }\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', Blockly.JavaScript.ORDER_ATOMIC) || 'false';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', Blockly.JavaScript.ORDER_ATOMIC) || 'false';\n\n    const code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_null = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: 'null',\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block assigns a null value to an item or statement.'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Null'),\n            description: localize('This block assigns a null value to an item or statement.'),\n        };\n    },\n};\nBlockly.JavaScript.logic_null = () => ['null', Blockly.JavaScript.ORDER_ATOMIC];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_ternary = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('test {{ condition }}', { condition: '%1' }),\n            message1: localize('if true {{ return_value }}', { return_value: '%1' }),\n            message2: localize('if false {{ return_value }}', { return_value: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'IF',\n                    check: 'Boolean',\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_value',\n                    name: 'THEN',\n                },\n            ],\n            args2: [\n                {\n                    type: 'input_value',\n                    name: 'ELSE',\n                },\n            ],\n            output: null,\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize(\n                'This block tests if a given value is true or false and returns “True” or “False” accordingly.'\n            ),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Test value'),\n            description: localize(\n                'This block tests if a given value is true or false and returns “True” or “False” accordingly.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            IF: null,\n            THEN: null,\n            ELSE: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_ternary = block => {\n    const valueIf = Blockly.JavaScript.valueToCode(block, 'IF', Blockly.JavaScript.ORDER_CONDITIONAL) || 'false';\n    const valueThen = Blockly.JavaScript.valueToCode(block, 'THEN', Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n    const valueElse = Blockly.JavaScript.valueToCode(block, 'ELSE', Blockly.JavaScript.ORDER_CONDITIONAL) || 'null';\n\n    const code = `(${valueIf} ? ${valueThen} : ${valueElse})`;\n    return [code, Blockly.JavaScript.ORDER_CONDITIONAL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.logic_negate = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('not {{ boolean }}', { boolean: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'BOOL',\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Converts a given True or False to the opposite value'),\n            category: Blockly.Categories.Logic,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Logic negation'),\n            description: localize('This block converts the boolean value (true or false) to its opposite.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            BOOL: null,\n        };\n    },\n};\n\nBlockly.JavaScript.logic_negate = block => {\n    const order = Blockly.JavaScript.ORDER_LOGICAL_NOT;\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'BOOL', order) || 'true';\n\n    const code = `!${argument0}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_change = {\n    /**\n     * Initializes the block, in most cases this calls the jsonInit function, in some\n     * cases it may add extra properties to the block object.\n     * https://developers.google.com/blockly/reference/js/Blockly.Block#jsonInit\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    /**\n     * Block definitions describe how a block looks and behaves, including the text,\n     * the colour, the shape, and what other blocks it can connect to. We've separated\n     * the block definition from the init function so we can search through it.\n     * https://developers.google.com/blockly/guides/create-custom-blocks/define-blocks\n     */\n    definition() {\n        return {\n            message0: localize('change {{ variable }} by {{ number }}', {\n                variable: '%1',\n                number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('item'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'DELTA',\n                    check: 'Number',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('This block adds the given number to the selected variable'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    /**\n     * Meta returns an object with with properties that contain human readable strings,\n     * these strings are used in the flyout help content, as well as used for searching\n     * for specific blocks.\n     */\n    meta() {\n        return {\n            display_name: localize('Change variable'),\n            description: localize('This block adds the given number to the selected variable.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DELTA: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_change = block => {\n    const variable = block.getFieldValue('VAR');\n    // eslint-disable-next-line no-underscore-dangle\n    const argument0 = Blockly.JavaScript.variableDB_.getName(variable, Blockly.Variables.NAME_TYPE);\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'DELTA', Blockly.JavaScript.ORDER_ADDITION) || '0';\n    const code = `${argument0} = (typeof ${argument0} === 'number' ? ${argument0} : 0) + ${argument1};`;\n\n    return code;\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_constant = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'CONSTANT',\n                    options: [\n                        ['\\u03C0', 'PI'],\n                        ['\\u2107', 'E'],\n                        ['\\u03d5', 'GOLDEN_RATIO'],\n                        ['sqrt(2)', 'SQRT2'],\n                        ['sqrt(\\u00bd)', 'SQRT1_2'],\n                        ['\\u221e', 'INFINITY'],\n                    ],\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you the selected constant values.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Mathematical constants'),\n            description: localize('This block gives you the selected constant values.'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_constant = block => {\n    const constant = block.getFieldValue('CONSTANT');\n\n    let code, order;\n\n    if (constant === 'PI') {\n        code = 'Math.PI';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'E') {\n        code = 'Math.E';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'GOLDEN_RATIO') {\n        code = '(1 + Math.sqrt(5)) / 2';\n        order = Blockly.JavaScript.ORDER_DIVISION;\n    } else if (constant === 'SQRT2') {\n        code = 'Math.SQRT2';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'SQRT1_2') {\n        code = 'Math.SQRT1_2';\n        order = Blockly.JavaScript.ORDER_MEMBER;\n    } else if (constant === 'INFINITY') {\n        code = 'Infinity';\n        order = Blockly.JavaScript.ORDER_ATOMIC;\n    }\n\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_constrain = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('constrain {{ number }} low {{ low_number }} high {{ high_number }}', {\n                number: '%1',\n                low_number: '%2',\n                high_number: '%3',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'LOW',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'HIGH',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block constrains a given number so that it is within a set range.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Constrain within a range'),\n            description: localize('This block constrains a given number so that it is within a set range.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: null,\n            LOW: null,\n            HIGH: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_constrain = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'LOW', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument2 = Blockly.JavaScript.valueToCode(block, 'HIGH', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    const code = `Math.min(Math.max(${argument0}, ${argument1}), ${argument2})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_modulo = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('remainder of {{ number1 }} ÷ {{ number2 }}', {\n                number1: '%1',\n                number2: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'DIVIDEND',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'DIVISOR',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns the remainder after a division'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Remainder after division'),\n            description: localize('Returns the remainder after the division of the given numbers.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            DIVIDEND: null,\n            DIVISOR: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_modulo = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'DIVIDEND', Blockly.JavaScript.ORDER_MODULUS) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'DIVISOR', Blockly.JavaScript.ORDER_MODULUS) || '0';\n\n    const code = `${argument0} % ${argument1}`;\n    return [code, Blockly.JavaScript.ORDER_MODULUS];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_number = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const fieldInput = this.getField('NUM');\n        fieldInput.setValidator(input => this.numberValidator(input));\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_number',\n                    name: 'NUM',\n                    value: 0,\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Please use `.` as a decimal separator for fractional numbers.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Number'),\n            description: localize(\n                'Enter an integer or fractional number into this block. Please use `.` as a decimal separator for fractional numbers.'\n            ),\n        };\n    },\n    numberValidator(input) {\n        if (/^-?([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(input) && input < Number.MAX_SAFE_INTEGER) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.math_number = block => {\n    const code = block.getFieldValue('NUM');\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_number_positive = {\n    init: Blockly.Blocks.math_number.init,\n    definition: Blockly.Blocks.math_number.definition,\n    meta() {\n        return {\n            display_name: localize('Math Number Positive'),\n            description: localize('Math Number Description'),\n        };\n    },\n    numberValidator(input) {\n        if (/^([0][.]|[0-9]+[.])?([0]|[1-9]){1,}$/.test(input) && input < Number.MAX_SAFE_INTEGER) {\n            return undefined;\n        }\n        return null;\n    },\n};\n\nBlockly.JavaScript.math_number_positive = Blockly.JavaScript.math_number;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_number_property = {\n    init() {\n        this.jsonInit(this.definition());\n\n        this.setOnChange(event => {\n            if (event.name === 'PROPERTY') {\n                const hasDivisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n                this.updateShape(hasDivisorInput);\n            }\n        });\n    },\n    definition() {\n        return {\n            message0: localize('{{ number }} is {{ type }}', {\n                number: '%1',\n                type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'NUMBER_TO_CHECK',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'PROPERTY',\n                    options: [\n                        [localize('even'), 'EVEN'],\n                        [localize('odd'), 'ODD'],\n                        [localize('prime'), 'PRIME'],\n                        [localize('whole'), 'WHOLE'],\n                        [localize('positive'), 'POSITIVE'],\n                        [localize('negative'), 'NEGATIVE'],\n                        [localize('divisible by'), 'DIVISIBLE_BY'],\n                    ],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            toolip: localize('This block tests a given number according to the selection'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Test a number'),\n            description: localize(\n                'This block tests a given number according to the selection and it returns a value of “True” or “False”. Available options: Even, Odd, Prime, Whole, Positive, Negative, Divisible'\n            ),\n        };\n    },\n    domToMutation(xmlElement) {\n        const hasDivisorInput = xmlElement.getAttribute('divisor_input') === 'true';\n        this.updateShape(hasDivisorInput);\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const divisorInput = this.getFieldValue('PROPERTY') === 'DIVISIBLE_BY';\n        container.setAttribute('divisor_input', divisorInput);\n        return container;\n    },\n    updateShape(hasDivisorInput) {\n        const inputExists = this.getInput('DIVISOR');\n\n        if (hasDivisorInput) {\n            if (!inputExists) {\n                this.appendValueInput('DIVISOR').setCheck('Number');\n                this.initSvg();\n                this.render(false);\n            }\n        } else {\n            this.removeInput('DIVISOR');\n        }\n    },\n    getRequiredValueInputs() {\n        return {\n            NUMBER_TO_CHECK: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_number_property = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'NUMBER_TO_CHECK', Blockly.JavaScript.ORDER_MODULUS) || '0';\n    const property = block.getFieldValue('PROPERTY');\n\n    let code;\n\n    if (property === 'PRIME') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('mathIsPrime', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }`,\n        ]);\n        code = `${functionName}(${argument0})`;\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    } else if (property === 'EVEN') {\n        code = `${argument0} % 2 === 0`;\n    } else if (property === 'ODD') {\n        code = `${argument0} % 2 === 1`;\n    } else if (property === 'WHOLE') {\n        code = `${argument0} % 1 === 0`;\n    } else if (property === 'POSITIVE') {\n        code = `${argument0} > 0`;\n    } else if (property === 'NEGATIVE') {\n        code = `${argument0} < 0`;\n    } else if (property === 'DIVISIBLE_BY') {\n        const divisor = Blockly.JavaScript.valueToCode(block, 'DIVISOR', Blockly.JavaScript.ORDER_MODULUS) || '0';\n        code = `${argument0} % ${divisor} == 0`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_EQUALITY];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_on_list = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('{{ calculation }} of list {{ input_list }}', {\n                calculation: '%1',\n                input_list: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('sum'), 'SUM'],\n                        [localize('min'), 'MIN'],\n                        [localize('max'), 'MAX'],\n                        [localize('average'), 'AVERAGE'],\n                        [localize('median'), 'MEDIAN'],\n                        [localize('mode'), 'MODE'],\n                        [localize('antimode'), 'ANTIMODE'],\n                        [localize('standard deviation'), 'STD_DEV'],\n                        [localize('random item'), 'RANDOM'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'LIST',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Aggregate operations'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Aggregate operations'),\n            description: localize(\n                'This block performs the following operations on a given list: sum, minimum, maximum, average, median, mode, antimode, standard deviation, random item.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        const type_list = [\n            'variables_get',\n            'lists_getSublist',\n            'ohlc_values',\n            'lists_split',\n            'ohlc',\n            'ticks',\n            'lists_repeat',\n            'lastDigitList',\n            'ohlc_values_in_list',\n            'procedures_callreturn',\n        ];\n        return {\n            LIST: () => {\n                return !type_list.includes(this.childBlocks_[0]?.type);\n            },\n        };\n    },\n};\n\n/* eslint-disable no-underscore-dangle */\nBlockly.JavaScript.math_on_list = block => {\n    const operation = block.getFieldValue('OP');\n\n    let code, list;\n\n    if (operation === 'SUM') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                },0);\n            }`,\n        ]);\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MIN') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return Math.min.apply(null, (recursiveList(myList, final_list) || [0]));\n            }`,\n        ]);\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_COMMA) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MAX') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return Math.max.apply(null, (recursiveList(myList, final_list) || [0]));\n            }`,\n        ]);\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_COMMA) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'AVERAGE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMean', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return recursiveList(myList, final_list).reduce(function(x, y) {\n                    return x + y;\n                }, 0) / myList.length;\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MEDIAN') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathMedian', [\n            `\n            Array.prototype.swap = function (x,y) {\n                var b = this[x];\n                this[x] = this[y];\n                this[y] = b;\n                return this;\n            }\n\n            function partition(arr, start, end){\n                var pivotValue = arr[end];\n                var pivotIndex = start;\n                for (var i = start; i < end; i++) {\n                    if (arr[i] < pivotValue) {\n                    arr.swap(pivotIndex, i);\n                    pivotIndex++;\n                    }\n                }\n                arr.swap(end, pivotIndex);\n                return pivotIndex;\n            };\n\n            function quickSort(arr) {\n                var stack = [];\n                stack.push(0);\n                stack.push(arr.length - 1);\n\n                while(stack[stack.length - 1] >= 0){\n                    end = stack.pop();\n                    start = stack.pop();\n                    pivotIndex = partition(arr, start, end);\n                    if (pivotIndex - 1 > start){\n                        stack.push(start);\n                        stack.push(pivotIndex - 1);\n                    }\n                    if (pivotIndex + 1 < end){\n                        stack.push(pivotIndex + 1);\n                        stack.push(end);\n                    }\n                }\n\n            }\n\n            function calculateMedian(final_list){\n                quickSort(final_list);\n\n                if (final_list.length % 2 == 0) {\n                    return (final_list[final_list.length / 2 - 1] + final_list[final_list.length / 2]) / 2;\n                }\n                return final_list[(final_list.length - 1) / 2];\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(myList) {\n                var final_list = [];\n                return calculateMedian(recursiveList(myList, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'MODE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathModes', [\n            `\n            function calculateMathMode(values){\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n\n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathMode(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'ANTIMODE') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathAntiMode', [\n            `\n            function calculateMathAntiMode(values){\n                var antiMode = [];\n                var counts = [];\n                var minCount = 1;\n                var countArray = [];\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                }\n\n                 minCount = Math.min.apply(null, counts.map(function(element) {\n                     return element[1];\n                 }));\n\n                 for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == minCount) {\n                        antiMode.push(counts[j][0]);\n                    }\n                }\n\n                return antiMode;\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathAntiMode(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'STD_DEV') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathStandardDeviation', [\n            `\n            function calculateMathStandardDeviation(numbers){\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }, 0) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }\n\n            function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                return calculateMathStandardDeviation(recursiveList(list, final_list));\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    } else if (operation === 'RANDOM') {\n        const functionName = Blockly.JavaScript.provideFunction_('mathRandomList', [\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(list) {\n                var final_list = [];\n                var final_list = recursiveList(list, final_list);\n                var x = Math.floor(Math.random() * final_list.length);\n                return final_list[x];\n            }`,\n        ]);\n\n        list = Blockly.JavaScript.valueToCode(block, 'LIST', Blockly.JavaScript.ORDER_NONE) || '[]';\n        code = `${functionName}((${list} || [0]))`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_random_float = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('random fraction'),\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a random fraction between 0.0 to 1.0'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Random fraction number'),\n            description: localize('This block gives you a random fraction between 0.0 to 1.0.'),\n        };\n    },\n};\n\nBlockly.JavaScript.math_random_float = () => ['Math.random()', Blockly.JavaScript.ORDER_FUNCTION_CALL];\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_random_int = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('random integer from {{ start_number }} to {{ end_number }}', {\n                start_number: '%1',\n                end_number: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'FROM',\n                    check: 'Number',\n                },\n                {\n                    type: 'input_value',\n                    name: 'TO',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block gives you a random number from within a set range'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Random integer'),\n            description: localize('This block gives you a random number from within a set range.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            FROM: null,\n            TO: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_random_int = block => {\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'FROM', Blockly.JavaScript.ORDER_COMMA) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'TO', Blockly.JavaScript.ORDER_COMMA) || '0';\n\n    // eslint-disable-next-line no-underscore-dangle\n    const functionName = Blockly.JavaScript.provideFunction_('mathRandomInt', [\n        // eslint-disable-next-line no-underscore-dangle\n        `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }`,\n    ]);\n\n    const code = `${functionName}(${argument0}, ${argument1})`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\n// https://github.com/google/blockly/blob/master/generators/javascript/math.js\nBlockly.Blocks.math_round = {\n    /**\n     * Check if a number is even, odd, prime, whole, positive, or negative\n     * or if it is divisible by certain number. Returns true or false.\n     * @this Blockly.Block\n     */\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['round', 'ROUND'],\n                        ['round up', 'ROUNDUP'],\n                        ['round down', 'ROUNDDOWN'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Rounds a given number to an integer'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Rounding operation'),\n            description: localize(\n                'This block rounds a given number according to the selection: round, round up, round down.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_round = block => {\n    const operation = block.getFieldValue('OP');\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_ATOMIC) || '0';\n\n    let code;\n\n    if (operation === 'ROUND') {\n        code = `Math.round(${argument0})`;\n    } else if (operation === 'ROUNDUP') {\n        code = `Math.ceil(${argument0})`;\n    } else if (operation === 'ROUNDDOWN') {\n        code = `Math.floor(${argument0})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_arithmetic = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2 %3',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'A',\n                    check: 'Number',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['+', 'ADD'],\n                        ['-', 'MINUS'],\n                        ['*', 'MULTIPLY'],\n                        ['/', 'DIVIDE'],\n                        ['^', 'POWER'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'B',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('This block performs arithmetic operations between two numbers.'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Arithmetical operations'),\n            description: localize('This block performs arithmetic operations between two numbers.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            A: null,\n            B: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_arithmetic = block => {\n    const operators = {\n        ADD: ['+', Blockly.JavaScript.ORDER_ADDITION],\n        MINUS: ['-', Blockly.JavaScript.ORDER_SUBTRACTION],\n        MULTIPLY: ['*', Blockly.JavaScript.ORDER_MULTIPLICATION],\n        DIVIDE: ['/', Blockly.JavaScript.ORDER_DIVISION],\n        POWER: [null, Blockly.JavaScript.ORDER_COMMA], // Handle power separately.\n    };\n\n    const tuple = operators[block.getFieldValue('OP')];\n    const operator = tuple[0];\n    const order = tuple[1];\n\n    const argument0 = Blockly.JavaScript.valueToCode(block, 'A', order) || '0';\n    const argument1 = Blockly.JavaScript.valueToCode(block, 'B', order) || '0';\n\n    let code;\n\n    // Power in JavaScript requires a special case since it has no operator.\n    if (!operator) {\n        code = `Math.pow(${argument0}, ${argument1})`;\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    code = `${argument0} ${operator} ${argument1}`;\n    return [code, order];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_single = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        [localize('square root'), 'ROOT'],\n                        [localize('absolute'), 'ABS'],\n                        ['-', 'NEG'],\n                        ['ln', 'LN'],\n                        ['log10', 'LOG10'],\n                        ['e^', 'EXP'],\n                        ['10^', 'POW10'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Operations on a given number'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Operations on a given number'),\n            description: localize('This block performs the selected operations to a given number.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_single = block => {\n    const operator = block.getFieldValue('OP');\n\n    let code, arg;\n\n    if (operator === 'NEG') {\n        // Negation is a special case given its different operator precedence.\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_UNARY_NEGATION) || '0';\n        if (arg[0] === '-') {\n            // --3 is not legal in JS\n            arg = ` ${arg}`;\n        }\n        code = `-${arg}`;\n        return [code, Blockly.JavaScript.ORDER_UNARY_NEGATION];\n    }\n\n    if (['SIN', 'COS', 'TAN'].includes(operator)) {\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_DIVISION) || '0';\n    } else {\n        arg = Blockly.JavaScript.valueToCode(block, 'NUM', Blockly.JavaScript.ORDER_NONE) || '0';\n    }\n\n    // First, handle cases which generate values that don't need parentheses\n    // wrapping the code.\n    if (operator === 'ABS') {\n        code = `Math.abs(${arg})`;\n    } else if (operator === 'ROOT') {\n        code = `Math.sqrt(${arg})`;\n    } else if (operator === 'LN') {\n        code = `Math.log(${arg})`;\n    } else if (operator === 'EXP') {\n        code = `Math.pow(Math.E, ${arg})`;\n    } else if (operator === 'POW10') {\n        code = `Math.pow(10, ${arg})`;\n    } else if (operator === 'ROUND') {\n        code = `Math.round(${arg})`;\n    } else if (operator === 'ROUNDUP') {\n        code = `Math.ceil(${arg})`;\n    } else if (operator === 'ROUNDDOWN') {\n        code = `Math.floor(${arg})`;\n    } else if (operator === 'SIN') {\n        code = `Math.sin(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'COS') {\n        code = `Math.cos(${arg} / 180 * Math.PI)`;\n    } else if (operator === 'TAN') {\n        code = `Math.tan(${arg} / 180 * Math.PI)`;\n    }\n\n    if (code) {\n        return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n    }\n\n    // Second, handle cases which generate values that may need parentheses\n    // wrapping the code.\n    if (operator === 'LOG10') {\n        code = `Math.log(${arg}) / Math.log(10)`;\n    } else if (operator === 'ASIN') {\n        code = `Math.asin(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ACOS') {\n        code = `Math.acos(${arg}) / Math.PI * 180`;\n    } else if (operator === 'ATAN') {\n        code = `Math.atan(${arg}) / Math.PI * 180`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_DIVISION];\n};\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.math_trig = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1 %2',\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'OP',\n                    options: [\n                        ['sin', 'SIN'],\n                        ['cos', 'COS'],\n                        ['tan', 'TAN'],\n                        ['asin', 'ASIN'],\n                        ['acos', 'ACOS'],\n                        ['atan', 'ATAN'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'NUM',\n                    check: 'Number',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Trigonometric functions'),\n            category: Blockly.Categories.Mathematical,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trigonometric functions'),\n            description: localize('This block performs trigonometric functions.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            NUM: null,\n        };\n    },\n};\n\nBlockly.JavaScript.math_trig = Blockly.JavaScript.math_single;\n","import { localize } from '@deriv/translations';\n\nBlockly.Blocks.text = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'field_input',\n                    name: 'TEXT',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Enter some text here'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text'),\n            description: localize('A  block that can contain text.'),\n        };\n    },\n};\n\nBlockly.JavaScript.text = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const code = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { plusIconDark } from '../images';\nimport { runGroupedEvents } from '../../utils';\n\nBlockly.Blocks.text_join = {\n    protected_statements: ['STACK'],\n    allowed_children: ['text_statement'],\n    init() {\n        const field_image = new Blockly.FieldImage(plusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('ADD_ICON').appendField(field_image);\n        this.moveInputBefore('ADD_ICON', 'STACK');\n    },\n    definition() {\n        return {\n            message0: localize('set {{ variable }} to create text with', { variable: '%1' }),\n            message1: '%1',\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VARIABLE',\n                    variable: localize('text'),\n                },\n            ],\n            args1: [\n                {\n                    type: 'input_statement',\n                    name: 'STACK',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Text join'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text join'),\n            description: localize(\n                'Creates a single text string from combining the text value of each attached item, without spaces in between. The number of items can be added accordingly.'\n            ),\n        };\n    },\n    onIconClick() {\n        if (this.workspace.options.readOnly || this.isInFlyout) {\n            return;\n        }\n\n        runGroupedEvents(false, () => {\n            const text_block = this.workspace.newBlock('text_statement');\n            text_block.required_parent_id = this.id;\n            text_block.setMovable(true);\n            text_block.initSvg();\n            text_block.render();\n\n            const shadow_block = this.workspace.newBlock('text');\n            shadow_block.setShadow(true);\n            shadow_block.setFieldValue('', 'TEXT');\n            shadow_block.initSvg();\n            shadow_block.render();\n\n            const text_input = text_block.getInput('TEXT');\n            text_input.connection.connect(shadow_block.outputConnection);\n\n            const connection = this.getLastConnectionInStatement('STACK');\n            connection.connect(text_block.previousConnection);\n        });\n\n        // TODO: Open editor and focus so user can add string right away?\n        // const inputField = shadow_block.getField('TEXT');\n        // inputField.showEditor_();\n    },\n    onchange: Blockly.Blocks.lists_create_with.onchange,\n};\n\n// Blockly.JavaScript.text_join = Blockly.JavaScript.lists_create_with;\nBlockly.JavaScript.text_join = block => {\n    // eslint-disable-next-line no-underscore-dangle\n    const var_name = Blockly.JavaScript.variableDB_.getName(\n        block.getFieldValue('VARIABLE'),\n        Blockly.Variables.NAME_TYPE\n    );\n    const blocks_in_stack = block.getBlocksInStatement('STACK');\n    const elements = blocks_in_stack.map(b => {\n        const value = Blockly.JavaScript[b.type](b);\n        return Array.isArray(value) ? value[0] : value;\n    });\n\n    const code = `${var_name} = [${elements}].join(\" \");\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { minusIconDark } from '../images';\nimport { runIrreversibleEvents } from '../../utils';\n\nBlockly.Blocks.text_statement = {\n    required_parent_type: 'text_join',\n    init() {\n        this.required_parent_id = '';\n        const field_image = new Blockly.FieldImage(minusIconDark, 25, 25, '', this.onIconClick.bind(this));\n        this.jsonInit(this.definition());\n        this.appendDummyInput('REMOVE_ICON').appendField(field_image);\n    },\n    definition() {\n        return {\n            message0: '%1',\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Statement'),\n            description: '',\n        };\n    },\n    onchange(event) {\n        if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n            return;\n        }\n\n        const surround_parent = this.getSurroundParent();\n\n        if (event.type === Blockly.Events.BLOCK_CREATE) {\n            this.setMovable(true);\n            if (!this.required_parent_id && surround_parent?.type === this.required_parent_type) {\n                this.required_parent_id = surround_parent.id;\n            }\n        }\n\n        if (event.type === Blockly.Events.END_DRAG) {\n            const stack_blocks = Blockly.getMainWorkspace().getBlockById(event.blockId);\n\n            if (this.required_parent_id && (!surround_parent || surround_parent.id !== this.required_parent_id)) {\n                const original_parent = Blockly.getMainWorkspace().getBlockById(this.required_parent_id);\n\n                if (original_parent) {\n                    const first_block_in_stack = original_parent.getInputTargetBlock('STACK');\n\n                    if (first_block_in_stack) {\n                        const last_connection = original_parent.getLastConnectionInStatement('STACK');\n                        runIrreversibleEvents(() => {\n                            last_connection.connect(this.previousConnection);\n                        });\n                    } else {\n                        runIrreversibleEvents(() => {\n                            original_parent.getInput('STACK').connection.connect(stack_blocks.previousConnection);\n                        });\n                    }\n                }\n            }\n        }\n    },\n    onIconClick: Blockly.Blocks.lists_statement.onIconClick,\n};\n\nBlockly.JavaScript.text_statement = block => {\n    const code = `String(${Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_ATOMIC)})`;\n    return [code, Blockly.JavaScript.ORDER_ATOMIC];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_append = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('to {{ variable }} append text {{ input_text }}', {\n                variable: '%1',\n                input_text: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_variable',\n                    name: 'VAR',\n                    variable: localize('text'),\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Appends a given text to a variable'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Append'),\n            description: localize('Appends a given text to a variable.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_append = block => {\n    const forceString = value => {\n        const strRegExp = /^\\s*'([^']|\\\\')*'\\s*$/;\n        if (strRegExp.test(value)) {\n            return value;\n        }\n        return `String(${value})`;\n    };\n\n    // eslint-disable-next-line no-underscore-dangle\n    const varName = Blockly.JavaScript.variableDB_.getName(block.getFieldValue('VAR'), Blockly.Variables.NAME_TYPE);\n    const value = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || \"''\";\n\n    const code = `${varName} += ${forceString(value)};\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_length = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('length of {{ input_text }}', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n            ],\n            output: 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Text String Length'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text String Length'),\n            description: localize(\n                'Returns the number of characters of a given string of text, including numbers, spaces, punctuation marks, and symbols.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_length = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"''\";\n\n    const code = `${text}.length`;\n    return [code, Blockly.JavaScript.ORDER_MEMBER];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_isEmpty = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('text {{ input_text }} is empty', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                    check: ['String'],\n                },\n            ],\n            output: 'Boolean',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Tests if a given text string is empty'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Text Is empty'),\n            description: localize('Tests whether a string of text is empty. Returns a boolean value (true or false).'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_isEmpty = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n    const isVariable = block.workspace.getAllVariables().findIndex(variable => variable.name === text) !== -1;\n\n    const code = isVariable ? `!${text} || !${text}.length` : `!${text}.length`;\n    return [code, Blockly.JavaScript.ORDER_LOGICAL_NOT];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_indexOf = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in text {{ input_text1 }} find {{ first_or_last }} occurence of text {{ input_text2 }}',\n                {\n                    input_text1: '%1',\n                    first_or_last: '%2',\n                    input_text2: '%3',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'END',\n                    options: [\n                        [localize('first'), 'FIRST'],\n                        [localize('last'), 'LAST'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'FIND',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Search for a given string'),\n            cateogry: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Search for string'),\n            description: localize(\n                'Searches through a string of text for a specific occurrence of a given character or word, and returns the position.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n            FIND: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_indexOf = block => {\n    const functionName = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';\n    const substring = Blockly.JavaScript.valueToCode(block, 'FIND', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    const code = `${text}.${functionName}(${substring})`;\n    if (block.workspace.options.oneBasedIndex) {\n        return [`${code} + 1`, Blockly.JavaScript.ORDER_ADDITION];\n    }\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_charAt = {\n    init() {\n        this.jsonInit(this.definition());\n\n        const dropdown = this.getField('WHERE');\n        dropdown.setValidator(value => {\n            const newAt = ['FROM_START', 'FROM_END'].includes(value);\n            if (newAt !== this.isAt) {\n                this.updateAt(newAt);\n                this.setFieldValue(value, 'WHERE');\n                return null;\n            }\n            return undefined;\n        });\n\n        this.updateAt(true);\n    },\n    definition() {\n        return {\n            message0: localize('in text %1 get %2'),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'VALUE',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE',\n                    options: [\n                        [localize('letter #'), 'FROM_START'],\n                        [localize('letter # from end'), 'FROM_END'],\n                        [localize('first letter'), 'FIRST'],\n                        [localize('last letter'), 'LAST'],\n                        [localize('random letter'), 'RANDOM'],\n                    ],\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a specific character from a given string'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get character'),\n            description: localize(\n                'Returns the specific character from a given string of text according to the selected option. '\n            ),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        container.setAttribute('at', !!this.isAt);\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt = xmlElement.getAttribute('at') !== 'false';\n        this.updateAt(isAt);\n    },\n    updateAt(isAt) {\n        this.removeInput('AT', true);\n        if (isAt) {\n            this.appendValueInput('AT').setCheck('Number');\n        }\n\n        this.isAt = isAt;\n        this.initSvg();\n        this.render(false);\n    },\n    getRequiredValueInputs() {\n        return {\n            VALUE: emptyTextValidator,\n            AT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_charAt = block => {\n    const where = block.getFieldValue('WHERE') || 'FROM_START';\n    const textOrder = where === 'RANDOM' ? Blockly.JavaScript.ORDER_NONE : Blockly.JavaScript.ORDER_MEMBER;\n    const text = Blockly.JavaScript.valueToCode(block, 'VALUE', textOrder) || \"''\";\n\n    let code;\n\n    if (where === 'FROM_START') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT');\n        // Adjust index if using one-based indices\n        code = `${text}.charAt(${at})`;\n    } else if (where === 'FROM_END') {\n        const at = Blockly.JavaScript.getAdjusted(block, 'AT', 1, true);\n        code = `${text}.slice(${at}).charAt(0)`;\n    } else if (where === 'FIRST') {\n        code = `${text}.charAt(0)`;\n    } else if (where === 'LAST') {\n        code = `${text}.slice(-1)`;\n    } else if (where === 'RANDOM') {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('textRandomLetter', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_getSubstring = {\n    init() {\n        this.WHERE_OPTIONS_1 = [\n            [localize('letter #'), 'FROM_START'],\n            [localize('letter # from end'), 'FROM_END'],\n            [localize('first'), 'FIRST'],\n        ];\n        this.WHERE_OPTIONS_2 = [\n            [localize('letter #'), 'FROM_START'],\n            [localize('letter # from end'), 'FROM_END'],\n            [localize('last'), 'LAST'],\n        ];\n\n        this.jsonInit(this.definition());\n        this.updateAt(1, true);\n        this.updateAt(2, true);\n    },\n    definition() {\n        return {\n            message0: localize(\n                'in text {{ input_text }} get substring from {{ position1 }} {{ index1 }} to {{ position2 }} {{ index2 }}',\n                {\n                    input_text: '%1',\n                    position1: '%2',\n                    index1: '%3',\n                    position2: '%4',\n                    index2: '%5',\n                }\n            ),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'STRING',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE1',\n                    options: this.WHERE_OPTIONS_1,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT1',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'WHERE2',\n                    options: this.WHERE_OPTIONS_2,\n                },\n                {\n                    type: 'input_dummy',\n                    name: 'AT2',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Returns a specific portion of a given string of text.'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Get substring'),\n            description: localize('Returns a specific portion of a given string of text.'),\n        };\n    },\n    mutationToDom() {\n        const container = document.createElement('mutation');\n        const isAt1 = this.getInput('AT1').type === Blockly.INPUT_VALUE;\n        const isAt2 = this.getInput('AT2').type === Blockly.INPUT_VALUE;\n\n        container.setAttribute('at1', isAt1);\n        container.setAttribute('at2', isAt2);\n\n        return container;\n    },\n    domToMutation(xmlElement) {\n        const isAt1 = xmlElement.getAttribute('at1') === 'true';\n        const isAt2 = xmlElement.getAttribute('at2') === 'true';\n\n        this.updateAt(1, isAt1);\n        this.updateAt(2, isAt2);\n    },\n    updateAt(n, is_at) {\n        const input = this.getInput(`AT${n}`);\n        let old_label_text;\n\n        // Keep track of initial FieldLabel, we'll restore this when\n        // input types were changed.\n        if (input) {\n            input.fieldRow.some(field => {\n                if (field instanceof Blockly.FieldLabel) {\n                    old_label_text = field.text_; // eslint-disable-line no-underscore-dangle\n                }\n            });\n            this.removeInput(`AT${n}`);\n        }\n\n        const new_input = is_at ? this.appendValueInput(`AT${n}`).setCheck('Number') : this.appendDummyInput(`AT${n}`);\n\n        if (old_label_text) {\n            new_input.insertFieldAt(0, new Blockly.FieldLabel(old_label_text));\n        }\n\n        const menu = new Blockly.FieldDropdown(this[`WHERE_OPTIONS_${n}`], value => {\n            const new_at = ['FROM_START', 'FROM_END'].includes(value);\n\n            if (new_at !== is_at) {\n                this.updateAt(n, new_at);\n                this.setFieldValue(value, `WHERE${n}`);\n\n                return null;\n            }\n\n            return undefined;\n        });\n\n        this.getInput(`AT${n}`).appendField(menu, `WHERE${n}`);\n\n        if (n === 1) {\n            this.moveInputBefore('AT1', 'AT2');\n        }\n\n        this.initSvg();\n        this.render(false);\n    },\n    getRequiredValueInputs() {\n        const hasInput = input_name => this.getInput(input_name)?.type === Blockly.INPUT_VALUE;\n        return {\n            STRING: emptyTextValidator,\n            ...(hasInput('AT1') ? { AT1: emptyTextValidator } : {}),\n            ...(hasInput('AT2') ? { AT2: emptyTextValidator } : {}),\n        };\n    },\n};\n\nBlockly.JavaScript.text_getSubstring = block => {\n    const text = Blockly.JavaScript.valueToCode(block, 'STRING', Blockly.JavaScript.ORDER_FUNCTION_CALL) || \"''\";\n    const where1 = block.getFieldValue('WHERE1');\n    const where2 = block.getFieldValue('WHERE2');\n\n    let at1, at2, code;\n\n    if (where1 === 'FIRST' && where2 === 'LAST') {\n        code = text;\n    } else if (\n        text.match(/^'?\\w+'?$/) ||\n        (where1 !== 'FROM_END' && where1 !== 'LAST' && where2 !== 'FROM_END' && where2 !== 'LAST')\n    ) {\n        switch (where1) {\n            case 'FROM_START': {\n                at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n                break;\n            }\n            case 'FROM_END': {\n                at1 = Blockly.JavaScript.getAdjusted(block, 'AT1', 1, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n                at1 = `${text}.length - ${at1}`;\n                break;\n            }\n            case 'FIRST': {\n                at1 = '0';\n                break;\n            }\n            default:\n                break;\n        }\n\n        switch (where2) {\n            case 'FROM_START': {\n                at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 1);\n                break;\n            }\n            case 'FROM_END': {\n                at2 = Blockly.JavaScript.getAdjusted(block, 'AT2', 0, false, Blockly.JavaScript.ORDER_SUBTRACTION);\n                at2 = `${text}.length - ${at2}`;\n                break;\n            }\n            case 'LAST': {\n                at2 = `${text}.length`;\n                break;\n            }\n            default:\n                break;\n        }\n\n        code = `${text}.slice(${at1}, ${at2})`;\n    } else {\n        at1 = Blockly.JavaScript.getAdjusted(block, 'AT1');\n        at2 = Blockly.JavaScript.getAdjusted(block, 'AT2');\n\n        const getIndex = (string_name, where, opt_at) => {\n            if (where === 'FIRST') {\n                return '0';\n            } else if (where === 'FROM_END') {\n                return `${string_name}.length - 1 - ${opt_at}`;\n            } else if (where === 'LAST') {\n                return `${string_name}.length - 1`;\n            }\n            return opt_at;\n        };\n        const where_pascal_case = {\n            FIRST: 'First',\n            LAST: 'Last',\n            FROM_START: 'FromStart',\n            FROM_END: 'FromEnd',\n        };\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_(\n            `subsequence${where_pascal_case[where1]}${where_pascal_case[where2]}`,\n            [\n                // eslint-disable-next-line no-underscore-dangle\n                `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(\n                    sequence\n                    ${where1 === 'FROM_END' || where1 === 'FROM_START' ? ', at1' : ''}\n                    ${where2 === 'FROM_END' || where2 === 'FROM_START' ? ', at2' : ''}\n                ) {\n                    var start = ${getIndex('sequence', where1, 'at1')};\n                    var end   = ${getIndex('sequence', where2, 'at2')} + 1;\n                    \n                    return sequence.slice(start, end);\n                }`,\n            ]\n        );\n\n        code = `${functionName}(\n            ${text}\n            ${where1 === 'FROM_END' || where1 === 'FROM_START' ? `, ${at1}` : ''}\n            ${where2 === 'FROM_END' || where2 === 'FROM_START' ? `, ${at2}` : ''}\n        )`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_changeCase = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('Transform {{ input_text }} to {{ transform_type }}', {\n                input_text: '%1',\n                transform_type: '%2',\n            }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n                {\n                    type: 'field_dropdown',\n                    name: 'CASE',\n                    options: [\n                        [localize('UPPER CASE'), 'UPPERCASE'],\n                        [localize('lower case'), 'LOWERCASE'],\n                        [localize('Title Case'), 'TITLECASE'],\n                    ],\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Changes text case accordingly'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Change text case'),\n            description: localize(\n                'Changes the capitalisation of a string of text to Upper case, Lower case, Title case.'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_changeCase = block => {\n    const operators = {\n        UPPERCASE: '.toUpperCase()',\n        LOWERCASE: '.toLowerCase()',\n        TITLECASE: null,\n    };\n    const operator = operators[block.getFieldValue('CASE')];\n    const textOrder = operator ? Blockly.JavaScript.ORDER_MEMBER : Blockly.JavaScript.ORDER_NONE;\n    const text = Blockly.JavaScript.valueToCode(block, 'TEXT', textOrder) || \"''\";\n\n    let code;\n\n    if (operator) {\n        code = `${text}${operator}`;\n    } else {\n        // eslint-disable-next-line no-underscore-dangle\n        const functionName = Blockly.JavaScript.provideFunction_('textToTitleCase', [\n            // eslint-disable-next-line no-underscore-dangle\n            `function ${Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_}(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }`,\n        ]);\n        code = `${functionName}(${text})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_trim = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('trim spaces from {{ side }} of {{ input_text }}', { side: '%1', input_text: '%2' }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'MODE',\n                    options: [\n                        [localize('both sides'), 'BOTH'],\n                        [localize('left side'), 'LEFT'],\n                        [localize('right side'), 'RIGHT'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output: 'String',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Base.colour,\n            colourSecondary: Blockly.Colours.Base.colourSecondary,\n            colourTertiary: Blockly.Colours.Base.colourTertiary,\n            tooltip: localize('Trims spaces'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Trim spaces'),\n            description: localize('Trims the spaces within a given string or text.'),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_trim = block => {\n    const operators = {\n        LEFT: \".replace(/^[\\\\s\\\\xa0]+/, '')\",\n        RIGHT: \".replace(/[\\\\s\\\\xa0]+$/, '')\",\n        BOTH: '.trim()',\n    };\n\n    const operator = operators[block.getFieldValue('MODE')];\n    const text = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_MEMBER) || \"''\";\n\n    const code = `${text}${operator}`;\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_print = {\n    init() {\n        this.jsonInit(this.definition());\n    },\n    definition() {\n        return {\n            message0: localize('print {{ input_text }}', { input_text: '%1' }),\n            args0: [\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            previousStatement: null,\n            nextStatement: null,\n            tooltip: localize('Displays a dialog window with a message'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Print'),\n            description: localize(\n                'This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click \"OK\".'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_print = block => {\n    const msg = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    const code = `window.alert(${msg});\\n`;\n    return code;\n};\n","import { localize } from '@deriv/translations';\nimport { emptyTextValidator } from '../../utils';\n\nBlockly.Blocks.text_prompt_ext = {\n    init() {\n        this.jsonInit(this.definition());\n        const typeField = this.getField('TYPE');\n        typeField.setValidator(value => {\n            if (value === 'TEXT') {\n                this.setOutput(true, 'String');\n            } else if (value === 'NUMBER') {\n                this.setOutput(true, 'Number');\n            }\n            this.initSvg();\n            this.render(false);\n            return undefined;\n        });\n    },\n    definition() {\n        return {\n            message0: localize('prompt for {{ string_or_number }} with message {{ input_text }}', {\n                string_or_number: '%1',\n                input_text: '%2',\n            }),\n            args0: [\n                {\n                    type: 'field_dropdown',\n                    name: 'TYPE',\n                    options: [\n                        [localize('string'), 'TEXT'],\n                        [localize('number'), 'NUMBER'],\n                    ],\n                },\n                {\n                    type: 'input_value',\n                    name: 'TEXT',\n                },\n            ],\n            output:\n                typeof this.getFieldValue === 'function' && this.getFieldValue('TYPE') === 'TEXT' ? 'String' : 'Number',\n            outputShape: Blockly.OUTPUT_SHAPE_ROUND,\n            colour: Blockly.Colours.Special3.colour,\n            colourSecondary: Blockly.Colours.Special3.colourSecondary,\n            colourTertiary: Blockly.Colours.Special3.colourTertiary,\n            tooltip: localize('Request an input'),\n            category: Blockly.Categories.Text,\n        };\n    },\n    meta() {\n        return {\n            display_name: localize('Request an input'),\n            description: localize(\n                'This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click \"OK\".'\n            ),\n        };\n    },\n    getRequiredValueInputs() {\n        return {\n            TEXT: emptyTextValidator,\n        };\n    },\n};\n\nBlockly.JavaScript.text_prompt_ext = block => {\n    let msg, code;\n\n    if (block.getField('TEXT')) {\n        // Internal message\n        // eslint-disable-next-line no-underscore-dangle\n        msg = Blockly.JavaScript.quote_(block.getFieldValue('TEXT'));\n    } else {\n        // External message\n        msg = Blockly.JavaScript.valueToCode(block, 'TEXT', Blockly.JavaScript.ORDER_NONE) || \"''\";\n    }\n\n    if (block.getFieldValue('TYPE') === 'NUMBER') {\n        code = `parseFloat(window.prompt(${msg}))`;\n    } else {\n        code = `window.prompt(${msg})`;\n    }\n\n    return [code, Blockly.JavaScript.ORDER_FUNCTION_CALL];\n};\n","import { reaction } from 'mobx';\nimport { api_base } from '../services/api/api-base';\n\nclass DBotStoreInterface {\n    // TODO here we are suppose to define an interface and implement fields of DBotStore.\n    handleFileChange = () => {\n        throw Error('handleFileChange has not been implemented.');\n    };\n\n    toggleStrategyModal = () => {\n        throw Error('handleFileChange has not been implemented.');\n    };\n}\n\nclass DBotStore extends DBotStoreInterface {\n    static singleton = null;\n\n    constructor(store) {\n        super();\n        this.is_mobile = store.is_mobile || false;\n        this.is_dark_mode_on = store.is_dark_mode_on || false;\n        this.client = store.client;\n        this.dashboard = store.dashboard;\n        this.flyout = store.flyout;\n        this.toolbar = store.toolbar;\n        this.toolbox = store.toolbox;\n        this.save_modal = store.save_modal;\n        this.load_modal = store.load_modal;\n        this.setContractUpdateConfig = store.setContractUpdateConfig;\n        this.toggleStrategyModal = store.toggleStrategyModal;\n        this.handleFileChange = store.handleFileChange;\n        this.setLoading = store.setLoading;\n\n        reaction(\n            () => this.client.loginid,\n            () => api_base.createNewInstance(this.client.loginid)\n        );\n    }\n\n    static setInstance(store) {\n        this.singleton = new DBotStore(store);\n        return this.instance;\n    }\n\n    static get instance() {\n        return this.singleton;\n    }\n}\n\nexport default DBotStore;\n","import { Map } from 'immutable';\nimport { historyToTicks, getLast } from 'binary-utils';\nimport { doUntilDone, getUUID } from '../tradeEngine/utils/helpers';\nimport { observer as globalObserver } from '../../utils/observer';\nimport { api_base } from './api-base';\n\nconst parseTick = tick => ({\n    epoch: +tick.epoch,\n    quote: +tick.quote,\n});\n\nconst parseOhlc = ohlc => ({\n    open: +ohlc.open,\n    high: +ohlc.high,\n    low: +ohlc.low,\n    close: +ohlc.close,\n    epoch: +(ohlc.open_time || ohlc.epoch),\n});\n\nconst parseCandles = candles => candles.map(t => parseOhlc(t));\n\nconst updateTicks = (ticks, newTick) => (getLast(ticks).epoch >= newTick.epoch ? ticks : [...ticks.slice(1), newTick]);\n\nconst updateCandles = (candles, ohlc) => {\n    const lastCandle = getLast(candles);\n    if (\n        (lastCandle.open === ohlc.open &&\n            lastCandle.high === ohlc.high &&\n            lastCandle.low === ohlc.low &&\n            lastCandle.close === ohlc.close &&\n            lastCandle.epoch === ohlc.epoch) ||\n        lastCandle.epoch > ohlc.epoch\n    ) {\n        return candles;\n    }\n    const prevCandles = lastCandle.epoch === ohlc.epoch ? candles.slice(0, -1) : candles.slice(1);\n    return [...prevCandles, ohlc];\n};\n\nconst getType = isCandle => (isCandle ? 'candles' : 'ticks');\n\nexport default class TicksService {\n    constructor() {\n        this.ticks = new Map();\n        this.candles = new Map();\n        this.tickListeners = new Map();\n        this.ohlcListeners = new Map();\n        this.subscriptions = new Map();\n        this.ticks_history_promise = null;\n        this.active_symbols_promise = null;\n        this.candles_promise = null;\n\n        this.observe();\n    }\n\n    requestPipSizes() {\n        if (this.pipSizes) {\n            return Promise.resolve(this.pipSizes);\n        }\n\n        if (!this.active_symbols_promise) {\n            this.active_symbols_promise = new Promise(resolve => {\n                this.pipSizes = api_base.pip_sizes;\n                resolve(this.pipSizes);\n            });\n        }\n        return this.active_symbols_promise;\n    }\n\n    async request(options) {\n        return new Promise((resolve, reject) => {\n            const { symbol, granularity } = options;\n\n            const style = getType(granularity);\n\n            if (style === 'ticks' && this.ticks.has(symbol)) {\n                resolve(this.ticks.get(symbol));\n            }\n\n            if (style === 'candles' && this.candles.hasIn([symbol, Number(granularity)])) {\n                resolve(this.candles.getIn([symbol, Number(granularity)]));\n            }\n            this.requestStream({ ...options, style })\n                .then(res => {\n                    resolve(res);\n                })\n                .catch(e => {\n                    reject(e);\n                });\n        });\n    }\n\n    monitor(options) {\n        return new Promise((resolve, reject) => {\n            const { symbol, granularity, callback } = options;\n\n            const type = getType(granularity);\n\n            const key = getUUID();\n            this.request(options)\n                .then(() => {\n                    if (type === 'ticks') {\n                        this.tickListeners = this.tickListeners.setIn([symbol, key], callback);\n                        globalObserver.emit('bot.bot_ready');\n                        api_base.toggleRunButton(false);\n                    } else {\n                        this.ohlcListeners = this.ohlcListeners.setIn([symbol, Number(granularity), key], callback);\n                    }\n                    resolve(key);\n                })\n                .catch(e => {\n                    globalObserver.emit('Error', e);\n                    this.ticks_history_promise = null;\n                    api_base.toggleRunButton(false);\n                    reject(e);\n                });\n        });\n    }\n\n    async stopMonitor(options) {\n        const { symbol, granularity, key } = options;\n        const type = getType(granularity);\n\n        if (type === 'ticks' && this.tickListeners.hasIn([symbol, key])) {\n            this.tickListeners = this.tickListeners.deleteIn([symbol, key]);\n        }\n\n        if (type === 'candles' && this.ohlcListeners.hasIn([symbol, Number(granularity), key])) {\n            this.ohlcListeners = this.ohlcListeners.deleteIn([symbol, Number(granularity), key]);\n        }\n\n        await this.unsubscribeIfEmptyListeners(options);\n    }\n\n    async unsubscribeIfEmptyListeners(options) {\n        const { symbol, granularity } = options;\n\n        let needToUnsubscribe = false;\n\n        const tickListener = this.tickListeners.get(symbol);\n\n        if (tickListener && !tickListener.size) {\n            this.tickListeners = this.tickListeners.delete(symbol);\n            this.ticks = this.ticks.delete(symbol);\n            needToUnsubscribe = true;\n        }\n\n        const ohlcListener = this.ohlcListeners.getIn([symbol, Number(granularity)]);\n\n        if (ohlcListener && !ohlcListener.size) {\n            this.ohlcListeners = this.ohlcListeners.deleteIn([symbol, Number(granularity)]);\n            this.candles = this.candles.deleteIn([symbol, Number(granularity)]);\n            needToUnsubscribe = true;\n        }\n\n        if (needToUnsubscribe) {\n            await this.unsubscribeAllAndSubscribeListeners(symbol);\n        }\n    }\n\n    unsubscribeAllAndSubscribeListeners(symbol) {\n        const ohlcSubscriptions = this.subscriptions.getIn(['ohlc', symbol]);\n\n        const subscription = [...(ohlcSubscriptions ? Array.from(ohlcSubscriptions.values()) : [])];\n\n        Promise.all(subscription.map(id => doUntilDone(() => api_base.api.forget(id))));\n\n        this.subscriptions = new Map();\n    }\n\n    updateTicksAndCallListeners(symbol, ticks) {\n        if (this.ticks.get(symbol) === ticks) {\n            return;\n        }\n        this.ticks = this.ticks.set(symbol, ticks);\n\n        const listeners = this.tickListeners.get(symbol);\n\n        if (listeners) {\n            listeners.forEach(callback => callback(this.ticks.get(symbol)));\n        }\n    }\n\n    updateCandlesAndCallListeners(address, candles) {\n        if (this.ticks.getIn(address) === candles) {\n            return;\n        }\n        this.candles = this.candles.setIn(address, candles);\n\n        const listeners = this.ohlcListeners.getIn(address);\n\n        if (listeners) {\n            listeners.forEach(callback => callback(this.candles.getIn(address)));\n        }\n    }\n\n    observe() {\n        if (api_base.api) {\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'tick') {\n                    const { tick } = data;\n                    const { symbol, id } = tick;\n                    if (this.ticks.has(symbol)) {\n                        this.subscriptions = this.subscriptions.setIn(['tick', symbol], id);\n                        this.updateTicksAndCallListeners(symbol, updateTicks(this.ticks.get(symbol), parseTick(tick)));\n                    }\n                }\n\n                if (data.msg_type === 'ohlc') {\n                    const { ohlc } = data;\n                    const { symbol, granularity, id } = ohlc;\n                    if (this.candles.hasIn([symbol, Number(granularity)])) {\n                        this.subscriptions = this.subscriptions.setIn(['ohlc', symbol, Number(granularity)], id);\n                        const address = [symbol, Number(granularity)];\n                        this.updateCandlesAndCallListeners(\n                            address,\n                            updateCandles(this.candles.getIn(address), parseOhlc(ohlc))\n                        );\n                    }\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n    }\n\n    requestStream(options) {\n        const { style } = options;\n        const stringified_options = JSON.stringify(options);\n\n        if (style === 'ticks') {\n            if (this.ticks_history_promise?.stringified_options !== stringified_options) {\n                this.ticks_history_promise = {\n                    promise: this.requestPipSizes().then(() => this.requestTicks(options)),\n                    stringified_options,\n                };\n            }\n\n            return this.ticks_history_promise.promise;\n        }\n\n        if (style === 'candles') {\n            if (!this.candles_promise || this.candles_promise.stringified_options !== stringified_options) {\n                this.candles_promise = {\n                    promise: this.requestPipSizes().then(() => this.requestTicks(options)),\n                    stringified_options,\n                };\n            }\n\n            return this.candles_promise.promise;\n        }\n\n        return [];\n    }\n\n    requestTicks(options) {\n        const { symbol, granularity, style } = options;\n        const request_object = {\n            ticks_history: symbol,\n            subscribe: 1,\n            end: 'latest',\n            count: 1000,\n            granularity: granularity ? Number(granularity) : undefined,\n            style,\n        };\n        return new Promise((resolve, reject) => {\n            if (!api_base.api) resolve([]);\n            doUntilDone(() => api_base.api.send(request_object), [], api_base)\n                .then(r => {\n                    if (style === 'ticks') {\n                        const ticks = historyToTicks(r.history);\n\n                        this.updateTicksAndCallListeners(symbol, ticks);\n                        resolve(ticks);\n                    } else {\n                        const candles = parseCandles(r.candles);\n\n                        this.updateCandlesAndCallListeners([symbol, Number(granularity)], candles);\n\n                        resolve(candles);\n                    }\n                })\n                .catch(reject);\n        });\n    }\n\n    forget = subscription_id => {\n        return new Promise((resolve, reject) => {\n            if (subscription_id) {\n                api_base.api\n                    .forget(subscription_id)\n                    .then(() => {\n                        resolve();\n                    })\n                    .catch(reject);\n            } else {\n                resolve();\n            }\n        });\n    };\n\n    unsubscribeFromTicksService() {\n        return new Promise((resolve, reject) => {\n            if (this.ticks_history_promise) {\n                const { stringified_options } = this.ticks_history_promise;\n                const { symbol = '' } = JSON.parse(stringified_options);\n                if (symbol) {\n                    this.forget(this.subscriptions.getIn(['tick', symbol]))\n                        .then(res => {\n                            resolve(res);\n                        })\n                        .catch(reject);\n                } else {\n                    resolve();\n                }\n            }\n            this.ticks_history_promise = null;\n            if (this.candles_promise) {\n                const { stringified_options } = this.candles_promise;\n                const { symbol = '' } = JSON.parse(stringified_options);\n                if (symbol) {\n                    this.forget(this.subscriptions.getIn(['candle', symbol]))\n                        .then(res => {\n                            resolve(res);\n                        })\n                        .catch(reject);\n                } else {\n                    resolve();\n                }\n            }\n\n            if (!this.ticks_history_promise && !this.candles_promise) {\n                resolve();\n            }\n        });\n    }\n}\n","import TicksService from '../../api/ticks_service';\nimport Observer from '../../../utils/observer';\n\nexport const createScope = () => {\n    const observer = new Observer();\n    const ticksService = new TicksService();\n    const stopped = false;\n    return { observer, ticksService, stopped };\n};\n","import { localize } from '@deriv/translations';\nimport { createError } from '../../../utils/error';\n\nconst isPositiveNumber = num => Number.isFinite(num) && num > 0;\n\nconst isPositiveInteger = num => isPositiveNumber(num) && Number.isInteger(num);\n\nexport const expectPositiveInteger = (num, msg) => {\n    if (!isPositiveInteger(num)) {\n        throw createError('PositiveIntegerExpected', msg);\n    }\n    return num;\n};\n\nconst expectOptions = options => {\n    const { symbol, contractTypes } = options;\n\n    if (!symbol) {\n        throw createError('OptionError', localize('Underlying market is not selected'));\n    }\n\n    if (!contractTypes[0]) {\n        throw createError('OptionError', localize('Contract type is not selected'));\n    }\n};\n\nexport const expectInitArg = args => {\n    const [token, options] = args;\n\n    if (!token) {\n        throw createError('LoginError', localize('Please login'));\n    }\n\n    expectOptions(options);\n\n    return args;\n};\n\nconst isCandle = candle =>\n    candle instanceof Object &&\n    ['open', 'high', 'low', 'close'].every(key => isPositiveNumber(candle[key])) &&\n    isPositiveInteger(candle.epoch);\n\nexport const expectCandle = candle => {\n    if (!isCandle(candle)) {\n        throw createError('CandleExpected', localize('Given candle is not valid'));\n    }\n    return candle;\n};\n\nexport const expectCandles = candles => {\n    if (!(candles instanceof Array) || !candles.every(c => isCandle(c))) {\n        throw createError('CandleListExpected', localize('Given candle list is not valid'));\n    }\n    return candles;\n};\n","export const takeField = (arr, field) => arr.map(x => (field ? x[field] : x));\n\nexport const takeLast = (arr, n, field) => takeField(arr.slice(n > arr.length ? 0 : arr.length - n, arr.length), field);\n\nexport const sum = data => data.reduce((acc, x) => acc + x, 0);\n\nexport const mean = data => data.reduce((a, b) => a + b, 0) / data.length;\n\nexport const stddev = data => {\n    const data_mean = mean(data);\n    const sq_diff = data.map(n => Math.pow(n - data_mean, 2));\n    const avg_sq_diff = mean(sq_diff);\n    return Math.sqrt(avg_sq_diff);\n};\n","import { sequence } from '@deriv/shared';\nimport { sum, takeLast } from '../utils/math';\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const simpleMovingAverage = (data, config) => {\n    const { periods, field } = config;\n\n    if (data.length < periods) {\n        throw new Error('Periods longer than data length');\n    }\n\n    const vals = takeLast(data, periods, field);\n\n    return sum(vals) / periods;\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const simpleMovingAverageArray = (data, config) => {\n    const { periods, pipSize = 2 } = config;\n    return sequence(data.length - periods + 1).map(\n        (x, i) => +simpleMovingAverage(data.slice(i, i + periods), config).toFixed(pipSize)\n    );\n};\n","import { sequence } from '@deriv/shared';\nimport { simpleMovingAverage } from './simple-moving-average';\nimport { stddev, takeLast } from '../utils/math';\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  type: 'SMA' | 'WMA' | 'EMA' | 'TEMA' | 'TRIMA',\n *  stdDevUp: number,\n *  stdDevDown: number,\n *  pipSize: number,\n * }\n */\nexport const bollingerBands = (data, config) => {\n    const { periods = 20, field, stdDevUp = 2, stdDevDown = 2, pipSize = 2 } = config;\n    const vals = takeLast(data, periods, field);\n    const middle = simpleMovingAverage(vals, { periods });\n    const std_dev = stddev(vals);\n    const upper = middle + std_dev * stdDevUp;\n    const lower = middle - std_dev * stdDevDown;\n\n    return [+middle.toFixed(pipSize), +upper.toFixed(pipSize), +lower.toFixed(pipSize)];\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  type: 'SMA' | 'WMA' | 'EMA' | 'TEMA' | 'TRIMA',\n *  stdDevUp: number,\n *  stdDevDown: number,\n *  pipSize: number,\n * }\n */\nexport const bollingerBandsArray = (data, config) => {\n    const { periods } = config;\n    return sequence(data.length - periods + 1).map((x, i) => bollingerBands(data.slice(i, i + periods), config));\n};\n","import { takeField, mean } from '../utils/math';\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n * @param {Number} init_val\n */\nexport const exponentialMovingAverage = (data, config, init_val) => {\n    const { periods, field, pipSize = 2 } = config;\n\n    const weighting_multiplier = 2 / (periods + 1);\n\n    const vals = takeField(data, field);\n\n    if (init_val) {\n        return (vals[0] - init_val) * weighting_multiplier + init_val;\n    }\n\n    if (data.length < periods) {\n        throw new Error('Periods longer than data length');\n    }\n\n    const mean_val = mean(takeField(data.slice(0, periods), field));\n\n    return +vals\n        .slice(periods)\n        .reduce((prev, e) => (e - prev) * weighting_multiplier + prev, mean_val)\n        .toFixed(pipSize);\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const exponentialMovingAverageArray = (data, config) => {\n    const { periods } = config;\n\n    let init_val = exponentialMovingAverage(data.slice(0, periods), config);\n\n    return data\n        .slice(periods - 1)\n        .map((x, i) => (!i ? init_val : (init_val = exponentialMovingAverage([x], config, init_val))));\n};\n","import { exponentialMovingAverageArray } from './exponential-moving-average';\nimport { takeField } from '../utils/math';\n\nconst paddingLeft = (data, length) => {\n    const arr = [];\n    arr.length = length - data.length;\n    arr.fill(0);\n    return [...arr, ...data];\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  fastEmaPeriod: number,\n *  slowEmaPeriod: number,\n *  signalEmaPeriod: number\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const macdArray = (data, config) => {\n    const { field, fastEmaPeriod = 12, slowEmaPeriod = 26, signalEmaPeriod = 9, pipSize = 2 } = config;\n\n    const vals = takeField(data, field);\n\n    const length = vals.length;\n\n    const fast_ema_array = paddingLeft(\n        exponentialMovingAverageArray(\n            vals,\n            { periods: fastEmaPeriod, pipSize: 20, field }\n            // -------------------------- ^ set pipSize to 20 to prevent rounding\n        ),\n        length\n    );\n    const slow_ema_array = paddingLeft(\n        exponentialMovingAverageArray(vals, { periods: slowEmaPeriod, pipSize: 20, field }),\n        length\n    );\n\n    const macd_calc_array = paddingLeft(\n        slow_ema_array.map((x, i) => +(fast_ema_array[i] - x).toFixed(pipSize)),\n        length\n    );\n\n    const signal_ema_array = paddingLeft(\n        exponentialMovingAverageArray(macd_calc_array.slice(slowEmaPeriod - 1), {\n            periods: signalEmaPeriod,\n            pipSize: 20,\n            field,\n        }),\n        length\n    );\n\n    return macd_calc_array\n        .map((x, i) => [+(x - signal_ema_array[i]).toFixed(pipSize), x, +signal_ema_array[i].toFixed(pipSize)])\n        .slice(slowEmaPeriod + signalEmaPeriod - 2);\n};\n","import { sequence } from '@deriv/shared';\nimport { takeField } from '../utils/math';\n\nconst calcGain = (q1, q2) => (q2 > q1 ? q2 - q1 : 0);\nconst calcLoss = (q1, q2) => (q2 < q1 ? q1 - q2 : 0);\n\nconst calcFirstAvgDiff = (vals, comp, periods) => {\n    let prev;\n    return (\n        vals.reduce((r, q, i) => {\n            if (i === 1) {\n                prev = r;\n            }\n            const diff = comp(prev, q);\n            prev = q;\n            return diff + (i === 1 ? 0 : r);\n        }) / periods\n    );\n};\n\nconst calcSecondAvgDiff = (vals, comp, periods, init_avg) => {\n    let prev;\n    if (vals.length === 1) {\n        // There is no data to calc avg\n        return init_avg;\n    }\n    return vals.reduce((r, q, i) => {\n        if (i === 1) {\n            prev = r;\n        }\n        const diff = comp(prev, q);\n        prev = q;\n        const prev_avg = i === 1 ? init_avg : r;\n        return (prev_avg * (periods - 1) + diff) / periods;\n    });\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n * @param {any} memoized_diff\n */\nexport const relativeStrengthIndex = (data, config, memoized_diff) => {\n    const { periods, field } = config;\n\n    if (data.length < periods) {\n        throw new Error('Periods longer than data length');\n    }\n\n    if (data.length === periods) {\n        return 0;\n    }\n\n    const vals = takeField(data.slice(0, periods + 1), field);\n\n    let rest_seq, init_avg_gain, init_avg_loss;\n\n    if (memoized_diff && 'gain' in memoized_diff) {\n        rest_seq = takeField(data.slice(-2), field);\n\n        init_avg_gain = memoized_diff.gain;\n        init_avg_loss = memoized_diff.loss;\n    } else {\n        // include last element from above to calc diff\n        rest_seq = takeField(data.slice(periods, data.length), field);\n\n        init_avg_gain = calcFirstAvgDiff(vals, calcGain, periods);\n        init_avg_loss = calcFirstAvgDiff(vals, calcLoss, periods);\n    }\n\n    const avg_gain = calcSecondAvgDiff(rest_seq, calcGain, periods, init_avg_gain);\n    const avg_loss = calcSecondAvgDiff(rest_seq, calcLoss, periods, init_avg_loss);\n\n    if (memoized_diff) {\n        memoized_diff.gain = avg_gain;\n        memoized_diff.loss = avg_loss;\n    }\n\n    if (avg_gain === 0) {\n        return 0;\n    } else if (avg_loss === 0) {\n        return 100;\n    }\n\n    const RS = avg_gain / avg_loss;\n\n    return 100 - 100 / (1 + RS);\n};\n\n/**\n * @param {Array} data\n * @param {Object} config of type\n * {\n *  periods: number,\n *  field?: 'open' | 'high' | 'low' | 'close',\n *  pipSize: number,\n * }\n */\nexport const relativeStrengthIndexArray = (data, config) => {\n    const { periods, pipSize = 2 } = config;\n    const memoized_diff = {};\n    return sequence(data.length - periods).map(\n        (x, i) => +relativeStrengthIndex(data.slice(0, i + periods + 1), config, memoized_diff).toFixed(pipSize)\n    );\n};\n","import {\n    simpleMovingAverage as sma,\n    simpleMovingAverageArray as smaa,\n    bollingerBands as bb,\n    bollingerBandsArray as bba,\n    exponentialMovingAverage as ema,\n    exponentialMovingAverageArray as emaa,\n    relativeStrengthIndex as rsi,\n    relativeStrengthIndexArray as rsia,\n    macdArray as macda,\n} from '@deriv/indicators';\n\nconst decorate = (f, input, tradeEngine, config, ...args) => {\n    const pipSize = tradeEngine.getPipSize();\n    return f(input, { pipSize, ...config }, ...args);\n};\n\nconst getIndicatorsInterface = tradeEngine => {\n    return {\n        sma: (input, periods) => decorate(sma, input, tradeEngine, { periods }),\n        smaa: (input, periods) => decorate(smaa, input, tradeEngine, { periods }),\n        ema: (input, periods) => decorate(ema, input, tradeEngine, { periods }),\n        emaa: (input, periods) => decorate(emaa, input, tradeEngine, { periods }),\n        rsi: (input, periods) => decorate(rsi, input, tradeEngine, { periods }),\n        rsia: (input, periods) => decorate(rsia, input, tradeEngine, { periods }),\n        bb: (input, config, field) => decorate(bb, input, tradeEngine, config)[field],\n        bba: (input, config, field) => decorate(bba, input, tradeEngine, config).map(r => r[field]),\n        macda: (input, config, field) => decorate(macda, input, tradeEngine, config).map(r => r[field]),\n    };\n};\n\nexport default getIndicatorsInterface;\n","import { localize } from '@deriv/translations';\nimport getCandleInterface from './CandleInterface';\nimport getIndicatorsInterface from './IndicatorsInterface';\nimport getMiscInterface from './MiscInterface';\n\nconst getToolsInterface = tradeEngine => {\n    return {\n        dateTimeStringToTimestamp: datetime_string => {\n            const invalid_msg = localize('Invalid date/time: {{ datetime_string }}', { datetime_string });\n\n            if (typeof datetime_string !== 'string') {\n                return invalid_msg;\n            }\n\n            const date_time = datetime_string\n                .replace(/[^0-9.:-\\s]/g, '')\n                .replace(/\\s+/g, ' ')\n                .trim()\n                .split(' ');\n\n            const d = /^[12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\n            const t = /^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9])?)?$/;\n\n            let validated_datetime;\n\n            if (date_time.length >= 2) {\n                validated_datetime =\n                    d.test(date_time[0]) && t.test(date_time[1]) ? `${date_time[0]}T${date_time[1]}` : null;\n            } else if (date_time.length === 1) {\n                validated_datetime = d.test(date_time[0]) ? date_time[0] : null;\n            } else {\n                validated_datetime = null;\n            }\n\n            if (validated_datetime) {\n                const date_obj = new Date(validated_datetime);\n                // eslint-disable-next-line no-restricted-globals\n                if (date_obj instanceof Date && !isNaN(date_obj)) {\n                    return date_obj.getTime() / 1000;\n                }\n            }\n\n            return invalid_msg;\n        },\n        getTime: () => parseInt(new Date().getTime() / 1000),\n        ...getCandleInterface(),\n        ...getMiscInterface(tradeEngine),\n        ...getIndicatorsInterface(tradeEngine),\n\n        // Highlight the block that is being executed\n        highlightBlock: block_id => {\n            const block = Blockly.derivWorkspace.getBlockById(block_id);\n\n            if (block) {\n                block.highlightExecutedBlock(block);\n            }\n        },\n    };\n};\n\nexport default getToolsInterface;\n","import { expectCandle, expectCandles } from '../utils/sanitize';\n\nconst getCandleInterface = () => {\n    return {\n        isCandleBlack: candle => expectCandle(candle) && candle.close < candle.open,\n        candleValues: (ohlc, field) => expectCandles(ohlc).map(o => o[field]),\n        candleField: (candle, field) => expectCandle(candle)[field],\n    };\n};\n\nexport default getCandleInterface;\n","import { localize } from '@deriv/translations';\nimport { notify } from '../utils/broadcast';\nimport { observer as globalObserver } from '../../../utils/observer';\n\nconst getMiscInterface = tradeEngine => {\n    return {\n        notify: args => globalObserver.emit('ui.log.notify', args),\n        console: ({ type, message }) => console[type](message), // eslint-disable-line no-console\n        notifyTelegram: (access_token, chat_id, text) => {\n            const url = `https://api.telegram.org/bot${access_token}/sendMessage`;\n            const onError = () => notify('warn', localize('The Telegram notification could not be sent'));\n\n            fetch(url, {\n                method: 'POST',\n                mode: 'cors',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ chat_id, text }),\n            })\n                .then(response => {\n                    if (!response.ok) {\n                        onError();\n                    }\n                })\n                .catch(onError);\n        },\n        getTotalRuns: () => tradeEngine.getTotalRuns(),\n        getBalance: type => tradeEngine.getBalance(type),\n        getTotalProfit: toString => tradeEngine.getTotalProfit(toString, tradeEngine.tradeOptions.currency),\n    };\n};\n\nexport default getMiscInterface;\n","const getTicksInterface = tradeEngine => {\n    return {\n        getLastTick: (...args) => tradeEngine.getLastTick(...args),\n        getLastDigit: (...args) => tradeEngine.getLastDigit(...args),\n        getTicks: (...args) => tradeEngine.getTicks(...args),\n        checkDirection: (...args) => tradeEngine.checkDirection(...args),\n        getOhlcFromEnd: (...args) => tradeEngine.getOhlcFromEnd(...args),\n        getOhlc: (...args) => tradeEngine.getOhlc(...args),\n        getLastDigitList: (...args) => tradeEngine.getLastDigitList(...args),\n    };\n};\n\nexport default getTicksInterface;\n","import { observer as globalObserver } from '../../../utils/observer';\nimport { createDetails } from '../utils/helpers';\n\nconst getBotInterface = tradeEngine => {\n    const getDetail = i => createDetails(tradeEngine.data.contract)[i];\n\n    return {\n        init: (...args) => tradeEngine.init(...args),\n        start: (...args) => tradeEngine.start(...args),\n        stop: (...args) => tradeEngine.stop(...args),\n        purchase: contract_type => tradeEngine.purchase(contract_type),\n        getAskPrice: contract_type => Number(getProposal(contract_type, tradeEngine).ask_price),\n        getPayout: contract_type => Number(getProposal(contract_type, tradeEngine).payout),\n        getPurchaseReference: () => tradeEngine.getPurchaseReference(),\n        isSellAvailable: () => tradeEngine.isSellAtMarketAvailable(),\n        sellAtMarket: () => tradeEngine.sellAtMarket(),\n        getSellPrice: () => getSellPrice(tradeEngine),\n        isResult: result => getDetail(10) === result,\n        isTradeAgain: result => globalObserver.emit('bot.trade_again', result),\n        readDetails: i => getDetail(i - 1),\n    };\n};\n\nconst getProposal = (contract_type, tradeEngine) => {\n    return tradeEngine.data.proposals.find(\n        proposal =>\n            proposal.contract_type === contract_type &&\n            proposal.purchase_reference === tradeEngine.getPurchaseReference()\n    );\n};\n\nconst getSellPrice = tradeEngine => {\n    return tradeEngine.getSellPrice();\n};\n\nexport default getBotInterface;\n","import { getFormattedText } from '@deriv/shared';\nimport { info } from '../utils/broadcast';\nimport DBotStore from '../../../scratch/dbot-store';\nimport { api_base } from '../../api/api-base';\n\nlet balance_string = '';\n\nexport default Engine =>\n    class Balance extends Engine {\n        observeBalance() {\n            if (!api_base.api) return;\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'balance') {\n                    const {\n                        balance: { balance: b, currency },\n                    } = data;\n\n                    balance_string = getFormattedText(b, currency);\n\n                    if (this.accountInfo) info({ accountID: this.accountInfo.loginid, balance: balance_string });\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n\n        // eslint-disable-next-line class-methods-use-this\n        getBalance(type) {\n            const { client } = DBotStore.instance;\n            const balance = (client && client.balance) || 0;\n\n            balance_string = getFormattedText(balance, client.currency, false);\n            return type === 'STR' ? balance_string : balance;\n        }\n    };\n","export const BEFORE_PURCHASE = 'BEFORE_PURCHASE';\nexport const DURING_PURCHASE = 'DURING_PURCHASE';\nexport const PROPOSALS_READY = 'PROPOSALS_READY';\nexport const CLEAR_PROPOSALS = 'CLEAR_PROPOSALS';\nexport const PURCHASE_SUCCESSFUL = 'PURCHASE_SUCCESSFUL';\nexport const OPEN_CONTRACT = 'OPEN_CONTRACT';\nexport const INVALID_ACTION = 'INVALID_ACTION';\nexport const SELL = 'SELL';\nexport const START = 'START';\nexport const STOP = 'STOP';\nexport const NEW_TICK = 'NEW_TICK';\n","import * as constants from '../constants';\n\nconst dispatchIfScopeIs = ({ dispatch, getState, data, scope }) => {\n    const { scope: currentScope } = getState();\n    if (currentScope === scope) {\n        dispatch(data);\n    }\n};\n\nconst dispatchIfScopeIsBeforePurchase = args => dispatchIfScopeIs({ ...args, scope: constants.BEFORE_PURCHASE });\n\nexport const start = () => (dispatch, getState) =>\n    dispatchIfScopeIs({ dispatch, getState, data: { type: constants.START }, scope: constants.STOP });\n\nexport const proposalsReady = () => ({ type: constants.PROPOSALS_READY });\n\nexport const clearProposals = () => ({ type: constants.CLEAR_PROPOSALS });\n\nconst dispatchIfBeforePurchaseReady = args => {\n    const { getState } = args;\n    const { proposalsReady: beforePurchaseReady } = getState();\n    if (beforePurchaseReady) {\n        dispatchIfScopeIsBeforePurchase(args);\n    }\n};\nexport const purchaseSuccessful = () => (dispatch, getState) =>\n    dispatchIfBeforePurchaseReady({ dispatch, getState, data: { type: constants.PURCHASE_SUCCESSFUL } });\n\nexport const openContractReceived = () => (dispatch, getState) => {\n    const { scope: currentScope } = getState();\n    if (currentScope === constants.DURING_PURCHASE) {\n        dispatch({ type: constants.OPEN_CONTRACT });\n    }\n    dispatchIfBeforePurchaseReady({ dispatch, getState, data: { type: constants.OPEN_CONTRACT } });\n};\n\nexport const sell = () => (dispatch, getState) =>\n    dispatchIfScopeIs({ dispatch, getState, data: { type: constants.SELL }, scope: constants.DURING_PURCHASE });\n","import { purchaseSuccessful } from './state/actions';\nimport { BEFORE_PURCHASE } from './state/constants';\nimport { contractStatus, info, log } from '../utils/broadcast';\nimport { getUUID, recoverFromError, doUntilDone } from '../utils/helpers';\nimport { log_types } from '../../../constants/messages';\nimport { api_base } from '../../api/api-base';\n\nlet delayIndex = 0;\nlet purchase_reference;\n\nexport default Engine =>\n    class Purchase extends Engine {\n        purchase(contract_type) {\n            // Prevent calling purchase twice\n            if (this.store.getState().scope !== BEFORE_PURCHASE) {\n                return Promise.resolve();\n            }\n\n            const { id, askPrice } = this.selectProposal(contract_type);\n\n            const onSuccess = response => {\n                // Don't unnecessarily send a forget request for a purchased contract.\n                this.data.proposals = this.data.proposals.filter(p => p.id !== response.echo_req.buy);\n                const { buy } = response;\n\n                contractStatus({\n                    id: 'contract.purchase_received',\n                    data: buy.transaction_id,\n                    buy,\n                });\n\n                this.contractId = buy.contract_id;\n                this.store.dispatch(purchaseSuccessful());\n                this.renewProposalsOnPurchase();\n                delayIndex = 0;\n                log(log_types.PURCHASE, { longcode: buy.longcode, transaction_id: buy.transaction_id });\n                info({\n                    accountID: this.accountInfo.loginid,\n                    totalRuns: this.updateAndReturnTotalRuns(),\n                    transaction_ids: { buy: buy.transaction_id },\n                    contract_type,\n                    buy_price: buy.buy_price,\n                });\n            };\n            const action = () => api_base.api.send({ buy: id, price: askPrice });\n            this.isSold = false;\n            contractStatus({\n                id: 'contract.purchase_sent',\n                data: askPrice,\n            });\n\n            if (!this.options.timeMachineEnabled) {\n                return doUntilDone(action).then(onSuccess);\n            }\n            return recoverFromError(\n                action,\n                (errorCode, makeDelay) => {\n                    // if disconnected no need to resubscription (handled by live-api)\n                    if (errorCode !== 'DisconnectError') {\n                        this.renewProposalsOnPurchase();\n                    } else {\n                        this.clearProposals();\n                    }\n\n                    const unsubscribe = this.store.subscribe(() => {\n                        const { scope, proposalsReady } = this.store.getState();\n                        if (scope === BEFORE_PURCHASE && proposalsReady) {\n                            makeDelay().then(() => this.observer.emit('REVERT', 'before'));\n                            unsubscribe();\n                        }\n                    });\n                },\n                ['PriceMoved', 'InvalidContractProposal'],\n                delayIndex++\n            ).then(onSuccess);\n        }\n        getPurchaseReference = () => purchase_reference;\n        regeneratePurchaseReference = () => {\n            purchase_reference = getUUID();\n        };\n    };\n","import * as constants from '../constants';\n\nconst initialState = {\n    scope: constants.STOP,\n    proposalsReady: false,\n};\n\nconst signal = (state = initialState, action) => {\n    switch (action.type) {\n        case constants.START:\n            return {\n                scope: constants.BEFORE_PURCHASE,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.PROPOSALS_READY:\n            return {\n                ...state,\n                proposalsReady: true,\n            };\n        case constants.CLEAR_PROPOSALS:\n            return {\n                ...state,\n                proposalsReady: false,\n            };\n        case constants.PURCHASE_SUCCESSFUL:\n            return {\n                scope: constants.DURING_PURCHASE,\n                openContract: false,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.OPEN_CONTRACT:\n            return {\n                scope: constants.DURING_PURCHASE,\n                openContract: true,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.SELL:\n            return {\n                scope: constants.STOP,\n                proposalsReady: state.proposalsReady,\n            };\n        case constants.NEW_TICK:\n            return {\n                ...state,\n                newTick: action.payload,\n            };\n        default:\n            return state;\n    }\n};\n\nexport default signal;\n","import { getLast } from 'binary-utils';\nimport { localize } from '@deriv/translations';\nimport * as constants from './state/constants';\nimport { getDirection, getLastDigit } from '../utils/helpers';\nimport { expectPositiveInteger } from '../utils/sanitize';\nimport { observer as globalObserver } from '../../../utils/observer';\n\nlet tickListenerKey;\n\nexport default Engine =>\n    class Ticks extends Engine {\n        async watchTicks(symbol) {\n            if (symbol && this.symbol !== symbol) {\n                this.symbol = symbol;\n                const { ticksService } = this.$scope;\n\n                await ticksService.stopMonitor({\n                    symbol,\n                    key: tickListenerKey,\n                });\n                const callback = ticks => {\n                    this.checkProposalReady();\n                    const lastTick = ticks.slice(-1)[0];\n                    const { epoch } = lastTick;\n                    this.store.dispatch({ type: constants.NEW_TICK, payload: epoch });\n                };\n\n                const key = await ticksService.monitor({ symbol, callback });\n                tickListenerKey = key;\n            }\n        }\n\n        checkTicksPromiseExists() {\n            return this.$scope.ticksService.ticks_history_promise;\n        }\n\n        getTicks(toString = false) {\n            return new Promise(resolve => {\n                this.$scope.ticksService.request({ symbol: this.symbol }).then(ticks => {\n                    const ticks_list = ticks.map(tick => {\n                        if (toString) {\n                            return tick.quote.toFixed(this.getPipSize());\n                        }\n                        return tick.quote;\n                    });\n\n                    resolve(ticks_list);\n                });\n            });\n        }\n\n        getLastTick(raw, toString = false) {\n            return new Promise(resolve =>\n                this.$scope.ticksService\n                    .request({ symbol: this.symbol })\n                    .then(ticks => {\n                        let last_tick = raw ? getLast(ticks) : getLast(ticks).quote;\n                        if (!raw && toString) {\n                            last_tick = last_tick.toFixed(this.getPipSize());\n                        }\n                        resolve(last_tick);\n                    })\n                    .catch(e => {\n                        if (e.code === 'MarketIsClosed') {\n                            globalObserver.emit('Error', e);\n                            resolve(e.code);\n                        }\n                    })\n            );\n        }\n\n        getLastDigit() {\n            return new Promise(resolve => this.getLastTick(false, true).then(tick => resolve(getLastDigit(tick))));\n        }\n\n        getLastDigitList() {\n            return new Promise(resolve => this.getTicks().then(ticks => resolve(this.getLastDigitsFromList(ticks))));\n        }\n        getLastDigitsFromList(ticks) {\n            const digits = ticks.map(tick => {\n                return getLastDigit(tick.toFixed(this.getPipSize()));\n            });\n            return digits;\n        }\n\n        checkDirection(dir) {\n            return new Promise(resolve =>\n                this.$scope.ticksService\n                    .request({ symbol: this.symbol })\n                    .then(ticks => resolve(getDirection(ticks) === dir))\n            );\n        }\n\n        getOhlc(args) {\n            const { granularity = this.options.candleInterval || 60, field } = args || {};\n\n            return new Promise(resolve =>\n                this.$scope.ticksService\n                    .request({ symbol: this.symbol, granularity })\n                    .then(ohlc => resolve(field ? ohlc.map(o => o[field]) : ohlc))\n            );\n        }\n\n        getOhlcFromEnd(args) {\n            const { index: i = 1 } = args || {};\n\n            const index = expectPositiveInteger(Number(i), localize('Index must be a positive integer'));\n\n            return new Promise(resolve => this.getOhlc(args).then(ohlc => resolve(ohlc.slice(-index)[0])));\n        }\n\n        getPipSize() {\n            return this.$scope.ticksService.pipSizes[this.symbol];\n        }\n    };\n","import { getRoundedNumber } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { info, log } from '../utils/broadcast';\nimport { createError } from '../../../utils/error';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { log_types } from '../../../constants/messages';\n\nconst skeleton = {\n    totalProfit: 0,\n    totalWins: 0,\n    totalLosses: 0,\n    totalStake: 0,\n    totalPayout: 0,\n    totalRuns: 0,\n};\n\nconst globalStat = {};\n\nexport default Engine =>\n    class Total extends Engine {\n        constructor() {\n            super();\n            this.sessionRuns = 0;\n            this.sessionProfit = 0;\n\n            globalObserver.register('statistics.clear', this.clearStatistics.bind(this));\n        }\n\n        clearStatistics() {\n            this.sessionRuns = 0;\n            this.sessionProfit = 0;\n            if (!this.accountInfo) return;\n            const { loginid: accountID } = this.accountInfo;\n            globalStat[accountID] = { ...skeleton };\n        }\n\n        updateTotals(contract) {\n            const { sell_price: sellPrice, buy_price: buyPrice, currency } = contract;\n\n            const profit = getRoundedNumber(Number(sellPrice) - Number(buyPrice), currency);\n\n            const win = profit > 0;\n\n            const accountStat = this.getAccountStat();\n\n            accountStat.totalWins += win ? 1 : 0;\n\n            accountStat.totalLosses += !win ? 1 : 0;\n\n            this.sessionProfit = getRoundedNumber(Number(this.sessionProfit) + Number(profit), currency);\n\n            accountStat.totalProfit = getRoundedNumber(Number(accountStat.totalProfit) + Number(profit), currency);\n\n            accountStat.totalStake = getRoundedNumber(Number(accountStat.totalStake) + Number(buyPrice), currency);\n\n            accountStat.totalPayout = getRoundedNumber(Number(accountStat.totalPayout) + Number(sellPrice), currency);\n\n            info({\n                profit,\n                contract,\n                accountID: this.accountInfo.loginid,\n                totalProfit: accountStat.totalProfit,\n                totalWins: accountStat.totalWins,\n                totalLosses: accountStat.totalLosses,\n                totalStake: accountStat.totalStake,\n                totalPayout: accountStat.totalPayout,\n            });\n\n            log(win ? log_types.PROFIT : log_types.LOST, { currency, profit });\n        }\n\n        updateAndReturnTotalRuns() {\n            this.sessionRuns++;\n            const accountStat = this.getAccountStat();\n\n            return ++accountStat.totalRuns;\n        }\n\n        /* eslint-disable class-methods-use-this */\n        getTotalRuns() {\n            const accountStat = this.getAccountStat();\n            return accountStat.totalRuns;\n        }\n\n        getTotalProfit(toString, currency) {\n            const accountStat = this.getAccountStat();\n\n            return toString && accountStat.totalProfit !== 0\n                ? getRoundedNumber(+accountStat.totalProfit, currency)\n                : +accountStat.totalProfit;\n        }\n\n        /* eslint-enable */\n        checkLimits(tradeOption) {\n            if (!tradeOption.limitations) {\n                return;\n            }\n\n            const {\n                limitations: { maxLoss, maxTrades },\n            } = tradeOption;\n\n            if (maxLoss && maxTrades) {\n                if (this.sessionRuns >= maxTrades) {\n                    throw createError('CustomLimitsReached', localize('Maximum number of trades reached'));\n                }\n                if (this.sessionProfit <= -maxLoss) {\n                    throw createError('CustomLimitsReached', localize('Maximum loss amount reached'));\n                }\n            }\n        }\n\n        /* eslint-disable class-methods-use-this */\n        validateTradeOptions(tradeOptions) {\n            const take_profit = tradeOptions.take_profit;\n            const stop_loss = tradeOptions.stop_loss;\n\n            if (take_profit) {\n                tradeOptions.limit_order.take_profit = take_profit;\n            }\n            if (stop_loss) {\n                tradeOptions.limit_order.stop_loss = stop_loss;\n            }\n\n            return tradeOptions;\n        }\n\n        getAccountStat() {\n            const { loginid: accountID } = this.accountInfo;\n\n            if (!(accountID in globalStat)) {\n                globalStat[accountID] = { ...skeleton };\n            }\n\n            return globalStat[accountID];\n        }\n    };\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { localize } from '@deriv/translations';\nimport Balance from './Balance';\nimport OpenContract from './OpenContract';\nimport Proposal from './Proposal';\nimport Purchase from './Purchase';\nimport Sell from './Sell';\nimport { start } from './state/actions';\nimport * as constants from './state/constants';\nimport rootReducer from './state/reducers';\nimport Ticks from './Ticks';\nimport Total from './Total';\nimport { doUntilDone } from '../utils/helpers';\nimport { expectInitArg } from '../utils/sanitize';\nimport { createError } from '../../../utils/error';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { api_base } from '../../api/api-base';\n\nconst watchBefore = store =>\n    watchScope({\n        store,\n        stopScope: constants.DURING_PURCHASE,\n        passScope: constants.BEFORE_PURCHASE,\n        passFlag: 'proposalsReady',\n    });\n\nconst watchDuring = store =>\n    watchScope({\n        store,\n        stopScope: constants.STOP,\n        passScope: constants.DURING_PURCHASE,\n        passFlag: 'openContract',\n    });\n\n/* The watchScope function is called randomly and resets the prevTick\n * which leads to the same problem we try to solve. So prevTick is isolated\n */\nlet prevTick;\nconst watchScope = ({ store, stopScope, passScope, passFlag }) => {\n    // in case watch is called after stop is fired\n    if (store.getState().scope === stopScope) {\n        return Promise.resolve(false);\n    }\n    return new Promise(resolve => {\n        const unsubscribe = store.subscribe(() => {\n            const newState = store.getState();\n\n            if (newState.newTick === prevTick) return;\n            prevTick = newState.newTick;\n\n            if (newState.scope === passScope && newState[passFlag]) {\n                unsubscribe();\n                resolve(true);\n            }\n\n            if (newState.scope === stopScope) {\n                unsubscribe();\n                resolve(false);\n            }\n        });\n    });\n};\n\nexport default class TradeEngine extends Balance(Purchase(Sell(OpenContract(Proposal(Ticks(Total(class {}))))))) {\n    constructor($scope) {\n        super();\n        this.observer = $scope.observer;\n        this.$scope = $scope;\n        this.observe();\n        this.data = {\n            contract: {},\n            proposals: [],\n        };\n        this.store = createStore(rootReducer, applyMiddleware(thunk));\n    }\n\n    init(...args) {\n        const [token, options] = expectInitArg(args);\n        const { symbol } = options;\n\n        this.initArgs = args;\n        this.options = options;\n        this.startPromise = this.loginAndGetBalance(token);\n\n        if (!this.checkTicksPromiseExists()) this.watchTicks(symbol);\n    }\n\n    start(tradeOptions) {\n        if (!this.options) {\n            throw createError('NotInitialized', localize('Bot.init is not called'));\n        }\n\n        globalObserver.emit('bot.running');\n\n        const validated_trade_options = this.validateTradeOptions(tradeOptions);\n\n        this.tradeOptions = validated_trade_options;\n        this.store.dispatch(start());\n        this.checkLimits(validated_trade_options);\n        this.makeProposals({ ...this.options, ...validated_trade_options });\n        this.checkProposalReady();\n    }\n\n    loginAndGetBalance(token) {\n        if (this.token === token) {\n            return Promise.resolve();\n        }\n        // for strategies using total runs, GetTotalRuns function is trying to get loginid and it gets called before Proposals calls.\n        // the below required loginid to be set in Proposal calls where loginAndGetBalance gets resolved.\n        // Earlier this used to happen as soon as we get ticks_history response and by the time GetTotalRuns gets called we have required info.\n        this.accountInfo = api_base.account_info;\n        this.token = api_base.token;\n        return new Promise(resolve => {\n            // Try to recover from a situation where API doesn't give us a correct response on\n            // \"proposal_open_contract\" which would make the bot run forever. When there's a \"sell\"\n            // event, wait a couple seconds for the API to give us the correct \"proposal_open_contract\"\n            // response, if there's none after x seconds. Send an explicit request, which _should_\n            // solve the issue. This is a backup!\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'transaction' && data.transaction.action === 'sell') {\n                    this.transaction_recovery_timeout = setTimeout(() => {\n                        const { contract } = this.data;\n                        const is_same_contract = contract.contract_id === data.transaction.contract_id;\n                        const is_open_contract = contract.status === 'open';\n                        if (is_same_contract && is_open_contract) {\n                            doUntilDone(() => {\n                                api_base.api.send({ proposal_open_contract: 1, contract_id: contract.contract_id });\n                            }, ['PriceMoved']);\n                        }\n                    }, 1500);\n                }\n                resolve();\n            });\n            api_base.pushSubscription(subscription);\n        });\n    }\n\n    observe() {\n        this.observeOpenContract();\n        this.observeBalance();\n        this.observeProposals();\n    }\n\n    watch(watchName) {\n        if (watchName === 'before') {\n            return watchBefore(this.store);\n        }\n        return watchDuring(this.store);\n    }\n}\n","import { DURING_PURCHASE } from './state/constants';\nimport { contractStatus, log } from '../utils/broadcast';\nimport { recoverFromError, doUntilDone } from '../utils/helpers';\nimport { log_types } from '../../../constants/messages';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { api_base } from '../../api/api-base';\n\nexport default Engine =>\n    class Sell extends Engine {\n        isSellAtMarketAvailable() {\n            return this.contractId && !this.isSold && this.isSellAvailable && !this.isExpired;\n        }\n\n        sellAtMarket() {\n            globalObserver.emit('bot.sell');\n\n            // Prevent calling sell twice\n            if (this.store.getState().scope !== DURING_PURCHASE) {\n                return Promise.resolve();\n            }\n\n            if (!this.isSellAtMarketAvailable()) {\n                log(log_types.NOT_OFFERED);\n                return Promise.resolve();\n            }\n\n            let delay_index = 1;\n\n            return new Promise(resolve => {\n                const onContractSold = sell_response => {\n                    delay_index = 1;\n\n                    if (sell_response) {\n                        const { sold_for } = sell_response.sell;\n                        log(log_types.SELL, { sold_for });\n                    }\n\n                    contractStatus('purchase.sold');\n                    this.waitForAfter();\n                    resolve();\n                };\n\n                const contract_id = this.contractId;\n\n                const sellContractAndGetContractInfo = () => {\n                    return doUntilDone(() => api_base.api.send({ sell: contract_id, price: 0 }))\n                        .then(sell_response => {\n                            doUntilDone(() => api_base.api.send({ proposal_open_contract: 1, contract_id })).then(\n                                () => sell_response\n                            );\n                        })\n                        .catch(e => {\n                            const error = e.error;\n                            if (error.code === 'InvalidOfferings') {\n                                // \"InvalidOfferings\" may occur when user tries to sell the contract too close\n                                // to the expiry time. We shouldn't interrupt the bot but instead let the contract\n                                // finish.\n                                return Promise.resolve();\n                            }\n\n                            const sell_error = {\n                                name: error.code,\n                                message: error.message,\n                                msg_type: e.msg_type,\n                                error: { ...error.error },\n                            };\n\n                            if (error.code === 'RateLimit') {\n                                return Promise.reject(sell_error);\n                            }\n\n                            // For every other error, check whether the contract is not actually already sold.\n                            return doUntilDone(() =>\n                                api_base.api.send({\n                                    proposal_open_contract: 1,\n                                    contract_id,\n                                })\n                            ).then(proposal_open_contract_response => {\n                                const { proposal_open_contract } = proposal_open_contract_response;\n\n                                if (proposal_open_contract.status !== 'sold') {\n                                    return Promise.reject(sell_error);\n                                }\n\n                                // If the contract is sold at this point it means there was a race condition.\n                                // Pretend this sell request was successful and mislead the trade engine into\n                                // moving onto the next scope.\n                                return Promise.resolve({\n                                    sell: {\n                                        sold_for: proposal_open_contract.sell_price,\n                                    },\n                                });\n                            });\n                        });\n                };\n\n                const errors_to_ignore = ['NoOpenPosition', 'InvalidSellContractProposal', 'UnrecognisedRequest'];\n\n                // Restart buy/sell on error is enabled, don't recover from sell error.\n                if (!this.options.timeMachineEnabled) {\n                    return doUntilDone(sellContractAndGetContractInfo, errors_to_ignore).then(sell_response =>\n                        onContractSold(sell_response)\n                    );\n                }\n\n                // If above checkbox not checked, try to recover from sell error.\n                const recoverFn = (error_code, makeDelay) => {\n                    return makeDelay().then(() => this.observer.emit('REVERT', 'during'));\n                };\n                return recoverFromError(\n                    sellContractAndGetContractInfo,\n                    recoverFn,\n                    errors_to_ignore,\n                    delay_index++\n                ).then(sell_response => onContractSold(sell_response));\n            });\n        }\n    };\n","import { getRoundedNumber } from '@deriv/shared';\nimport { sell, openContractReceived } from './state/actions';\nimport { contractStatus, contract as broadcastContract } from '../utils/broadcast';\nimport { api_base } from '../../api/api-base';\n\nexport default Engine =>\n    class OpenContract extends Engine {\n        observeOpenContract() {\n            if (!api_base.api) return;\n            const subscription = api_base.api.onMessage().subscribe(({ data }) => {\n                if (data.msg_type === 'proposal_open_contract') {\n                    const contract = data.proposal_open_contract;\n\n                    if (!contract || !this.expectedContractId(contract?.contract_id)) {\n                        return;\n                    }\n\n                    this.setContractFlags(contract);\n\n                    this.data.contract = contract;\n\n                    broadcastContract({ accountID: api_base.account_info.loginid, ...contract });\n\n                    if (this.isSold) {\n                        this.contractId = '';\n                        clearTimeout(this.transaction_recovery_timeout);\n                        this.updateTotals(contract);\n                        contractStatus({\n                            id: 'contract.sold',\n                            data: contract.transaction_ids.sell,\n                            contract,\n                        });\n\n                        if (this.afterPromise) {\n                            this.afterPromise();\n                        }\n\n                        this.store.dispatch(sell());\n                    } else {\n                        this.store.dispatch(openContractReceived());\n                    }\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n\n        waitForAfter() {\n            return new Promise(resolve => {\n                this.afterPromise = resolve;\n            });\n        }\n\n        setContractFlags(contract) {\n            const { is_expired, is_valid_to_sell, is_sold, entry_tick } = contract;\n\n            this.isSold = Boolean(is_sold);\n            this.isSellAvailable = !this.isSold && Boolean(is_valid_to_sell);\n            this.isExpired = Boolean(is_expired);\n            this.hasEntryTick = Boolean(entry_tick);\n        }\n\n        expectedContractId(contractId) {\n            return this.contractId && contractId === this.contractId;\n        }\n\n        getSellPrice() {\n            const { bid_price: bidPrice, buy_price: buyPrice, currency } = this.data.contract;\n            return getRoundedNumber(Number(bidPrice) - Number(buyPrice), currency);\n        }\n    };\n","import { localize } from '@deriv/translations';\nimport { proposalsReady, clearProposals } from './state/actions';\nimport { tradeOptionToProposal, doUntilDone } from '../utils/helpers';\nimport { api_base } from '../../api/api-base';\n\nexport default Engine =>\n    class Proposal extends Engine {\n        makeProposals(trade_option) {\n            if (!this.isNewTradeOption(trade_option)) {\n                return;\n            }\n\n            // Generate a purchase reference when trade options are different from previous trade options.\n            // This will ensure the bot doesn't mistakenly purchase the wrong proposal.\n            this.regeneratePurchaseReference();\n            this.trade_option = trade_option;\n            this.proposal_templates = tradeOptionToProposal(trade_option, this.getPurchaseReference());\n            this.renewProposalsOnPurchase();\n        }\n\n        selectProposal(contract_type) {\n            const { proposals } = this.data;\n\n            if (proposals.length === 0) {\n                throw Error(localize('Proposals are not ready'));\n            }\n\n            const to_buy = proposals.find(proposal => {\n                if (\n                    proposal.contract_type === contract_type &&\n                    proposal.purchase_reference === this.getPurchaseReference()\n                ) {\n                    // Below happens when a user has had one of the proposals return\n                    // with a ContractBuyValidationError. We allow the logic to continue\n                    // to here cause the opposite proposal may still be valid. Only once\n                    // they attempt to purchase the errored proposal we will intervene.\n                    if (proposal.error) {\n                        throw proposal.error;\n                    }\n\n                    return proposal;\n                }\n\n                return false;\n            });\n\n            if (!to_buy) {\n                throw new Error(localize('Selected proposal does not exist'));\n            }\n\n            return {\n                id: to_buy.id,\n                askPrice: to_buy.ask_price,\n            };\n        }\n\n        renewProposalsOnPurchase() {\n            this.data.proposals = [];\n            this.store.dispatch(clearProposals());\n            this.requestProposals();\n        }\n\n        requestProposals() {\n            // Since there are two proposals (in most cases), an error may be logged twice, to avoid this\n            // flip this boolean on error.\n            let has_informed_error = false;\n\n            Promise.all(\n                this.proposal_templates.map(proposal => {\n                    doUntilDone(() => api_base.api.send(proposal)).catch(error => {\n                        // We intercept ContractBuyValidationError as user may have specified\n                        // e.g. a DIGITUNDER 0 or DIGITOVER 9, while one proposal may be invalid\n                        // the other is valid. We will error on Purchase rather than here.\n\n                        if (error.error.code === 'ContractBuyValidationError') {\n                            this.data.proposals.push({\n                                ...error.error.echo_req,\n                                ...error.echo_req.passthrough,\n                                error,\n                            });\n\n                            return null;\n                        }\n                        if (!has_informed_error) {\n                            has_informed_error = true;\n                            this.$scope.observer.emit('Error', error.error);\n                        }\n                        return null;\n                    });\n                })\n            );\n        }\n\n        observeProposals() {\n            if (!api_base.api) return;\n            const subscription = api_base.api.onMessage().subscribe(response => {\n                if (response.data.msg_type === 'proposal') {\n                    const { passthrough, proposal } = response.data;\n                    if (proposal && this.data.proposals.findIndex(p => p.id === proposal.id) === -1) {\n                        // Add proposals based on the ID returned by the API.\n                        this.data.proposals.push({ ...proposal, ...passthrough });\n                        this.checkProposalReady();\n                    }\n                }\n            });\n            api_base.pushSubscription(subscription);\n        }\n\n        checkProposalReady() {\n            // Proposals are considered ready when the proposals in our memory match the ones\n            // we've requested from the API, we determine this by checking the passthrough of the response.\n            const { proposals } = this.data;\n\n            if (proposals.length > 0 && this.proposal_templates) {\n                const has_equal_proposals = this.proposal_templates.every(template => {\n                    return (\n                        proposals.findIndex(proposal => {\n                            return (\n                                proposal.purchase_reference === template.passthrough.purchase_reference &&\n                                proposal.contract_type === template.contract_type\n                            );\n                        }) !== -1\n                    );\n                });\n\n                if (has_equal_proposals) {\n                    this.startPromise.then(() => this.store.dispatch(proposalsReady()));\n                }\n            }\n        }\n\n        isNewTradeOption(trade_option) {\n            if (!this.trade_option) {\n                this.trade_option = trade_option;\n                return true;\n            }\n\n            // Compare incoming \"trade_option\" argument with \"this.trade_option\", if any\n            // of the values is different, this is a new tradeOption and new proposals\n            // should be generated.\n            return [\n                'amount',\n                'barrierOffset',\n                'basis',\n                'duration',\n                'duration_unit',\n                'prediction',\n                'secondBarrierOffset',\n                'symbol',\n            ].some(value => this.trade_option[value] !== trade_option[value]);\n        }\n    };\n","import getToolsInterface from './ToolsInterface';\nimport getTicksInterface from './TicksInterface';\nimport getBotInterface from './BotInterface';\nimport TradeEngine from '../trade';\n\nconst sleep = (observer, arg = 1) => {\n    return new Promise(\n        r =>\n            setTimeout(() => {\n                r();\n                setTimeout(() => observer.emit('CONTINUE'), 0);\n            }, arg * 1000),\n        () => {}\n    );\n};\n\nconst Interface = $scope => {\n    const tradeEngine = new TradeEngine($scope);\n    const { observer } = $scope;\n    const getInterface = () => {\n        return {\n            ...getBotInterface(tradeEngine),\n            ...getToolsInterface(tradeEngine),\n            getTicksInterface: getTicksInterface(tradeEngine),\n            watch: (...args) => tradeEngine.watch(...args),\n            sleep: (...args) => sleep(observer, ...args),\n            alert: (...args) => alert(...args), // eslint-disable-line no-alert\n            prompt: (...args) => prompt(...args), // eslint-disable-line no-alert\n            console: {\n                log(...args) {\n                    // eslint-disable-next-line no-console\n                    console.log(new Date().toLocaleTimeString(), ...args);\n                },\n            },\n        };\n    };\n    return { tradeEngine, observer, getInterface };\n};\n\nexport default Interface;\n","import { cloneThorough, isMultiplierContract } from '@deriv/shared';\nimport JSInterpreter from '@deriv/js-interpreter';\nimport { createScope } from './cliTools';\nimport Interface from '../Interface';\nimport { unrecoverable_errors } from '../../../constants/messages';\nimport { observer as globalObserver } from '../../../utils/observer';\nimport { api_base } from '../../api/api-base';\n\nJSInterpreter.prototype.takeStateSnapshot = function () {\n    const newStateStack = cloneThorough(this.stateStack, undefined, undefined, undefined, true);\n    return newStateStack;\n};\n\nJSInterpreter.prototype.restoreStateSnapshot = function (snapshot) {\n    this.stateStack = cloneThorough(snapshot, undefined, undefined, undefined, true);\n    this.global = this.stateStack[0].scope.object || this.stateStack[0].scope;\n    this.initFunc_(this, this.global);\n};\n\nconst botInitialized = bot => bot && bot.tradeEngine.options;\nconst botStarted = bot => botInitialized(bot) && bot.tradeEngine.tradeOptions;\nconst shouldRestartOnError = (bot, errorName = '') =>\n    !unrecoverable_errors.includes(errorName) && botInitialized(bot) && bot.tradeEngine.options.shouldRestartOnError;\n\nconst shouldStopOnError = (bot, errorName = '') => {\n    const stopErrors = ['SellNotAvailableCustom', 'ContractCreationFailure'];\n    if (stopErrors.includes(errorName) && botInitialized(bot)) {\n        return true;\n    }\n    return false;\n};\n\nconst timeMachineEnabled = bot => botInitialized(bot) && bot.tradeEngine.options.timeMachineEnabled;\n\n// TODO chek beforState & duringState & startState\nconst Interpreter = () => {\n    let $scope = createScope();\n    let bot = Interface($scope);\n    let interpreter = {};\n    let onFinish;\n\n    $scope.observer.register('REVERT', watchName =>\n        revert(watchName === 'before' ? $scope.beforeState : $scope.duringState)\n    );\n\n    function init() {\n        $scope = createScope();\n        bot = Interface($scope);\n        interpreter = {};\n        onFinish = () => {};\n    }\n\n    function revert(state) {\n        interpreter.restoreStateSnapshot(state);\n        interpreter.paused_ = false;\n        loop();\n    }\n\n    function loop() {\n        if ($scope.stopped || !interpreter.run()) {\n            onFinish(interpreter.pseudoToNative(interpreter.value));\n        }\n    }\n\n    function createAsync(js_interpreter, func) {\n        const asyncFunc = (...args) => {\n            const callback = args.pop();\n\n            // Workaround for unknown number of args\n            const reversed_args = args.slice().reverse();\n            const first_defined_arg_idx = reversed_args.findIndex(arg => arg !== undefined);\n\n            // Remove extra undefined args from end of the args\n            const function_args = first_defined_arg_idx < 0 ? [] : reversed_args.slice(first_defined_arg_idx).reverse();\n            // End of workaround\n\n            func(...function_args.map(arg => js_interpreter.pseudoToNative(arg)))\n                .then(rv => {\n                    callback(js_interpreter.nativeToPseudo(rv));\n                    loop();\n                })\n                .catch(e => {\n                    // e.error for errors get from API, e for code errors\n                    $scope.observer.emit('Error', e.error || e);\n                });\n        };\n\n        // TODO: This is a workaround, create issue on original repo, once fixed\n        // remove this. We don't know how many args are going to be passed, so we\n        // assume a max of 100.\n        const MAX_ACCEPTABLE_FUNC_ARGS = 100;\n        Object.defineProperty(asyncFunc, 'length', { value: MAX_ACCEPTABLE_FUNC_ARGS + 1 });\n        return js_interpreter.createAsyncFunction(asyncFunc);\n    }\n\n    function initFunc(js_interpreter, scope) {\n        const bot_interface = bot.getInterface();\n        const { getTicksInterface, alert, prompt, sleep, console: custom_console } = bot_interface;\n        const ticks_interface = getTicksInterface;\n\n        js_interpreter.setProperty(scope, 'console', js_interpreter.nativeToPseudo(custom_console));\n        js_interpreter.setProperty(scope, 'alert', js_interpreter.nativeToPseudo(alert));\n        js_interpreter.setProperty(scope, 'prompt', js_interpreter.nativeToPseudo(prompt));\n        js_interpreter.setProperty(\n            scope,\n            'getPurchaseReference',\n            js_interpreter.nativeToPseudo(bot_interface.getPurchaseReference)\n        );\n\n        const pseudo_bot_interface = js_interpreter.nativeToPseudo(bot_interface);\n\n        Object.entries(ticks_interface).forEach(([name, f]) =>\n            js_interpreter.setProperty(pseudo_bot_interface, name, createAsync(js_interpreter, f))\n        );\n\n        js_interpreter.setProperty(\n            pseudo_bot_interface,\n            'start',\n            js_interpreter.nativeToPseudo((...args) => {\n                const { start } = bot_interface;\n                if (shouldRestartOnError(bot)) {\n                    $scope.startState = js_interpreter.takeStateSnapshot();\n                }\n                start(...args);\n            })\n        );\n\n        js_interpreter.setProperty(\n            pseudo_bot_interface,\n            'purchase',\n            createAsync(js_interpreter, bot_interface.purchase)\n        );\n        js_interpreter.setProperty(\n            pseudo_bot_interface,\n            'sellAtMarket',\n            createAsync(js_interpreter, bot_interface.sellAtMarket)\n        );\n        js_interpreter.setProperty(scope, 'Bot', pseudo_bot_interface);\n        js_interpreter.setProperty(\n            scope,\n            'watch',\n            createAsync(js_interpreter, watchName => {\n                const { watch } = bot.getInterface();\n\n                if (timeMachineEnabled(bot)) {\n                    const snapshot = interpreter.takeStateSnapshot();\n                    if (watchName === 'before') {\n                        $scope.beforeState = snapshot;\n                    } else {\n                        $scope.duringState = snapshot;\n                    }\n                }\n\n                return watch(watchName);\n            })\n        );\n\n        js_interpreter.setProperty(scope, 'sleep', createAsync(js_interpreter, sleep));\n    }\n\n    async function stop() {\n        return new Promise((resolve, reject) => {\n            try {\n                const global_timeouts = globalObserver.getState('global_timeouts') ?? [];\n                const is_timeouts_cancellable = Object.keys(global_timeouts).every(\n                    timeout => global_timeouts[timeout].is_cancellable\n                );\n\n                if (!bot.tradeEngine.contractId && is_timeouts_cancellable) {\n                    // When user is rate limited, allow them to stop the bot immediately\n                    // granted there is no active contract.\n                    global_timeouts.forEach(timeout => clearTimeout(global_timeouts[timeout]));\n                    terminateSession().then(() => resolve());\n                } else if (\n                    bot.tradeEngine.isSold === false &&\n                    !$scope.is_error_triggered &&\n                    isMultiplierContract(bot?.tradeEngine?.data?.contract?.contract_type ?? '')\n                ) {\n                    globalObserver.register('contract.status', async contractStatus => {\n                        if (contractStatus.id === 'contract.sold') {\n                            terminateSession().then(() => resolve());\n                        }\n                    });\n                } else {\n                    terminateSession().then(() => resolve());\n                }\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    async function terminateSession() {\n        return new Promise((resolve, reject) => {\n            try {\n                $scope.stopped = true;\n                $scope.is_error_triggered = false;\n                globalObserver.emit('bot.stop');\n                const { ticksService } = $scope;\n                // Unsubscribe previous ticks_history subscription\n                // Unsubscribe the subscriptions from Proposal, Balance and OpenContract\n                api_base.clearSubscriptions();\n\n                ticksService.unsubscribeFromTicksService().then(() => {\n                    resolve();\n                });\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    async function unsubscribeFromTicksService() {\n        const { ticksService } = $scope;\n        return new Promise((resolve, reject) => {\n            try {\n                ticksService.unsubscribeFromTicksService().then(() => {\n                    resolve();\n                });\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    function run(code) {\n        return new Promise((resolve, reject) => {\n            const onError = e => {\n                if ($scope.stopped) {\n                    return;\n                }\n                // DBot handles 'InvalidToken' internally\n                if (e.code === 'InvalidToken') {\n                    globalObserver.emit('client.invalid_token');\n                    return;\n                }\n                if (shouldStopOnError(bot, e?.code)) {\n                    globalObserver.emit('ui.log.error', e.message);\n                    globalObserver.emit('bot.click_stop');\n                    return;\n                }\n\n                $scope.is_error_triggered = true;\n                if (!shouldRestartOnError(bot, e.code) || !botStarted(bot)) {\n                    reject(e);\n                    return;\n                }\n\n                globalObserver.emit('Error', e);\n                const { initArgs, tradeOptions } = bot.tradeEngine;\n                terminateSession();\n                init();\n                $scope.observer.register('Error', onError);\n                bot.tradeEngine.init(...initArgs);\n                bot.tradeEngine.start(tradeOptions);\n                revert($scope.startState);\n            };\n\n            $scope.observer.register('Error', onError);\n\n            interpreter = new JSInterpreter(code, initFunc);\n            onFinish = resolve;\n\n            loop();\n        });\n    }\n\n    return { stop, run, terminateSession, bot, unsubscribeFromTicksService };\n};\nexport default Interpreter;\n\nexport const createInterpreter = () => new Interpreter();\n","export default \"<xml xmlns=\\\"http://www.w3.org/1999/xhtml\\\" collection=\\\"false\\\" is_dbot=\\\"true\\\">\\n  <variables></variables>\\n  <block type=\\\"trade_definition\\\" x=\\\"0\\\" y=\\\"0\\\">\\n    <statement name=\\\"TRADE_OPTIONS\\\">\\n      <block type=\\\"trade_definition_market\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n        <field name=\\\"MARKET_LIST\\\"></field>\\n        <field name=\\\"SUBMARKET_LIST\\\"></field>\\n        <field name=\\\"SYMBOL_LIST\\\"></field>\\n        <next>\\n          <block type=\\\"trade_definition_tradetype\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n            <field name=\\\"TRADETYPECAT_LIST\\\"></field>\\n            <field name=\\\"TRADETYPE_LIST\\\"></field>\\n            <next>\\n              <block type=\\\"trade_definition_contracttype\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                <field name=\\\"TYPE_LIST\\\"></field>\\n                <next>\\n                  <block type=\\\"trade_definition_candleinterval\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                    <field name=\\\"CANDLEINTERVAL_LIST\\\">60</field>\\n                    <next>\\n                      <block type=\\\"trade_definition_restartbuysell\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                        <field name=\\\"TIME_MACHINE_ENABLED\\\">FALSE</field>\\n                        <next>\\n                          <block type=\\\"trade_definition_restartonerror\\\" deletable=\\\"false\\\" movable=\\\"false\\\">\\n                            <field name=\\\"RESTARTONERROR\\\">TRUE</field>\\n                          </block>\\n                        </next>\\n                      </block>\\n                    </next>\\n                  </block>\\n                </next>\\n              </block>\\n            </next>\\n          </block>\\n        </next>\\n      </block>\\n    </statement>\\n    <statement name=\\\"SUBMARKET\\\">\\n      <block type=\\\"trade_definition_tradeoptions\\\">\\n        <mutation has_first_barrier=\\\"false\\\" has_second_barrier=\\\"false\\\" has_prediction=\\\"false\\\"></mutation>\\n        <field name=\\\"DURATIONTYPE_LIST\\\"></field>\\n        <field name=\\\"CURRENCY_LIST\\\">USD</field>\\n        <value name=\\\"DURATION\\\">\\n          <shadow type=\\\"math_number_positive\\\">\\n            <field name=\\\"NUM\\\">5</field>\\n          </shadow>\\n        </value>\\n        <value name=\\\"AMOUNT\\\">\\n          <shadow type=\\\"math_number_positive\\\">\\n            <field name=\\\"NUM\\\">1</field>\\n          </shadow>\\n        </value>\\n        <field name=\\\"AMOUNT_LIMITS\\\"></field>\\n      </block>\\n    </statement>\\n  </block>\\n  <block type=\\\"during_purchase\\\" x=\\\"720\\\" y=\\\"0\\\">\\n    <statement name=\\\"DURING_PURCHASE_STACK\\\">\\n      <block type=\\\"controls_if\\\">\\n        <value name=\\\"IF0\\\">\\n          <block type=\\\"check_sell\\\"></block>\\n        </value>\\n      </block>\\n    </statement>\\n  </block>\\n  <block type=\\\"after_purchase\\\" x=\\\"720\\\" y=\\\"248\\\">\\n    <statement name=\\\"AFTERPURCHASE_STACK\\\">\\n      <block type=\\\"trade_again\\\"></block>\\n    </statement>\\n  </block>\\n  <block type=\\\"before_purchase\\\" x=\\\"0\\\" y=\\\"576\\\">\\n    <statement name=\\\"BEFOREPURCHASE_STACK\\\">\\n      <block type=\\\"purchase\\\">\\n        <field name=\\\"PURCHASE_LIST\\\"></field>\\n      </block>\\n    </statement>\\n  </block>\\n</xml>\";","import { save_types } from '../constants';\nimport { config } from '../constants/config';\nimport { api_base } from '../services/api/api-base';\nimport ApiHelpers from '../services/api/api-helpers';\nimport Interpreter from '../services/tradeEngine/utils/interpreter';\nimport { compareXml, observer as globalObserver } from '../utils';\nimport { getSavedWorkspaces, saveWorkspaceToRecent } from '../utils/local-storage';\n\nimport main_xml from './xml/main.xml';\nimport DBotStore from './dbot-store';\nimport { isAllRequiredBlocksEnabled, updateDisabledBlocks, validateErrorOnBlockDelete } from './utils';\n\nimport './blockly';\n\nclass DBot {\n    constructor() {\n        this.interpreter = null;\n        this.workspace = null;\n        this.before_run_funcs = [];\n        this.symbol = null;\n        this.is_bot_running = false;\n    }\n\n    /**\n     * Initialises the workspace and mounts it to a container element (app_contents).\n     */\n    async initWorkspace(public_path, store, api_helpers_store, is_mobile) {\n        const recent_files = await getSavedWorkspaces();\n\n        api_base.init();\n        this.interpreter = Interpreter();\n        const that = this;\n        Blockly.Blocks.trade_definition_tradetype.onchange = function (event) {\n            if (!this.workspace || this.isInFlyout || this.workspace.isDragging()) {\n                return;\n            }\n\n            this.enforceLimitations();\n\n            const { name, type } = event;\n\n            if (type === Blockly.Events.BLOCK_CHANGE) {\n                if (name === 'SYMBOL_LIST' || name === 'TRADETYPECAT_LIST') {\n                    const { contracts_for } = ApiHelpers.instance;\n                    const top_parent_block = this.getTopParent();\n                    const market_block = top_parent_block.getChildByType('trade_definition_market');\n                    const market = market_block.getFieldValue('MARKET_LIST');\n                    const submarket = market_block.getFieldValue('SUBMARKET_LIST');\n                    const symbol = market_block.getFieldValue('SYMBOL_LIST');\n                    const category = this.getFieldValue('TRADETYPECAT_LIST');\n                    const trade_type = this.getFieldValue('TRADETYPE_LIST');\n\n                    if (name === 'SYMBOL_LIST') {\n                        contracts_for.getTradeTypeCategories(market, submarket, symbol).then(categories => {\n                            const category_field = this.getField('TRADETYPECAT_LIST');\n                            if (category_field) {\n                                category_field.updateOptions(categories, {\n                                    default_value: category,\n                                    should_pretend_empty: true,\n                                    event_group: event.group,\n                                });\n                            }\n                        });\n                        that.symbol = symbol;\n                        if (\n                            !that.is_bot_running &&\n                            that.interpreter &&\n                            !this.workspace.options.readOnly &&\n                            symbol !== that.interpreter.bot.tradeEngine.symbol\n                        ) {\n                            const run_button = document.querySelector('#db-animation__run-button');\n                            if (run_button) run_button.disabled = true;\n\n                            that.interpreter.unsubscribeFromTicksService().then(async () => {\n                                await that.interpreter.bot.tradeEngine.watchTicks(symbol);\n                            });\n                        }\n                    } else if (name === 'TRADETYPECAT_LIST' && event.blockId === this.id) {\n                        contracts_for.getTradeTypes(market, submarket, symbol, category).then(trade_types => {\n                            const trade_type_field = this.getField('TRADETYPE_LIST');\n\n                            trade_type_field.updateOptions(trade_types, {\n                                default_value: trade_type,\n                                should_pretend_empty: true,\n                                event_group: event.group,\n                            });\n                        });\n                    }\n                }\n            }\n        };\n\n        return new Promise((resolve, reject) => {\n            __webpack_public_path__ = public_path; // eslint-disable-line no-global-assign\n            ApiHelpers.setInstance(api_helpers_store);\n            DBotStore.setInstance(store);\n            const window_width = window.innerWidth;\n            try {\n                let workspaceScale = 0.8;\n\n                const { handleFileChange } = DBotStore.instance;\n                if (window_width < 1640) {\n                    if (is_mobile) {\n                        workspaceScale = 0.7;\n                    } else {\n                        const scratch_div_width = document.getElementById('scratch_div')?.offsetWidth;\n                        const zoom_scale = scratch_div_width / window_width / 1.5;\n                        workspaceScale = zoom_scale;\n                    }\n                }\n                const el_scratch_div = document.getElementById('scratch_div');\n                if (!el_scratch_div) {\n                    return;\n                }\n                this.workspace = Blockly.inject(el_scratch_div, {\n                    media: `${__webpack_public_path__}media/`,\n                    trashcan: !is_mobile,\n                    zoom: { wheel: true, startScale: workspaceScale },\n                    scrollbars: true,\n                });\n\n                this.workspace.cached_xml = { main: main_xml };\n\n                this.workspace.addChangeListener(this.valueInputLimitationsListener.bind(this));\n                this.workspace.addChangeListener(event => updateDisabledBlocks(this.workspace, event));\n                this.workspace.addChangeListener(event => this.workspace.dispatchBlockEventEffects(event));\n                this.workspace.addChangeListener(event => {\n                    if (event.type === 'endDrag' && !is_mobile) validateErrorOnBlockDelete();\n                });\n\n                Blockly.derivWorkspace = this.workspace;\n\n                this.addBeforeRunFunction(this.unselectBlocks.bind(this));\n                this.addBeforeRunFunction(this.disableStrayBlocks.bind(this));\n                this.addBeforeRunFunction(this.checkForErroredBlocks.bind(this));\n                this.addBeforeRunFunction(this.checkForRequiredBlocks.bind(this));\n\n                // Push main.xml to workspace and reset the undo stack.\n                this.workspace.current_strategy_id = Blockly.utils.genUid();\n                Blockly.derivWorkspace.strategy_to_load = main_xml;\n                Blockly.mainWorkspace.strategy_to_load = main_xml;\n                let file_name = config.default_file_name;\n                if (recent_files && recent_files.length) {\n                    const latest_file = recent_files[0];\n                    Blockly.derivWorkspace.strategy_to_load = latest_file.xml;\n                    Blockly.mainWorkspace.strategy_to_load = latest_file.xml;\n                    file_name = latest_file.name;\n                    Blockly.derivWorkspace.current_strategy_id = latest_file.id;\n                    Blockly.mainWorkspace.current_strategy_id = latest_file.id;\n                }\n\n                const event_group = `dbot-load${Date.now()}`;\n                Blockly.Events.setGroup(event_group);\n                Blockly.Xml.domToWorkspace(\n                    Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),\n                    this.workspace\n                );\n                const { save_modal } = DBotStore.instance;\n\n                save_modal.updateBotName(file_name);\n                this.workspace.cleanUp();\n                this.workspace.clearUndo();\n\n                window.dispatchEvent(new Event('resize'));\n                window.addEventListener('dragover', DBot.handleDragOver);\n                window.addEventListener('drop', e => DBot.handleDropOver(e, handleFileChange));\n                // disable overflow\n                el_scratch_div.parentNode.style.overflow = 'hidden';\n                resolve();\n            } catch (error) {\n                // TODO: Handle error.\n                reject(error);\n                throw error;\n            }\n        });\n    }\n\n    /** Compare stored strategy xml with currently running xml */\n    isStrategyUpdated(current_xml_dom, recent_files) {\n        if (recent_files && recent_files.length) {\n            const stored_strategy = recent_files.filter(\n                strategy => strategy?.id === this.workspace?.current_strategy_id\n            )?.[0];\n            if (stored_strategy?.xml) {\n                const stored_strategy_xml = stored_strategy?.xml;\n                const current_xml = Blockly.Xml.domToText(current_xml_dom);\n                const is_same_strategy = compareXml(stored_strategy_xml, current_xml);\n                if (is_same_strategy) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    /** Saves the current workspace to local storage\n     * and update saved status if strategy changes  */\n    async saveRecentWorkspace() {\n        const current_xml_dom = this?.workspace ? Blockly?.Xml?.workspaceToDom(this.workspace) : null;\n        try {\n            const recent_files = await getSavedWorkspaces();\n            if (current_xml_dom && this.isStrategyUpdated(current_xml_dom, recent_files)) {\n                await saveWorkspaceToRecent(current_xml_dom, save_types.UNSAVED);\n            }\n        } catch (error) {\n            globalObserver.emit('Error', error);\n            await saveWorkspaceToRecent(current_xml_dom, save_types.UNSAVED);\n        }\n    }\n\n    /**\n     * Allows you to add a function that needs to be executed before running the bot. Each\n     * function needs to return true in order for the bot to run.\n     * @param {Function} func Function to execute which returns true/false.\n     */\n    addBeforeRunFunction(func) {\n        this.before_run_funcs.push(func);\n    }\n\n    shouldRunBot() {\n        return this.before_run_funcs.every(func => !!func());\n    }\n\n    /**\n     * Runs the bot. Does a sanity check before attempting to generate the\n     * JavaScript code that's fed to the interpreter.\n     */\n    runBot() {\n        try {\n            const code = this.generateCode();\n\n            if (!this.interpreter.bot.tradeEngine.checkTicksPromiseExists()) this.interpreter = Interpreter();\n\n            this.is_bot_running = true;\n\n            api_base.setIsRunning(true);\n            this.interpreter.run(code).catch(error => {\n                globalObserver.emit('Error', error);\n                this.stopBot();\n            });\n        } catch (error) {\n            globalObserver.emit('Error', error);\n\n            if (this.interpreter) {\n                this.stopBot();\n            }\n        }\n    }\n\n    /**\n     * Generates the code that is passed to the interpreter.\n     * @param {Object} limitations Optional limitations (legacy argument)\n     */\n    generateCode(limitations = {}) {\n        return `\n            var BinaryBotPrivateInit;\n            var BinaryBotPrivateStart;\n            var BinaryBotPrivateBeforePurchase; \n            var BinaryBotPrivateDuringPurchase;\n            var BinaryBotPrivateAfterPurchase;\n            var BinaryBotPrivateLastTickTime;\n            var BinaryBotPrivateTickAnalysisList = [];\n            var BinaryBotPrivateHasCalledTradeOptions = false;\n\n           \n            function recursiveList(list, final_list){\n                for(var i=0; i < list.length; i++){\n                    if(typeof(list[i]) === 'object'){\n                        recursiveList(list[i], final_list);\n                    }\n                    if(typeof(list[i]) == 'number'){\n                        final_list.push(list[i]);   \n                                  \t\n                    }\n                }\n                return final_list;\n            }\n\n            function BinaryBotPrivateRun(f, arg) {\n                if (f) return f(arg);\n                return false;\n            }\n            function BinaryBotPrivateTickAnalysis() {\n                var currentTickTime = Bot.getLastTick(true);\n                while (currentTickTime === 'MarketIsClosed') {\n                    sleep(5);\n                    currentTickTime = Bot.getLastTick(true);\n                }\n                currentTickTime = currentTickTime.epoch;\n                if (currentTickTime === BinaryBotPrivateLastTickTime) {\n                    return;\n                }\n                BinaryBotPrivateLastTickTime = currentTickTime;\n                for (var BinaryBotPrivateI = 0; BinaryBotPrivateI < BinaryBotPrivateTickAnalysisList.length; BinaryBotPrivateI++) {\n                    BinaryBotPrivateRun(BinaryBotPrivateTickAnalysisList[BinaryBotPrivateI]);\n                }\n            }\n            var BinaryBotPrivateLimitations = ${JSON.stringify(limitations)};\n            ${Blockly.JavaScript.workspaceToCode(this.workspace)}\n            BinaryBotPrivateRun(BinaryBotPrivateInit);\n            while (true) {\n                BinaryBotPrivateTickAnalysis();\n                BinaryBotPrivateRun(BinaryBotPrivateStart);\n                if (!BinaryBotPrivateHasCalledTradeOptions) {\n                    sleep(1);\n                    continue;\n                }\n                while (watch('before')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateBeforePurchase);\n                }\n                while (watch('during')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateDuringPurchase);\n                }\n                BinaryBotPrivateTickAnalysis();\n                if (!BinaryBotPrivateRun(BinaryBotPrivateAfterPurchase)) {\n                    break;\n                }\n            }`;\n    }\n\n    /**\n     * Instructs the interpreter to stop the bot. If there is an active trade\n     * that trade will be completed first to reflect correct contract status in UI.\n     */\n    async stopBot() {\n        api_base.setIsRunning(false);\n\n        await this.interpreter.stop();\n        this.is_bot_running = false;\n        this.interpreter = null;\n        this.interpreter = Interpreter();\n        await this.interpreter.bot.tradeEngine.watchTicks(this.symbol);\n    }\n\n    /**\n     * Immediately instructs the interpreter to terminate the WS connection and bot.\n     */\n    async terminateBot() {\n        if (this.interpreter) {\n            await this.interpreter.terminateSession();\n            this.interpreter = null;\n            this.interpreter = Interpreter();\n            await this.interpreter.bot.tradeEngine.watchTicks(this.symbol);\n        }\n    }\n\n    terminateConnection = () => {\n        api_base.terminate();\n    };\n\n    /**\n     * Unselects any selected block before running the bot.\n     */\n    // eslint-disable-next-line class-methods-use-this\n    unselectBlocks() {\n        if (Blockly.selected) {\n            Blockly.selected.unselect();\n        }\n        return true;\n    }\n\n    /**\n     * Disable blocks outside of any main or independent blocks.\n     */\n    disableStrayBlocks() {\n        const top_blocks = this.workspace.getTopBlocks();\n\n        top_blocks.forEach(block => {\n            if (!block.isMainBlock() && !block.isIndependentBlock()) {\n                this.disableBlocksRecursively(block);\n            }\n        });\n\n        return true;\n    }\n\n    /**\n     * Disable blocks and their optional children.\n     */\n    disableBlocksRecursively(block) {\n        block.setDisabled(true);\n        if (block.nextConnection?.targetConnection) {\n            this.disableBlocksRecursively(block.nextConnection.targetConnection.sourceBlock_);\n        }\n    }\n\n    /**\n     * Check if there are any blocks highlighted for errors.\n     */\n    checkForErroredBlocks() {\n        // Force a check on value inputs.\n        this.valueInputLimitationsListener({}, true);\n\n        const all_blocks = this.workspace.getAllBlocks(true);\n        const error_blocks = all_blocks\n            .filter(block => block.is_error_highlighted && !block.disabled)\n            // filter out duplicated error message\n            .filter((block, index, self) => index === self.findIndex(b => b.error_message === block.error_message));\n\n        if (!error_blocks.length) {\n            return true;\n        }\n\n        this.workspace.centerOnBlock(error_blocks[0].id);\n        error_blocks.forEach(block => {\n            globalObserver.emit('ui.log.error', block.error_message);\n        });\n\n        return false;\n    }\n\n    centerAndHighlightBlock(block_id, should_animate = false) {\n        const block_to_highlight = this.workspace.getBlockById(block_id);\n\n        if (!block_to_highlight) {\n            return;\n        }\n\n        const all_blocks = this.workspace.getAllBlocks();\n\n        all_blocks.forEach(block => block.setErrorHighlighted(false));\n        if (should_animate) {\n            block_to_highlight.blink();\n        }\n        block_to_highlight.setErrorHighlighted(true);\n\n        this.workspace.centerOnBlock(block_to_highlight.id);\n    }\n\n    unHighlightAllBlocks() {\n        this.workspace?.getAllBlocks().forEach(block => block.setErrorHighlighted(false));\n    }\n\n    /**\n     * Checks whether the workspace contains all required blocks before running the strategy.\n     */\n    checkForRequiredBlocks() {\n        return isAllRequiredBlocksEnabled(this.workspace);\n    }\n\n    /**\n     * Checks all blocks in the workspace to see if they need to be highlighted\n     * in case one of their inputs is not populated, returns an empty value, or doesn't\n     * pass the custom validator.\n     * Note: The value passed to the custom validator is always a string value\n     * @param {Blockly.Event} event Workspace event\n     */\n    valueInputLimitationsListener(event, force_check = false) {\n        if (!force_check && (!this.workspace || this.workspace.isDragging())) {\n            return;\n        }\n\n        Blockly.JavaScript.init(this.workspace);\n\n        if (force_check) {\n            Blockly.hideChaff(false);\n        }\n\n        const isGlobalEndDragEvent = () => event.type === Blockly.Events.END_DRAG;\n        const isGlobalDeleteEvent = () => event.type === Blockly.Events.BLOCK_DELETE;\n        const isGlobalCreateEvent = () => event.type === Blockly.Events.BLOCK_CREATE;\n        const isClickEvent = () =>\n            event.type === Blockly.Events.UI && (event.element === 'click' || event.element === 'selected');\n        const isChangeEvent = b => event.type === Blockly.Events.BLOCK_CHANGE && event.blockId === b.id;\n        const isChangeInMyInputs = b => {\n            if (event.type === Blockly.Events.BLOCK_CHANGE) {\n                return b.inputList.some(input => {\n                    if (input.connection) {\n                        const target_block = input.connection.targetBlock();\n                        return target_block && event.blockId === target_block.id;\n                    }\n                    return false;\n                });\n            }\n            return false;\n        };\n        const isParentEnabledEvent = b => {\n            if (event.type === Blockly.Events.BLOCK_CHANGE && event.element === 'disabled') {\n                let parent_block = b.getParent();\n\n                while (parent_block !== null) {\n                    if (parent_block.id === event.blockId) {\n                        return true;\n                    }\n\n                    parent_block = parent_block.getParent();\n                }\n            }\n            return false;\n        };\n\n        this.workspace.getAllBlocks(true).forEach(block => {\n            if (\n                force_check ||\n                isGlobalEndDragEvent() ||\n                isGlobalDeleteEvent() ||\n                isGlobalCreateEvent() ||\n                isClickEvent() ||\n                isChangeEvent(block) ||\n                isChangeInMyInputs(block) ||\n                isParentEnabledEvent(block)\n            ) {\n                // Unhighlight disabled blocks and their optional children.\n                if (block.disabled) {\n                    const unhighlightRecursively = child_blocks => {\n                        child_blocks.forEach(child_block => {\n                            child_block.setErrorHighlighted(false);\n                            unhighlightRecursively(child_block.getChildren());\n                        });\n                    };\n\n                    unhighlightRecursively([block]);\n                    return;\n                }\n\n                // No required inputs, ignore this block.\n                if (!block.getRequiredValueInputs) {\n                    return;\n                }\n\n                const required_inputs_object = block.getRequiredValueInputs();\n                const required_input_names = Object.keys(required_inputs_object);\n                const should_highlight = required_input_names.some(input_name => {\n                    const is_selected = Blockly.selected === block; // Don't highlight selected blocks.\n                    const is_disabled = block.disabled || block.getInheritedDisabled(); // Don't highlight disabled blocks.\n\n                    if (is_selected || is_disabled) {\n                        return false;\n                    }\n\n                    // Don't unhighlight collapsed blocks with highlighted descendants.\n                    if (block.isCollapsed() && block.hasErrorHighlightedDescendant()) {\n                        return true;\n                    }\n\n                    const input = block.getInput(input_name);\n\n                    if (!input && !block.domToMutation) {\n                        // eslint-disable-next-line no-console\n                        console.warn('Detected a non-existent required input.', {\n                            input_name,\n                            type: block.type,\n                        });\n                    } else if (input.connection) {\n                        const order = Blockly.JavaScript.ORDER_ATOMIC;\n                        const value = Blockly.JavaScript.valueToCode(block, input_name, order);\n                        const inputValidatorFn = required_inputs_object[input_name];\n\n                        // If a custom validator was supplied, use this to determine whether\n                        // the block should be highlighted.\n                        if (typeof inputValidatorFn === 'function') {\n                            return !!inputValidatorFn(value);\n                        }\n\n                        // If there's no custom validator, only check if input was populated and\n                        // doesn't return an empty value.\n                        return !value;\n                    }\n\n                    return true;\n                });\n\n                if (should_highlight) {\n                    // Remove select highlight in favour of error highlight.\n                    block.removeSelect();\n                }\n\n                block.setErrorHighlighted(should_highlight, block.error_message || undefined);\n\n                // Automatically expand blocks that have been highlighted.\n                if (force_check && (block.is_error_highlighted || block.hasErrorHighlightedDescendant())) {\n                    let current_collapsed_block = block;\n                    while (current_collapsed_block) {\n                        current_collapsed_block.setCollapsed(false);\n                        current_collapsed_block = current_collapsed_block.getParent();\n                    }\n                }\n            }\n        });\n    }\n\n    /**\n     * Checks whether the workspace contains non-silent notification blocks. Returns array of names for audio files to be played.\n     */\n    getStrategySounds() {\n        const all_blocks = this.workspace.getAllBlocks();\n        const notify_blocks = all_blocks.filter(block => block.type === 'notify');\n        const strategy_sounds = [];\n\n        notify_blocks.forEach(block => {\n            const selected_sound = block.inputList[0].fieldRow[3].value_;\n\n            if (selected_sound !== 'silent') {\n                strategy_sounds.push(selected_sound);\n            }\n        });\n\n        return strategy_sounds;\n    }\n\n    static handleDragOver(event) {\n        event.stopPropagation();\n        event.preventDefault();\n        event.dataTransfer.dropEffect = 'copy'; // eslint-disable-line no-param-reassign\n    }\n\n    static handleDropOver(event, handleFileChange) {\n        const main_workspace_dom = document.getElementById('scratch_div');\n        const local_drag_zone = document.getElementById('load-strategy__local-dropzone-area');\n\n        if (main_workspace_dom.contains(event.target)) {\n            handleFileChange(event);\n        } else if (local_drag_zone && local_drag_zone.contains(event.target)) {\n            handleFileChange(event, false);\n        } else {\n            event.stopPropagation();\n            event.preventDefault();\n            event.dataTransfer.effectAllowed = 'none';\n            event.dataTransfer.dropEffect = 'none';\n        }\n    }\n}\n\nexport default new DBot();\n","// @deriv/bot: Set the minimum width of a statement block to be wider than default.\nBlockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT = 100 * Blockly.BlockSvg.GRID_UNIT;\n\n// @deriv/bot: Root block hat replaces with standard rounded corner\nBlockly.BlockSvg.START_HAT_PATH = `m 0,${Blockly.BlockSvg.CORNER_RADIUS} A ${Blockly.BlockSvg.CORNER_RADIUS}, ${Blockly.BlockSvg.CORNER_RADIUS} 0 0,1 ${Blockly.BlockSvg.CORNER_RADIUS},0`;\n\n// @deriv/bot: Changed the height of a row in a statement block to be 10.\nBlockly.BlockSvg.EXTRA_STATEMENT_ROW_Y = 10 * Blockly.BlockSvg.GRID_UNIT;\n\n// @deriv/bot: visual improvement: changed editable field padding from 8 to 16\nBlockly.BlockSvg.EDITABLE_FIELD_PADDING = 16;\n\n/**\n * Change the colour of a block.\n */\nBlockly.BlockSvg.prototype.updateColour = function () {\n    let strokeColour = this.getColourTertiary();\n    const renderShadowed = this.isShadow() && !Blockly.scratchBlocksUtils.isShadowArgumentReporter(this);\n\n    if (renderShadowed && this.parentBlock_) {\n        // Pull shadow block stroke colour from parent block's tertiary if possible.\n        strokeColour = this.parentBlock_.getColourTertiary();\n        // Special case: if we contain a colour field, set to a special stroke colour.\n        if (\n            this.inputList[0] &&\n            this.inputList[0].fieldRow[0] &&\n            (this.inputList[0].fieldRow[0] instanceof Blockly.FieldColour ||\n                this.inputList[0].fieldRow[0] instanceof Blockly.FieldColourSlider)\n        ) {\n            strokeColour = Blockly.Colours.colourPickerStroke;\n        }\n    }\n\n    // Render block stroke\n    this.svgPath_.setAttribute('stroke', strokeColour);\n    let fillColour = this.getColour();\n\n    // Render block fill\n    if (this.isGlowingBlock_ || renderShadowed) {\n        // Use the block's shadow colour if possible.\n        if (this.getShadowColour()) {\n            fillColour = this.getShadowColour();\n        } else {\n            fillColour = this.getColourSecondary();\n        }\n    }\n    this.svgPath_.setAttribute('fill', fillColour);\n\n    // Render opacity\n    this.svgPath_.setAttribute('fill-opacity', this.getOpacity());\n\n    // Update colours of input shapes.\n    // eslint-disable-next-line no-cond-assign\n    for (let i = 0, input; (input = this.inputList[i]); i++) {\n        if (input.outlinePath) {\n            input.outlinePath.setAttribute('fill', this.getColourTertiary());\n        }\n    }\n\n    // Render icon(s) if applicable\n    const icons = this.getIcons();\n    for (let i = 0; i < icons.length; i++) {\n        icons[i].updateColour();\n    }\n\n    // Bump every dropdown to change its colour.\n    // eslint-disable-next-line no-cond-assign\n    for (let x = 0, input; (input = this.inputList[x]); x++) {\n        // eslint-disable-next-line no-cond-assign\n        for (let y = 0, field; (field = input.fieldRow[y]); y++) {\n            field.setText(null);\n        }\n    }\n    // deriv-bot: Update colours of input shapes to a fixed value of #FFF.\n    this.inputList.forEach(input => {\n        if (input.outlinePath) {\n            input.outlinePath.setAttribute('fill', 'var(--state-normal)');\n            input.outlinePath.setAttribute('stroke', '#6d7278');\n            input.outlinePath.setAttribute('stroke-width', '0.3px');\n        }\n    });\n};\n\n/**\n * For a block with output,\n * determine start and end padding, based on connected inputs.\n * Padding will depend on the shape of the output, the shape of the input,\n * and possibly the size of the input.\n * @param {!Array.<!Array.<!Object>>} input_rows Partially calculated rows.\n */\nBlockly.BlockSvg.prototype.computeOutputPadding_ = function (input_rows) {\n    // Only apply to blocks with outputs and not single fields (shadows).\n    if (\n        !this.getOutputShape() ||\n        !this.outputConnection ||\n        (this.isShadow() && !Blockly.scratchBlocksUtils.isShadowArgumentReporter(this))\n    ) {\n        return;\n    }\n\n    // Blocks with outputs must have single row to be padded.\n    if (input_rows.length > 1) {\n        return;\n    }\n\n    const row = input_rows[0];\n    const shape = this.getOutputShape();\n\n    // Reset any padding: it's about to be set.\n    row.paddingStart = 0;\n    row.paddingEnd = 0;\n\n    // Start row padding: based on first input or first field.\n    const firstInput = row[0];\n    const firstField = firstInput.fieldRow[0];\n    let otherShape;\n\n    // In checking the left/start side, a field takes precedence over any input.\n    // That's because a field will be rendered before any value input.\n    if (firstField) {\n        otherShape = 0; // Field comes first in the row.\n    } else {\n        // Value input comes first in the row.\n        const inputConnection = firstInput.connection;\n\n        if (!inputConnection) {\n            // @deriv/bot: Don't collapse if there's no connection.\n            return;\n        } else if (!inputConnection.targetConnection) {\n            // Not connected: use the drawn shape.\n            otherShape = inputConnection.getOutputShape();\n        } else {\n            // Connected: use the connected block's output shape.\n            otherShape = inputConnection.targetConnection.getSourceBlock().getOutputShape();\n        }\n\n        // Special case for hexagonal output: if the connection is larger height\n        // than a standard reporter, add some start padding.\n        // https://github.com/LLK/scratch-blocks/issues/376\n        if (shape === Blockly.OUTPUT_SHAPE_HEXAGONAL && otherShape !== Blockly.OUTPUT_SHAPE_HEXAGONAL) {\n            const deltaHeight = firstInput.renderHeight - Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;\n\n            // One grid unit per level of nesting.\n            row.paddingStart += deltaHeight / 2;\n        }\n    }\n\n    row.paddingStart += Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[shape][otherShape];\n\n    // End row padding: based on last input or last field.\n    const lastInput = row[row.length - 1];\n\n    // In checking the right/end side, any value input takes precedence over any field.\n    // That's because fields are rendered before inputs...the last item\n    // in the row will be an input, if one exists.\n    if (lastInput.connection) {\n        // Value input last in the row.\n        const inputConnection = lastInput.connection;\n\n        if (!inputConnection.targetConnection) {\n            // Not connected: use the drawn shape.\n            otherShape = inputConnection.getOutputShape();\n        } else {\n            // Connected: use the connected block's output shape.\n            otherShape = inputConnection.targetConnection.getSourceBlock().getOutputShape();\n        }\n        // Special case for hexagonal output: if the connection is larger height\n        // than a standard reporter, add some end padding.\n        // https://github.com/LLK/scratch-blocks/issues/376\n        if (shape === Blockly.OUTPUT_SHAPE_HEXAGONAL && otherShape !== Blockly.OUTPUT_SHAPE_HEXAGONAL) {\n            const deltaHeight = lastInput.renderHeight - Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;\n\n            // One grid unit per level of nesting.\n            row.paddingEnd += deltaHeight / 2;\n        }\n    } else {\n        // No input in this row - mark as field.\n        otherShape = 0;\n    }\n\n    row.paddingEnd += Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[shape][otherShape];\n};\n","// @deriv/bot: make all input shapes rounded\nBlockly.Connection.prototype.getOutputShape = function () {\n    return Blockly.OUTPUT_SHAPE_ROUND;\n};\n","/**\n * ENUM for categories.\n * @const\n */\nBlockly.Categories = {\n    Trade_Definition: 'trade_parameters',\n    Before_Purchase: 'purchase_conditions',\n    During_Purchase: 'sell_conditions',\n    After_Purchase: 'trade_results',\n    Mathematical: 'math',\n    Logic: 'logic',\n    Text: 'text',\n    Variables: 'variables',\n    Functions: 'custom_functions',\n    List: 'lists',\n    Indicators: 'indicators',\n    Time: 'time',\n    Tick_Analysis: 'technical_analysis',\n    Candle: 'candle',\n    Miscellaneous: 'miscellaneous',\n    Loop: 'loops',\n};\n/**\n * Number of pixels the mouse must move before a drag starts.\n */\nBlockly.DRAG_RADIUS = 3;\n\n/**\n * Number of pixels the mouse must move before a drag/scroll starts from the\n * flyout.  Because the drag-intention is determined when this is reached, it is\n * larger than Blockly.DRAG_RADIUS so that the drag-direction is clearer.\n */\nBlockly.FLYOUT_DRAG_RADIUS = 1;\n","/**\n * Array making up the CSS content for Blockly.\n */\nBlockly.Css.CONTENT = [\n    '@keyframes blinkEffect {',\n    '0% {',\n    'stroke: var(--status-danger);',\n    'stroke-width: 5px;',\n    '}',\n    '50% {',\n    'stroke: var(--status-warning);',\n    'stroke-width: 8px;',\n    '}',\n    '100% {',\n    'stroke: var(--status-danger);',\n    'stroke-width: 5px;',\n    '}',\n    '}',\n\n    '.block--error-highlighted > .blocklyPath {',\n    'stroke: var(--status-danger);',\n    'stroke-width: 5px;',\n    '}',\n\n    '@keyframes fade-in-out {',\n    '0%{',\n    'stroke-opacity: 0;',\n    '}',\n    '50%{',\n    'stroke-opacity: 1;',\n    'stroke-width: 6px;',\n    '}',\n    '100%{',\n    'stroke-opacity: 0;',\n    '}}',\n\n    '.block--execution-highlighted > .blocklyPath {',\n    'stroke: #89B2AF;',\n    'animation: fade-in-out 1.5s',\n    '}',\n\n    '.block--blink > .blocklyPath {',\n    'animation: blinkEffect 1s infinite;',\n    '}',\n\n    '.blocklySvg {',\n    'outline: none;',\n    'overflow: hidden;' /* IE overflows by default. */,\n    'position: absolute;',\n    'display: block;',\n    '}',\n\n    /* Necessary to position the drag surface */\n    '.blocklyRelativeWrapper {',\n    'position: relative;',\n    'width: 100%;',\n    'height: 100%;',\n    '}',\n\n    '.blocklyWidgetDiv {',\n    'display: none;',\n    'position: absolute;',\n    'z-index: 99999;' /* big value for bootstrap3 compatibility */,\n    '}',\n\n    '.injectionDiv {',\n    'height: calc(100vh - 11rem);',\n    'position: relative;',\n    'overflow: hidden;' /* So blocks in drag surface disappear at edges */,\n    'touch-action: none;',\n    '}',\n\n    '.blocklyNonSelectable {',\n    'user-select: none;',\n    '-moz-user-select: none;',\n    '-webkit-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.blocklyWidgetDiv.fieldTextInput {',\n    'overflow: hidden;',\n    'border: 1px solid;',\n    'box-sizing: border-box;',\n    'transform-origin: 0 0;',\n    '-ms-transform-origin: 0 0;',\n    '-moz-transform-origin: 0 0;',\n    '-webkit-transform-origin: 0 0;',\n    '}',\n\n    '.blocklyWidgetDiv.fieldTextInput.removableTextInput {',\n    'overflow: visible;',\n    '}',\n\n    '.blocklyTextDropDownArrow {',\n    'position: absolute;',\n    '}',\n\n    '.blocklyTextRemoveIcon {',\n    'position: absolute;',\n    'width: 24px;',\n    'height: 24px;',\n    'top: -40px;',\n    'left: 50%;',\n    'margin-left: -12px;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyNonSelectable {',\n    'user-select: none;',\n    '-moz-user-select: none;',\n    '-webkit-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.blocklyWsDragSurface {',\n    'display: none;',\n    'position: absolute;',\n    'top: 0;',\n    'left: 0;',\n    '}',\n    /* Added as a separate rule with multiple classes to make it more specific\n     than a bootstrap rule that selects svg:root. See issue #1275 for context.\n  */\n    '.blocklyWsDragSurface.blocklyOverflowVisible {',\n    'overflow: visible;',\n    '}',\n\n    '.blocklyBlockDragSurface {',\n    'display: none;',\n    'position: absolute;',\n    'top: 0;',\n    'left: 0;',\n    'right: 0;',\n    'bottom: 0;',\n    'overflow: visible !important;',\n    'z-index: 50;' /* Display above the toolbox */,\n    '}',\n\n    '.blocklyTooltipDiv {',\n    'min-height: 34px;',\n    'background-color: #d6dadb;',\n    'border-radius: 4px;',\n    'color: #333333;',\n    'padding: 8px;',\n    'font-size: 12px;',\n    'font-family: \"IBM Plex Sans\";',\n    'line-height: 1.5;',\n    'letter-spacing: normal;',\n    'position: absolute;',\n    'z-index: 100000;' /* big value for bootstrap3 compatibility */,\n    '}',\n\n    '.blocklyDropDownDiv {',\n    'position: fixed;',\n    'left: 0;',\n    'top: 0;',\n    'z-index: 1000;',\n    'display: none;',\n    'border: 1px solid;',\n    'border-radius: 4px;',\n    `box-shadow: 0px 0px 8px 1px ${Blockly.Colours.dropDownShadow};`,\n    'padding: 4px;',\n    '-webkit-user-select: none;',\n    'min-height: 15px',\n    '}',\n\n    '.blocklyDropDownContent {',\n    'max-height: 300px;', // @todo: spec for maximum height.\n    'overflow: auto;',\n    '}',\n\n    '.blocklyDropDownArrow {',\n    'position: absolute;',\n    'left: 0;',\n    'top: 0;',\n    'width: 16px;',\n    'height: 16px;',\n    'z-index: -1;',\n    'background-color: inherit;',\n    'border-color: inherit;',\n    '}',\n\n    '.blocklyDropDownButton {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'margin: 4px;',\n    'border-radius: 4px;',\n    'outline: none;',\n    'border: 1px solid;',\n    'transition: box-shadow .1s;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyDropDownButtonHover {',\n    `box-shadow: 0px 0px 0px 4px ${Blockly.Colours.fieldShadow};`,\n    '}',\n\n    '.blocklyDropDownButton:active {',\n    `box-shadow: 0px 0px 0px 6px ${Blockly.Colours.fieldShadow};`,\n    '}',\n\n    '.blocklyDropDownButton > img {',\n    'width: 80%;',\n    'height: 80%;',\n    'margin-top: 5%',\n    '}',\n\n    '.blocklyDropDownPlaceholder {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'margin: 4px;',\n    '}',\n\n    '.blocklyNumPadButton {',\n    'display: inline-block;',\n    'float: left;',\n    'padding: 0;',\n    'width: 48px;',\n    'height: 48px;',\n    'margin: 4px;',\n    'border-radius: 4px;',\n    'background: $colour_numPadBackground;',\n    'color: #333333;',\n    'outline: none;',\n    'border: 1px solid $colour_numPadBorder;',\n    'cursor: pointer;',\n    'font-weight: 600;',\n    'font-size: 12pt;',\n    '-webkit-tap-highlight-color: rgba(0,0,0,0);',\n    '}',\n\n    '.blocklyNumPadButton > img {',\n    'margin-top: 10%;',\n    'width: 80%;',\n    'height: 80%;',\n    'filter: invert(1);',\n    '}',\n\n    '.blocklyNumPadButton:active {',\n    'background: $colour_numPadActiveBackground;',\n    '-webkit-tap-highlight-color: rgba(0,0,0,0);',\n    '}',\n\n    '.arrowTop {',\n    'border-top: 1px solid;',\n    'border-left: 1px solid;',\n    'border-top-left-radius: 4px;',\n    'border-color: inherit;',\n    '}',\n\n    '.arrowBottom {',\n    'border-bottom: 1px solid;',\n    'border-right: 1px solid;',\n    'border-bottom-right-radius: 4px;',\n    'border-color: inherit;',\n    '}',\n\n    '.valueReportBox {',\n    'min-width: 50px;',\n    'max-width: 300px;',\n    'max-height: 200px;',\n    'overflow: auto;',\n    'word-wrap: break-word;',\n    'text-align: center;',\n    'font-size: .8em;',\n    '}',\n\n    '.blocklyResizeSE {',\n    'cursor: se-resize;',\n    'fill: #aaa;',\n    '}',\n\n    '.blocklyResizeSW {',\n    'cursor: sw-resize;',\n    'fill: #aaa;',\n    '}',\n\n    '.blocklyResizeLine {',\n    'stroke: #888;',\n    'stroke-width: 1;',\n    '}',\n\n    '.blocklyHighlightedConnectionPath {',\n    'fill: none;',\n    'stroke: #fc3;',\n    'stroke-width: 4px;',\n    '}',\n\n    '.blocklyPath {',\n    'stroke-width: 0.3px;',\n\n    '}',\n\n    '.blocklySelected>.blocklyPath {',\n    'stroke: #ffc358;',\n    'stroke-width: 3px;',\n    '}',\n\n    '.blocklySelected>.blocklyPathLight {',\n    'display: none;',\n    '}',\n\n    '.blocklyDraggable {',\n    /* backup for browsers (e.g. IE11) that don't support grab */\n    'cursor: url(\"<<<PATH>>>/handopen.cur\"), auto;',\n    'cursor: grab;',\n    'cursor: -webkit-grab;',\n    'cursor: -moz-grab;',\n    '}',\n\n    '.blocklyDragging {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    'cursor: -moz-grabbing;',\n    '}',\n    /* Changes cursor on mouse down. Not effective in Firefox because of\n    https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n    '.blocklyDraggable:active {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    'cursor: -moz-grabbing;',\n    '}',\n    /* Change the cursor on the whole drag surface in case the mouse gets\n     ahead of block during a drag. This way the cursor is still a closed hand.\n   */\n    '.blocklyBlockDragSurface .blocklyDraggable {',\n    /* backup for browsers (e.g. IE11) that don't support grabbing */\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    'cursor: -moz-grabbing;',\n    '}',\n\n    '.blocklyDragging.blocklyDraggingDelete {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n    '}',\n\n    '.blocklyDragging.blocklyDraggingMouseThrough {',\n    'pointer-events: none;',\n    '}',\n\n    '.blocklyToolboxDelete {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n    '}',\n\n    '.blocklyToolboxGrab {',\n    'cursor: url(\"<<<PATH>>>/handclosed.cur\"), auto;',\n    'cursor: grabbing;',\n    'cursor: -webkit-grabbing;',\n    '}',\n\n    '.blocklyDragging>.blocklyPath,',\n    '.blocklyDragging>.blocklyPathLight {',\n    'fill-opacity: 1.0;',\n    'stroke-opacity: 1.0;',\n    '}',\n\n    '.blocklyDragging>.blocklyPath {',\n    '}',\n\n    '.blocklyDisabled>.blocklyPath {',\n    'fill-opacity: .5;',\n    'stroke-opacity: .5;',\n    '}',\n\n    '.blocklyInsertionMarker>.blocklyPath {',\n    'stroke: none;',\n    '}',\n\n    '.blocklyText {',\n    'fill: #333333;',\n    'font-family: inherit;',\n    'font-size: var(--text-size-s);',\n    'font-weight: normal;',\n    'font-stretch: normal;',\n    'font-style: normal;',\n    'line-height: 1.5;',\n    'letter-spacing: normal;',\n    '}',\n\n    '.blocklyTextTruncated {',\n    'font-size: 11pt;',\n    '}',\n\n    '.blocklyNonEditableText>text {',\n    'pointer-events: none;',\n    '}',\n\n    '.blocklyNonEditableText>text,',\n    '.blocklyEditableText>text {',\n    'fill: var(--text-prominent);',\n    // 'fill: #575E75 !important;',\n    '}',\n\n    '.blocklyEditableText>.blocklyEditableLabel {',\n    'fill: var(--text-prominent);',\n    '}',\n\n    '.blocklyDropdownText {',\n    'fill: var(--text-prominent)!important;',\n    '}',\n\n    '.blocklyBubbleText {',\n    'fill: $colour_text;',\n    '}',\n    '.blocklyFlyout {',\n    'position: absolute;',\n    'z-index: 20;',\n    '}',\n    '.blocklyFlyoutButton {',\n    'fill: none;',\n    'pointer-events: all;',\n    '}',\n\n    '.blocklyFlyoutButtonBackground {',\n    'stroke: #c6c6c6;',\n    '}',\n\n    '.blocklyFlyoutButton .blocklyText {',\n    'fill: $colour_text;',\n    '}',\n\n    '.blocklyFlyoutButtonShadow {',\n    'fill: transparent;',\n    '}',\n\n    '.blocklyFlyoutButton:hover {',\n    'fill: white;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyFlyoutLabel {',\n    'cursor: default;',\n    '}',\n\n    '.blocklyFlyoutLabelBackground {',\n    'opacity: 0;',\n    '}',\n\n    '.blocklyFlyoutLabelText {',\n    'font-size: 14pt;',\n    'fill: #575E75;',\n    'font-weight: bold;',\n    '}',\n\n    /*\n    Don't allow users to select text.  It gets annoying when trying to\n    drag a block and selected text moves instead.\n  */\n    '.blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {',\n    'user-select: none;',\n    '-moz-user-select: none;',\n    '-webkit-user-select: none;',\n    'cursor: inherit;',\n    '}',\n\n    '.blocklyHidden {',\n    'display: none;',\n    '}',\n\n    '.blocklyFieldDropdown:not(.blocklyHidden) {',\n    'display: block;',\n    '}',\n\n    '.blocklyIconGroup {',\n    'cursor: default;',\n    '}',\n\n    '.blocklyIconGroup:not(:hover),',\n    '.blocklyIconGroupReadonly {',\n    'opacity: .6;',\n    '}',\n\n    '.blocklyIconShape {',\n    'fill: #00f;',\n    'stroke: #fff;',\n    'stroke-width: 1px;',\n    '}',\n\n    '.blocklyIconSymbol {',\n    'fill: #fff;',\n    '}',\n\n    '.blocklyMinimalBody {',\n    'margin: 0;',\n    'padding: 0;',\n    '}',\n\n    '.blocklyCommentForeignObject {',\n    'position: relative;',\n    'z-index: 0;',\n    '}',\n\n    '.blocklyCommentRect {',\n    'fill: #E7DE8E;',\n    'stroke: #bcA903;',\n    'stroke-width: 1px',\n    '}',\n\n    '.blocklyCommentTarget {',\n    'fill: transparent;',\n    'stroke: #bcA903;',\n    '}',\n\n    '.blocklyCommentTargetFocused {',\n    'fill: none;',\n    '}',\n\n    '.blocklyCommentHandleTarget {',\n    'fill: none;',\n    '}',\n\n    '.blocklyCommentHandleTargetFocused {',\n    'fill: transparent;',\n    '}',\n\n    '.blocklyFocused>.blocklyCommentRect {',\n    'fill: #B9B272;',\n    'stroke: #B9B272;',\n    '}',\n\n    '.blocklySelected>.blocklyCommentTarget {',\n    'stroke: #fc3;',\n    'stroke-width: 3px;',\n    '}',\n\n    '.blocklyCommentTextarea {',\n    'background-color: #fef49c;',\n    'border: 0;',\n    'outline: 0;',\n    'margin: 0;',\n    'padding: 3px;',\n    'resize: none;',\n    'display: block;',\n    'overflow: hidden;',\n    '}',\n\n    '.blocklyCommentDeleteIcon {',\n    'cursor: pointer;',\n    'fill: #000;',\n    'display: none',\n    '}',\n\n    '.blocklySelected > .blocklyCommentDeleteIcon {',\n    'display: block',\n    '}',\n\n    '.blocklyDeleteIconShape {',\n    'fill: #000;',\n    'stroke: #000;',\n    'stroke-width: 1px;',\n    '}',\n\n    '.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {',\n    'stroke: #fc3;',\n    '}',\n\n    // Scratch Comments\n\n    '.scratchCommentForeignObject {',\n    'position: relative;',\n    '}',\n\n    '.scratchCommentBody {',\n    'background-color: #fef49c;',\n    'border-radius: 4px;',\n    '}',\n\n    '.scratchCommentRect {',\n    'fill: #fef49c;',\n    '}',\n\n    '.scratchCommentTarget {',\n    'fill: transparent;',\n    '}',\n\n    '.scratchWorkspaceCommentBorder {',\n    'stroke: #bcA903;',\n    'stroke-width: 1px;',\n    '}',\n\n    '.scratchCommentTargetFocused {',\n    'fill: none;',\n    '}',\n\n    '.scratchCommentTopBar {',\n    'fill: #000000;',\n    'fill-opacity: 0.1',\n    '}',\n\n    '.scratchCommentText {',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 12pt;',\n    'font-weight: 400;',\n    '}',\n\n    '.scratchCommentTextarea {',\n    'background-color: #fef49c;',\n    'border: 0;',\n    'outline: 0;',\n    'padding: 0;',\n    'resize: none;',\n    'overflow: hidden;',\n    '}',\n\n    '.scratchCommentResizeSE {',\n    'cursor: se-resize;',\n    'fill: transparent;',\n    '}',\n\n    '.scratchCommentResizeSW {',\n    'cursor: sw-resize;',\n    'fill: transparent;',\n    '}',\n\n    '.blocklyHtmlInput {',\n    'border: none;',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 12pt;',\n    'height: 100%;',\n    'margin: 0;',\n    'outline: none;',\n    'box-sizing: border-box;',\n    'width: 100%;',\n    'text-align: center;',\n    'color: $colour_text;',\n    'font-weight: 500;',\n    '}',\n\n    '.blocklyMainBackground {',\n    'stroke-width: 0;',\n    // 'stroke: #c6c6c6;',  /* Equates to #ddd due to border being off-pixel. */\n    '}',\n\n    '.blocklyMutatorBackground {',\n    'fill: #fff;',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    '}',\n\n    '.blocklyFlyoutBackground {',\n    'fill: $colour_flyout;',\n    'fill-opacity: .8;',\n    '}',\n\n    '.blocklyMainWorkspaceScrollbar {',\n    'z-index: 20;',\n    '}',\n\n    '.blocklyFlyoutScrollbar {',\n    'z-index: 30;',\n    '}',\n\n    '.blocklyScrollbarHorizontal, .blocklyScrollbarVertical {',\n    'position: absolute;',\n    'outline: none;',\n    '}',\n\n    '.blocklyScrollbarBackground {',\n    'opacity: 0;',\n    '}',\n\n    '.blocklyScrollbarHandle {',\n    'fill: $colour_scrollbar;',\n    '}',\n\n    '.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,',\n    '.blocklyScrollbarHandle:hover {',\n    'fill: $colour_scrollbarHover;',\n    '}',\n\n    '.blocklyZoom>image {',\n    'opacity: 1;',\n    '}',\n\n    /* Darken flyout scrollbars due to being on a grey background. */\n    /* By contrast, workspace scrollbars are on a white background. */\n    '.blocklyFlyout .blocklyScrollbarHandle {',\n    'fill: #bbb;',\n    '}',\n\n    '.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,',\n    '.blocklyFlyout .blocklyScrollbarHandle:hover {',\n    'fill: #aaa;',\n    '}',\n\n    '.blocklyInvalidInput {',\n    'background: #faa;',\n    '}',\n\n    '.blocklyAngleCircle {',\n    `stroke: ${Blockly.Colours.motion.tertiary};`,\n    'stroke-width: 1;',\n    `fill: ${Blockly.Colours.motion.secondary};`,\n    '}',\n\n    '.blocklyAngleCenterPoint {',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    'fill: #fff;',\n    '}',\n\n    '.blocklyAngleDragHandle {',\n    'stroke: #fff;',\n    'stroke-width: 5;',\n    'stroke-opacity: 0.25;',\n    'fill: #fff;',\n    'cursor: pointer;',\n    '}',\n\n    '.blocklyAngleDragArrow {',\n    'pointer-events: none',\n    '}',\n\n    '.blocklyAngleMarks {',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    'stroke-opacity: 0.5;',\n    '}',\n\n    '.blocklyAngleGauge {',\n    'fill: #fff;',\n    'fill-opacity: 0.20;',\n    '}',\n\n    '.blocklyAngleLine {',\n    'stroke: #fff;',\n    'stroke-width: 1;',\n    'stroke-linecap: round;',\n    'pointer-events: none;',\n    '}',\n\n    '.blocklyContextMenu {',\n    'border-radius: 4px;',\n    'max-height: 100%;',\n    '}',\n\n    '.blocklyDropdownMenu {',\n    'padding: 0 !important;',\n    '}',\n\n    '.blocklyDropDownNumPad {',\n    'background-color: $colour_numPadBackground;',\n    '}',\n\n    /* Override the default Closure URL. */\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {',\n    'background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;',\n    '}',\n\n    /* Category tree in Toolbox. */\n    '.blocklyToolboxDiv {',\n    'background-color: $colour_toolbox;',\n    'color: $colour_toolboxText;',\n    'overflow-x: visible;',\n    'overflow-y: auto;',\n    'position: absolute;',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'z-index: 40;' /* so blocks go over toolbox when dragging */,\n    '-webkit-tap-highlight-color: transparent;' /* issue #1345 */,\n    '}',\n\n    '.blocklyTreeRoot {',\n    'padding: 4px 0;',\n    '}',\n\n    '.blocklyTreeRoot:focus {',\n    'outline: none;',\n    '}',\n\n    '.blocklyTreeRow {',\n    'height: 22px;',\n    'line-height: 22px;',\n    'margin-bottom: 3px;',\n    'padding-right: 8px;',\n    'white-space: nowrap;',\n    '}',\n\n    '.blocklyHorizontalTree {',\n    'float: left;',\n    'margin: 1px 5px 8px 0;',\n    '}',\n\n    '.blocklyHorizontalTreeRtl {',\n    'float: right;',\n    'margin: 1px 0 8px 5px;',\n    '}',\n\n    '.blocklyToolboxDiv[dir=\"RTL\"] .blocklyTreeRow {',\n    'margin-left: 8px;',\n    '}',\n\n    '.blocklyTreeRow:not(.blocklyTreeSelected):hover {',\n    'background-color: #e4e4e4;',\n    '}',\n\n    '.blocklyTreeSeparator {',\n    'border-bottom: solid #e5e5e5 1px;',\n    'height: 0;',\n    'margin: 5px 0;',\n    '}',\n\n    '.blocklyTreeSeparatorHorizontal {',\n    'border-right: solid #e5e5e5 1px;',\n    'width: 0;',\n    'padding: 5px 0;',\n    'margin: 0 5px;',\n    '}',\n\n    '.blocklyTreeIcon {',\n    'background-image: url(<<<PATH>>>/sprites.png);',\n    'height: 16px;',\n    'vertical-align: middle;',\n    'width: 16px;',\n    '}',\n\n    '.blocklyTreeIconClosedLtr {',\n    'background-position: -32px -1px;',\n    '}',\n\n    '.blocklyTreeIconClosedRtl {',\n    'background-position: 0px -1px;',\n    '}',\n\n    '.blocklyTreeIconOpen {',\n    'background-position: -16px -1px;',\n    '}',\n\n    '.blocklyTreeSelected>.blocklyTreeIconClosedLtr {',\n    'background-position: -32px -17px;',\n    '}',\n\n    '.blocklyTreeSelected>.blocklyTreeIconClosedRtl {',\n    'background-position: 0px -17px;',\n    '}',\n\n    '.blocklyTreeSelected>.blocklyTreeIconOpen {',\n    'background-position: -16px -17px;',\n    '}',\n\n    '.blocklyTreeIconNone,',\n    '.blocklyTreeSelected>.blocklyTreeIconNone {',\n    'background-position: -48px -1px;',\n    '}',\n\n    '.blocklyTreeLabel {',\n    'cursor: default;',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 16px;',\n    'padding: 0 3px;',\n    'vertical-align: middle;',\n    '}',\n\n    '.blocklyToolboxDelete .blocklyTreeLabel {',\n    'cursor: url(\"<<<PATH>>>/handdelete.cur\"), auto;',\n    '}',\n\n    '.blocklyTreeSelected .blocklyTreeLabel {',\n    'color: #fff;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-slider-horizontal {',\n    'margin: 8px;',\n    'height: 22px;',\n    'width: 150px;',\n    'position: relative;',\n    'outline: none;',\n    'border-radius: 11px;',\n    'margin-bottom: 20px;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {',\n    'width: 26px;',\n    'height: 26px;',\n    'top: -1px;',\n    'position: absolute;',\n    'background-color: white;',\n    'border-radius: 100%;',\n    '-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);',\n    '-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);',\n    'box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);',\n    '}',\n\n    '.scratchEyedropper {',\n    'background: none;',\n    'outline: none;',\n    'border: none;',\n    'width: 100%;',\n    'text-align: center;',\n    'border-top: 1px solid #ddd;',\n    'padding-top: 5px;',\n    'cursor: pointer;',\n    '}',\n\n    '.scratchColourPickerLabel {',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 0.65rem;',\n    'color: $colour_toolboxText;',\n    'margin: 8px;',\n    '}',\n\n    '.scratchColourPickerLabelText {',\n    'font-weight: bold;',\n    '}',\n\n    '.scratchColourPickerReadout {',\n    'margin-left: 10px;',\n    '}',\n\n    '.scratchMatrixButtonDiv {',\n    'width: 50%;',\n    'text-align: center;',\n    'float: left;',\n    '}',\n\n    '.scratchNotePickerKeyLabel {',\n    // 'font-family: \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-size: 0.75rem;',\n    'fill: $colour_text;',\n    'pointer-events: none;',\n    '}',\n\n    /* Copied from: goog/css/menu.css */\n    /*\n     * Copyright 2009 The Closure Library Authors. All Rights Reserved.\n     *\n     * Use of this source code is governed by the Apache License, Version 2.0.\n     * See the COPYING file for details.\n     */\n\n    /**\n     * Standard styling for menus created by goog.ui.MenuRenderer.\n     *\n     * @author attila@google.com (Attila Bodis)\n     */\n\n    '.blocklyWidgetDiv .goog-menu {',\n    'background: #fff;',\n    'border-color: #ccc #666 #666 #ccc;',\n    'border-style: solid;',\n    'border-width: 1px;',\n    'cursor: default;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'margin: 0;',\n    'outline: none;',\n    'padding: 4px 0;',\n    'position: absolute;',\n    'overflow-y: auto;',\n    'overflow-x: hidden;',\n    'z-index: 20000;' /* Arbitrary, but some apps depend on it... */,\n    '}',\n\n    '.blocklyDropDownDiv .goog-menu {',\n    'cursor: default;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'outline: none;',\n    'z-index: 20000;' /* Arbitrary, but some apps depend on it... */,\n    '}',\n\n    /* Copied from: goog/css/menuitem.css */\n    /*\n     * Copyright 2009 The Closure Library Authors. All Rights Reserved.\n     *\n     * Use of this source code is governed by the Apache License, Version 2.0.\n     * See the COPYING file for details.\n     */\n\n    /**\n     * Standard styling for menus created by goog.ui.MenuItemRenderer.\n     *\n     * @author attila@google.com (Attila Bodis)\n     */\n\n    /**\n     * State: resting.\n     *\n     * NOTE(mleibman,chrishenry):\n     * The RTL support in Closure is provided via two mechanisms -- \"rtl\" CSS\n     * classes and BiDi flipping done by the CSS compiler.  Closure supports RTL\n     * with or without the use of the CSS compiler.  In order for them not\n     * to conflict with each other, the \"rtl\" CSS classes need to have the #noflip\n     * annotation.  The non-rtl counterparts should ideally have them as well, but,\n     * since .goog-menuitem existed without .goog-menuitem-rtl for so long before\n     * being added, there is a risk of people having templates where they are not\n     * rendering the .goog-menuitem-rtl class when in RTL and instead rely solely\n     * on the BiDi flipping by the CSS compiler.  That's why we're not adding the\n     * #noflip to .goog-menuitem.\n     */\n    '.blocklyWidgetDiv .goog-menuitem {',\n    'color: #000;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'list-style: none;',\n    'margin: 0;',\n    /* 28px on the left for icon or checkbox; 7em on the right for shortcut. */\n    'padding: 4px 7em 4px 28px;',\n    'white-space: nowrap;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-menuitem {',\n    'color: #333333;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    'font-weight: bold;',\n    'list-style: none;',\n    'margin: 0;',\n    'min-height: 24px;',\n    /* 28px on the left for icon or checkbox; 7em on the right for shortcut. */\n    'padding: 4px 7em 4px 28px;',\n    'white-space: nowrap;',\n    '}',\n\n    /* BiDi override for the resting state. */\n    /* #noflip */\n    '.blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl, ',\n    '.blocklyDropDownDiv .goog-menuitem.goog-menuitem-rtl {',\n    /* Flip left/right padding for BiDi. */\n    'padding-left: 7em;',\n    'padding-right: 28px;',\n    '}',\n\n    /* If a menu doesn't have checkable items or items with icons, remove padding. */\n    '.blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,',\n    '.blocklyWidgetDiv .goog-menu-noicon .goog-menuitem, ',\n    '.blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,',\n    '.blocklyDropDownDiv .goog-menu-noicon .goog-menuitem { ',\n    'padding-left: 12px;',\n    '}',\n\n    /*\n     * If a menu doesn't have items with shortcuts, leave just enough room for\n     * submenu arrows, if they are rendered.\n     */\n    '.blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem, ',\n    '.blocklyDropDownDiv .goog-menu-noaccel .goog-menuitem {',\n    'padding-right: 20px;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-menuitem-content ',\n    '.blocklyDropDownDiv .goog-menuitem-content {',\n    'color: #000;',\n    'font: normal 13px \"Helvetica Neue\", Helvetica, sans-serif;',\n    '}',\n\n    /* State: disabled. */\n    '.blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,',\n    '.blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content, ',\n    '.blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-accel,',\n    '.blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {',\n    'color: #ccc !important;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon, ',\n    '.blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {',\n    'opacity: 0.3;',\n    '-moz-opacity: 0.3;',\n    'filter: alpha(opacity=30);',\n    '}',\n\n    /* State: hover. */\n    '.blocklyWidgetDiv .goog-menuitem-highlight,',\n    '.blocklyWidgetDiv .goog-menuitem-hover {',\n    'background-color: #d6e9f8;',\n    /* Use an explicit top and bottom border so that the selection is visible',\n     * in high contrast mode. */\n    'border-color: #d6e9f8;',\n    'border-style: dotted;',\n    'border-width: 1px 0;',\n    'padding-bottom: 3px;',\n    'padding-top: 3px;',\n    '}',\n\n    '.blocklyDropDownDiv .goog-menuitem-highlight,',\n    '.blocklyDropDownDiv .goog-menuitem-hover {',\n    'background-color: rgba(0, 0, 0, 0.2);',\n    '}',\n\n    /* State: selected/checked. */\n    '.blocklyWidgetDiv .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-menuitem-icon, ',\n    '.blocklyDropDownDiv .goog-menuitem-checkbox,',\n    '.blocklyDropDownDiv .goog-menuitem-icon {',\n    'background-repeat: no-repeat;',\n    'height: 16px;',\n    'left: 6px;',\n    'position: absolute;',\n    'right: auto;',\n    'vertical-align: middle;',\n    'width: 16px;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,',\n    '.blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,',\n    '.blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {',\n    /* Client apps may override the URL at which they serve the sprite. */\n    'background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;',\n    'position: static;' /* Scroll with the menu. */,\n    'float: left;',\n    'margin-left: -24px;',\n    '}',\n\n    /* BiDi override for the selected/checked state. */\n    /* #noflip */\n    '.blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,',\n    '.blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,',\n    '.blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,',\n    '.blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {',\n    /* Flip left/right positioning. */\n    'float: right;',\n    'margin-right: -24px;',\n    '}',\n\n    /* Keyboard shortcut (\"accelerator\") style. */\n    '.blocklyWidgetDiv .goog-menuitem-accel, ',\n    '.blocklyDropDownDiv .goog-menuitem-accel {',\n    'color: #999;',\n    /* Keyboard shortcuts are untranslated; always left-to-right. */\n    /* #noflip */\n    'direction: ltr;',\n    'left: auto;',\n    'padding: 0 6px;',\n    'position: absolute;',\n    'right: 0;',\n    'text-align: right;',\n    '}',\n\n    /* BiDi override for shortcut style. */\n    /* #noflip */\n    '.blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel, ',\n    '.blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-accel {',\n    /* Flip left/right positioning and text alignment. */\n    'left: 0;',\n    'right: auto;',\n    'text-align: left;',\n    '}',\n\n    /* Mnemonic styles. */\n    '.blocklyWidgetDiv .goog-menuitem-mnemonic-hint, ',\n    '.blocklyDropDownDiv .goog-menuitem-mnemonic-hint {',\n    'text-decoration: underline;',\n    '}',\n\n    '.blocklyWidgetDiv .goog-menuitem-mnemonic-separator, ',\n    '.blocklyDropDownDiv .goog-menuitem-mnemonic-separator {',\n    'color: #999;',\n    'font-size: 12px;',\n    'padding-left: 4px;',\n    '}',\n\n    /* Copied from: goog/css/menuseparator.css */\n    /*\n     * Copyright 2009 The Closure Library Authors. All Rights Reserved.\n     *\n     * Use of this source code is governed by the Apache License, Version 2.0.\n     * See the COPYING file for details.\n     */\n\n    /**\n     * Standard styling for menus created by goog.ui.MenuSeparatorRenderer.\n     *\n     * @author attila@google.com (Attila Bodis)\n     */\n\n    '.blocklyWidgetDiv .goog-menuseparator, ',\n    '.blocklyDropDownDiv .goog-menuseparator {',\n    'border-top: 1px solid #ccc;',\n    'margin: 4px 0;',\n    'padding: 0;',\n    '}',\n\n    '.blocklyFlyoutCheckbox {',\n    'fill: white;',\n    'stroke: #c8c8c8;',\n    '}',\n\n    '.blocklyFlyoutCheckbox.checked {',\n    `fill: ${Blockly.Colours.motion.primary};`,\n    `stroke: ${Blockly.Colours.motion.tertiary};`,\n    '}',\n\n    '.blocklyFlyoutCheckboxPath {',\n    'stroke: white;',\n    'stroke-width: 3;',\n    'stroke-linecap: round;',\n    'stroke-linejoin: round;',\n    '}',\n\n    '.scratchCategoryMenu {',\n    'width: 60px;',\n    'background: $colour_toolbox;',\n    'color: $colour_toolboxText;',\n    'font-size: .7rem;',\n    'user-select: none;',\n    '-webkit-user-select: none;',\n    '-moz-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.scratchCategoryMenuHorizontal {',\n    'width: 100%;',\n    'height: 50px;',\n    'background: $colour_toolbox;',\n    'color: $colour_toolboxText;',\n    'font-size: .7em;',\n    'user-select: none;',\n    '-webkit-user-select: none;',\n    '-moz-user-select: none;',\n    '-ms-user-select: none;',\n    '}',\n\n    '.scratchCategoryMenuHorizontal .scratchCategoryMenuRow {',\n    'float: left;',\n    'margin: 3px;',\n    '}',\n\n    '.scratchCategoryMenuRow {',\n    '}',\n\n    '.scratchCategoryMenuItem {',\n    'padding: 0.375rem 0px;',\n    'cursor: pointer;',\n    'text-align: center;',\n    '}',\n\n    '.scratchCategoryMenuHorizontal .scratchCategoryMenuItem {',\n    'padding: 6px 5px;',\n    '}',\n\n    '.scratchCategoryMenuItem.categorySelected {',\n    'background: $colour_toolboxSelected;',\n    '}',\n\n    '.scratchCategoryItemBubble {',\n    'width: 1.25rem;',\n    'height: 1.25rem;',\n    'border: 1px solid;',\n    'border-radius: 100%;',\n    'margin: 0 auto 0.125rem;',\n    '}',\n\n    '.scratchCategoryItemIcon {',\n    'width: 1.25rem;',\n    'height: 1.25rem;',\n    'margin: 0 auto 0.125rem;',\n    'background-size: 100%;',\n    '}',\n\n    '.scratchCategoryMenuItem:hover {',\n    'color: $colour_toolboxHover !important;',\n    '}',\n    '',\n];\n","/**\n * Class for an image on a block.\n * @deriv/bot: Blockly implementation vs. Scratch for click handlers\n * @param {string} src The URL of the image.\n * @param {number} width Width of the image.\n * @param {number} height Height of the image.\n * @param {string=} optAlt Optional alt text for when block is collapsed.\n * @param {Function=} optOnClick Optional function to be called when the image\n *     is clicked.  If optOnClick is defined, optAlt must also be defined.\n * @param {boolean=} optFlipRtl Whether to flip the icon in RTL.\n * @extends {Blockly.Field}\n * @constructor\n */\nBlockly.FieldImage = function (src, width, height, optAlt, optOnClick, optFlipRtl) {\n    this.sourceBlock_ = null;\n\n    // Ensure height and width are numbers.  Strings are bad at math.\n    this.height_ = Number(height);\n    this.width_ = Number(width);\n    this.size_ = new goog.math.Size(this.width_, this.height_);\n    this.flipRtl_ = optFlipRtl;\n    this.tooltip_ = '';\n    this.setValue(src);\n    this.setText(optAlt);\n\n    if (typeof optOnClick === 'function') {\n        this.clickHandler_ = optOnClick;\n    }\n};\ngoog.inherits(Blockly.FieldImage, Blockly.Field);\n\n/**\n * Construct a FieldImage from a JSON arg object,\n * dereferencing any string table references.\n * @param {!Object} options A JSON object with options (src, width, height,\n *    alt, and flipRtl).\n * @return {!Blockly.FieldImage} The new field instance.\n * @package\n * @nocollapse\n */\nBlockly.FieldImage.fromJson = function (options) {\n    const src = Blockly.utils.replaceMessageReferences(options.src);\n    const width = Number(Blockly.utils.replaceMessageReferences(options.width));\n    const height = Number(Blockly.utils.replaceMessageReferences(options.height));\n    const alt = Blockly.utils.replaceMessageReferences(options.alt);\n    const flipRtl = !!options.flipRtl;\n    return new Blockly.FieldImage(src, width, height, alt, null, flipRtl);\n};\n\n/**\n * Editable fields are saved by the XML renderer, non-editable fields are not.\n */\nBlockly.FieldImage.prototype.EDITABLE = false;\n\n/**\n * Install this image on a block.\n */\nBlockly.FieldImage.prototype.init = function () {\n    if (this.fieldGroup_) {\n        // Image has already been initialized once.\n        return;\n    }\n    // Build the DOM.\n    /** @type {SVGElement} */\n    this.fieldGroup_ = Blockly.utils.createSvgElement('g', {}, null);\n    if (!this.visible_) {\n        this.fieldGroup_.style.display = 'none';\n    }\n    /** @type {SVGElement} */\n    this.imageElement_ = Blockly.utils.createSvgElement(\n        'image',\n        {\n            height: `${this.height_}px`,\n            width: `${this.width_}px`,\n        },\n        this.fieldGroup_\n    );\n    this.setValue(this.src_);\n    this.setText(this.text_);\n    this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_);\n\n    if (this.tooltip_) {\n        this.imageElement_.tooltip = this.tooltip_;\n    } else {\n        // Configure the field to be transparent with respect to tooltips.\n        this.setTooltip(this.sourceBlock_);\n    }\n    Blockly.Tooltip.bindMouseEvents(this.imageElement_);\n\n    this.maybeAddClickHandler_();\n};\n\n/**\n * Dispose of all DOM objects belonging to this text.\n */\nBlockly.FieldImage.prototype.dispose = function () {\n    goog.dom.removeNode(this.fieldGroup_);\n    this.fieldGroup_ = null;\n    this.imageElement_ = null;\n};\n\n/**\n * Bind events for a mouse down on the image, but only if a click handler has\n * been defined. If a click handler is attached to the image, change the cursor to a pointer.\n * @private\n */\nBlockly.FieldImage.prototype.maybeAddClickHandler_ = function () {\n    if (this.clickHandler_ && !this.sourceBlock_.workspace.options.readOnly && !this.sourceBlock_.isInFlyout) {\n        this.mouseDownWrapper_ = Blockly.bindEventWithChecks_(this.fieldGroup_, 'mousedown', this, this.clickHandler_);\n        this.fieldGroup_.style.cursor = 'pointer';\n    }\n};\n\n/**\n * Change the tooltip text for this field.\n * @param {string|!Element} newTip Text for tooltip or a parent element to\n *     link to for its tooltip.\n */\nBlockly.FieldImage.prototype.setTooltip = function (newTip) {\n    this.tooltip_ = newTip;\n    if (this.imageElement_) {\n        this.imageElement_.tooltip = newTip;\n    }\n};\n\n/**\n * Get the source URL of this image.\n * @return {string} Current text.\n * @override\n */\nBlockly.FieldImage.prototype.getValue = function () {\n    return this.src_;\n};\n\n/**\n * Set the source URL of this image.\n * @param {?string} src New source.\n * @override\n */\nBlockly.FieldImage.prototype.setValue = function (src) {\n    if (src === null) {\n        // No change if null.\n        return;\n    }\n    this.src_ = src;\n    if (this.imageElement_) {\n        this.imageElement_.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', src || '');\n    }\n};\n\n/**\n * Get whether to flip this image in RTL\n * @return {boolean} True if we should flip in RTL.\n */\nBlockly.FieldImage.prototype.getFlipRtl = function () {\n    return this.flipRtl_;\n};\n\n/**\n * Set the alt text of this image.\n * @param {?string} alt New alt text.\n * @override\n */\nBlockly.FieldImage.prototype.setText = function (alt) {\n    if (alt === null) {\n        // No change if null.\n        return;\n    }\n    this.text_ = alt;\n    if (this.imageElement_) {\n        this.imageElement_.setAttribute('alt', alt || '');\n    }\n};\n\n/**\n * Images are fixed width, no need to render.\n * @private\n */\nBlockly.FieldImage.prototype.render_ = function () {\n    // NOP\n};\n\n/**\n * Images are fixed width, no need to render even if forced.\n */\nBlockly.FieldImage.prototype.forceRerender = function () {\n    // NOP\n};\n\n/**\n * Images are fixed width, no need to update.\n * @private\n */\nBlockly.FieldImage.prototype.updateWidth = function () {\n    // NOP\n};\n\n/**\n * If field click is called, and click handler defined,\n * call the handler.\n */\nBlockly.FieldImage.prototype.showEditor_ = function () {\n    if (this.clickHandler_) {\n        this.clickHandler_(this);\n    }\n};\n\nBlockly.Field.register('field_image', Blockly.FieldImage);\n","/**\n * Install this text field on a block.\n */\nBlockly.FieldTextInput.prototype.init = function () {\n    if (this.fieldGroup_) {\n        // Field has already been initialized once.\n        return;\n    }\n\n    const notInShadow = !this.sourceBlock_.isShadow();\n\n    if (notInShadow) {\n        this.className_ += ' blocklyEditableLabel';\n    }\n\n    this.maxDisplayLength = 17;\n\n    Blockly.FieldTextInput.superClass_.init.call(this);\n\n    // If not in a shadow block, draw a box.\n    if (notInShadow) {\n        this.box_ = Blockly.utils.createSvgElement('rect', {\n            rx: Blockly.BlockSvg.CORNER_RADIUS * 4,\n            ry: Blockly.BlockSvg.CORNER_RADIUS * 4,\n            x: 0,\n            y: 0,\n            width: this.size_.width,\n            height: this.size_.height,\n            fill: this.sourceBlock_.getColourSecondary(),\n            stroke: this.sourceBlock_.getColourTertiary(),\n            'stroke-width': '0.3px',\n        });\n        this.fieldGroup_.insertBefore(this.box_, this.textElement_);\n    }\n};\n","/**\n * Update this gesture to record whether a block is being dragged from the\n * flyout. This function should be called on a mouse/touch move event the first time the\n * drag radius is exceeded.  It should be called no more than once per gesture.\n * If a block should be dragged from the flyout this function creates the new\n * block on the main workspace and updates targetBlock_ and startWorkspace_.\n * @return {boolean} True if a block is being dragged from the flyout.\n * @private\n */\nBlockly.Gesture.prototype.updateIsDraggingFromFlyout_ = function () {\n    // Disabled blocks may not be dragged from the flyout.\n    if (this.targetBlock_.disabled) {\n        return false;\n    }\n\n    if (!this.flyout_.isScrollable() || this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)) {\n        this.startWorkspace_ = this.flyout_.targetWorkspace_;\n        this.startWorkspace_.updateScreenCalculationsIfScrolled();\n\n        // Start the event group now, so that the same event group is used for block\n        // creation and block dragging.\n        if (!Blockly.Events.getGroup()) {\n            Blockly.Events.setGroup(true);\n        }\n\n        // The start block is no longer relevant, because this is a drag.\n        this.startBlock_ = null;\n        this.targetBlock_ = this.flyout_.createBlock(this.mostRecentEvent_, this.targetBlock_);\n        this.targetBlock_.select();\n        return true;\n    }\n    return false;\n};\n","/**\n * Render the icon.\n * @param {number} cursorX Horizontal offset at which to position the icon.\n * @return {number} Horizontal offset for next item to draw.\n */\nBlockly.Icon.prototype.renderIcon = function (cursorX) {\n    if (this.collapseHidden && this.block_.isCollapsed()) {\n        this.iconGroup_.setAttribute('display', 'none');\n        return cursorX;\n    }\n\n    this.iconGroup_.setAttribute('display', 'block');\n\n    let newCursorX = cursorX;\n\n    const TOP_MARGIN = 9;\n    const width = this.SIZE;\n\n    if (this.block_.RTL) {\n        newCursorX -= width;\n    }\n\n    this.iconGroup_.setAttribute('transform', `localize(${newCursorX},${TOP_MARGIN})`);\n    this.computeIconLocation();\n\n    if (this.block_.RTL) {\n        newCursorX -= Blockly.BlockSvg.SEP_SPACE_X;\n    } else {\n        newCursorX += width + Blockly.BlockSvg.SEP_SPACE_X;\n    }\n\n    return newCursorX;\n};\n","import { config } from '../../constants/config';\n\n// Structure is { '<outerHtml />': { height: 1, width: 1 } }\nBlockly.Block.Dimensions = {};\n\nBlockly.Block.prototype.getDisplayName = function () {\n    if (this.meta) {\n        const block_meta = this.meta();\n        return block_meta && block_meta.display_name;\n    }\n    return this.type;\n};\n\nBlockly.Block.prototype.getSiblings = function () {\n    const siblings = [this];\n    ['getPreviousBlock', 'getNextBlock'].forEach(functionName => {\n        let block = this[functionName]();\n        while (block !== null) {\n            const parent = this.getParent();\n            if (parent && parent.id === block.id) {\n                break;\n            }\n\n            siblings.push(block);\n            block = block[functionName]();\n        }\n    });\n    return siblings;\n};\n\nBlockly.Block.prototype.getChildByType = function (type) {\n    return this.getDescendants().find(child => child.type === type);\n};\n\nBlockly.Block.prototype.getChildFieldValue = function (childType, childField) {\n    const childBlock = this.getChildByType(childType);\n    if (childBlock) {\n        const value = childBlock.getFieldValue(childField);\n        return value;\n    }\n    return null;\n};\n\nBlockly.Block.prototype.childValueToCode = function (childType, childField) {\n    const childBlock = this.getChildByType(childType);\n    return childBlock && Blockly.JavaScript.valueToCode(childBlock, childField, Blockly.JavaScript.ORDER_ATOMIC);\n};\n\nBlockly.Block.prototype.getBlocksInStatement = function (statementInputName) {\n    const blocksInStatement = [];\n    const firstBlock = this.getInputTargetBlock(statementInputName);\n\n    if (firstBlock) {\n        return firstBlock.getSiblings();\n    }\n    return blocksInStatement;\n};\n\nBlockly.Block.prototype.getLastConnectionInStatement = function (statement_input_name) {\n    const first_block_in_stack = this.getInputTargetBlock(statement_input_name);\n\n    if (first_block_in_stack) {\n        return first_block_in_stack.lastConnectionInStack();\n    }\n\n    const statement_input = this.getInput(statement_input_name);\n    return statement_input.connection;\n};\n\n/**\n * Get whether this block is enabled or not.\n * @return {boolean} True if enabled.\n */\nBlockly.Block.prototype.isEnabled = function () {\n    return !this.disabled;\n};\n\nBlockly.Block.prototype.isDescendantOf = function (type) {\n    let parentBlock = this.getParent();\n    while (parentBlock !== null) {\n        if (parentBlock.type === type) {\n            return true;\n        }\n        parentBlock = parentBlock.getParent();\n    }\n    return false;\n};\n\nBlockly.Block.prototype.getTopParent = function () {\n    let parent = this.getParent();\n    while (parent !== null) {\n        const nextParent = parent.getParent();\n        if (!nextParent) {\n            return parent;\n        }\n        parent = nextParent;\n    }\n    return null;\n};\n\nBlockly.Block.getDimensions = function (block_node) {\n    // Attempt to retrieve dimensions from memory rather than recalculating.\n    const existing_dimensions_key = Object.keys(Blockly.Block.Dimensions).find(\n        outer_html => block_node.outerHTML === outer_html\n    );\n\n    if (existing_dimensions_key) {\n        return Blockly.Block.Dimensions[existing_dimensions_key];\n    }\n\n    const options = new Blockly.Options({ media: `${__webpack_public_path__}media/` });\n    const el_injection_div = document.createElement('div');\n\n    // Create a headless workspace to calculate xmlList block dimensions\n    const svg = Blockly.createDom_(el_injection_div, options);\n    const workspace = Blockly.createMainWorkspace_(svg, options, false, false);\n    const block = Blockly.Xml.domToBlock(block_node, workspace);\n    const block_hw = block.getHeightWidth();\n\n    workspace.dispose();\n    Blockly.Block.Dimensions[block_node.outerHTML] = block_hw;\n    return block_hw;\n};\n\nBlockly.Block.prototype.isMainBlock = function () {\n    return config.mainBlocks.includes(this.type);\n};\n\nBlockly.Block.prototype.isIndependentBlock = function () {\n    return config.INDEPEDENT_BLOCKS.includes(this.type);\n};\n\n/**\n * Return the parent block or null if this block is at the top level.\n * @return {Blockly.Block} The block that holds the current block.\n */\nBlockly.Block.prototype.getRootInputTargetBlock = function () {\n    let input_name;\n    let current_block = this.getParent();\n\n    while (current_block) {\n        const root_block = this.getRootBlock();\n        const current_input = root_block.getInputWithBlock(current_block);\n\n        if (current_input && current_input.name) {\n            input_name = current_input.name;\n        }\n\n        current_block = current_block.getParent();\n    }\n\n    return input_name;\n};\n\n/**\n * Returns whether the block has an error highlighted descendant.\n */\nBlockly.Block.prototype.hasErrorHighlightedDescendant = function () {\n    const hasHighlightedDescendant = child_blocks =>\n        child_blocks.some(child_block => {\n            const is_self_highlighted = child_block.is_error_highlighted;\n            const is_descendant_highlighted = hasHighlightedDescendant(child_block.getChildren());\n\n            return is_self_highlighted || is_descendant_highlighted;\n        });\n\n    return hasHighlightedDescendant(this.getChildren());\n};\n\nBlockly.Block.isDynamic = function (block_type) {\n    return /^((procedures_)|(variables_)|(math_change$))/.test(block_type);\n};\n","import { localize } from '@deriv/translations';\nimport DBotStore from '../dbot-store';\nimport { save, isDarkRgbColour } from '../utils';\n\n/**\n * Select this block.  Highlight it visually.\n */\nBlockly.BlockSvg.prototype.addSelect = function () {\n    if (!this.isInFlyout) {\n        const { flyout } = DBotStore.instance;\n        if (flyout) {\n            flyout.setVisibility(false);\n        }\n        Blockly.utils.addClass(/** @type {!Element} */ (this.svgGroup_), 'blocklySelected');\n    }\n};\n\n/**\n * Set whether the block is disabled or not.\n * @param {boolean} disabled True if disabled.\n * @deriv/bot: Call updateDisabled() when setDisabled is called.\n */\nBlockly.BlockSvg.prototype.setDisabled = function (disabled) {\n    if (this.disabled !== disabled) {\n        Blockly.BlockSvg.superClass_.setDisabled.call(this, disabled);\n\n        if (this.rendered) {\n            this.updateDisabled();\n        }\n    }\n};\n\n/**\n * Enable or disable a block.\n * @deriv/bot: Update fill path if it doesn't match the disabledPatternId.\n */\nBlockly.BlockSvg.prototype.updateDisabled = function () {\n    if (this.disabled || this.getInheritedDisabled()) {\n        Blockly.utils.addClass(this.svgGroup_, 'blocklyDisabled');\n\n        const fill = `url(#${this.workspace.options.disabledPatternId})`;\n        if (this.svgPath_.getAttribute('fill') !== fill) {\n            this.svgPath_.setAttribute('fill', fill);\n        }\n    } else {\n        const removed = Blockly.utils.removeClass(this.svgGroup_, 'blocklyDisabled');\n        if (removed) {\n            this.updateColour();\n        }\n    }\n\n    const children = this.getChildren(false);\n    children.forEach(child => child.updateDisabled());\n};\n\n/**\n * Show the context menu for this block.\n * @param {!Event} e Mouse event.\n * @private\n * @deriv/bot: Restore contextMenu options from Blockly unavailable in Scratch\n */\nBlockly.BlockSvg.prototype.showContextMenu_ = function (e) {\n    if (this.workspace.options.readOnly || !this.contextMenu) {\n        return;\n    }\n\n    // Save the current block in a variable for use in closures.\n    const block = this;\n    const menu_options = [];\n\n    if (this.isDeletable() && this.isMovable() && !block.isInFlyout) {\n        menu_options.push(Blockly.ContextMenu.blockDuplicateOption(block, e));\n        menu_options.push(Blockly.ContextMenu.blockDetachOption(block, e));\n        if (this.isEditable() && this.workspace.options.comments) {\n            menu_options.push(Blockly.ContextMenu.blockCommentOption(block));\n        }\n\n        menu_options.push(Blockly.ContextMenu.blockDeleteOption(block));\n    } else if (this.parentBlock_ && this.isShadow_) {\n        this.parentBlock_.showContextMenu_(e);\n        return;\n    }\n\n    // Option to collapse/expand block.\n    if (this.workspace.options.collapse) {\n        if (this.collapsed_) {\n            const expand_option = { enabled: true };\n            expand_option.text = localize('Expand Block');\n            expand_option.callback = () => block.setCollapsed(false);\n            menu_options.push(expand_option);\n        } else {\n            const collapse_option = { enabled: true };\n            collapse_option.text = localize('Collapse Block');\n            collapse_option.callback = () => block.setCollapsed(true);\n            menu_options.push(collapse_option);\n        }\n    }\n\n    // Option to disable/enable block.\n    if (this.workspace.options.disable) {\n        const restricted_parents = block.restricted_parents || [];\n        const is_trade_parameter = this.type.includes('trade_definition_') && !this.isMovable();\n\n        const disable_option = {\n            text: this.disabled ? localize('Enable Block') : localize('Disable Block'),\n            enabled:\n                !is_trade_parameter &&\n                (!this.disabled ||\n                    restricted_parents.length === 0 ||\n                    restricted_parents.some(restricted_parent => block.isDescendantOf(restricted_parent))),\n            callback: () => {\n                const group = Blockly.Events.getGroup();\n                if (!group) {\n                    Blockly.Events.setGroup(true);\n                }\n\n                block.setDisabled(!block.disabled);\n\n                if (!group) {\n                    Blockly.Events.setGroup(false);\n                }\n            },\n        };\n        menu_options.push(disable_option);\n    }\n\n    // Option to download block.\n    if (this.isMovable()) {\n        const has_next_block = block.nextConnection && block.nextConnection.isConnected();\n        const downloadBlock = should_delete_next => {\n            const xml = Blockly.Xml.textToDom('<xml/>');\n            const block_xml = Blockly.Xml.blockToDom(block);\n            const file_name = should_delete_next ? block.type : `${block.type}_${localize('stack')}`;\n\n            if (should_delete_next) {\n                Blockly.Xml.deleteNext(block_xml);\n            }\n\n            xml.appendChild(block_xml);\n            save(file_name, /* collection */ true, xml);\n        };\n\n        menu_options.push({\n            text: localize('Download block'),\n            enabled: true,\n            callback: () => downloadBlock(true),\n        });\n\n        if (has_next_block) {\n            menu_options.push({\n                text: localize('Download stack'),\n                enabled: true,\n                callback: () => downloadBlock(false),\n            });\n        }\n    }\n\n    // Disable/Enable stack buttons. If target - last block in stack buttons will be hidden.\n    if (block.nextConnection?.targetConnection) {\n        menu_options.push(Blockly.ContextMenu.blockEnableOption(block, e));\n        menu_options.push(Blockly.ContextMenu.blockDisableOption(block, e));\n    }\n\n    // Allow the block to add or modify menu_options.\n    if (this.customContextMenu) {\n        this.customContextMenu(menu_options);\n    }\n\n    Blockly.ContextMenu.show(e, menu_options, this.RTL);\n    Blockly.ContextMenu.currentBlock = this;\n};\n\n/**\n * Set whether the block is error highlighted or not.\n * @param {boolean} highlighted True if highlighted for error.\n */\nBlockly.BlockSvg.prototype.setErrorHighlighted = function (\n    should_be_error_highlighted,\n    error_message = localize(\n        'The block(s) highlighted in red are missing input values. Please update them and click \"Run bot\".'\n    )\n) {\n    if (this.is_error_highlighted === should_be_error_highlighted) {\n        return;\n    }\n\n    const highlight_class = 'block--error-highlighted';\n\n    if (should_be_error_highlighted) {\n        // Below function does its own checks to check if class already exists.\n        Blockly.utils.addClass(this.svgGroup_, highlight_class);\n    } else {\n        Blockly.utils.removeClass(this.svgGroup_, highlight_class);\n    }\n\n    this.is_error_highlighted = should_be_error_highlighted;\n    this.error_message = error_message;\n};\n\n// Highlight the block that is being executed\nBlockly.BlockSvg.prototype.highlightExecutedBlock = function () {\n    const highlight_block_class = 'block--execution-highlighted';\n\n    if (!Blockly.utils.hasClass(this.svgGroup_, highlight_block_class)) {\n        Blockly.utils.addClass(this.svgGroup_, highlight_block_class);\n        setTimeout(() => {\n            if (this.svgGroup_) {\n                Blockly.utils.removeClass(this.svgGroup_, highlight_block_class);\n            }\n        }, 1505);\n    }\n};\n\n/**\n * Set block animation (Blink)\n */\n\nBlockly.BlockSvg.prototype.blink = function () {\n    const blink_class = 'block--blink';\n    Blockly.utils.addClass(this.svgGroup_, blink_class);\n\n    setTimeout(() => {\n        Blockly.utils.removeClass(this.svgGroup_, blink_class);\n    }, 2000);\n};\n\n/**\n * Set whether the block is collapsed or not.\n * @param {boolean} collapsed True if collapsed.\n */\nBlockly.BlockSvg.prototype.setCollapsed = function (collapsed) {\n    if (this.collapsed_ === collapsed) {\n        return;\n    }\n\n    // Firefox fix for Blockly widthcache bug\n    if (navigator.userAgent.search('Firefox') > 0) {\n        setTimeout(() => {\n            this.workspace.getAllFields().forEach(field => field.forceRerender());\n        }, 0); /* Time duration must be 0. We need this function\n        asynchronous for proper rerender after block resizing. */\n    }\n\n    const render_list = [];\n    const COLLAPSED_INPUT_NAME = '_TEMP_COLLAPSED_INPUT';\n\n    // Show/hide the inputs.\n    this.inputList.forEach(input => {\n        render_list.push(...input.setVisible(!collapsed));\n\n        // Hide empty rounded inputs\n        if (collapsed && input.type === 1 && !input.connection.targetConnection && input.outlinePath)\n            input.outlinePath.style.visibility = 'hidden';\n    });\n\n    if (collapsed) {\n        this.getIcons()\n            // Never hide ScratchBlockComments!\n            .filter(icon => !(icon instanceof Blockly.ScratchBlockComment))\n            .forEach(icon => icon.setVisible(false));\n\n        // Ensure class persists through collapse. Falls back to first\n        // field that has a class. Doesn't work when multiple\n        // field_labels on a block have different classes. So far we\n        // don't have a situation like that, so it works. 👍\n        let field_class = null;\n\n        this.inputList.some(input =>\n            input.fieldRow.some(field => {\n                if (field.class_) {\n                    field_class = field.class_;\n                    return true;\n                }\n                return false;\n            })\n        );\n\n        const dropdown_path =\n            this.workspace.options.pathToMedia +\n            (isDarkRgbColour(this.getColour()) ? 'dropdown-arrow.svg' : 'dropdown-arrow-dark.svg');\n        const field_expand_icon = new Blockly.FieldImage(dropdown_path, 16, 16, localize('Expand'), () =>\n            this.setCollapsed(false)\n        );\n\n        if (this.type === 'procedures_defreturn' || this.type === 'procedures_defnoreturn') {\n            const function_name = this.getFieldValue('NAME');\n            const args = ` (${this.arguments.join(', ')})`;\n\n            this.appendDummyInput(COLLAPSED_INPUT_NAME)\n                .appendField(new Blockly.FieldLabel(localize('function'), field_class))\n                .appendField(new Blockly.FieldLabel(function_name + args, 'header__title'))\n                .appendField(field_expand_icon)\n                .init();\n        } else {\n            const text = this.toString(Blockly.COLLAPSE_CHARS);\n            const field_label = new Blockly.FieldLabel(text, field_class);\n\n            this.appendDummyInput(COLLAPSED_INPUT_NAME).appendField(field_label).appendField(field_expand_icon).init();\n        }\n    } else {\n        this.removeInput(COLLAPSED_INPUT_NAME);\n        this.setWarningText(null); // Clear any warnings inherited from enclosed blocks.\n    }\n\n    Blockly.BlockSvg.superClass_.setCollapsed.call(this, collapsed);\n\n    if (!render_list.length) {\n        render_list.push(this); // No child blocks, just render this block.\n    }\n\n    if (this.rendered) {\n        render_list.forEach(block => block.render());\n        // Don't bump neighbours.\n        // Although bumping neighbours would make sense, users often collapse\n        // all their functions and store them next to each other.  Expanding and\n        // bumping causes all their definitions to go out of alignment.\n    }\n\n    // Check whether the collapsed block needs to be highlighted.\n    this.setErrorHighlighted(collapsed && this.hasErrorHighlightedDescendant());\n};\n\n/**\n * @deriv/bot: Add check for workspace.getCanvas() before appendChild() is called.\n */\nBlockly.BlockSvg.prototype.initSvg = function () {\n    goog.asserts.assert(this.workspace.rendered, 'Workspace is headless.');\n    if (!this.isInsertionMarker()) {\n        // Insertion markers not allowed to have inputs or icons\n        // Input shapes are empty holes drawn when a value input is not connected.\n        // eslint-disable-next-line no-cond-assign\n        for (let i = 0, input; (input = this.inputList[i]); i++) {\n            input.init();\n            input.initOutlinePath(this.svgGroup_);\n        }\n        const icons = this.getIcons();\n        for (let i = 0; i < icons.length; i++) {\n            icons[i].createIcon();\n        }\n    }\n    this.updateColour();\n    this.updateMovable();\n    if (!this.workspace.options.readOnly && !this.eventsInit_) {\n        Blockly.bindEventWithChecks_(this.getSvgRoot(), 'mousedown', this, this.onMouseDown_);\n    }\n    this.eventsInit_ = true;\n\n    if (!this.getSvgRoot().parentNode && this.workspace.getCanvas()) {\n        this.workspace.getCanvas().appendChild(this.getSvgRoot());\n    }\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../../constants/config';\n\n/**\n * Make a context menu option for duplicating the current block.\n * deriv-bot: Use Blockly's implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockDuplicateOption = function (block) {\n    const enabled = !config.single_instance_blocks.includes(block.type);\n    const duplicate_option = {\n        callback() {\n            Blockly.duplicate_(block);\n        },\n        enabled,\n        text: localize('Duplicate'),\n    };\n    return duplicate_option;\n};\n\n/**\n * Make a context menu option for cleaning up blocks on the workspace, by\n * aligning them vertically.\n * @param {!Blockly.WorkspaceSvg} ws The workspace where the right-click originated.\n * @param {number} numTopBlocks The number of top blocks on the workspace.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.wsCleanupOption = function (ws, numTopBlocks) {\n    return {\n        text: localize('Rearrange Vertically'),\n        enabled: numTopBlocks > 1,\n        callback: ws.cleanUp.bind(ws),\n    };\n};\n\n/**\n * Make a context menu option for collapsing all block stacks on the workspace.\n * @param {boolean} hasExpandedBlocks Whether there are any non-collapsed blocks\n *     on the workspace.\n * @param {!Array.<!Blockly.BlockSvg>} topBlocks The list of top blocks on the\n *     the workspace.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.wsCollapseOption = function (hasExpandedBlocks, topBlocks) {\n    return {\n        enabled: hasExpandedBlocks,\n        text: localize('Collapse All Blocks'),\n        callback() {\n            Blockly.ContextMenu.toggleCollapseFn_(topBlocks, true);\n        },\n    };\n};\n\n/**\n * Make a context menu option for expanding all block stacks on the workspace.\n * @param {boolean} hasCollapsedBlocks Whether there are any collapsed blocks\n *     on the workspace.\n * @param {!Array.<!Blockly.BlockSvg>} topBlocks The list of top blocks on the\n *     the workspace.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.wsExpandOption = function (hasCollapsedBlocks, topBlocks) {\n    return {\n        enabled: hasCollapsedBlocks,\n        text: localize('Expand All Blocks'),\n        callback() {\n            Blockly.ContextMenu.toggleCollapseFn_(topBlocks, false);\n        },\n    };\n};\n\n/**\n * Helper function for toggling delete state on blocks on the workspace, to be\n * called from a right-click menu.\n * deriv-bot: Remove \"animation\".\n * @param {!Array.<!Blockly.BlockSvg>} topBlocks The list of top blocks on the the workspace.\n * @param {boolean} shouldCollapse True if the blocks should be collapsed, false if they should be expanded.\n * @private\n */\nBlockly.ContextMenu.toggleCollapseFn_ = function (blocks, shouldCollapse) {\n    blocks.forEach(block => block.setCollapsed(shouldCollapse));\n};\n\nBlockly.ContextMenu.wsDeleteOption = function (ws, blocks) {\n    // Option to delete all blocks.\n    // Count the number of blocks that are deletable.\n    const delete_list = Blockly.WorkspaceSvg.buildDeleteList_(blocks);\n\n    // Scratch-specific: don't count shadow blocks in delete count\n    const delete_count = delete_list.filter(block => !block.isShadow()).length;\n\n    const event_group = Blockly.utils.genUid();\n    const DELAY = 10;\n\n    const deleteNext = () => {\n        Blockly.Events.setGroup(event_group);\n        const block = delete_list.shift();\n\n        if (block) {\n            if (block.workspace) {\n                block.dispose(false, true);\n                setTimeout(deleteNext, DELAY);\n            } else {\n                deleteNext();\n            }\n        }\n        Blockly.Events.setGroup(false);\n    };\n\n    return {\n        text:\n            delete_count === 1\n                ? localize('Delete Block')\n                : localize('Delete {{ delete_count }} Blocks', { delete_count }),\n        enabled: delete_count > 0,\n        callback() {\n            if (ws.currentGesture_) {\n                ws.currentGesture_.cancel();\n            }\n            if (delete_count < 2) {\n                deleteNext();\n            } else {\n                const msg = localize('Delete all {{ delete_count }} blocks?', { delete_count });\n                Blockly.confirm(msg, ok => {\n                    if (ok) {\n                        deleteNext();\n                    }\n                });\n            }\n        },\n    };\n};\n\n/**\n * Make a context menu option for adding or removing comments on the current block.\n * deriv-bot: Expand block before adding comment.\n * Hacky way to get comments working on collapsed blocks.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockCommentOption = function (block) {\n    const comment_option = { enabled: !goog.userAgent.IE };\n\n    // If there's already a comment, add an option to delete it.\n    if (block.comment) {\n        comment_option.text = localize('Remove comment');\n        comment_option.callback = () => {\n            block.setCommentText(null);\n        };\n    } else {\n        // If there's no comment, add an option to create a comment.\n        comment_option.text = localize('Add comment');\n        comment_option.callback = () => {\n            // deriv-bot: Expand/uncollapse for bubble to position correctly.\n            const is_collapsed = block.collapsed_;\n\n            if (is_collapsed) {\n                block.setCollapsed(false);\n            }\n\n            block.setCommentText('');\n\n            if (block.collapsed_ !== is_collapsed) {\n                block.setCollapsed(is_collapsed);\n            }\n\n            // deriv-bot: Don't focus to prevent workspace glitching.\n            // block.comment.focus();\n        };\n    }\n\n    return comment_option;\n};\n\n/**\n * Make a context menu option for detaching the current block.\n * deriv-bot: Use Blockly's implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockDetachOption = function (block) {\n    const canDisconnect = block\n        .getConnections_()\n        .some(connection => connection.isConnected() && !connection.targetConnection?.sourceBlock_.isShadow_);\n\n    const enabled = block.parentBlock_ && canDisconnect;\n\n    const detach_option = {\n        callback() {\n            block.unplug(true);\n            block.moveBy(250, 100);\n        },\n        enabled,\n        text: localize('Detach Block'),\n    };\n    return detach_option;\n};\n\n/**\n * Make a context menu option for disabling stack of blocks.\n * deriv-bot: Use Blockly’s implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockDisableOption = function (block) {\n    const checkAreSomeEnabled = (block_, enabledArr = []) => {\n        enabledArr.push(!block_.disabled);\n        return block_.nextConnection?.targetConnection\n            ? checkAreSomeEnabled(block_.nextConnection?.targetConnection.sourceBlock_, enabledArr)\n            : enabledArr.includes(true);\n    };\n    const enabled = checkAreSomeEnabled(block);\n\n    const disableBlocksRecursively = block_ => {\n        block_.setDisabled(true);\n        if (block_.nextConnection?.targetConnection) {\n            disableBlocksRecursively(block_.nextConnection?.targetConnection.sourceBlock_);\n        }\n    };\n\n    const disableStack_option = {\n        callback() {\n            disableBlocksRecursively(block);\n        },\n        enabled,\n        text: localize('Disable stack'),\n    };\n    return disableStack_option;\n};\n\n/**\n * Make a context menu option for enabling stack of blocks.\n * deriv-bot: Use Blockly’s implementation.\n * @param {!Blockly.BlockSvg} block The block where the right-click originated.\n * @return {!Object} A menu option, containing text, enabled, and a callback.\n * @package\n */\nBlockly.ContextMenu.blockEnableOption = function (block) {\n    const checkAreSomeDisabled = (block_, disabledArr = []) => {\n        if (block_.restricted_parents && !block_.restricted_parents?.includes(block_.getTopParent()?.type)) {\n            return false;\n        }\n        disabledArr.push(block_.disabled);\n        return block_.nextConnection?.targetConnection\n            ? checkAreSomeDisabled(block_.nextConnection?.targetConnection.sourceBlock_, disabledArr)\n            : disabledArr.includes(true);\n    };\n    const enabled = checkAreSomeDisabled(block);\n\n    const enableBlocksRecursively = block_ => {\n        if (!block_.restricted_parents || block_.restricted_parents.includes(block_.getTopParent()?.type)) {\n            block_.setDisabled(false);\n        }\n        if (block_.nextConnection?.targetConnection) {\n            enableBlocksRecursively(block_.nextConnection?.targetConnection.sourceBlock_);\n        }\n    };\n\n    const enableStack_option = {\n        callback() {\n            enableBlocksRecursively(block);\n        },\n        enabled,\n        text: localize('Enable stack'),\n    };\n    return enableStack_option;\n};\n","import { localize } from '@deriv/translations';\nimport DBotStore from '../dbot-store';\n\n/**\n * Construct the blocks required by the flyout for the variable category.\n * @param {!Blockly.Workspace} workspace The workspace containing variables.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.DataCategory = function (workspace) {\n    const variableModelList = workspace.getVariablesOfType('');\n    let xmlList = [];\n\n    // `Create Variable`-Section\n    Blockly.DataCategory.addCreateVariable(xmlList, workspace);\n\n    const block_types = ['variables_set', 'variables_get', 'math_change'];\n    xmlList = xmlList.concat(Blockly.DataCategory.search(variableModelList, block_types));\n\n    return xmlList;\n};\n\nBlockly.DataCategory.search = function (variableModelList) {\n    const xmlList = [];\n    if (variableModelList.length > 0) {\n        const generateVariableFieldXmlString = variableModel => {\n            // The variable name may be user input, so it may contain characters that\n            // need to be escaped to create valid XML.\n            const escapedText = `<field name=\"VAR\" id=\"${variableModel.getId()}\" variabletype=\"${goog.string.htmlEscape(\n                variableModel.type\n            )}\">${goog.string.htmlEscape(variableModel.name)}</field>`;\n            return escapedText;\n        };\n\n        const firstVariable = variableModelList[0];\n\n        // Create 'Set `var` to'-block\n        if (Blockly.Blocks.variables_set) {\n            const gap = Blockly.Blocks.math_change ? 8 : 24;\n            const setBlockText = `<xml><block type=\"variables_set\" gap=\"${gap}\">${generateVariableFieldXmlString(\n                firstVariable\n            )}</block></xml>`;\n            const setBlock = Blockly.Xml.textToDom(setBlockText).firstChild;\n            xmlList.push(setBlock);\n        }\n\n        // Create 'Change `var` by `1`'-block\n        // if (Blockly.Blocks.math_change) {\n        //     const gap = Blockly.Blocks.variables_get ? 20 : 8;\n        //     const changeBlockText = `<xml><block type=\"math_change\" gap=\"${gap}\">${generateVariableFieldXmlString(\n        //         firstVariable\n        //     )}<value name=\"DELTA\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></xml>`;\n        //     const changeBlock = Blockly.Xml.textToDom(changeBlockText).firstChild;\n        //     xmlList.push(changeBlock);\n        // }\n\n        // Create `variable_get` block for each variable\n        if (Blockly.Blocks.variables_get) {\n            // For adding sort base on the creation date\n            variableModelList.sort(\n                (first_variable, second_variable) =>\n                    variableModelList.indexOf(second_variable) - variableModelList.indexOf(first_variable)\n            );\n\n            variableModelList.forEach(variable => {\n                const getBlockText = `<xml><block type=\"variables_get\">${generateVariableFieldXmlString(\n                    variable\n                )}</block></xml>`;\n                const getBlock = Blockly.Xml.textToDom(getBlockText).firstChild;\n                xmlList.push(getBlock);\n            });\n        }\n    }\n\n    return xmlList;\n};\n\n/**\n * Construct a create variable section and push it to the xmlList.\n * @param {!Array.<!Element>} xmlList Array of XML block elements.\n * @param {Blockly.Workspace} workspace Workspace to register callback to.\n * @deriv/bot: We only use a single type of variable, so `type` arg was removed.\n */\nBlockly.DataCategory.addCreateVariable = function (xmlList, workspace) {\n    const el_button_xml = goog.dom.createDom('button');\n    const el_input_xml = goog.dom.createDom('input');\n\n    // Set default msg, callbackKey, and callback values for type 'VARIABLE'\n    const button_text = localize('Create');\n    const callback_key = 'CREATE_VARIABLE';\n    const input_placeholder = localize('New variable name');\n\n    // Set attributes for the button\n    el_button_xml.setAttribute('text', button_text);\n    el_button_xml.setAttribute('className', 'flyout__button-new');\n    el_button_xml.setAttribute('callbackKey', callback_key);\n\n    // Set attributes for the input field\n    el_input_xml.setAttribute('className', 'flyout__input');\n    el_input_xml.setAttribute('name', 'variable');\n    el_input_xml.setAttribute('type', 'text');\n    el_input_xml.setAttribute('placeholder', input_placeholder);\n\n    const callback = function (button) {\n        const el_input_container = document.querySelector('.flyout__input > .dc-input__container');\n        const el_input = el_input_container.firstChild;\n\n        const buttonWorkspace = button.getTargetWorkspace();\n        buttonWorkspace.createVariable(el_input.value, '');\n        el_input.value = '';\n\n        const { flyout } = DBotStore.instance;\n        flyout.refreshCategory();\n    };\n\n    workspace.registerButtonCallback(callback_key, callback);\n\n    xmlList.push(el_input_xml);\n    xmlList.push(el_button_xml);\n};\n","import { runInvisibleEvents } from '../utils';\n\n/** *\n * Updates a Blockly.FieldDropdown with the passed dropdown_options. Available options:\n * - default_value       : After updating, attempt to set this value as the selected option\n * - should_trigger_event: Should an Blockly.Events.Change event be triggered?\n * - event_group         : Coincides with should_trigger_event, passes event_group along the event chain.\n * - should_pretend_empty: Trigger event, pretend oldValue was empty to force triggering event. Blockly\n *                         filters out and stops events from firing where the oldValue and newValue are the same.\n */\nBlockly.FieldDropdown.prototype.updateOptions = function (dropdown_options, options = {}) {\n    if (Blockly.DropDownDiv.isVisible()) {\n        Blockly.DropDownDiv.hideWithoutAnimation();\n    }\n\n    this.menuGenerator_ = dropdown_options;\n\n    // Blockly won't actually fire an event if the oldValue and newValue are the same. This prop\n    // sets the event's oldValue to an empty string so it's always executed.\n    let previous_value = this.getValue();\n\n    if (options.should_pretend_empty) {\n        previous_value = '';\n    }\n\n    // Set a flag indicating whether the default value passed to this function is available in the newly\n    // set dropdown options, if false the default option will be the first available one.\n    const has_default_value = dropdown_options.findIndex(item => item[1] === options.default_value) !== -1;\n\n    runInvisibleEvents(() => {\n        this.setValue('');\n\n        if (has_default_value) {\n            this.setValue(options.default_value);\n        } else if (dropdown_options.length > 0) {\n            // Default to first if option isn't available.\n            this.setValue(this.menuGenerator_[0][1]);\n        } else {\n            this.setValue(previous_value);\n        }\n    });\n\n    // If \"should_trigger_event\" prop is omitted or set to true, fire an event.\n    if (!options.should_trigger_event || options.should_trigger_event === true) {\n        const event = new Blockly.Events.BlockChange(\n            this.sourceBlock_,\n            'field',\n            this.name,\n            previous_value,\n            this.getValue()\n        );\n        event.recordUndo = false;\n        event.group = options.event_group;\n        Blockly.Events.fire(event);\n    }\n};\n\n/**\n * This function is hooked to change backgound color and change dropdown lists shape from rounded corner box to oval shape,\n * e.g. for market list, trade type, etc.\n *      'rx': Blockly.BlockSvg.CORNER_RADIUS * 4,\n *      'ry': Blockly.BlockSvg.CORNER_RADIUS * 4,\n */\nBlockly.FieldDropdown.prototype.init = function () {\n    if (this.fieldGroup_) {\n        // Dropdown has already been initialized once.\n        return;\n    }\n    // Add dropdown arrow: \"option ▾\" (LTR) or \"▾ אופציה\" (RTL)\n    // Positioned on render, after text size is calculated.\n    /** @type {Number} */\n    this.arrowSize_ = 12;\n    /** @type {Number} */\n    this.arrowX_ = 0;\n    /** @type {Number} */\n    this.arrowY_ = 11;\n    this.arrow_ = Blockly.utils.createSvgElement('image', {\n        height: `${this.arrowSize_}px`,\n        width: `${this.arrowSize_}px`,\n    });\n    this.arrow_.setAttributeNS(\n        'http://www.w3.org/1999/xlink',\n        'xlink:href',\n        `${Blockly.mainWorkspace.options.pathToMedia}dropdown-arrow-dark.svg`\n    );\n    this.className_ += ' blocklyDropdownText';\n    // @deriv/bot: stop the drop-down from changing its fill colour to colourTertiary on click\n    this.disableColourChange_ = true;\n\n    Blockly.FieldDropdown.superClass_.init.call(this);\n    // If not in a shadow block, draw a box.\n    if (!this.sourceBlock_.isShadow()) {\n        this.box_ = Blockly.utils.createSvgElement(\n            'rect',\n            {\n                rx: Blockly.BlockSvg.CORNER_RADIUS * 4,\n                ry: Blockly.BlockSvg.CORNER_RADIUS * 4,\n                x: 0,\n                y: 0,\n                width: this.size_.width,\n                height: this.size_.height,\n                stroke: this.sourceBlock_.getColourTertiary(),\n                'stroke-width': '0.3px',\n                fill: this.sourceBlock_.getColourSecondary(),\n                'fill-opacity': 1,\n            },\n            null\n        );\n        this.fieldGroup_.insertBefore(this.box_, this.textElement_);\n    }\n    // Force a reset of the text to add the arrow.\n    const text = this.text_;\n    this.text_ = null;\n    this.setText(text);\n};\n\n/**\n * Returns whether a dropdown is empty or not.\n */\nBlockly.FieldDropdown.prototype.isEmpty = function () {\n    return this.menuGenerator_.length === 0 || !this.menuGenerator_[0][1];\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Custom checkbox implementation.\n * @returns {Blockly.FieldImage} A Blockly.FieldImage pretending to be a checkbox.\n */\nconst FieldCheckbox = () => {\n    const getAltText = is_checked => (is_checked ? localize('Y') : localize('N'));\n    const onCheckboxClick = function () {\n        if (this.sourceBlock_.workspace.options.readOnly || this.sourceBlock_.isInFlyout) {\n            return;\n        }\n        this.is_checked = !this.is_checked;\n        this.setValue(this.is_checked);\n        this.setText(getAltText(this.is_checked));\n    };\n\n    const icon = new Blockly.FieldImage(true, 16, 16, getAltText(true), onCheckboxClick);\n\n    // Required function on Blockly.Field instances.\n    icon.fromJson = (/* options */) => {\n        return FieldCheckbox();\n    };\n\n    // Custom setValue to support imported values, this allows us to bypass\n    // adding domToMutation and mutationToDom logic to each block consuming this checkbox.\n    icon.setValue = function (value) {\n        const is_checked = value === true || value === 'TRUE';\n        const old_value = this.getValue();\n        this.src_ = is_checked ? 'TRUE' : 'FALSE';\n        const el_field_group = this.fieldGroup_; // eslint-disable-line no-underscore-dangle\n\n        if (el_field_group) {\n            Array.from(el_field_group.children).forEach(child_node => el_field_group.removeChild(child_node));\n\n            // Draw a rectangle which is coloured based on the host-block's colour.\n            Blockly.utils.createSvgElement(\n                'rect',\n                {\n                    fill: this.sourceBlock_.getColourSecondary(), // eslint-disable-line\n                    'fill-rule': 'nonzero',\n                    height: this.height_, // eslint-disable-line\n                    width: this.width_, // eslint-disable-line\n                    rx: 2,\n                    stroke: this.sourceBlock_.getColourTertiary(),\n                },\n                el_field_group\n            );\n\n            if (is_checked) {\n                // Draw checkmark.\n                Blockly.utils.createSvgElement(\n                    'path',\n                    {\n                        fill: 'var(--text-general)',\n                        d: 'M6 10.086L3.707 7.793a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l7-7a1 1 0 10-1.414-1.414L6 10.086z',\n                    },\n                    el_field_group\n                );\n            }\n        }\n\n        // Emit an event that can be redone/undone.\n        if (this.sourceBlock_ && Blockly.Events.isEnabled()) {\n            Blockly.Events.fire(\n                new Blockly.Events.BlockChange(this.sourceBlock_, 'field', this.name, old_value, this.getValue())\n            );\n        }\n    };\n\n    return icon;\n};\n\nBlockly.Field.register('field_image_checkbox', FieldCheckbox());\n","import { config } from '../../constants/config';\nimport DBotStore from '../dbot-store';\n\n/**\n * Create a copy of this block on the workspace.\n * @param {!Blockly.BlockSvg} original_block The block to copy from the flyout.\n * @return {Blockly.BlockSvg} The newly created block, or null if something\n *     went wrong with deserialization.\n * @package\n */\nBlockly.Flyout.prototype.createBlock = function (event, original_block) {\n    Blockly.Events.disable();\n\n    const main_workspace = this.targetWorkspace_;\n    const variables_before_creation = main_workspace.getAllVariables();\n\n    main_workspace.setResizesEnabled(false);\n\n    let new_block = null;\n\n    try {\n        new_block = this.placeNewBlock_(event, original_block);\n        // Close the flyout.\n        Blockly.hideChaff();\n    } finally {\n        Blockly.Events.enable();\n    }\n\n    const new_variables = Blockly.Variables.getAddedVariables(main_workspace, variables_before_creation);\n\n    if (Blockly.Events.isEnabled()) {\n        Blockly.Events.setGroup(true);\n\n        // Delete blocks of which we can only have a single instance. Dispose emits a BlockDelete\n        // event that respects the current Blockly.Events group, this is required to maintain\n        // a working undo/redo stack.\n        if (config.single_instance_blocks.includes(new_block.type)) {\n            main_workspace.getAllBlocks().forEach(ws_block => {\n                if (ws_block.type === new_block.type && ws_block.id !== new_block.id) {\n                    ws_block.dispose();\n                }\n            });\n        }\n\n        // Fire a VarCreate event for each (if any) new variable created.\n        new_variables.forEach(new_variable => {\n            Blockly.Events.fire(new Blockly.Events.VarCreate(new_variable));\n        });\n\n        Blockly.Events.fire(new Blockly.Events.Create(new_block));\n    }\n\n    if (this.autoClose) {\n        this.hide();\n    }\n\n    const { flyout } = DBotStore.instance;\n    flyout.setIsSearchFlyout(false);\n    flyout.setVisibility(false);\n\n    new_block.isInFlyout = false;\n\n    return new_block;\n};\n\n/**\n * Copy a block from the flyout to the workspace and position it correctly.\n * @param {MouseEvent} event MouseEvent with coordinates to position block. DBot only.\n * @param {!Blockly.Block} old_block The flyout block to copy.\n * @return {!Blockly.Block} The new block in the main workspace.\n * @private\n */\nBlockly.Flyout.prototype.placeNewBlock_ = function (event, old_block) {\n    const main_workspace = this.targetWorkspace_;\n    const svg_root_old = old_block.getSvgRoot();\n\n    if (!svg_root_old) {\n        throw new Error('old_block is not rendered.');\n    }\n\n    // Create the new block by cloning the block in the flyout (via XML).\n    const xml = Blockly.Xml.blockToDom(old_block, true);\n\n    // The target workspace would normally resize during domToBlock, which will\n    // lead to weird jumps.  Save it for terminateDrag.\n    main_workspace.setResizesEnabled(false);\n\n    // Using domToBlock instead of domToWorkspace means that the new block will be\n    // placed at position (0, 0) in main workspace units.\n    const block = Blockly.Xml.domToBlock(xml, main_workspace);\n    const svg_root_new = block.getSvgRoot();\n\n    if (!svg_root_new) {\n        throw new Error('block is not rendered.');\n    }\n\n    // event may be null i.e. when originating from flyout add button.\n    if (event) {\n        // The offset in pixels between the main workspace's origin and the upper left corner of the injection div.\n        const main_offset_pixels = main_workspace.getOriginOffsetInPixels();\n\n        // The position of the old block in pixels relative to the flyout workspace's origin.\n        const toolbar_height = 56;\n        const header_height = 48;\n        const old_block_pos_pixels = new goog.math.Coordinate(\n            event.clientX ? event.clientX : 0,\n            event.clientY ? event.clientY - toolbar_height - header_height : 0\n        );\n\n        // The position of the old block in pixels relative to the origin of the main workspace.\n        const final_offset_pixels = goog.math.Coordinate.difference(old_block_pos_pixels, main_offset_pixels);\n\n        // The position of the old block in main workspace coordinates.\n        const final_offset_main_ws = final_offset_pixels.scale(1 / main_workspace.scale);\n\n        block.moveBy(final_offset_main_ws.x, final_offset_main_ws.y);\n    }\n\n    return block;\n};\n","import { localize } from '@deriv/translations';\n\n/**\n * Construct the blocks required by the flyout for the procedure category.\n * @param {!Blockly.Workspace} workspace The workspace containing procedures.\n * @return {!Array.<!Element>} Array of XML block elements.\n */\nBlockly.Procedures.flyoutCategory = function (workspace) {\n    let xmlList = [];\n\n    if (Blockly.Blocks.procedures_defnoreturn) {\n        // <block type=\"procedures_defnoreturn\" gap=\"16\">\n        //     <field name=\"NAME\">do something</field>\n        // </block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_defnoreturn');\n        block.setAttribute('gap', 16);\n\n        // TEMP\n        const nameField = document.createElement('field');\n        nameField.setAttribute('name', 'NAME');\n        nameField.appendChild(document.createTextNode(localize('do something')));\n\n        block.appendChild(nameField);\n        xmlList.push(block);\n    }\n\n    if (Blockly.Blocks.procedures_defreturn) {\n        // <block type=\"procedures_defreturn\" gap=\"16\">\n        //     <field name=\"NAME\">do something</field>\n        // </block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_defreturn');\n        block.setAttribute('gap', 16);\n\n        const nameField = document.createElement('field');\n        nameField.setAttribute('name', 'NAME');\n        nameField.appendChild(document.createTextNode(localize('do something')));\n\n        block.appendChild(nameField);\n        xmlList.push(block);\n    }\n\n    if (Blockly.Blocks.procedures_ifreturn) {\n        // <block type=\"procedures_ifreturn\" gap=\"16\"></block>\n        const block = document.createElement('block');\n        block.setAttribute('type', 'procedures_ifreturn');\n        block.setAttribute('gap', 16);\n        xmlList.push(block);\n    }\n\n    if (xmlList.length) {\n        // Add slightly larger gap between system blocks and user calls.\n        xmlList[xmlList.length - 1].setAttribute('gap', 24);\n    }\n\n    const tuple = Blockly.Procedures.allProcedures(workspace);\n    xmlList = xmlList.concat(Blockly.Procedures.populateDynamicProcedures(tuple));\n    return xmlList;\n};\n\nBlockly.Procedures.populateDynamicProcedures = function (tuple) {\n    let xmlList = [];\n\n    const populateProcedures = (procedureList, templateName) => {\n        const xml = [];\n\n        if (!procedureList) {\n            return xml;\n        }\n\n        for (let i = 0; i < procedureList.length; i++) {\n            const name = procedureList[i][0];\n            const args = procedureList[i][1];\n\n            // <block type=\"procedures_callnoreturn\" gap=\"16\">\n            //   <mutation name=\"do something\">\n            //     <arg name=\"x\"></arg>\n            //   </mutation>\n            // </block>\n            const block = document.createElement('block');\n            block.setAttribute('type', templateName);\n            block.setAttribute('gap', 16);\n\n            const mutation = document.createElement('mutation');\n            mutation.setAttribute('name', name);\n            block.appendChild(mutation);\n\n            args.forEach(argumentName => {\n                const arg = document.createElement('arg');\n                arg.setAttribute('name', argumentName);\n                mutation.appendChild(arg);\n            });\n\n            xml.push(block);\n        }\n\n        return xml;\n    };\n\n    xmlList = xmlList.concat(populateProcedures(tuple[0], 'procedures_callnoreturn'));\n    xmlList = xmlList.concat(populateProcedures(tuple[1], 'procedures_callreturn'));\n\n    return xmlList;\n};\n\n/**\n * Find the definition block for the named procedure.\n * @param {string} name Name of procedure.\n * @param {!Blockly.Workspace} workspace The workspace to search.\n * @return {Blockly.Block} The procedure definition block, or null not found.\n */\nBlockly.Procedures.getDefinition = function (name, workspace) {\n    // Assume that a procedure definition is a top block.\n    const blocks = workspace.getTopBlocks(false);\n    for (let i = 0; i < blocks.length; i++) {\n        if (blocks[i].getProcedureDef) {\n            const tuple = blocks[i].getProcedureDef();\n            if (tuple && Blockly.Names.equals(tuple[0], name)) {\n                return blocks[i];\n            }\n        }\n    }\n    return null;\n};\n\n// Scratch has a broken version where they return `false` if Blockly.Names.equals(procName[0], name).\n// https://github.com/LLK/scratch-blocks/pull/1930\nBlockly.Procedures.isNameUsed = function (name, workspace, optExclude) {\n    const blocks = workspace.getAllBlocks(false);\n    // Iterate through every block and check the name.\n    return blocks.some(block => {\n        if (block !== optExclude && block.getProcedureDef) {\n            const procName = block.getProcedureDef();\n            return Blockly.Names.equals(procName[0], name);\n        }\n        return false;\n    });\n};\n\n/**\n * Move the workspace based on the most recent mouse movements.\n * @param {!goog.math.Coordinate} currentDragDeltaXY How far the pointer has\n *     moved from the position at the start of the drag, in pixel coordinates.\n * @package\n */\nBlockly.WorkspaceDragger.prototype.drag = function (currentDragDeltaXY) {\n    if (this.workspace_.isFlyout) {\n        return;\n    }\n\n    const metrics = this.startDragMetrics_;\n    const newXY = goog.math.Coordinate.sum(this.startScrollXY_, currentDragDeltaXY);\n\n    // Bound the new XY based on workspace bounds.\n    let x = Math.min(newXY.x, -metrics.contentLeft);\n    let y = Math.min(newXY.y, -metrics.contentTop);\n\n    x = Math.max(x, metrics.viewWidth - metrics.contentLeft - metrics.contentWidth);\n    y = Math.max(y, metrics.viewHeight - metrics.contentTop - metrics.contentHeight);\n\n    x = -x - metrics.contentLeft;\n    y = -y - metrics.contentTop;\n\n    this.updateScroll_(x, y);\n};\n","import DBotStore from '../dbot-store';\nimport PendingPromise from '../../utils/pending-promise';\n\nBlockly.Workspace.prototype.wait_events = [];\n\n/**\n * Clear the undo/redo stacks.\n * deriv-bot: Sync undo/redo stack with our toolbar store.\n */\nBlockly.Workspace.prototype.clearUndo = function () {\n    this.undoStack_.length = 0;\n    this.redoStack_.length = 0;\n\n    const { toolbar } = DBotStore.instance;\n\n    toolbar.setHasRedoStack();\n    toolbar.setHasUndoStack();\n\n    // Stop any events already in the firing queue from being undoable.\n    Blockly.Events.clearPendingUndo();\n};\n\n/**\n * Fire a change event.\n * deriv-bot: Sync undo/redo stack with our toolbar store.\n * @param {!Blockly.Events.Abstract} event Event to fire.\n */\nBlockly.Workspace.prototype.fireChangeListener = function (event) {\n    if (event.recordUndo) {\n        this.undoStack_.push(event);\n        this.redoStack_.length = 0;\n\n        if (this.undoStack_.length > this.MAX_UNDO) {\n            this.undoStack_.unshift();\n        }\n\n        const { toolbar } = DBotStore.instance;\n\n        toolbar.setHasRedoStack();\n        toolbar.setHasUndoStack();\n    }\n\n    // Copy listeners in case a listener attaches/detaches itself.\n    const current_listeners = this.listeners_.slice();\n\n    current_listeners.forEach(listener => {\n        listener(event);\n    });\n    /**\n     * Gets a trade definition block instance and returns it.\n     * @returns {Blockly.Block|null} The trade definition or null.\n     */\n};\n\nBlockly.Workspace.prototype.getTradeDefinitionBlock = function () {\n    return this.getAllBlocks(true).find(b => b.type === 'trade_definition');\n};\n\nBlockly.Workspace.prototype.waitForBlockEvent = function (block_id, opt_event_type = null) {\n    const event_promise = new PendingPromise();\n\n    if (!this.wait_events.some(event => event.blockId === block_id && event.type === opt_event_type)) {\n        this.wait_events.push({\n            blockId: block_id,\n            promise: event_promise,\n            type: opt_event_type,\n        });\n    }\n\n    return event_promise;\n};\n\nBlockly.Workspace.prototype.waitForBlockEvent = function (options) {\n    const { block_type, event_type, timeout } = options;\n    const promise = new PendingPromise();\n\n    this.wait_events.push({ block_type, event_type, promise });\n\n    if (timeout) {\n        setTimeout(() => {\n            if (promise.isPending) {\n                promise.reject();\n            }\n        }, timeout);\n    }\n\n    return promise;\n};\n\nBlockly.Workspace.prototype.dispatchBlockEventEffects = function (event) {\n    this.wait_events.forEach((wait_event, idx) => {\n        if (!event.blockId) {\n            return;\n        }\n\n        const block = this.getBlockById(event.blockId);\n\n        if (block) {\n            const is_same_block_type = wait_event.block_type === block.type;\n            const is_same_event_type = wait_event.event_type === null || wait_event.event_type === event.type;\n\n            if (is_same_block_type && is_same_event_type) {\n                setTimeout(() => {\n                    wait_event.promise.resolve();\n                    this.wait_events.splice(idx, 1);\n                }, 500);\n            }\n        }\n    });\n};\n\nBlockly.Workspace.prototype.getAllFields = function (is_ordered) {\n    return this.getAllBlocks(is_ordered).reduce((fields, block) => {\n        block.inputList.forEach(input => fields.push(...input.fieldRow));\n        return fields;\n    }, []);\n};\n","import { config } from '../../constants/config';\nimport { removeLimitedBlocks } from '../../utils/workspace';\nimport DBotStore from '../dbot-store';\n\n/**\n * Handle a mouse-down on SVG drawing surface.\n * deriv-bot: We bubble the mousedown event for Core to be reactive.\n * @param {!Event} e Mouse down event.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.onMouseDown_ = function (e) {\n    // Bubble mousedown event up for some Core elements to react correctly.\n    if (e instanceof MouseEvent) {\n        Blockly.derivWorkspace.cachedParentSvg_.dispatchEvent(new e.constructor(e.type, e));\n    }\n    const gesture = this.getGesture(e);\n    if (gesture) {\n        gesture.handleWsStart(e, this);\n    }\n};\n\n/**\n * Scroll the workspace to center on the given block.\n * @param {?string} id ID of block center on.\n * @public\n */\nBlockly.WorkspaceSvg.prototype.centerOnBlock = function (id, hideChaff = true) {\n    if (!this.scrollbar) {\n        // eslint-disable-next-line no-console\n        console.warn('Tried to scroll a non-scrollable workspace.');\n        return;\n    }\n\n    const block = this.getBlockById(id);\n    if (!block) {\n        return;\n    }\n\n    // XY is in workspace coordinates.\n    const xy = block.getRelativeToSurfaceXY();\n\n    // Height/width is in workspace units.\n    const heightWidth = block.getHeightWidth();\n\n    // Find the enter of the block in workspace units.\n    const blockCenterY = xy.y + heightWidth.height / 2;\n\n    // In RTL the block's position is the top right of the block, not top left.\n    const multiplier = this.RTL ? -1 : 1;\n    const blockCenterX = xy.x + (multiplier * heightWidth.width) / 2;\n\n    // Workspace scale, used to convert from workspace coordinates to pixels.\n    const scale = this.scale;\n\n    // Center in pixels.  0, 0 is at the workspace origin.  These numbers may\n    // be negative.\n    const pixelX = blockCenterX * scale;\n    const pixelY = blockCenterY * scale;\n\n    const metrics = this.getMetrics();\n\n    // Scrolling to here would put the block in the top-left corner of the\n    // visible workspace.\n    const scrollToBlockX = pixelX - metrics.contentLeft;\n    const scrollToBlockY = pixelY - metrics.contentTop;\n\n    // viewHeight and viewWidth are in pixels.\n    const halfViewWidth = metrics.viewWidth / 2;\n    const halfViewHeight = metrics.viewHeight / 2;\n\n    // Put the block in the center of the visible workspace instead.\n    const scrollToCenterX = scrollToBlockX - halfViewWidth;\n    const scrollToCenterY = scrollToBlockY - halfViewHeight;\n\n    if (hideChaff) {\n        Blockly.hideChaff();\n    }\n\n    this.scrollbar.set(scrollToCenterX, scrollToCenterY);\n};\n\n/**\n * Creates a copy of passed block_node on main workspace and positions it\n * below the lowest block on the canvas.\n * @static\n * @param {Element} block_node\n * @public\n */\nBlockly.WorkspaceSvg.prototype.addBlockNode = function (block_node) {\n    const { flyout } = DBotStore.instance;\n    const block = Blockly.Xml.domToBlock(block_node, flyout.getFlyout().workspace_);\n    const top_blocks = this.getTopBlocks(true);\n    const new_block = flyout.getFlyout().createBlock(false, block);\n\n    if (top_blocks.length) {\n        const last_block = top_blocks[top_blocks.length - 1];\n        const last_block_xy = last_block.getRelativeToSurfaceXY();\n        const extra_spacing = last_block.startHat_ ? Blockly.BlockSvg.START_HAT_HEIGHT : 0;\n        const y = last_block_xy.y + last_block.getHeightWidth().height + extra_spacing + 30;\n        new_block.moveBy(last_block_xy.x, y);\n    }\n\n    // Call svgResize to avoid glitching workspace.\n    Blockly.svgResize(new_block.workspace);\n    this.centerOnBlock(new_block.id, false);\n};\n\n/**\n * Clean up the workspace by ordering all the blocks in a column. For deriv-bot\n * root-blocks are sorted in columns first, then all other blocks are positioned below\n * the lowest hanging root-block.\n */\nBlockly.WorkspaceSvg.prototype.cleanUp = function (x = 0, y = 0, blocks_to_clean = []) {\n    this.setResizesEnabled(false);\n    Blockly.Events.setGroup(Blockly.Events.getGroup() || true);\n\n    const is_import = blocks_to_clean.length !== 0;\n    const top_blocks = is_import ? blocks_to_clean : this.getTopBlocks(true);\n    const root_blocks = top_blocks\n        .filter(block => block.isMainBlock())\n        .sort((a, b) => {\n            const blockIndex = block => config.mainBlocks.findIndex(main_block_type => main_block_type === block.type);\n            return blockIndex(a) - blockIndex(b);\n        });\n    const column_count = 2;\n    const blocks_per_column = Math.ceil(root_blocks.length / column_count);\n\n    let original_cursor_y = y;\n\n    if (root_blocks.length) {\n        let column_index = 0;\n\n        root_blocks.forEach((block, index) => {\n            if (index === (column_index + 1) * blocks_per_column) {\n                original_cursor_y = y;\n                column_index++;\n            }\n\n            const xy = block.getRelativeToSurfaceXY();\n            const cursor_x = is_import ? x : -xy.x;\n            const cursor_y = original_cursor_y - (is_import ? 0 : xy.y);\n\n            if (column_index === 0) {\n                block.moveBy(cursor_x, cursor_y);\n            } else {\n                const start = (column_index - 1) * blocks_per_column;\n                const initialValue = {\n                    getHeightWidth: () => ({\n                        width: 0,\n                    }),\n                };\n\n                const fat_neighbour_block = root_blocks\n                    .slice(start, start + blocks_per_column)\n                    ?.reduce((a, b) => (a.getHeightWidth().width > b.getHeightWidth().width ? a : b), initialValue);\n\n                let position_x = cursor_x + fat_neighbour_block.getHeightWidth().width + Blockly.BlockSvg.MIN_BLOCK_X;\n                if (!is_import) {\n                    position_x += fat_neighbour_block.getRelativeToSurfaceXY().x;\n                }\n\n                block.moveBy(position_x, cursor_y);\n            }\n\n            block.snapToGrid();\n\n            original_cursor_y =\n                block.getRelativeToSurfaceXY().y + block.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y;\n        });\n\n        const initialValue = {\n            getRelativeToSurfaceXY: () => ({\n                y: 0,\n            }),\n            getHeightWidth: () => ({\n                height: 0,\n            }),\n        };\n\n        const lowest_root_block = root_blocks.reduce((a, b) => {\n            const a_metrics = a.getRelativeToSurfaceXY().y + a.getHeightWidth().height;\n            const b_metrics = b.getRelativeToSurfaceXY().y + b.getHeightWidth().height;\n            return a_metrics > b_metrics ? a : b;\n        }, initialValue);\n\n        original_cursor_y =\n            lowest_root_block.getRelativeToSurfaceXY().y +\n            lowest_root_block.getHeightWidth().height +\n            Blockly.BlockSvg.MIN_BLOCK_Y;\n    }\n\n    const filtered_top_blocks = top_blocks.filter(block => !block.isMainBlock());\n\n    filtered_top_blocks.forEach(block => {\n        const xy = block.getRelativeToSurfaceXY();\n        const cursor_x = is_import ? x : -xy.x;\n        const cursor_y = original_cursor_y - (is_import ? 0 : xy.y);\n\n        block.moveBy(cursor_x, cursor_y);\n        block.snapToGrid();\n\n        original_cursor_y =\n            block.getRelativeToSurfaceXY().y + block.getHeightWidth().height + Blockly.BlockSvg.MIN_BLOCK_Y;\n    });\n\n    Blockly.Events.setGroup(false);\n    this.setResizesEnabled(true);\n};\n\n/**\n * Return an object with all the metrics required to size scrollbars for a\n * top level workspace.  The following properties are computed:\n * Coordinate system: pixel coordinates.\n * .viewHeight: Height of the visible rectangle,\n * .viewWidth: Width of the visible rectangle,\n * .contentHeight: Height of the contents,\n * .contentWidth: Width of the content,\n * .viewTop: Offset of top edge of visible rectangle from parent,\n * .viewLeft: Offset of left edge of visible rectangle from parent,\n * .contentTop: Offset of the top-most content from the y=0 coordinate,\n * .contentLeft: Offset of the left-most content from the x=0 coordinate.\n * .absolute_top: Top-edge of view.\n * .absolute_left: Left-edge of view.\n * .toolboxWidth: Width of toolbox, if it exists.  Otherwise zero.\n * .toolboxHeight: Height of toolbox, if it exists.  Otherwise zero.\n * .flyoutWidth: Width of the flyout if it is always open.  Otherwise zero.\n * .flyoutHeight: Height of flyout if it is always open.  Otherwise zero.\n * .toolboxPosition: Top, bottom, left or right.\n * @return {!Object} Contains size and position metrics of a top level\n *   workspace.\n * @private\n * @this Blockly.WorkspaceSvg\n */\nBlockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_ = function () {\n    const toolbox_dimensions = Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_);\n    const flyout_dimensions = Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_);\n\n    // Contains height and width in CSS pixels.\n    // svg_size is equivalent to the size of the injectionDiv at this point.\n    const svg_size = Blockly.svgSize(this.getParentSvg());\n\n    if (this.toolbox_) {\n        if (this.toolboxPosition === Blockly.TOOLBOX_AT_TOP || this.toolboxPosition === Blockly.TOOLBOX_AT_BOTTOM) {\n            svg_size.height -= toolbox_dimensions.height;\n        } else if (\n            this.toolboxPosition === Blockly.TOOLBOX_AT_LEFT ||\n            this.toolboxPosition === Blockly.TOOLBOX_AT_RIGHT\n        ) {\n            svg_size.width -= toolbox_dimensions.width;\n        }\n    }\n\n    // svg_size is now the space taken up by the Blockly workspace, not including the toolbox.\n    const content_dimensions = Blockly.WorkspaceSvg.getContentDimensions_(this, svg_size);\n\n    let absolute_left = 0;\n    let absolute_top = 0;\n\n    if (this.toolbox_ && this.toolboxPosition === Blockly.TOOLBOX_AT_LEFT) {\n        absolute_top = 50; // deriv-bot: Add some spacing for Core header.\n        absolute_left = toolbox_dimensions.width;\n    }\n\n    if (this.toolbox_ && this.toolboxPosition === Blockly.TOOLBOX_AT_TOP) {\n        absolute_top = toolbox_dimensions.height + 50;\n    }\n\n    const metrics = {\n        contentHeight: content_dimensions.height,\n        contentWidth: content_dimensions.width,\n        contentTop: content_dimensions.top,\n        contentLeft: content_dimensions.left,\n        viewHeight: svg_size.height,\n        viewWidth: svg_size.width,\n        viewTop: -this.scrollY, // Must be in pixels, somehow.\n        viewLeft: -this.scrollX, // Must be in pixels, somehow.\n        absoluteTop: absolute_top,\n        absoluteLeft: absolute_left,\n        toolboxWidth: toolbox_dimensions.width,\n        toolboxHeight: toolbox_dimensions.height,\n        flyoutWidth: flyout_dimensions.width,\n        flyoutHeight: flyout_dimensions.height,\n        toolboxPosition: this.toolboxPosition,\n    };\n\n    return metrics;\n};\n\n/**\n * Paste the provided block onto the workspace.\n * @param {!Element} xml_block XML block element.\n */\nBlockly.WorkspaceSvg.prototype.paste = function (xml_block) {\n    if (!this.rendered) {\n        return;\n    }\n\n    if (this.currentGesture_) {\n        this.currentGesture_.cancel(); // Dragging while pasting?  No.\n    }\n\n    if (xml_block.tagName.toLowerCase() === 'comment') {\n        this.pasteWorkspaceComment_(xml_block);\n    } else {\n        removeLimitedBlocks(this, xml_block.getAttribute('type'));\n        this.pasteBlock_(xml_block);\n    }\n};\n\n/**\n * Show the context menu for the workspace.\n * @param {!Event} e Mouse event.\n * @private\n */\nBlockly.WorkspaceSvg.prototype.showContextMenu_ = function (e) {\n    if (this.options.readOnly || this.isFlyout) {\n        return;\n    }\n    const menu_options = [];\n    const top_blocks = this.getTopBlocks(true);\n    const all_blocks = this.getAllBlocks(true);\n\n    // Options to undo/redo previous action.\n    menu_options.push(Blockly.ContextMenu.wsUndoOption(this));\n    menu_options.push(Blockly.ContextMenu.wsRedoOption(this));\n\n    // Option to clean up blocks.\n    if (this.scrollbar) {\n        menu_options.push(Blockly.ContextMenu.wsCleanupOption(this, top_blocks.length));\n    }\n\n    if (this.options.collapse) {\n        const has_collapsed_blocks = all_blocks.some(block => block.isCollapsed());\n        const has_expanded_blocks = all_blocks.some(block => !block.isCollapsed());\n\n        menu_options.push(Blockly.ContextMenu.wsExpandOption(has_collapsed_blocks, all_blocks));\n        menu_options.push(Blockly.ContextMenu.wsCollapseOption(has_expanded_blocks, all_blocks));\n    }\n\n    // Option to add a workspace comment.\n    if (this.options.comments) {\n        menu_options.push(Blockly.ContextMenu.workspaceCommentOption(this, e));\n    }\n\n    menu_options.push(Blockly.ContextMenu.wsDeleteOption(this, top_blocks));\n\n    Blockly.ContextMenu.show(e, menu_options, this.RTL);\n};\n\n/**\n * Dispose of this workspace.\n * Unlink from all DOM elements to prevent memory leaks.\n */\nBlockly.WorkspaceSvg.prototype.dispose = function (should_show_loading = false) {\n    const disposeFn = () => {\n        // Stop rerendering.\n        this.rendered = false;\n        if (this.currentGesture_) {\n            this.currentGesture_.cancel();\n        }\n        Blockly.WorkspaceSvg.superClass_.dispose.call(this);\n        if (this.svgGroup_) {\n            goog.dom.removeNode(this.svgGroup_);\n            this.svgGroup_ = null;\n        }\n        this.svgBlockCanvas_ = null;\n        this.svgBubbleCanvas_ = null;\n        if (this.toolbox_) {\n            this.toolbox_.dispose();\n            this.toolbox_ = null;\n        }\n        if (this.flyout_) {\n            this.flyout_.dispose();\n            this.flyout_ = null;\n        }\n        if (this.trashcan) {\n            this.trashcan.dispose();\n            this.trashcan = null;\n        }\n        if (this.scrollbar) {\n            this.scrollbar.dispose();\n            this.scrollbar = null;\n        }\n        if (this.zoomControls_) {\n            this.zoomControls_.dispose();\n            this.zoomControls_ = null;\n        }\n\n        if (this.audioManager_) {\n            this.audioManager_.dispose();\n            this.audioManager_ = null;\n        }\n\n        if (this.grid_) {\n            this.grid_.dispose();\n            this.grid_ = null;\n        }\n\n        if (this.toolboxCategoryCallbacks_) {\n            this.toolboxCategoryCallbacks_ = null;\n        }\n        if (this.flyoutButtonCallbacks_) {\n            this.flyoutButtonCallbacks_ = null;\n        }\n        if (!this.options.parentWorkspace) {\n            // Top-most workspace.  Dispose of the div that the\n            // SVG is injected into (i.e. injectionDiv).\n            goog.dom.removeNode(this.getParentSvg().parentNode);\n        }\n        if (this.resizeHandlerWrapper_) {\n            Blockly.unbindEvent_(this.resizeHandlerWrapper_);\n            this.resizeHandlerWrapper_ = null;\n        }\n    };\n\n    if (should_show_loading) {\n        const { setLoading } = DBotStore.instance;\n        setLoading(true);\n\n        setTimeout(() => {\n            disposeFn();\n            setLoading(false);\n        }, 50);\n    } else {\n        disposeFn();\n    }\n};\n\n/**\n * Dispose of all blocks in workspace, with an optimization to prevent resizes.\n */\nBlockly.WorkspaceSvg.prototype.asyncClear = function () {\n    const { setLoading } = DBotStore.instance;\n    setLoading(true);\n\n    return new Promise(resolve => {\n        this.clear();\n        setLoading(false);\n        resolve();\n    });\n};\n","import { blueInfo } from '../blocks/images';\n\nBlockly.Tooltip.HOVER_MS = 50;\n\nBlockly.Tooltip.show_ = () => {\n    let params;\n    Blockly.Tooltip.DIV = ((Blockly.Tooltip.poisonedElement_ = Blockly.Tooltip.element_), Blockly.Tooltip.DIV);\n    if (!Blockly.Tooltip.blocked_) {\n        Blockly.Tooltip.DIV.innerHTML = '';\n        for (params = Blockly.Tooltip.element_.tooltip; typeof params === 'function'; ) params = params();\n        params = Blockly.utils.string.wrap(params, Blockly.Tooltip.LIMIT);\n        params = params.split('\\n');\n\n        params.forEach((param, index) => {\n            const div = document.createElement('div');\n            const text_span = document.createElement('span');\n\n            text_span.appendChild(document.createTextNode(param));\n            text_span.style.verticalAlign = 'middle';\n            Blockly.Tooltip.DIV.appendChild(div);\n\n            if (!index) {\n                const img = document.createElement('img');\n                const img_span = document.createElement('span');\n                img.src = blueInfo;\n                img.style.paddingRight = '8px';\n                img.style.verticalAlign = 'middle';\n                div.appendChild(img_span);\n                img_span.appendChild(img);\n            } else {\n                text_span.style.paddingLeft = '24px';\n            }\n\n            div.appendChild(text_span);\n        });\n\n        const direction = Blockly.Tooltip.element_.RTL;\n        const client_width = document.documentElement.clientWidth;\n        const client_height = document.documentElement.clientHeight;\n        if (Blockly.Tooltip.DIV) {\n            Blockly.Tooltip.DIV.style.direction = direction ? 'rtl' : 'ltr';\n        }\n        Blockly.Tooltip.DIV.style.display = 'block';\n        Blockly.Tooltip.visible = true;\n        let last_x = Blockly.Tooltip.lastX_;\n        last_x = direction\n            ? last_x - (Blockly.Tooltip.OFFSET_X + Blockly.Tooltip.DIV.offsetWidth)\n            : last_x + Blockly.Tooltip.OFFSET_X;\n        let last_y = Blockly.Tooltip.lastY_ + Blockly.Tooltip.OFFSET_Y;\n        if (last_y + Blockly.Tooltip.DIV.offsetHeight > client_height + window.scrollY) {\n            last_y -= Blockly.Tooltip.DIV.offsetHeight + 2 * Blockly.Tooltip.OFFSET_Y;\n        }\n        if (direction) {\n            last_x = Math.max(Blockly.Tooltip.MARGINS - window.scrollX, last_x);\n        }\n        if (last_x + Blockly.Tooltip.DIV.offsetWidth > client_width + window.scrollX - 2 * Blockly.Tooltip.MARGINS) {\n            last_x = client_width - Blockly.Tooltip.DIV.offsetWidth - 2 * Blockly.Tooltip.MARGINS;\n        }\n        Blockly.Tooltip.DIV.style.top = `${last_y}px`;\n        Blockly.Tooltip.DIV.style.left = `${last_x}px`;\n    }\n};\n\nBlockly.Tooltip.hide = () => {\n    if (Blockly.Tooltip.visible && Blockly.Tooltip.DIV) {\n        Blockly.Tooltip.visible = false;\n        setTimeout(() => (Blockly.Tooltip.DIV.style.display = 'none'), Blockly.Tooltip.HOVER_MS);\n    }\n    if (Blockly.Tooltip.showPid_) {\n        clearTimeout(Blockly.Tooltip.showPid_);\n    }\n\n    /// For hiding tooltip next to the platform name.\n    if (!Blockly.Tooltip.DIV?.style.direction) {\n        Blockly.Tooltip.visible = false;\n        Blockly.Tooltip.DIV.style.display = 'none';\n    }\n};\n","/* eslint-disble */\n/**\n * Create a main workspace and add it to the SVG.\n * @param {!Element} svg SVG element with pattern defined.\n * @param {!Blockly.Options} options Dictionary of options.\n * @param {!Blockly.BlockDragSurfaceSvg} blockDragSurface Drag surface SVG\n *     for the blocks.\n * @param {!Blockly.WorkspaceDragSurfaceSvg} workspaceDragSurface Drag surface\n *     SVG for the workspace.\n * @return {!Blockly.Workspace} Newly created main workspace.\n * @private\n */\nBlockly.createVirtualWorkspace_ = function (fragment, options, blockDragSurface, workspaceDragSurface) {\n    options.parentWorkspace = null;\n    const mainWorkspace = new Blockly.WorkspaceSvg(options, blockDragSurface, workspaceDragSurface);\n    mainWorkspace.scale = options.zoomOptions.startScale;\n    fragment.appendChild(mainWorkspace.createDom('blocklyMainBackground'));\n\n    return mainWorkspace;\n};\n","/**\n * Change the colour of the associated bubble to match its block.\n * deriv-bot: Use primary colour instead of tertiary. At time of writing\n * we use colour too similar to workspace background colour for tertiary (borders).\n * @package\n */\nBlockly.ScratchBlockComment.prototype.updateColour = function () {\n    if (this.isVisible()) {\n        this.bubble_.setColour(this.block_.getColour());\n    }\n};\n","// deriv-bot: Reference the correct function of wrap. This is due to\n// Scratch using different structure vs Blockly.\nBlockly.utils.string = {\n    wrap: Blockly.utils.wrap,\n};\n","Blockly.VariableMap.prototype.createVariable = function (name, opt_type, opt_id, opt_is_local, opt_is_cloud) {\n    let variable = this.getVariable(name, opt_type);\n\n    if (variable) {\n        return variable;\n    }\n\n    if (opt_id) {\n        variable = this.getVariableById(opt_id);\n\n        if (variable) {\n            return variable;\n        }\n    }\n\n    const optional_id = opt_id || Blockly.utils.genUid();\n    const optional_type = opt_type || '';\n\n    variable = new Blockly.VariableModel(this.workspace, name, optional_type, optional_id, opt_is_local, opt_is_cloud);\n\n    // If opt_type is not a key, create a new list.\n    if (!this.variableMap_[optional_type]) {\n        this.variableMap_[optional_type] = [variable];\n    } else {\n        // Else append the variable to the preexisting list.\n        this.variableMap_[optional_type].push(variable);\n    }\n\n    return variable;\n};\n","/**\n * Find all user-created variables that are in use in the workspace.\n * For use by generators.\n * To get a list of all variables on a workspace, including unused variables,\n * call Workspace.getAllVariables.\n * @deriv/bot: Required for JS generator to work.\n * @param {!Blockly.Workspace} ws The workspace to search for variables.\n * @return {!Array.<!Blockly.VariableModel>} Array of variable models.\n */\nBlockly.Variables.allUsedVarModels = function (ws) {\n    const blocks = ws.getAllBlocks(false);\n    const variableHash = Object.create(null);\n\n    // Iterate through every block and add each variable to the hash.\n    blocks.forEach(block => {\n        const blockVariables = block.getVarModels();\n        if (blockVariables) {\n            blockVariables.forEach(blockVariable => {\n                const id = blockVariable.getId();\n                if (id) {\n                    variableHash[id] = blockVariable;\n                }\n            });\n        }\n    });\n\n    // Flatten the hash into a list.\n    const variableList = [];\n    Object.keys(variableHash).forEach(id => {\n        variableList.push(variableHash[id]);\n    });\n\n    return variableList;\n};\n\n/**\n * Generate DOM objects representing a variable field.\n * @param {!Blockly.VariableModel} variableModel The variable model to\n *     represent.\n * @return {Element} The generated DOM.\n * @public\n */\nBlockly.Variables.generateVariableFieldDom = function (variableModel) {\n    /* Generates the following XML:\n     * <field name=\"VAR\" id=\"goKTKmYJ8DhVHpruv\" variabletype=\"int\">foo</field>\n     */\n    const field = document.createElement('field');\n\n    field.setAttribute('name', 'VAR');\n    field.setAttribute('id', variableModel.getId());\n    field.setAttribute('variabletype', variableModel.type);\n\n    const name = document.createTextNode(variableModel.name);\n    field.appendChild(name);\n    return field;\n};\n","Blockly.WorkspaceAudio.prototype.preload = function () {};\n","Blockly.Xml.NODE_BLOCK = 'BLOCK';\nBlockly.Xml.NODE_BUTTON = 'BUTTON';\nBlockly.Xml.NODE_LABEL = 'LABEL';\nBlockly.Xml.NODE_SHADOW = 'SHADOW';\nBlockly.Xml.NODE_INPUT = 'INPUT';\n","import filesaver from 'file-saver';\nimport { config } from '../constants/config';\n\nexport const saveAs = ({ data, filename, type }) => {\n    const blob = new Blob([data], { type });\n    filesaver.saveAs(blob, filename);\n};\n\nexport const getContractTypeOptions = (contract_type, trade_type) => {\n    const trade_types = config.opposites[trade_type.toUpperCase()];\n\n    if (!trade_types) {\n        return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n    }\n\n    const contract_options = trade_types.map(type => Object.entries(type)[0].reverse());\n\n    // When user selected a specific contract, only return the contract type they selected.\n    if (contract_type !== 'both') {\n        return contract_options.filter(option => option[1] === contract_type);\n    }\n\n    return contract_options;\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../constants/config';\nimport ApiHelpers from '../services/api/api-helpers';\n\n/* eslint-disable no-underscore-dangle */\nexport default class BlockConversion {\n    constructor() {\n        this.blocks_pending_reconnect = {};\n        this.workspace = this.createWorkspace();\n        this.workspace_variables = {};\n        this.has_market_block = false;\n    }\n\n    getConversions() {\n        const generateGrowingListBlock = (block_node, block_type, variable_name, child_value_input_name) => {\n            const block = this.workspace.newBlock(block_type);\n            const block_child_nodes = Array.from(block_node.children);\n            const mutation_dom = block_child_nodes.find(child_node => child_node.tagName.toLowerCase() === 'mutation');\n\n            if (mutation_dom) {\n                const items_amount = parseInt(mutation_dom.getAttribute('items')) || 0;\n\n                if (items_amount > 0) {\n                    // In DBot we have a statement block for each value part of the list, so we need to\n                    // generate blocks for these and connect them to the parent's statement.\n                    for (let i = 0; i < items_amount; i++) {\n                        block.onIconClick();\n                    }\n\n                    // Note that value_input_nodes.length can be different than the items_amount\n                    // user can have empty entries in their list!\n                    block_child_nodes\n                        .filter(child_node => child_node.tagName.toLowerCase() === 'value')\n                        .forEach(child_node => {\n                            const value_input_name = child_node.getAttribute('name');\n                            const value_input_index = parseInt(value_input_name.replace(/[^0-9]+/g, ''));\n\n                            Array.from(child_node.children).forEach(value_block_node => {\n                                const value_block = this.convertBlockNode(value_block_node, block);\n\n                                // Now connect this converted block to the new text_statement.\n                                const statement_block = block\n                                    .getBlocksInStatement('STACK')\n                                    .find((b, i) => value_input_index === i);\n                                const value_input = statement_block.getInput(child_value_input_name);\n\n                                value_input.connection.connect(value_block.outputConnection);\n                            });\n\n                            child_node.parentNode.removeChild(child_node);\n                        });\n                }\n            }\n\n            // Return variable block instead of statement.\n            const variable = this.generateUniqueVariable(variable_name);\n            const variable_block = this.workspace.newBlock('variables_get');\n\n            variable_block.setFieldValue(variable.getId(), 'VAR');\n            block.setFieldValue(variable.getId(), 'VARIABLE');\n\n            return {\n                block_to_attach: variable_block,\n                statement_blocks: [block],\n            };\n        };\n        const generateIndicatorBlock = (block_node, block_type, variable_name) => {\n            const block = this.workspace.newBlock(block_type);\n            const value_input_name_mappings = {\n                input_list: [{ old: 'INPUT', new: 'INPUT_LIST' }],\n                period: [{ old: 'PERIOD', new: 'PERIOD' }],\n                fast_ema_period: [{ old: 'FAST_EMA_PERIOD', new: 'FAST_EMA_PERIOD' }],\n                signal_ema_period: [\n                    // https://github.com/binary-com/binary-bot/pull/1123\n                    { old: 'SMA_PERIOD', new: 'SIGNAL_EMA_PERIOD' },\n                    { old: 'SIGNAL_EMA_PERIOD', new: 'SIGNAL_EMA_PERIOD' },\n                ],\n                slow_ema_period: [{ old: 'SLOW_EMA_PERIOD', new: 'SLOW_EMA_PERIOD' }],\n                std_dev_multiplier_up: [{ old: 'UPMULTIPLIER', new: 'UPMULTIPLIER' }],\n                std_dev_multiplier_down: [{ old: 'DOWNMULTIPLIER', new: 'DOWNMULTIPLIER' }],\n            };\n\n            // Bollinger Bands + MACDA have some fields we need to carry over.\n            switch (block_type) {\n                case 'bb_statement':\n                case 'bba_statement': {\n                    const bb_result_list = block.getField('BBRESULT_LIST');\n                    if (bb_result_list) {\n                        bb_result_list.setValue(this.getFieldValue(block_node, 'BBRESULT_LIST'));\n                    }\n                    break;\n                }\n                case 'macda_statement': {\n                    const macd_fields_list = block.getField('MACDFIELDS_LIST');\n                    if (macd_fields_list) {\n                        macd_fields_list.setValue(this.getFieldValue(block_node, 'MACDFIELDS_LIST'));\n                    }\n                    break;\n                }\n                default:\n                    break;\n            }\n\n            // Attach required child blocks (these are defined on each indicator block).\n            const required_child_blocks = block.required_child_blocks || [];\n\n            required_child_blocks.forEach(required_child_block_name => {\n                const child_block = this.workspace.newBlock(required_child_block_name);\n                const last_connection = block.getLastConnectionInStatement('STATEMENT');\n\n                last_connection.connect(child_block.previousConnection);\n            });\n\n            const blocks_in_statement = block.getBlocksInStatement('STATEMENT');\n\n            blocks_in_statement.forEach(block_in_statement => {\n                const value_name_mappings = value_input_name_mappings[block_in_statement.type];\n\n                if (value_name_mappings) {\n                    value_name_mappings.forEach(value_name_mapping => {\n                        const el_value = block_node.querySelector(`value[name=\"${value_name_mapping.old}\"]`);\n\n                        if (el_value) {\n                            const value_input = block_in_statement.getInput(value_name_mapping.new);\n\n                            Array.from(el_value.children).forEach(el_value_child => {\n                                const converted_block = this.convertBlockNode(el_value_child, block);\n                                const input_child_type = el_value_child.tagName.toLowerCase();\n\n                                if (input_child_type === 'shadow') {\n                                    converted_block.setShadow(true);\n                                }\n\n                                value_input.connection.connect(converted_block.outputConnection);\n                            });\n\n                            el_value.parentNode.removeChild(el_value);\n                        }\n                    });\n                }\n            });\n\n            // Return variable block instead of statement.\n            const variable = this.generateUniqueVariable(variable_name);\n            const variable_block = this.workspace.newBlock('variables_get');\n\n            variable_block.setFieldValue(variable.getId(), 'VAR');\n            block.setFieldValue(variable.getId(), 'VARIABLE');\n\n            return {\n                block_to_attach: variable_block,\n                statement_blocks: [block],\n            };\n        };\n        const tradeOptions = (block_node, is_symbol_type = false) => {\n            const block = this.workspace.newBlock('trade_definition_tradeoptions');\n            const block_node_to_use = block_node;\n\n            // Legacy symbol blocks used a statement \"CONDITION\" populated with a trade type block.\n            // This trade type block has the same structure as tradeOptions, hence we can use it here.\n            if (is_symbol_type) {\n                return false;\n            }\n\n            const fields = [\n                'DURATIONTYPE_LIST',\n                'CURRENCY_LIST',\n                'BARRIEROFFSETTYPE_LIST',\n                'SECONDBARRIEROFFSETTYPE_LIST',\n            ];\n            const block_child_nodes = Array.from(block_node_to_use.children);\n\n            let barrier_inputs = 0;\n            let has_prediction = false;\n\n            block_child_nodes\n                .filter(block_child_node => block_child_node.tagName.toLowerCase() === 'value')\n                .forEach(block_child_node => {\n                    const value_input_name = block_child_node.getAttribute('name');\n\n                    if (value_input_name === 'BARRIEROFFSET' || value_input_name === 'SECONDBARRIEROFFSET') {\n                        barrier_inputs++;\n                    } else if (value_input_name === 'PREDICTION') {\n                        has_prediction = true;\n                    }\n                });\n\n            if (barrier_inputs > 0) {\n                block.createBarrierInputs({\n                    allow_both_types: true,\n                    values: [1, -1],\n                });\n            }\n\n            if (has_prediction) {\n                block.createPredictionInput([0]);\n            }\n\n            fields.forEach(field_name => {\n                const field = block.getField(field_name);\n                if (field) {\n                    field.setValue(this.getFieldValue(block_node_to_use, field_name));\n                }\n            });\n\n            return { block_to_attach: block };\n        };\n        const conversions = {\n            bb: block_node => generateIndicatorBlock(block_node, 'bb_statement', 'bb'),\n            bba: block_node => generateIndicatorBlock(block_node, 'bba_statement', 'bba'),\n            ema: block_node => generateIndicatorBlock(block_node, 'ema_statement', 'ema'),\n            emaa: block_node => generateIndicatorBlock(block_node, 'emaa_statement', 'emaa'),\n            lists_create_with: block_node =>\n                generateGrowingListBlock(block_node, 'lists_create_with', localize('list'), 'VALUE'),\n            macda: block_node => generateIndicatorBlock(block_node, 'macda_statement', 'macda'),\n            market: block_node => {\n                this.has_market_block = true;\n                return tradeOptions(block_node);\n            },\n            rsi: block_node => generateIndicatorBlock(block_node, 'rsi_statement', 'rsi'),\n            rsia: block_node => generateIndicatorBlock(block_node, 'rsia_statement', 'rsia'),\n            sma: block_node => generateIndicatorBlock(block_node, 'sma_statement', 'sma'),\n            smaa: block_node => generateIndicatorBlock(block_node, 'smaa_statement', 'smaa'),\n            text_join: block_node => generateGrowingListBlock(block_node, 'text_join', localize('text'), 'TEXT'),\n            trade: block_node => {\n                const block = this.workspace.newBlock('trade_definition');\n                const block_fields = {\n                    trade_definition_market: ['MARKET_LIST', 'SUBMARKET_LIST', 'SYMBOL_LIST'],\n                    trade_definition_tradetype: ['TRADETYPECAT_LIST', 'TRADETYPE_LIST'],\n                    trade_definition_contracttype: ['TYPE_LIST'],\n                    trade_definition_candleinterval: ['CANDLEINTERVAL_LIST'],\n                    trade_definition_restartbuysell: ['TIME_MACHINE_ENABLED'],\n                    trade_definition_restartonerror: ['RESTARTONERROR'],\n                };\n\n                const blocks_to_connect = {};\n\n                Object.keys(block_fields).forEach(child_block_name => {\n                    const child_block = this.workspace.newBlock(child_block_name);\n\n                    block_fields[child_block_name].forEach(field_name => {\n                        child_block.setFieldValue(this.getFieldValue(block_node, field_name), field_name);\n                    });\n\n                    blocks_to_connect[child_block_name] = child_block;\n                });\n\n                Object.values(blocks_to_connect).forEach(child_block => {\n                    const last_connection = block.getLastConnectionInStatement('TRADE_OPTIONS');\n                    last_connection.connect(child_block.previousConnection);\n                });\n\n                return { block_to_attach: block };\n            },\n            tradeOptions,\n        };\n\n        return conversions;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getIllegalBlocks() {\n        const illegal_blocks = [];\n\n        // Legacy symbol + trade_type blocks are special cases, they are turned into multiple blocks.\n        // We don't convert these atm, as a workaround users can import to BBot, then export and load\n        // into DBot.\n        const { active_symbols } = ApiHelpers.instance.active_symbols;\n        const { opposites } = config;\n\n        active_symbols.forEach(active_symbol => {\n            const symbol_name = active_symbol.symbol.toLowerCase();\n            if (!illegal_blocks.includes(symbol_name)) {\n                illegal_blocks.push(symbol_name);\n            }\n        });\n\n        // All trade types blocks cannot be converted at this time.\n        Object.keys(opposites).forEach(opposites_name => illegal_blocks.push(opposites_name));\n\n        return illegal_blocks;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    createWorkspace() {\n        const options = new Blockly.Options({ media: `${__webpack_public_path__}media/` });\n        const el_injection_div = new DocumentFragment();\n        const workspace = Blockly.createVirtualWorkspace_(el_injection_div, options, false, false);\n\n        return workspace;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getFieldValue(el_block, field_name) {\n        const el_field = el_block.querySelector(`field[name=\"${field_name}\"]`);\n        return el_field ? el_field.textContent : '';\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getFirstBlockInStack(block) {\n        let current_previous_connection = block.previousConnection;\n        let previous_block = block.getPreviousBlock();\n\n        if (!current_previous_connection) {\n            return block;\n        }\n\n        while (previous_block) {\n            if (previous_block === block.getSurroundParent()) {\n                break;\n            }\n\n            current_previous_connection = previous_block.previousConnection;\n            previous_block = previous_block.getPreviousBlock();\n        }\n\n        return current_previous_connection.sourceBlock_;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    updateRenamedFields(xml) {\n        const renamed_fields = {\n            MARKET_LIST: {\n                volidx: 'synthetic_index',\n            },\n            TRADETYPECAT_LIST: {\n                endsinout: 'inout',\n                staysinout: 'inout',\n                callputequal: 'callput',\n            },\n            TRADETYPE_LIST: {\n                risefall: 'callput',\n                risefallequals: 'callputequal',\n            },\n        };\n\n        Object.keys(renamed_fields).forEach(field_name => {\n            const el_field = xml.querySelector(`field[name=\"${field_name}\"]`);\n\n            if (el_field) {\n                const value = el_field.innerText;\n\n                Object.keys(renamed_fields[field_name]).forEach(old_name => {\n                    if (value === old_name) {\n                        el_field.innerText = renamed_fields[field_name][old_name];\n                    }\n                });\n            }\n        });\n\n        return xml;\n    }\n\n    naivelyFixLegacyStrategyAfterConversion() {\n        // For old \"market\" blocks, move everything in \"Trade options\" except \"DURATION\"\n        // to \"Run once at start\". Legacy \"market\" blocks had no such thing as \"Run once at start\"\n        // not moving everything would kill Martingale strategies as they'd be reinitialised each run.\n        const trade_definition_block = this.workspace.getTradeDefinitionBlock();\n        const has_initialization_block = trade_definition_block.getBlocksInStatement('INITIALIZATION').length > 0;\n        if (trade_definition_block) {\n            trade_definition_block.getBlocksInStatement('SUBMARKET').forEach(block => {\n                if (\n                    block.type !== 'trade_definition_tradeoptions' &&\n                    this.has_market_block &&\n                    !has_initialization_block\n                ) {\n                    const last_connection = trade_definition_block.getLastConnectionInStatement('INITIALIZATION');\n                    block.unplug(true);\n                    last_connection.connect(block.previousConnection);\n                }\n            });\n        }\n    }\n\n    generateUniqueVariable(variable_name) {\n        let current_name = variable_name;\n        let counter = 0;\n\n        while (Object.values(this.workspace_variables).includes(current_name)) {\n            counter++;\n            current_name = variable_name + counter;\n        }\n\n        const ws_variable = Blockly.Variables.getOrCreateVariablePackage(this.workspace, '', current_name, '');\n        this.workspace_variables[ws_variable.id_] = current_name; // eslint-disable-line\n\n        return ws_variable;\n    }\n\n    convertStrategy(strategy_node, showIncompatibleStrategyDialog) {\n        // Disable events (globally) to suppress block onchange listeners from firing.\n        Blockly.Events.disable();\n\n        // We only want to update renamed fields for modern strategies.\n        const xml = this.updateRenamedFields(strategy_node);\n\n        // Don't convert already compatible strategies.\n        if (strategy_node.hasAttribute('is_dbot') && strategy_node.getAttribute('is_dbot') === 'true') {\n            Blockly.Events.enable();\n            return xml;\n        }\n\n        const has_illegal_block = this.getIllegalBlocks().some(\n            illegal_block_type => !!xml.querySelector(`block[type=\"${illegal_block_type}\"]`)\n        );\n\n        if (has_illegal_block) {\n            if (showIncompatibleStrategyDialog) {\n                showIncompatibleStrategyDialog();\n            }\n            Blockly.Events.enable();\n            return Blockly.Xml.textToDom('<xml />');\n        }\n\n        const variable_nodes = [];\n        const block_nodes = [];\n\n        Array.from(xml.children).forEach(strategy_child_node => {\n            const tag_name = strategy_child_node.nodeName.toLowerCase();\n\n            switch (tag_name) {\n                case 'block':\n                case 'shadow': {\n                    block_nodes.push(strategy_child_node);\n                    break;\n                }\n                case 'variables': {\n                    variable_nodes.push(...strategy_child_node.children);\n                    break;\n                }\n                default:\n                    break;\n            }\n        });\n\n        const registerVariables = el_variables => {\n            el_variables.forEach(el_variable => {\n                const variable_id = el_variable.getAttribute('id');\n                const variable_name = el_variable.textContent;\n\n                if (!this.workspace_variables[variable_id]) {\n                    const variable = Blockly.Variables.getOrCreateVariablePackage(\n                        this.workspace,\n                        variable_id,\n                        variable_name,\n                        ''\n                    );\n                    this.workspace_variables[variable.id_] = variable.name;\n                }\n            });\n        };\n\n        // Register pre-existing variables taken from XML file. Users may register variables\n        // but not use them, we should not delete them nor create only the ones used in the strategy.\n        registerVariables(variable_nodes);\n\n        // Collection strategies don't pre-register variables, find these and register\n        // variable instances for them if they don't exist yet.\n        registerVariables(xml.querySelectorAll('field[name=\"VAR\"]'));\n\n        block_nodes.forEach(block_node => this.convertBlockNode(block_node));\n\n        // Re-connect blocks that have been transformed into multiples. i.e. in the case\n        // of old multiline blocks converted to statement blocks.\n        Object.keys(this.blocks_pending_reconnect).forEach(previous_sibling_id => {\n            const previous_sibling_block = this.workspace.getBlockById(previous_sibling_id);\n            const child_blocks = this.blocks_pending_reconnect[previous_sibling_id];\n            const sibling_previous_connection = previous_sibling_block.previousConnection;\n\n            if (sibling_previous_connection) {\n                const sibling_previous_target_connection = sibling_previous_connection.targetConnection;\n                let highest_previous_connection = sibling_previous_connection;\n\n                // Connect all the blocks to be connected in reverse, we do this to maintain\n                // the original order of statement blocks, although the order mostly doesn't\n                // matter. (This may change, it may matter for other statement blocks.)\n                child_blocks.reverse().forEach(child_block => {\n                    highest_previous_connection.connect(child_block.nextConnection);\n                    highest_previous_connection = child_block.previousConnection;\n                });\n\n                if (sibling_previous_target_connection) {\n                    // Reconnect the first block in this statement to the original parent connection.\n                    let current_previous_connection = previous_sibling_block.previousConnection;\n                    let previous_block = previous_sibling_block.getPreviousBlock();\n\n                    while (previous_block) {\n                        if (previous_block === previous_block.getSurroundParent()) {\n                            break;\n                        }\n\n                        current_previous_connection = previous_block.previousConnection;\n                        previous_block = previous_block.getPreviousBlock();\n                    }\n\n                    sibling_previous_target_connection.connect(current_previous_connection);\n                }\n            }\n        });\n\n        this.naivelyFixLegacyStrategyAfterConversion();\n\n        this.workspace.getAllBlocks(true).forEach(block => {\n            block.initSvg();\n            block.render();\n        });\n\n        this.workspace.cleanUp();\n\n        const converted_xml = Blockly.Xml.workspaceToDom(this.workspace);\n\n        if (strategy_node.hasAttribute('collection') && strategy_node.getAttribute('collection') === 'true') {\n            converted_xml.setAttribute('collection', 'true');\n        }\n\n        converted_xml.setAttribute('is_dbot', 'true');\n\n        this.workspace = null;\n\n        Blockly.Events.enable();\n\n        return converted_xml;\n    }\n\n    convertBlockNode(el_block, parent_block = null) {\n        const conversions = this.getConversions();\n        const block_type = el_block.getAttribute('type');\n        const is_old_block = Object.keys(conversions).includes(block_type);\n        let block = null;\n\n        const is_collapsed = el_block.getAttribute('collapsed') && el_block.getAttribute('collapsed') === 'true';\n        const is_immovable = el_block.getAttribute('movable') && el_block.getAttribute('movable') === 'false';\n        const is_undeletable = el_block.getAttribute('deletable') && el_block.getAttribute('deletable') === 'false';\n        const is_disabled = el_block.getAttribute('disabled') && el_block.getAttribute('disabled') === 'true';\n\n        const setBlockAttributes = b => {\n            b.setCollapsed(is_collapsed);\n            b.setMovable(!is_immovable);\n            b.setDeletable(!is_undeletable);\n            b.setDisabled(is_disabled);\n        };\n\n        if (is_old_block) {\n            const conversion_obj = conversions[block_type](el_block);\n\n            // block is a value block that needs to be reattached. TODO?\n            if (conversion_obj.block_to_attach) {\n                block = conversion_obj.block_to_attach;\n                setBlockAttributes(block);\n            }\n\n            // Statement blocks coming from the conversion_obj need to be attached to the block's previousConnection.\n            if (parent_block && conversion_obj.statement_blocks) {\n                conversion_obj.statement_blocks.forEach(statement_block => {\n                    // Persist block attributes.\n                    setBlockAttributes(statement_block);\n\n                    const previous_connection = this.getClosestLegalPreviousConnection(parent_block);\n\n                    if (previous_connection) {\n                        const target_block = previous_connection.sourceBlock_;\n\n                        if (!this.blocks_pending_reconnect[target_block.id]) {\n                            this.blocks_pending_reconnect[target_block.id] = [];\n                        }\n\n                        this.blocks_pending_reconnect[target_block.id].push(statement_block);\n                    }\n                });\n            }\n        } else {\n            const is_legal_block = Object.keys(Blockly.Blocks).includes(block_type);\n\n            if (is_legal_block) {\n                block = this.workspace.newBlock(block_type);\n                setBlockAttributes(block);\n\n                // Ensure mutations are correctly rendered. This logic happens here because\n                // we should ignore mutations on blocks that are already converted i.e mutations\n                // will be taken care of in conversion, not here.\n                if (block) {\n                    const mutation_dom = Array.from(el_block.children).find(\n                        child_node => child_node.tagName.toLowerCase() === 'mutation'\n                    );\n\n                    if (mutation_dom && block.domToMutation) {\n                        block.domToMutation(mutation_dom);\n                    }\n                }\n            }\n        }\n\n        if (!block) {\n            console.warn('Unrecognised block found.', block_type); // eslint-disable-line no-console\n            return false;\n        }\n\n        // Keep track of parent_block, especially important for blocks\n        // nested in <next> statements. This property is only set during conversion.\n        if (parent_block) {\n            block.conversion_parent = parent_block;\n        }\n\n        Array.from(el_block.children).forEach(el_block_child => {\n            const tag_name = el_block_child.tagName.toLowerCase();\n\n            switch (tag_name) {\n                case 'field': {\n                    const field_name = el_block_child.getAttribute('name');\n                    const field = block.getField(field_name);\n\n                    if (field) {\n                        if (field instanceof Blockly.FieldVariable) {\n                            const variable_id = el_block_child.getAttribute('id');\n                            const variable_name = el_block_child.innerText.trim();\n                            const variable = Blockly.Variables.getOrCreateVariablePackage(\n                                this.workspace,\n                                variable_id,\n                                variable_name,\n                                ''\n                            );\n                            this.workspace_variables[variable.id_] = variable_name;\n                            field.setValue(variable.id_);\n                        } else {\n                            field.setValue(el_block_child.innerText);\n                        }\n                    }\n                    break;\n                }\n                case 'value': {\n                    this.processValueInputs(block, el_block_child);\n                    break;\n                }\n                case 'statement': {\n                    const statement_name = el_block_child.getAttribute('name');\n                    this.processStatementInputs(block, statement_name, el_block_child);\n                    break;\n                }\n                case 'next': {\n                    const closest_statement = el_block_child.closest('statement');\n\n                    if (closest_statement) {\n                        const statement_name = closest_statement.getAttribute('name');\n                        this.processStatementInputs(block, statement_name, el_block_child, block.conversion_parent);\n                    } else if (block.nextConnection) {\n                        Array.from(el_block_child.children).forEach(el_sibling_block => {\n                            const sibling_block = this.convertBlockNode(el_sibling_block);\n                            block.nextConnection.connect(sibling_block.previousConnection);\n                        });\n                    }\n                    break;\n                }\n                case 'comment': {\n                    const is_minimised = el_block_child.getAttribute('pinned') !== 'true';\n                    const comment_text = el_block_child.innerText;\n\n                    block.comment = new Blockly.ScratchBlockComment(block, comment_text, null, 0, 0, is_minimised);\n                    block.comment.iconXY_ = { x: 0, y: 0 };\n                    block.comment.setVisible(true); // Scratch comments are always visible.\n                    break;\n                }\n                default:\n                    break;\n            }\n        });\n\n        return block;\n    }\n\n    // eslint-disable-next-line consistent-return\n    processValueInputs(block, el_input) {\n        const input_name = el_input.getAttribute('name');\n        const input = block.getInput(input_name);\n\n        if (!input) {\n            console.warn('Unrecognised value input', input_name); // eslint-disable-line no-console\n            return false;\n        }\n\n        // Each of the children of a value node is a shadow or block node. Recursively\n        // convert these block nodes to their new counterpart and re-connect them.\n        // eslint-disable-next-line consistent-return\n        Array.from(el_input.children).forEach(el_input_child_block => {\n            const input_child_block = this.convertBlockNode(el_input_child_block, block);\n\n            if (!input_child_block) {\n                // eslint-disable-next-line no-console\n                console.warn('Illegal child.', el_input_child_block.getAttribute('type'));\n                return false;\n            }\n\n            // Set shadow property for shadow blocks.\n            const input_child_type = el_input_child_block.tagName.toLowerCase();\n            if (input_child_type === 'shadow') {\n                input_child_block.setShadow(true);\n            }\n\n            // Re-connect the child block to the value input.\n            input.connection.connect(input_child_block.outputConnection);\n        });\n    }\n\n    // eslint-disable-next-line consistent-return\n    processStatementInputs(block, statement_name, el_node_with_children, block_to_search = null) {\n        const block_to_use = block_to_search || block;\n        const input = block_to_use.getInput(statement_name);\n\n        if (!input) {\n            console.warn('Unrecognised statement input', statement_name); // eslint-disable-line no-console\n            return false;\n        }\n\n        // Each of the children of a statement node is a block node. Recursively\n        // convert these block nodes to their new counterpart and reconnect them.\n        // eslint-disable-next-line consistent-return\n        Array.from(el_node_with_children.children).forEach(el_input_child_block => {\n            const input_child_block = this.convertBlockNode(el_input_child_block, block_to_use);\n            if (!input_child_block) {\n                // eslint-disable-next-line no-console\n                console.warn('Unrecognised child in statement', el_input_child_block.getAttribute('type'));\n                return false;\n            }\n\n            // Note that blocks are connected recursively so more deeply nested blocks\n            // (i.e. nested in <next>) will be connected before less nested blocks.\n            // Luckily Blockly API works in our favour and helps maintain the correct order.\n            const statement_input = block_to_use.getInput(statement_name);\n\n            if (statement_input && input_child_block.previousConnection) {\n                statement_input.connection.connect(input_child_block.previousConnection);\n            }\n        });\n    }\n\n    getClosestLegalPreviousConnection(supposed_parent_block) {\n        // Procedures are a bit special, it's hard to find the correct connection for them so we\n        // generate a (completely useless) filler block and connect it to the procedure's statement\n        // so we can return that useless block's previousConnection.\n        if (config.procedureDefinitionBlocks.includes(supposed_parent_block.type)) {\n            const blocks_in_statement = supposed_parent_block.getBlocksInStatement('STACK');\n\n            if (blocks_in_statement.length === 0) {\n                const input = supposed_parent_block.getInput('STACK');\n                const useless_block = this.workspace.newBlock('useless_block');\n\n                input.connection.connect(useless_block.previousConnection);\n\n                return useless_block.previousConnection;\n            }\n\n            return supposed_parent_block.getInputTargetBlock('STACK').previousConnection;\n        }\n\n        let current_block = this.getFirstBlockInStack(supposed_parent_block);\n        let is_protected_statement = this.isConnectedToProtectedStatementInput(current_block);\n\n        while (is_protected_statement) {\n            const new_parent = current_block.getParent();\n\n            if (new_parent) {\n                current_block = new_parent;\n                is_protected_statement = this.isConnectedToProtectedStatementInput(current_block);\n            }\n        }\n\n        if (current_block.previousConnection) {\n            return current_block.previousConnection;\n        }\n\n        if (supposed_parent_block.conversion_parent) {\n            return this.getClosestLegalPreviousConnection(supposed_parent_block.conversion_parent);\n        }\n\n        return false;\n    }\n\n    isConnectedToProtectedStatementInput(block) {\n        const first_block = this.getFirstBlockInStack(block);\n        const previous_connection = first_block.previousConnection;\n\n        if (previous_connection) {\n            const target_connection = previous_connection.targetConnection;\n\n            if (target_connection) {\n                const target_block = target_connection.sourceBlock_; // eslint-disable-line\n                const input = target_block.getInputWithConnection(target_connection);\n                const protected_statements = target_block.protected_statements || [];\n\n                if (input && protected_statements.includes(input.name)) {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n}\n","import { localize } from '@deriv/translations';\nimport { saveAs } from '../shared';\nimport BlockConversion from '../backward-compatibility';\nimport { config } from '../../constants/config';\nimport { observer as globalObserver } from '../../utils/observer';\nimport { removeLimitedBlocks } from '../../utils/workspace';\nimport { saveWorkspaceToRecent } from '../../utils/local-storage';\nimport DBotStore from '../dbot-store';\nimport { log_types } from '../../constants/messages';\nimport { error_message_map } from '../../utils/error-config';\n\nexport const getSelectedTradeType = (workspace = Blockly.derivWorkspace) => {\n    const trade_type_block = workspace.getAllBlocks(true).find(block => block.type === 'trade_definition_tradetype');\n    const selected_trade_type = trade_type_block?.getFieldValue('TRADETYPE_LIST');\n    const mandatory_tradeoptions_block =\n        selected_trade_type === 'multiplier' ? 'trade_definition_multiplier' : 'trade_definition_tradeoptions';\n    return mandatory_tradeoptions_block;\n};\n\nexport const matchTranslateAttribute = translateString => {\n    const match = translateString.match(/translate\\((-?\\d*\\.?\\d+),(-?\\d*\\.?\\d+)\\)/);\n    if (match && match.length > 2) {\n        const x = parseFloat(match[1]);\n        const y = parseFloat(match[2]);\n        return { x, y };\n    }\n    return null; // Invalid or no match\n};\n\nexport const extractTranslateValues = () => {\n    const transform_value = Blockly?.derivWorkspace?.trashcan?.svgGroup_.getAttribute('transform');\n    const translate_xy = matchTranslateAttribute(transform_value);\n\n    if (!translate_xy) {\n        globalObserver.emit('Error', 'Invalid String');\n    }\n\n    return {\n        translate_X: translate_xy.x,\n        translate_Y: translate_xy.y,\n    };\n};\n\nexport const validateErrorOnBlockDelete = () => {\n    // Get the bounding rectangle of the selected block\n    const { translate_X, translate_Y } = extractTranslateValues();\n    const blockRect = Blockly.selected?.getSvgRoot().getBoundingClientRect();\n    const translate_offset = 200;\n    // Extract coordinates from the bounding rectangles\n    const blockX = blockRect?.left || 0;\n    const blockY = blockRect?.top || 0;\n    const mandatory_trade_option_block = getSelectedTradeType();\n    const required_block_types = [mandatory_trade_option_block, 'trade_definition', 'purchase', 'before_purchase'];\n    if (required_block_types?.includes(Blockly?.selected?.type)) {\n        if (\n            blockY >= translate_Y - translate_offset &&\n            blockY <= translate_Y + translate_offset &&\n            blockX >= translate_X - translate_offset &&\n            blockX <= translate_X + translate_offset\n        ) {\n            globalObserver.emit('ui.log.error', error_message_map[Blockly.selected.category_]?.default);\n        }\n    }\n};\n\nexport const updateWorkspaceName = () => {\n    if (!DBotStore?.instance) return;\n    const { load_modal } = DBotStore.instance;\n    const file_name = load_modal?.dashboard_strategies?.[0]?.name ?? config.default_file_name;\n    if (document.title.indexOf('-') > -1) {\n        const string_to_replace = document.title.substr(document.title.indexOf('-'));\n        const new_document_title = document.title.replace(string_to_replace, `- ${file_name}`);\n\n        document.title = new_document_title;\n    } else {\n        document.title += ` - ${file_name}`;\n    }\n};\n\nexport const isMainBlock = block_type => config.mainBlocks.indexOf(block_type) >= 0;\n\nexport const oppositesToDropdownOptions = opposite_name => {\n    return opposite_name.map(contract_type => {\n        // i.e. [['CALL', localize('Rise')]] becomes [[localize('Rise'), 'CALL']];\n        return Object.entries(contract_type)[0].reverse();\n    });\n};\n\nexport const cleanUpOnLoad = (blocks_to_clean, drop_event, workspace) => {\n    const { clientX = 0, clientY = 0 } = drop_event || {};\n    const toolbar_height = 76;\n    const blockly_metrics = workspace.getMetrics();\n    const scale_cancellation = 1 / workspace.scale;\n    const blockly_left = blockly_metrics.absoluteLeft - blockly_metrics.viewLeft;\n    const blockly_top = document.body.offsetHeight - blockly_metrics.viewHeight - blockly_metrics.viewTop;\n    const cursor_x = clientX ? (clientX - blockly_left) * scale_cancellation : 0;\n    const cursor_y = clientY ? (clientY - blockly_top - toolbar_height) * scale_cancellation : 0;\n\n    workspace.cleanUp(cursor_x, cursor_y, blocks_to_clean);\n};\n\nexport const save = (filename = '@deriv/bot', collection = false, xmlDom) => {\n    xmlDom.setAttribute('is_dbot', 'true');\n    xmlDom.setAttribute('collection', collection ? 'true' : 'false');\n\n    const data = Blockly.Xml.domToPrettyText(xmlDom);\n    saveAs({ data, type: 'text/xml;charset=utf-8', filename: `${filename}.xml` });\n};\n\nconst delayExecution = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nexport const load = async ({\n    block_string,\n    drop_event,\n    file_name,\n    strategy_id,\n    from,\n    workspace,\n    showIncompatibleStrategyDialog,\n}) => {\n    if (!DBotStore?.instance || !workspace) return;\n    const { setLoading } = DBotStore.instance;\n    setLoading(true);\n    // Delay execution to allow fully previewing previous strategy if users quickly switch between strategies.\n    await delayExecution(100);\n    const showInvalidStrategyError = () => {\n        setLoading(false);\n        const error_message = localize('XML file contains unsupported elements. Please check or modify file.');\n        globalObserver.emit('ui.log.error', error_message);\n    };\n\n    // Check if XML can be parsed correctly.\n    try {\n        const xmlDoc = new DOMParser().parseFromString(block_string, 'application/xml');\n\n        if (xmlDoc.getElementsByTagName('parsererror').length) {\n            return showInvalidStrategyError();\n        }\n    } catch (e) {\n        return showInvalidStrategyError();\n    }\n\n    let xml;\n    // Check if XML can be parsed into a strategy.\n    try {\n        xml = Blockly.Xml.textToDom(block_string);\n    } catch (e) {\n        return showInvalidStrategyError();\n    }\n\n    const blockConversion = new BlockConversion();\n    xml = blockConversion.convertStrategy(xml, showIncompatibleStrategyDialog);\n    const blockly_xml = xml.querySelectorAll('block');\n\n    // Check if there are any blocks in this strategy.\n    if (!blockly_xml.length) {\n        return showInvalidStrategyError();\n    }\n\n    // Check if all block types in XML are allowed.\n    const has_invalid_blocks = Array.from(blockly_xml).some(block => {\n        const block_type = block.getAttribute('type');\n        return !Object.keys(Blockly.Blocks).includes(block_type);\n    });\n\n    if (has_invalid_blocks) {\n        return showInvalidStrategyError();\n    }\n\n    try {\n        const is_collection = xml.hasAttribute('collection') && xml.getAttribute('collection') === 'true';\n        const event_group = is_collection ? `load_collection${Date.now()}` : `dbot-load${Date.now()}`;\n\n        Blockly.Events.setGroup(event_group);\n        removeLimitedBlocks(\n            workspace,\n            Array.from(blockly_xml).map(xml_block => xml_block.getAttribute('type'))\n        );\n\n        if (is_collection) {\n            loadBlocks(xml, drop_event, event_group, workspace);\n        } else {\n            await loadWorkspace(xml, event_group, workspace);\n\n            const is_main_workspace = workspace === Blockly.derivWorkspace;\n            if (is_main_workspace) {\n                const { save_modal } = DBotStore.instance;\n\n                save_modal.updateBotName(file_name);\n                workspace.clearUndo();\n                workspace.current_strategy_id = strategy_id || Blockly.utils.genUid();\n                await saveWorkspaceToRecent(xml, from);\n            }\n        }\n\n        // Set user disabled state on all disabled blocks. This ensures we don't change the disabled\n        // state through code, which was implemented for user experience.\n        workspace.getAllBlocks().forEach(block => {\n            if (block.disabled) {\n                block.is_user_disabled_state = true;\n            }\n        });\n\n        if (workspace === Blockly.derivWorkspace) {\n            globalObserver.emit('ui.log.success', { log_type: log_types.LOAD_BLOCK });\n        }\n    } catch (e) {\n        console.error(e); // eslint-disable-line\n        return showInvalidStrategyError();\n    } finally {\n        setLoading(false);\n    }\n};\n\nexport const loadBlocks = (xml, drop_event, event_group, workspace) => {\n    Blockly.Events.setGroup(event_group);\n\n    const block_ids = Blockly.Xml.domToWorkspace(xml, workspace);\n    const added_blocks = block_ids.map(block_id => workspace.getBlockById(block_id));\n\n    if (drop_event && Object.keys(drop_event).length !== 0) {\n        cleanUpOnLoad(added_blocks, drop_event, workspace);\n    } else {\n        workspace.cleanUp();\n    }\n};\n\nexport const loadWorkspace = async (xml, event_group, workspace) => {\n    Blockly.Events.setGroup(event_group);\n    await workspace.asyncClear();\n    Blockly.Xml.domToWorkspace(xml, workspace);\n};\n\nconst loadBlocksFromHeader = (xml_string, block) => {\n    // eslint-disable-next-line consistent-return\n    return new Promise((resolve, reject) => {\n        let xml;\n\n        try {\n            xml = Blockly.Xml.textToDom(xml_string);\n        } catch (error) {\n            return reject(localize('Unrecognized file format'));\n        }\n\n        try {\n            const is_collection = xml.hasAttribute('collection') && xml.getAttribute('collection') === 'true';\n\n            if (!is_collection) {\n                reject(localize('Remote blocks to load must be a collection.'));\n            }\n\n            addLoaderBlocksFirst(xml)\n                .then(() => {\n                    Array.from(xml.children).forEach(el_block => addDomAsBlock(el_block, block));\n                    resolve();\n                })\n                .catch(() => {\n                    reject();\n                });\n        } catch (e) {\n            reject(localize('Unable to load the block file.'));\n        }\n    });\n};\n\nexport const loadBlocksFromRemote = block => {\n    // eslint-disable-next-line consistent-return\n    return new Promise((resolve, reject) => {\n        let url = block.getFieldValue('URL');\n\n        if (url.indexOf('http') === -1) {\n            url = `http://${url}`;\n        }\n\n        const url_pattern = /[^/]*\\.[a-zA-Z]{3}$/;\n        const has_possible_missing_index_xml = url.slice(-1)[0] === '/';\n\n        if (!url.match(url_pattern) && !has_possible_missing_index_xml) {\n            return reject(localize('Target must be an XML file'));\n        }\n\n        if (has_possible_missing_index_xml) {\n            url += 'index.xml';\n        }\n\n        if (block.isKnownUrl(url)) {\n            block.setDisabled(true);\n            return reject(localize('This URL is already loaded'));\n        }\n\n        const onFetchError = () => reject(localize('An error occured while trying to load the URL'));\n\n        fetch(url)\n            .then(response => {\n                if (response.ok) {\n                    response.text().then(xml_string => {\n                        loadBlocksFromHeader(xml_string, block)\n                            .then(() => resolve(block))\n                            .catch(onFetchError);\n                    });\n                } else {\n                    onFetchError();\n                }\n            })\n            .catch(onFetchError);\n    });\n};\n\nexport const addLoaderBlocksFirst = xml => {\n    return new Promise((resolve, reject) => {\n        const promises = [];\n\n        Array.from(xml.children).forEach(el_block => {\n            const block_type = el_block.getAttribute('type');\n\n            if (block_type === 'loader') {\n                el_block.remove();\n                const loader = Blockly.Xml.domToBlock(el_block, Blockly.derivWorkspace);\n                promises.push(loadBlocksFromRemote(loader)); // eslint-disable-line no-use-before-define\n            }\n        });\n\n        if (promises.length) {\n            Promise.all(promises).then(resolve, reject);\n        } else {\n            resolve([]);\n        }\n    });\n};\n\nexport const addDomAsBlock = (el_block, parent_block = null) => {\n    if (el_block.tagName.toLowerCase() === 'variables') {\n        return Blockly.Xml.domToVariables(el_block, Blockly.derivWorkspace);\n    }\n\n    const block_type = el_block.getAttribute('type');\n    const block_conversion = new BlockConversion();\n    const block_xml = Blockly.Xml.blockToDom(block_conversion.convertBlockNode(el_block));\n\n    // Fix legacy Blockly `varid` attribute.\n    Array.from(block_xml.getElementsByTagName('arg')).forEach(el => {\n        if (el.hasAttribute('varid')) {\n            el.setAttribute('varId', el.getAttribute('varid'));\n        }\n    });\n\n    removeLimitedBlocks(Blockly.derivWorkspace, block_type);\n\n    const block = Blockly.Xml.domToBlock(block_xml, Blockly.derivWorkspace);\n\n    if (parent_block) {\n        parent_block.blocks_added_by_me.push(block);\n    }\n\n    return block;\n};\n\nconst getAllRequiredBlocks = (workspace, required_block_types) => {\n    return workspace.getAllBlocks().filter(block => {\n        if (required_block_types.includes(block.type)) {\n            return (\n                (block.childBlocks_.length === 0 && required_block_types.includes(block.category_)) ||\n                block.parentBlock_ === null\n            );\n        }\n    });\n};\n\nconst getMissingBlocks = (workspace, required_block_types) => {\n    return required_block_types.filter(blockType => {\n        return !workspace.getAllBlocks().some(block => block.type === blockType);\n    });\n};\n\nconst getDisabledBlocks = required_blocks_check => {\n    return required_blocks_check.filter(block => {\n        const hasDisabledChild =\n            block.childBlocks_ && block.childBlocks_.some(childBlock => childBlock.disabled === true);\n        return block.disabled === true || hasDisabledChild;\n    });\n};\n\nconst throwNewErrorMessage = (error_blocks, key) => {\n    return error_blocks.forEach(block => {\n        if (key === 'misplaced' && block) globalObserver.emit('ui.log.error', error_message_map[block?.type]?.[key]);\n        else if (key === 'missing' && block) globalObserver.emit('ui.log.error', error_message_map[block]?.[key]);\n        else if (key === 'disabled' && block) {\n            let parent_block_error = false;\n            const parent_error_message = error_message_map[block.type]?.[key];\n            if (block.disabled && parent_error_message) {\n                globalObserver.emit('ui.log.error', parent_error_message);\n                parent_block_error = true;\n            } else if (!parent_block_error && block.childBlocks_) {\n                block.childBlocks_.forEach(childBlock => {\n                    const child_error_message = error_message_map[childBlock.type]?.[key];\n                    if (child_error_message) globalObserver.emit('ui.log.error', child_error_message);\n                });\n            }\n        }\n    });\n};\n\nexport const isAllRequiredBlocksEnabled = workspace => {\n    if (!workspace) return false;\n\n    const mandatory_trade_option_block = getSelectedTradeType(workspace);\n    const { mandatoryMainBlocks } = config;\n    const required_block_types = [mandatory_trade_option_block, ...mandatoryMainBlocks];\n\n    const required_blocks_check = getAllRequiredBlocks(workspace, required_block_types);\n\n    const missing_blocks = getMissingBlocks(workspace, required_block_types);\n    const disabled_blocks = getDisabledBlocks(required_blocks_check);\n\n    if (missing_blocks) throwNewErrorMessage(missing_blocks, 'missing');\n    if (disabled_blocks) throwNewErrorMessage(disabled_blocks, 'disabled');\n\n    const error_blocks = [...missing_blocks, ...disabled_blocks];\n    const blocks_required = error_blocks.length === 0;\n\n    return blocks_required;\n};\n\nexport const scrollWorkspace = (workspace, scroll_amount, is_horizontal, is_chronological) => {\n    const ws_metrics = workspace.getMetrics();\n\n    let scroll_x = ws_metrics.viewLeft - ws_metrics.contentLeft;\n    let scroll_y = ws_metrics.viewTop - ws_metrics.contentTop;\n\n    if (is_horizontal) {\n        scroll_x += is_chronological ? scroll_amount : -scroll_amount;\n        scroll_y += -20;\n    } else {\n        scroll_x += -20;\n        scroll_y += is_chronological ? scroll_amount : -scroll_amount;\n    }\n\n    workspace.scrollbar.set(scroll_x, scroll_y);\n};\n\n/**\n * Sets the Blockly.Events.group_ and executes the passed callBackFn. Mainly\n * used to ensure undo/redo actions are executed correctly.\n * @param {Boolean} use_existing_group Uses the existing event group if true.\n * @param {Function} callbackFn Logic to execute as part of this event group.\n */\nexport const runGroupedEvents = (use_existing_group, callbackFn, opt_group_name) => {\n    const group = (use_existing_group && Blockly.Events.getGroup()) || opt_group_name || true;\n\n    Blockly.Events.setGroup(group);\n    callbackFn();\n\n    if (!use_existing_group) {\n        Blockly.Events.setGroup(false);\n    }\n};\n\n/**\n * Sets the recordUndo flag to \"false\" globally, this will ensure any events\n * happening as part of the callbackFn logic cannot be undone.\n * @param {*} callbackFn Logic to execute as part of this event group.\n */\nexport const runIrreversibleEvents = callbackFn => {\n    const { recordUndo } = Blockly.Events;\n    Blockly.Events.recordUndo = false;\n\n    callbackFn();\n\n    Blockly.Events.recordUndo = recordUndo;\n};\n\n/**\n * Disables Blockly Events globally and runs the passed callbackFn.\n * (Preference should be given to runIrreversibleEvents).\n * @param {*} callbackFn Logic to completely hide from Blockly\n */\nexport const runInvisibleEvents = callbackFn => {\n    Blockly.Events.disable();\n    callbackFn();\n    Blockly.Events.enable();\n};\n\nexport const updateDisabledBlocks = (workspace, event) => {\n    if (event.type === Blockly.Events.END_DRAG) {\n        workspace.getAllBlocks().forEach(block => {\n            if (!block.getParent() || block.is_user_disabled_state) {\n                return;\n            }\n\n            const restricted_parents = block.restricted_parents || [];\n            if (restricted_parents.length === 0) {\n                return;\n            }\n\n            const should_disable = !restricted_parents.some(restricted_parent =>\n                block.isDescendantOf(restricted_parent)\n            );\n\n            runGroupedEvents(\n                true,\n                () => {\n                    block.setDisabled(should_disable);\n                },\n                event.group\n            );\n\n            Blockly.Events.setGroup(false);\n        });\n    }\n};\n\nexport const emptyTextValidator = input => {\n    return !input || input === \"''\";\n};\n\n/* eslint-disable no-bitwise */\nexport const isDarkRgbColour = string_rgb => {\n    const values = string_rgb.substring(1);\n    const rgb = parseInt(values, 16);\n    const red = (rgb >> 16) & 0xff;\n    const green = (rgb >> 8) & 0xff;\n    const blue = (rgb >> 0) & 0xff;\n    const luma = 0.2126 * red + 0.7152 * green + 0.0722 * blue;\n    return luma < 160;\n};\n/* eslint-enable */\n","import { localize } from '@deriv/translations';\nimport PendingPromise from '../../utils/pending-promise';\nimport { config } from '../../constants/config';\n\nexport default class ActiveSymbols {\n    constructor(ws, trading_times) {\n        this.active_symbols = [];\n        this.disabled_markets = [];\n        this.disabled_symbols = ['frxGBPNOK', 'frxUSDNOK', 'frxUSDNEK', 'frxUSDSEK']; // These are only forward-starting.\n        this.disabled_submarkets = ['energy', 'step_index'];\n        this.init_promise = new PendingPromise();\n        this.is_initialised = false;\n        this.processed_symbols = {};\n        this.trading_times = trading_times;\n        this.ws = ws;\n    }\n\n    async retrieveActiveSymbols(is_forced_update = false) {\n        await this.trading_times.initialise();\n\n        if (!is_forced_update && this.is_initialised) {\n            await this.init_promise;\n            return this.active_symbols;\n        }\n\n        this.is_initialised = true;\n\n        const { active_symbols } = await this.ws.authorized.activeSymbols();\n\n        this.active_symbols = active_symbols;\n        this.processed_symbols = this.processActiveSymbols();\n        this.trading_times.onMarketOpenCloseChanged = changes => {\n            Object.keys(changes).forEach(symbol_name => {\n                const symbol_obj = this.active_symbols[symbol_name];\n\n                if (symbol_obj) {\n                    symbol_obj.exchange_is_open = changes[symbol_name];\n                }\n            });\n\n            this.changes = changes;\n            this.processActiveSymbols();\n        };\n\n        this.init_promise.resolve();\n\n        return this.active_symbols;\n    }\n\n    processActiveSymbols() {\n        return this.active_symbols.reduce((processed_symbols, symbol) => {\n            if (\n                this.disabled_markets.includes(symbol.market) ||\n                this.disabled_symbols.includes(symbol.symbol) ||\n                this.disabled_submarkets.includes(symbol.submarket)\n            ) {\n                return processed_symbols;\n            }\n\n            const isExistingValue = (object, prop) => Object.keys(object).findIndex(a => a === symbol[prop]) !== -1;\n\n            if (!isExistingValue(processed_symbols, 'market')) {\n                processed_symbols[symbol.market] = {\n                    display_name: symbol.market_display_name,\n                    submarkets: {},\n                };\n            }\n\n            const { submarkets } = processed_symbols[symbol.market];\n\n            if (!isExistingValue(submarkets, 'submarket')) {\n                submarkets[symbol.submarket] = {\n                    display_name: symbol.submarket_display_name,\n                    symbols: {},\n                };\n            }\n\n            const { symbols } = submarkets[symbol.submarket];\n\n            if (!isExistingValue(symbols, 'symbol')) {\n                symbols[symbol.symbol] = {\n                    display_name: symbol.display_name,\n                    pip_size: `${symbol.pip}`.length - 2,\n                    is_active: !symbol.is_trading_suspended && symbol.exchange_is_open,\n                };\n            }\n\n            return processed_symbols;\n        }, {});\n    }\n\n    /**\n     * Retrieves all symbols and returns an array of symbol objects consisting of symbol and their linked market + submarket.\n     * @returns {Array} Symbols and their submarkets + markets.\n     */\n    getAllSymbols(should_be_open = false) {\n        const all_symbols = [];\n\n        Object.keys(this.processed_symbols).forEach(market_name => {\n            if (should_be_open && this.isMarketClosed(market_name)) {\n                return;\n            }\n\n            const market = this.processed_symbols[market_name];\n            const { submarkets } = market;\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                const submarket = submarkets[submarket_name];\n                const { symbols } = submarket;\n\n                Object.keys(symbols).forEach(symbol_name => {\n                    const symbol = symbols[symbol_name];\n\n                    all_symbols.push({\n                        market: market_name,\n                        market_display: market.display_name,\n                        submarket: submarket_name,\n                        submarket_display: submarket.display_name,\n                        symbol: symbol_name,\n                        symbol_display: symbol.display_name,\n                    });\n                });\n            });\n        });\n\n        return all_symbols;\n    }\n\n    getMarketDropdownOptions() {\n        const market_options = [];\n\n        Object.keys(this.processed_symbols).forEach(market_name => {\n            const { display_name } = this.processed_symbols[market_name];\n            const market_display_name =\n                display_name + (this.isMarketClosed(market_name) ? ` ${localize('(Closed)')}` : '');\n            market_options.push([market_display_name, market_name]);\n        });\n\n        if (market_options.length === 0) {\n            return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n        }\n        market_options.sort(a => (a[1] === 'synthetic_index' ? -1 : 1));\n\n        const has_closed_markets = market_options.some(market_option => this.isMarketClosed(market_option[1]));\n\n        if (has_closed_markets) {\n            const sorted_options = this.sortDropdownOptions(market_options, this.isMarketClosed);\n\n            if (this.isMarketClosed('forex')) {\n                return sorted_options.sort(a => (a[1] === 'synthetic_index' ? -1 : 1));\n            }\n\n            return sorted_options;\n        }\n\n        return market_options;\n    }\n\n    getSubmarketDropdownOptions(market) {\n        const submarket_options = [];\n        const market_obj = this.processed_symbols[market];\n\n        if (market_obj) {\n            const { submarkets } = market_obj;\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                const { display_name } = submarkets[submarket_name];\n                const submarket_display_name =\n                    display_name + (this.isSubmarketClosed(submarket_name) ? ` ${localize('(Closed)')}` : '');\n                submarket_options.push([submarket_display_name, submarket_name]);\n            });\n        }\n\n        if (submarket_options.length === 0) {\n            return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n        }\n        if (market === 'synthetic_index') {\n            submarket_options.sort(a => (a[1] === 'random_index' ? -1 : 1));\n        }\n\n        return this.sortDropdownOptions(submarket_options, this.isSubmarketClosed);\n    }\n\n    getSymbolDropdownOptions(submarket) {\n        const symbol_options = Object.keys(this.processed_symbols).reduce((accumulator, market_name) => {\n            const { submarkets } = this.processed_symbols[market_name];\n\n            Object.keys(submarkets).forEach(submarket_name => {\n                if (submarket_name === submarket) {\n                    const { symbols } = submarkets[submarket_name];\n                    Object.keys(symbols).forEach(symbol_name => {\n                        const { display_name } = symbols[symbol_name];\n                        const symbol_display_name =\n                            display_name + (this.isSymbolClosed(symbol_name) ? ` ${localize('(Closed)')}` : '');\n                        accumulator.push([symbol_display_name, symbol_name]);\n                    });\n                }\n            });\n\n            return accumulator;\n        }, []);\n\n        if (symbol_options.length === 0) {\n            return config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n        }\n\n        return this.sortDropdownOptions(symbol_options, this.isSymbolClosed);\n    }\n\n    isMarketClosed(market_name) {\n        const market = this.processed_symbols[market_name];\n\n        if (!market) {\n            return true;\n        }\n\n        return Object.keys(market.submarkets).every(submarket_name => this.isSubmarketClosed(submarket_name));\n    }\n\n    isSubmarketClosed(submarket_name) {\n        const market_name = Object.keys(this.processed_symbols).find(name => {\n            const market = this.processed_symbols[name];\n            return Object.keys(market.submarkets).includes(submarket_name);\n        });\n\n        if (!market_name) {\n            return true;\n        }\n\n        const market = this.processed_symbols[market_name];\n        const submarket = market.submarkets[submarket_name];\n\n        if (!submarket) {\n            return true;\n        }\n\n        const { symbols } = submarket;\n        return Object.keys(symbols).every(symbol_name => this.isSymbolClosed(symbol_name));\n    }\n\n    isSymbolClosed(symbol_name) {\n        return this.active_symbols.some(\n            active_symbol =>\n                active_symbol.symbol === symbol_name &&\n                (!active_symbol.exchange_is_open || active_symbol.is_trading_suspended)\n        );\n    }\n\n    sortDropdownOptions = (dropdown_options, closedFunc) => {\n        const options = [...dropdown_options];\n\n        options.sort((a, b) => {\n            const is_a_closed = closedFunc.call(this, a[1]);\n            const is_b_closed = closedFunc.call(this, b[1]);\n\n            if (is_a_closed && !is_b_closed) {\n                return 1;\n            } else if (is_a_closed === is_b_closed) {\n                return 0;\n            }\n            return -1;\n        });\n\n        return options;\n    };\n}\n","import { datadogLogs } from '@datadog/browser-logs';\nimport { formatDate, formatTime } from '@deriv/shared';\n\nconst DATADOG_CLIENT_TOKEN_LOGS = process.env.DATADOG_CLIENT_TOKEN_LOGS ?? '';\nconst isProduction = process.env.CIRCLE_JOB === 'release_production';\nconst isStaging = process.env.CIRCLE_JOB === 'release_staging';\nlet dataDogSessionSampleRate = 0;\n\ndataDogSessionSampleRate = +process.env.DATADOG_SESSION_SAMPLE_RATE_LOGS ?? 1;\nlet dataDogVersion = '';\nlet dataDogEnv = '';\n\nif (isProduction) {\n    dataDogVersion = `deriv-app-${process.env.CIRCLE_TAG}`;\n    dataDogEnv = 'production';\n} else if (isStaging) {\n    dataDogVersion = `deriv-app-staging-v${formatDate(new Date(), 'YYYYMMDD')}-${formatTime(Date.now(), 'HH:mm')}`;\n    dataDogEnv = 'staging';\n}\n\nif (DATADOG_CLIENT_TOKEN_LOGS) {\n    datadogLogs.init({\n        clientToken: DATADOG_CLIENT_TOKEN_LOGS,\n        site: 'datadoghq.com',\n        forwardErrorsToLogs: false,\n        service: 'Dbot',\n        sessionSampleRate: dataDogSessionSampleRate,\n        version: dataDogVersion,\n        env: dataDogEnv,\n    });\n}\n\nexport const REQUESTS = [\n    'active_symbols',\n    'authorize',\n    'balance',\n    'buy',\n    'proposal',\n    'proposal_open_contract',\n    'run-proposal',\n    'transaction',\n    'ticks_history',\n    'history',\n];\n\nclass APIMiddleware {\n    constructor(config) {\n        this.config = config;\n        this.debounced_calls = {};\n        this.addGlobalMethod();\n    }\n\n    getRequestType = request => {\n        let req_type;\n        REQUESTS.forEach(type => {\n            if (type in request && !req_type) req_type = type;\n        });\n\n        return req_type;\n    };\n\n    log = (measures = [], is_bot_running) => {\n        if (measures && measures.length) {\n            measures.forEach(measure => {\n                datadogLogs.logger.info(measure.name, {\n                    name: measure.name,\n                    startTime: measure.startTimeDate,\n                    duration: measure.duration,\n                    detail: measure.detail,\n                    isBotRunning: is_bot_running,\n                });\n            });\n        }\n    };\n\n    defineMeasure = res_type => {\n        if (res_type) {\n            let measure;\n            if (res_type === 'proposal') {\n                performance.mark('first_proposal_end');\n                if (performance.getEntriesByName('bot-start', 'mark').length) {\n                    measure = performance.measure('run-proposal', 'bot-start', 'first_proposal_end');\n                    performance.clearMarks('bot-start');\n                }\n            }\n            if (res_type === 'history') {\n                performance.mark('ticks_history_end');\n                measure = performance.measure('ticks_history', 'ticks_history_start', 'ticks_history_end');\n            } else {\n                performance.mark(`${res_type}_end`);\n                measure = performance.measure(`${res_type}`, `${res_type}_start`, `${res_type}_end`);\n            }\n            return (measure.startTimeDate = new Date(Date.now() - measure.startTime));\n        }\n        return false;\n    };\n\n    sendIsCalled = ({ response_promise, args: [request] }) => {\n        const req_type = this.getRequestType(request);\n        if (req_type) performance.mark(`${req_type}_start`);\n        response_promise\n            .then(res => {\n                const res_type = this.getRequestType(res);\n                if (res_type) {\n                    this.defineMeasure(res_type);\n                }\n            })\n            .catch(() => {});\n        return response_promise;\n    };\n\n    sendRequestsStatistic = is_bot_running => {\n        REQUESTS.forEach(req_type => {\n            const measure = performance.getEntriesByName(req_type);\n            if (measure && measure.length) {\n                if (process.env.DATADOG_CLIENT_TOKEN_LOGS) {\n                    this.log(measure, is_bot_running, req_type);\n                }\n            }\n        });\n        performance.clearMeasures();\n    };\n\n    addGlobalMethod() {\n        if (window) window.sendRequestsStatistic = this.sendRequestsStatistic;\n    }\n}\n\nexport default APIMiddleware;\n","import DerivAPIBasic from '@deriv/deriv-api/dist/DerivAPIBasic';\nimport { getAppId, getSocketURL, website_name } from '@deriv/shared';\nimport { getLanguage } from '@deriv/translations';\nimport APIMiddleware from './api-middleware';\n\nexport const generateDerivApiInstance = () => {\n    const socket_url = `wss://${getSocketURL()}/websockets/v3?app_id=${getAppId()}&l=${getLanguage()}&brand=${website_name.toLowerCase()}`;\n    const deriv_socket = new WebSocket(socket_url);\n    const deriv_api = new DerivAPIBasic({\n        connection: deriv_socket,\n        middleware: new APIMiddleware({}),\n    });\n    return deriv_api;\n};\n\nexport const getLoginId = () => {\n    const login_id = localStorage.getItem('active_loginid');\n    if (login_id && login_id !== 'null') return login_id;\n    return null;\n};\n\nexport const getToken = () => {\n    const active_loginid = getLoginId();\n    const client_accounts = JSON.parse(localStorage.getItem('client.accounts')) || undefined;\n    const active_account = (client_accounts && client_accounts[active_loginid]) || {};\n    return {\n        token: active_account?.token || undefined,\n        account_id: active_loginid || undefined,\n    };\n};\n","import { observer as globalObserver } from '../../utils/observer';\nimport { doUntilDone, socket_state } from '../tradeEngine/utils/helpers';\nimport { generateDerivApiInstance, getLoginId, getToken } from './appId';\n\nclass APIBase {\n    api;\n    token;\n    account_id;\n    pip_sizes = {};\n    account_info = {};\n    is_running = false;\n    subscriptions = [];\n    time_interval = null;\n    has_activeSymbols = false;\n\n    init(force_update = false) {\n        if (getLoginId()) {\n            this.toggleRunButton(true);\n            if (force_update) this.terminate();\n            this.api = generateDerivApiInstance();\n            this.initEventListeners();\n            this.authorizeAndSubscribe();\n            if (this.time_interval) clearInterval(this.time_interval);\n            this.time_interval = null;\n            this.getTime();\n        }\n    }\n\n    getConnectionStatus() {\n        if (this.api?.connection) {\n            const ready_state = this.api.connection.readyState;\n            return socket_state[ready_state] || 'Unknown';\n        }\n        return 'Socket not initialized';\n    }\n\n    terminate() {\n        // eslint-disable-next-line no-console\n        console.log('connection terminated');\n        if (this.api) this.api.disconnect();\n    }\n\n    initEventListeners() {\n        if (window) {\n            window.addEventListener('online', this.reconnectIfNotConnected);\n            window.addEventListener('focus', this.reconnectIfNotConnected);\n        }\n    }\n\n    createNewInstance(account_id) {\n        if (this.account_id !== account_id) {\n            this.init(true);\n        }\n    }\n\n    reconnectIfNotConnected = () => {\n        // eslint-disable-next-line no-console\n        console.log('connection state: ', this.api.connection.readyState);\n        if (this.api.connection.readyState !== 1) {\n            // eslint-disable-next-line no-console\n            console.log('Info: Connection to the server was closed, trying to reconnect.');\n            this.init();\n        }\n    };\n\n    authorizeAndSubscribe() {\n        const { token, account_id } = getToken();\n        if (token) {\n            this.token = token;\n            this.account_id = account_id;\n            this.api.authorize(this.token);\n            this.api\n                .expectResponse('authorize')\n                .then(({ authorize }) => {\n                    if (this.has_activeSymbols) {\n                        this.toggleRunButton(false);\n                    } else {\n                        this.getActiveSymbols();\n                    }\n                    this.subscribe();\n                    this.account_info = authorize;\n                })\n                .catch(e => {\n                    globalObserver.emit('Error', e);\n                });\n        }\n    }\n\n    subscribe() {\n        doUntilDone(() => this.api.send({ balance: 1, subscribe: 1 }));\n        doUntilDone(() => this.api.send({ transaction: 1, subscribe: 1 }));\n        doUntilDone(() => this.api.send({ proposal_open_contract: 1, subscribe: 1 }));\n    }\n\n    getActiveSymbols = async () => {\n        doUntilDone(() => this.api.send({ active_symbols: 'brief' })).then(({ active_symbols = [] }) => {\n            const pip_sizes = {};\n            if (active_symbols.length) this.has_activeSymbols = true;\n            active_symbols.forEach(({ symbol, pip }) => {\n                pip_sizes[symbol] = +(+pip).toExponential().substring(3);\n            });\n            this.pip_sizes = pip_sizes;\n            this.toggleRunButton(false);\n        });\n    };\n\n    toggleRunButton = toggle => {\n        const run_button = document.querySelector('#db-animation__run-button');\n        if (!run_button) return;\n        run_button.disabled = toggle;\n    };\n\n    setIsRunning(toggle = false) {\n        this.is_running = toggle;\n    }\n\n    pushSubscription(subscription) {\n        this.subscriptions.push(subscription);\n    }\n\n    clearSubscriptions() {\n        this.subscriptions.forEach(s => s.unsubscribe());\n        this.subscriptions = [];\n\n        // Resetting timeout resolvers\n        const global_timeouts = globalObserver.getState('global_timeouts') ?? [];\n\n        global_timeouts.forEach((_, i) => {\n            clearTimeout(i);\n        });\n    }\n\n    getTime() {\n        if (!this.time_interval) {\n            this.time_interval = setInterval(() => {\n                this.api.send({ time: 1 });\n            }, 30000);\n        }\n    }\n}\n\nexport const api_base = new APIBase();\n","export default class AccountLimits {\n    constructor(store) {\n        this.ws = store.ws;\n    }\n    getStakePayoutLimits(currency = 'AUD', landing_company_shortcode = 'svg', selected_market) {\n        return this.ws\n            .send({\n                landing_company_details: landing_company_shortcode,\n            })\n            .then(landing_company => {\n                const currency_config = landing_company?.landing_company_details?.currency_config[selected_market];\n                return currency_config ? currency_config[currency] : {};\n            });\n    }\n}\n","import TradingTimes from './trading-times';\nimport ContractsFor from './contracts-for';\nimport ActiveSymbols from './active-symbols';\nimport AccountLimits from './account-limits';\n\nclass ApiHelpers {\n    static singleton = null;\n\n    constructor(api_helpers_store) {\n        this.trading_times = new TradingTimes(api_helpers_store);\n        this.contracts_for = new ContractsFor(api_helpers_store);\n        this.active_symbols = new ActiveSymbols(api_helpers_store.ws, this.trading_times);\n        this.account_limits = new AccountLimits(api_helpers_store);\n    }\n\n    static setInstance(api_helpers_store) {\n        if (!this.singleton) {\n            this.singleton = new ApiHelpers(api_helpers_store);\n        }\n\n        return this.instance;\n    }\n\n    static get instance() {\n        return this.singleton;\n    }\n}\n\nexport default ApiHelpers;\n","import { config } from '../../constants/config';\nimport PendingPromise from '../../utils/pending-promise';\n\nexport default class ContractsFor {\n    constructor({ ws, server_time }) {\n        this.cache_age_in_min = 10;\n        this.contracts_for = {};\n        this.ws = ws;\n        this.server_time = server_time;\n        // Below you can disable specific trade types and trade type categories, you may specify\n        // market, submarket, symbol, trade_type, and trade_type_category. If one of\n        // the props is left omitted, the rule applies to each of the values of the omitted prop.\n        // e.g. if market omitted, rule will apply to all markets.\n        this.disabled_options = [\n            {\n                submarket: 'forex_basket',\n                trade_type: 'higherlower',\n            },\n            {\n                submarket: 'minor_pairs',\n                trade_type: 'higherlower',\n            },\n            {\n                submarket: 'metals',\n                trade_type: 'callputequal',\n            },\n            {\n                market: 'indices',\n                trade_type: 'callputequal',\n            },\n            {\n                symbol: 'OTC_AS51',\n                trade_type_category: 'inout',\n            },\n            { trade_type_category: 'lookback' },\n            { trade_type_category: 'callputspread' },\n        ];\n        this.retrieving_contracts_for = {};\n    }\n\n    async getBarriers(symbol, trade_type, duration, barrier_types) {\n        const barriers = { values: [] };\n\n        if (!config.BARRIER_TRADE_TYPES.includes(trade_type)) {\n            return barriers;\n        }\n\n        const barrier_props = ['high_barrier', 'low_barrier'];\n        const contracts_for_category = await this.getContractsByTradeType(symbol, trade_type);\n        const durations = await this.getDurations(symbol, trade_type, false);\n        const offset_regexp = new RegExp('^[-|+]([0-9]+.[0-9]+)$');\n        const isOffset = input => input && offset_regexp.test(input.toString());\n\n        let has_absolute_default_value = true;\n\n        if (contracts_for_category.length > 0) {\n            barrier_types.forEach((barrier_type, index) => {\n                const has_selected_offset_type = ['+', '-'].includes(barrier_type);\n                const real_trade_type = this.getContractCategoryByTradeType(trade_type);\n\n                let contract = contracts_for_category.find(c => {\n                    const { BARRIER_CATEGORIES } = config;\n                    const barrier_category = Object.keys(BARRIER_CATEGORIES).find(b =>\n                        BARRIER_CATEGORIES[b].includes(trade_type)\n                    );\n\n                    const has_matching_category = c.contract_category === real_trade_type;\n                    const has_matching_duration = durations.findIndex(d => d.unit === duration) !== -1;\n                    const has_matching_barrier_category = c.barrier_category === barrier_category;\n                    const has_matching_barrier_type =\n                        // Match offset type barriers.\n                        (has_selected_offset_type && isOffset(c.barrier || c[barrier_props[index]])) ||\n                        // Match absolute type barriers.\n                        (!has_selected_offset_type && !isOffset(c.barrier || c[barrier_props[index]]));\n\n                    return (\n                        has_matching_category &&\n                        has_matching_duration &&\n                        has_matching_barrier_category &&\n                        has_matching_barrier_type\n                    );\n                });\n\n                // Fallback to smallest available barriers if no contract could be found.\n                if (!contract) {\n                    contract = contracts_for_category\n                        // Retrieve contracts with barriers.\n                        .filter(c => c.barrier || c.high_barrier)\n                        // Get contract with smallest barriers.\n                        .sort((a, b) => {\n                            const c = a.barrier || a.high_barrier;\n                            const d = b.barrier || b.high_barrier;\n                            return parseFloat(c) - parseFloat(d);\n                        })\n                        .shift();\n\n                    if (contract && !has_selected_offset_type) {\n                        has_absolute_default_value = false;\n                    }\n                }\n\n                if (contract) {\n                    const barrier_prop_name = contract.barriers === 1 ? 'barrier' : barrier_props[index];\n\n                    if (contract[barrier_prop_name]) {\n                        const barrier_match = `${contract[barrier_prop_name]}`.match(offset_regexp);\n                        barriers.values[index] = barrier_match ? barrier_match[1] : contract[barrier_prop_name];\n                    }\n\n                    Object.assign(barriers, {\n                        allow_both_types:\n                            ['intraday', 'tick'].includes(contract.expiry_type) &&\n                            isOffset(contract[barrier_prop_name]),\n                        allow_absolute_type: barrier_type === 'absolute' && !isOffset(contract[barrier_prop_name]),\n                    });\n\n                    // Finish this loop prematurely if we only have a single barrier.\n                    if (contract.barriers === 1) {\n                        barrier_types.splice(index + 1, 1);\n                    }\n                }\n            });\n\n            if (!has_absolute_default_value) {\n                barriers.values = barriers.values.map(() => false);\n            } else if (\n                barriers.values.length === 2 &&\n                barrier_types.every(barrier_type => barrier_type === barrier_types[0]) &&\n                barriers.values.every(barrier => barrier === barriers.values[0])\n            ) {\n                barriers.values[1] = (barriers.values[0] * 0.95).toFixed(1);\n            }\n        }\n\n        return barriers;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getContractCategoryByTradeType(trade_type) {\n        const { TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING } = config;\n\n        return (\n            Object.keys(TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING).find(category =>\n                TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING[category].includes(trade_type)\n            ) || trade_type\n        );\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getTradeTypeCategoryByTradeType(trade_type) {\n        const { TRADE_TYPE_CATEGORIES } = config;\n        const trade_type_category = Object.keys(TRADE_TYPE_CATEGORIES).find(t =>\n            TRADE_TYPE_CATEGORIES[t].includes(trade_type)\n        );\n\n        return trade_type_category || trade_type;\n    }\n\n    getTradeTypeCategoryNameByTradeType(trade_type) {\n        const { TRADE_TYPE_CATEGORY_NAMES } = config;\n        const trade_type_category = this.getTradeTypeCategoryByTradeType(trade_type);\n\n        return TRADE_TYPE_CATEGORY_NAMES[trade_type_category];\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getBarrierCategoryByTradeType(trade_type) {\n        const { BARRIER_CATEGORIES } = config;\n        return Object.keys(BARRIER_CATEGORIES).find(barrier_category =>\n            BARRIER_CATEGORIES[barrier_category].includes(trade_type)\n        );\n    }\n\n    async getContractsByTradeType(symbol, trade_type) {\n        const contracts = await this.getContractsFor(symbol);\n        const contract_category = this.getContractCategoryByTradeType(trade_type);\n        const barrier_category = this.getBarrierCategoryByTradeType(trade_type);\n\n        return contracts.filter(contract => {\n            const has_matching_category = contract.contract_category === contract_category;\n            const has_matching_barrier = contract.barrier_category === barrier_category;\n\n            return has_matching_category && has_matching_barrier;\n        });\n    }\n\n    async getContractsFor(symbol) {\n        if (!symbol || symbol === 'na') {\n            return [];\n        }\n\n        const getContractsForFromApi = async () => {\n            if (this.retrieving_contracts_for[symbol]) {\n                await this.retrieving_contracts_for[symbol];\n                return this.contracts_for[symbol].contracts;\n            }\n\n            this.retrieving_contracts_for[symbol] = new PendingPromise();\n            const response = await this.ws.send({ contracts_for: symbol });\n\n            if (response.error) {\n                return [];\n            }\n\n            const {\n                contracts_for: { available: contracts },\n            } = response;\n\n            // We don't offer forward-starting contracts in bot.\n            const filtered_contracts = contracts.filter(c => c.start_type !== 'forward');\n\n            this.contracts_for[symbol] = {\n                contracts: filtered_contracts,\n                timestamp: this.server_time.unix(),\n            };\n\n            this.retrieving_contracts_for[symbol].resolve();\n            delete this.retrieving_contracts_for[symbol];\n\n            return filtered_contracts;\n        };\n\n        if (this.contracts_for[symbol]) {\n            const { contracts, timestamp } = this.contracts_for[symbol];\n            const is_expired = this.server_time.unix() - timestamp > this.cache_age_in_min * 60;\n\n            if (is_expired) {\n                getContractsForFromApi();\n            }\n\n            return contracts;\n        }\n\n        return getContractsForFromApi();\n    }\n\n    async getDurations(symbol, trade_type, convert_day_to_hours = true) {\n        if (trade_type === 'multiplier') {\n            return [];\n        }\n\n        const contracts = await this.getContractsFor(symbol);\n        const { NOT_AVAILABLE_DURATIONS, DEFAULT_DURATION_DROPDOWN_OPTIONS } = config;\n\n        if (contracts.length === 0) {\n            return NOT_AVAILABLE_DURATIONS;\n        }\n\n        const contracts_for_category = await this.getContractsByTradeType(symbol, trade_type);\n        const durations = [];\n        const getDurationIndex = input =>\n            DEFAULT_DURATION_DROPDOWN_OPTIONS.findIndex(d => d[1] === input.replace(/\\d+/g, ''));\n        // convert 'duration' to 'unit_to_convert' e.g : convertDuration('10h', 's') will return 10*60*60s\n        const convertDuration = (duration, unit_to_convert) => {\n            const duration_value = duration.replace(/\\D/g, '');\n            const duration_index = getDurationIndex(duration);\n            const target_index = DEFAULT_DURATION_DROPDOWN_OPTIONS.findIndex(\n                default_duration => default_duration[1] === unit_to_convert\n            );\n\n            let converted_duration = parseInt(duration_value);\n\n            DEFAULT_DURATION_DROPDOWN_OPTIONS.slice(target_index + 1, duration_index + 1)\n                .reverse()\n                .forEach(default_duration => {\n                    switch (default_duration[1]) {\n                        case 'm':\n                        case 'h':\n                            converted_duration *= 60;\n                            break;\n                        case 'd':\n                            converted_duration *= 24;\n                            break;\n                        default:\n                            break;\n                    }\n                });\n\n            return converted_duration;\n        };\n\n        contracts_for_category.forEach(contract => {\n            if (!contract.min_contract_duration || !contract.max_contract_duration) {\n                return;\n            }\n\n            const start_index = getDurationIndex(contract.min_contract_duration);\n            const end_index = getDurationIndex(\n                contract.max_contract_duration === '1d' && convert_day_to_hours ? '24h' : contract.max_contract_duration\n            );\n\n            DEFAULT_DURATION_DROPDOWN_OPTIONS.slice(start_index, end_index + 1).forEach((default_duration, index) => {\n                const is_existing_duration = durations.findIndex(d => d.unit === default_duration[1]) !== -1;\n\n                if (!is_existing_duration) {\n                    durations.push({\n                        display: default_duration[0],\n                        unit: default_duration[1],\n                        min: index === 0 ? parseInt(contract.min_contract_duration.replace(/\\D/g, '')) : 1,\n                        max: convertDuration(contract.max_contract_duration, default_duration[1]),\n                    });\n                }\n            });\n        });\n\n        // If only intraday contracts available, remove day durations\n        if (contracts_for_category.every(contract => contract.expiry_type === 'intraday')) {\n            const day_duration_index = durations.findIndex(d => d[1] === 'd');\n\n            if (day_duration_index !== -1) {\n                durations.splice(day_duration_index, 1);\n            }\n        }\n\n        if (durations.length === 0) {\n            return NOT_AVAILABLE_DURATIONS;\n        }\n\n        // Maintain order based on duration unit\n        return durations.sort((a, b) => getDurationIndex(a.unit) - getDurationIndex(b.unit));\n    }\n\n    async getPredictionRange(symbol, trade_type) {\n        const contracts = await this.getContractsByTradeType(symbol, trade_type);\n        const contract_category = this.getContractCategoryByTradeType(trade_type);\n        const prediction_range = [];\n        const { DIGIT_CATEGORIES, opposites } = config;\n\n        if (DIGIT_CATEGORIES.includes(contract_category) && trade_type !== 'evenodd') {\n            const contract = contracts.find(c => {\n                const categories = Object.keys(opposites);\n\n                return categories.some(category =>\n                    opposites[category].map(subcategory => Object.keys(subcategory)[0]).includes(c.contract_type)\n                );\n            });\n\n            if (contract && contract.last_digit_range) {\n                prediction_range.push(...contract.last_digit_range);\n            } else {\n                prediction_range.push(1, 2, 3, 4, 5, 6, 7, 8);\n            }\n        }\n\n        return prediction_range;\n    }\n\n    async getMultiplierRange(symbol, trade_type) {\n        const contracts = await this.getContractsByTradeType(symbol, trade_type);\n        const multiplier_range = [];\n        const { opposites } = config;\n\n        const contract = contracts.find(c => {\n            return Object.keys(opposites).some(category => {\n                return opposites[category].map(subcategory => Object.keys(subcategory)[0]).includes(c.contract_type);\n            });\n        });\n\n        if (contract?.multiplier_range) {\n            multiplier_range.push(...contract.multiplier_range);\n        }\n\n        return multiplier_range;\n    }\n\n    async getMarketBySymbol(symbol) {\n        const contracts = await this.getContractsFor(symbol);\n\n        if (!contracts.length) {\n            return 'na';\n        }\n\n        return contracts[0].market;\n    }\n\n    async getSubmarketBySymbol(symbol) {\n        const contracts = await this.getContractsFor(symbol);\n\n        if (!contracts.length) {\n            return 'na';\n        }\n\n        return contracts[0].submarket;\n    }\n\n    async getGroupedTradeTypes(symbol) {\n        const contracts = await this.getContractsFor(symbol);\n        const trade_type_options = {};\n\n        for (let i = 0; i < contracts.length; i++) {\n            const market = contracts[i].market;\n            const submarket = contracts[i].submarket;\n            const trade_type_category = this.getTradeTypeCategoryByTradeType(contracts[i].contract_category);\n            const trade_type_category_name = this.getTradeTypeCategoryNameByTradeType(contracts[i].contract_category);\n            // eslint-disable-next-line no-await-in-loop\n            const trade_types = await this.getTradeTypeByTradeCategory(market, submarket, symbol, trade_type_category);\n\n            if (trade_type_category_name) {\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                });\n\n                if (!is_disabled) {\n                    trade_type_options[trade_type_category_name] = trade_types;\n                }\n            }\n        }\n\n        return trade_type_options;\n    }\n\n    async getTradeTypeByTradeCategory(market, submarket, symbol, trade_type_category) {\n        const { NOT_AVAILABLE_DURATIONS, TRADE_TYPE_CATEGORIES, opposites } = config;\n        const subcategories = TRADE_TYPE_CATEGORIES[trade_type_category];\n        const dropdown_options = [];\n\n        if (subcategories && subcategories.length) {\n            for (let i = 0; i < subcategories.length; i++) {\n                const trade_type = subcategories[i];\n                const durations = await this.getDurations(symbol, trade_type); // eslint-disable-line no-await-in-loop\n                const has_durations = JSON.stringify(durations) !== JSON.stringify(NOT_AVAILABLE_DURATIONS);\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                    trade_type,\n                });\n\n                if (!is_disabled && has_durations) {\n                    const types = opposites[trade_type.toUpperCase()];\n                    dropdown_options.push({\n                        name: types.map(type => type[Object.keys(type)[0]]).join('/'),\n                        value: trade_type,\n                        icon: [Object.keys(types[0])[0], Object.keys(types[1])[0]],\n                    });\n                }\n            }\n        }\n\n        return dropdown_options;\n    }\n\n    async getTradeTypeCategories(market, submarket, symbol) {\n        const { TRADE_TYPE_CATEGORY_NAMES, NOT_AVAILABLE_DROPDOWN_OPTIONS } = config;\n        const contracts = await this.getContractsFor(symbol);\n        const trade_type_categories = [];\n\n        contracts.forEach(contract => {\n            const trade_type_category = this.getTradeTypeCategoryByTradeType(contract.contract_category);\n            const trade_type_category_name = this.getTradeTypeCategoryNameByTradeType(contract.contract_category);\n\n            if (trade_type_category_name) {\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                });\n\n                if (!is_disabled) {\n                    const is_existing_category =\n                        trade_type_categories.findIndex(c => c[1] === trade_type_category) !== -1;\n\n                    if (!is_existing_category) {\n                        trade_type_categories.push([trade_type_category_name, trade_type_category]);\n                    }\n                }\n            }\n        });\n\n        if (trade_type_categories.length > 0) {\n            const category_names = Object.keys(TRADE_TYPE_CATEGORY_NAMES);\n\n            return trade_type_categories.sort((a, b) => {\n                const index_a = category_names.findIndex(c => c === a[1]);\n                const index_b = category_names.findIndex(c => c === b[1]);\n                return index_a - index_b;\n            });\n        }\n\n        return NOT_AVAILABLE_DROPDOWN_OPTIONS;\n    }\n\n    async getTradeTypes(market, submarket, symbol, trade_type_category) {\n        const { NOT_AVAILABLE_DURATIONS, TRADE_TYPE_CATEGORIES, opposites } = config;\n        const trade_types = [];\n        const subcategories = TRADE_TYPE_CATEGORIES[trade_type_category];\n\n        if (subcategories) {\n            for (let i = 0; i < subcategories.length; i++) {\n                const trade_type = subcategories[i];\n                const durations = await this.getDurations(symbol, trade_type); // eslint-disable-line no-await-in-loop\n                const has_durations = JSON.stringify(durations) !== JSON.stringify(NOT_AVAILABLE_DURATIONS);\n                const is_disabled = this.isDisabledOption({\n                    market,\n                    submarket,\n                    symbol,\n                    trade_type_category,\n                    trade_type,\n                });\n\n                if (!is_disabled && has_durations) {\n                    const types = opposites[trade_type.toUpperCase()];\n                    // e.g. [['Rise/Fall', 'callput']]\n                    trade_types.push([types.map(type => type[Object.keys(type)[0]]).join('/'), trade_type]);\n                }\n            }\n        }\n\n        return trade_types.length > 0 ? trade_types : config.NOT_AVAILABLE_DROPDOWN_OPTIONS;\n    }\n\n    isDisabledOption(compare_obj) {\n        return this.disabled_options.some(disabled_obj =>\n            Object.keys(disabled_obj).every(prop => compare_obj[prop] === disabled_obj[prop])\n        );\n    }\n\n    disposeCache() {\n        this.contracts_for = {};\n    }\n}\n","import PendingPromise from '../../utils/pending-promise';\n\nexport default class TradingTimes {\n    constructor({ ws, server_time }) {\n        this.init_promise = new PendingPromise();\n        this.is_initialised = false;\n        this.trading_times = {};\n        this.ws = ws;\n        this.server_time = server_time.clone();\n    }\n\n    async initialise() {\n        if (this.is_initialised) {\n            return this.init_promise;\n        }\n\n        this.is_initialised = true;\n        this.last_update_moment = this.server_time.local();\n\n        if (!Object.keys(this.trading_times).length) {\n            await this.updateTradingTimes();\n            this.init_promise.resolve();\n\n            const periodicUpdate = async () => {\n                const changes = this.updateMarketOpenClosed();\n\n                if (Object.keys(changes).length > 0 && this.onMarketOpenCloseChanged) {\n                    this.onMarketOpenCloseChanged(changes);\n                }\n\n                let next_update_date = this.nextUpdateDate();\n\n                if (!next_update_date) {\n                    const now_moment = this.server_time.local();\n                    const next_update_moment = this.last_update_moment.clone().add(1, 'days');\n\n                    if (now_moment.isAfter(next_update_moment)) {\n                        this.last_update_moment = now_moment.clone();\n                    } else {\n                        this.last_update_moment = next_update_moment.clone();\n                    }\n\n                    // Retain the current market open close status, because the trade times\n                    // will now be the following day:\n                    const is_open_map = {};\n\n                    Object.keys(this.trading_times).forEach(symbol_name => {\n                        is_open_map[symbol_name] = this.trading_times[symbol_name].is_opened;\n                    });\n\n                    await this.updateTradingTimes();\n\n                    Object.keys(this.trading_times).forEach(symbol_name => {\n                        this.trading_times[symbol_name].is_opened = is_open_map[symbol_name];\n                    });\n\n                    // next update date will be 00:00 hours (UTC) of the following day:\n                    next_update_moment.set({ hour: 0, minute: 0, second: 0 });\n                    next_update_date = next_update_moment.toDate();\n                }\n\n                const wait_period = next_update_date - this.server_time.local().toDate();\n                this.update_timer = setTimeout(periodicUpdate, wait_period);\n            };\n\n            await periodicUpdate();\n        }\n\n        return this.init_promise;\n    }\n\n    async updateTradingTimes() {\n        const last_update_date = this.last_update_moment.format('YYYY-MM-DD');\n        const response = await this.ws.tradingTimes(last_update_date);\n\n        if (response.error) {\n            return;\n        }\n\n        this.trading_times = {};\n\n        const now = this.server_time.local().toDate();\n        const date_str = now.toISOString().substring(0, 11);\n        const getUTCDate = hour => new Date(`${date_str}${hour}Z`);\n        const {\n            trading_times: { markets },\n        } = response;\n\n        if (!markets) {\n            return;\n        }\n\n        markets.forEach(market => {\n            const { submarkets } = market;\n\n            submarkets.forEach(submarket => {\n                const { symbols } = submarket;\n\n                symbols.forEach(symbol_obj => {\n                    const { times, symbol } = symbol_obj;\n                    const { open, close } = times;\n                    const is_open_all_day = open.length === 1 && open[0] === '00:00:00' && close[0] === '23:59:59';\n                    const is_closed_all_day = open.length === 1 && open[0] === '--' && close[0] === '--';\n\n                    let processed_times;\n\n                    if (!is_open_all_day && !is_closed_all_day) {\n                        processed_times = open.map((open_time, index) => ({\n                            open: getUTCDate(open_time),\n                            close: getUTCDate(close[index]),\n                        }));\n                    }\n\n                    this.trading_times[symbol] = {\n                        is_open_all_day,\n                        is_closed_all_day,\n                        times: processed_times,\n                    };\n                });\n            });\n        });\n    }\n\n    updateMarketOpenClosed() {\n        const changes = {};\n\n        Object.keys(this.trading_times).forEach(symbol_name => {\n            const is_opened = this.calcIsMarketOpened(symbol_name);\n            const symbol_obj = this.trading_times[symbol_name];\n\n            if (symbol_obj.is_opened !== is_opened) {\n                symbol_obj.is_opened = is_opened;\n                changes[symbol_name] = is_opened;\n            }\n        });\n\n        return changes;\n    }\n\n    calcIsMarketOpened(symbol_name) {\n        const now = this.server_time.local().unix();\n        const { times, is_open_all_day, is_closed_all_day } = this.trading_times[symbol_name];\n\n        if (is_closed_all_day) {\n            return false;\n        }\n\n        if (is_open_all_day) {\n            return true;\n        }\n\n        return times.some(session => {\n            const { open, close } = session;\n            return now >= open && now < close;\n        });\n    }\n\n    nextUpdateDate() {\n        const now = this.server_time.local().toDate();\n\n        let nextDate;\n\n        Object.keys(this.trading_times).forEach(symbol_name => {\n            const { times, is_open_all_day, is_closed_all_day } = this.trading_times[symbol_name];\n\n            if (is_open_all_day || is_closed_all_day) {\n                return;\n            }\n\n            times.forEach(session => {\n                const { open, close } = session;\n\n                if (open > now && (!nextDate || open < nextDate)) {\n                    nextDate = open;\n                }\n                if (close > now && (!nextDate || close < nextDate)) {\n                    nextDate = close;\n                }\n            });\n        });\n\n        return nextDate;\n    }\n\n    isMarketOpened(symbol_name) {\n        const symbol_names = Object.keys(this.trading_times);\n\n        if (!symbol_names.length || !symbol_names.includes(symbol_name)) {\n            return false;\n        }\n\n        return this.trading_times[symbol_name].is_opened;\n    }\n}\n","import { observer as globalObserver } from '../../../utils/observer';\nimport { config } from '../../../constants/config';\n\nexport const contract = c => globalObserver.emit('bot.contract', c);\n\nexport const contractStatus = c => globalObserver.emit('contract.status', c);\n\nexport const info = i => globalObserver.emit('bot.info', i);\n\nexport const notify = (className, message) =>\n    globalObserver.emit('ui.log.notify', { className, message, sound: config.lists.NOTIFICATION_SOUND[0][1] });\n\nexport const log = (log_type, extra) => globalObserver.emit('ui.log.success', { log_type, extra });\n\nexport const error = message => globalObserver.emit('ui.log.error', message);\n","import { formatTime, findValueByKeyRecursively, getRoundedNumber, isEmptyObject } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { error as logError } from './broadcast';\nimport { observer as globalObserver } from '../../../utils/observer';\n\nexport const tradeOptionToProposal = (trade_option, purchase_reference) =>\n    trade_option.contractTypes.map(type => {\n        const proposal = {\n            amount: trade_option.amount,\n            basis: trade_option.basis,\n            contract_type: type,\n            currency: trade_option.currency,\n            duration: trade_option.duration,\n            duration_unit: trade_option.duration_unit,\n            multiplier: trade_option.multiplier,\n            passthrough: {\n                contract_type: type,\n                purchase_reference,\n            },\n            proposal: 1,\n            symbol: trade_option.symbol,\n        };\n        if (trade_option.prediction !== undefined) {\n            proposal.selected_tick = trade_option.prediction;\n        }\n        if (!['TICKLOW', 'TICKHIGH'].includes(type) && trade_option.prediction !== undefined) {\n            proposal.barrier = trade_option.prediction;\n        } else if (trade_option.barrierOffset !== undefined) {\n            proposal.barrier = trade_option.barrierOffset;\n        }\n        if (trade_option.secondBarrierOffset !== undefined) {\n            proposal.barrier2 = trade_option.secondBarrierOffset;\n        }\n        if (['MULTUP', 'MULTDOWN'].includes(type)) {\n            proposal.duration = undefined;\n            proposal.duration_unit = undefined;\n        }\n        if (!isEmptyObject(trade_option.limit_order)) {\n            proposal.limit_order = trade_option.limit_order;\n        }\n        return proposal;\n    });\n\nexport const getDirection = ticks => {\n    const { length } = ticks;\n    const [tickOld, tickNew] = ticks.slice(-2);\n\n    let direction = '';\n    if (length >= 2) {\n        direction = tickOld.quote < tickNew.quote ? 'rise' : direction;\n        direction = tickOld.quote > tickNew.quote ? 'fall' : direction;\n    }\n\n    return direction;\n};\n\nexport const getLastDigit = tick => {\n    let number_string = tick;\n    if (typeof number_string === 'number') {\n        number_string = String(number_string);\n    }\n    return Number(number_string[number_string.length - 1]);\n};\n\nexport const getLastDigitForList = (tick, pip_size = 0) => {\n    const value = Number(tick).toFixed(pip_size);\n    return value[value.length - 1];\n};\n\nconst getBackoffDelayInMs = (error, delay_index) => {\n    const base_delay = 2.5;\n    const max_delay = 15;\n    const next_delay_in_seconds = Math.min(base_delay * delay_index, max_delay);\n\n    if (error.error.code === 'RateLimit') {\n        logError(\n            localize('You are rate limited for: {{ message_type }}, retrying in {{ delay }}s (ID: {{ request }})', {\n                message_type: error.msg_type,\n                delay: next_delay_in_seconds,\n                request: error.echo_req.req_id,\n            })\n        );\n    } else if (error.error.code === 'DisconnectError') {\n        logError(\n            localize('You are disconnected, retrying in {{ delay }}s', {\n                delay: next_delay_in_seconds,\n            })\n        );\n    } else if (error.error.code === 'MarketIsClosed') {\n        logError(localize('This market is presently closed.'));\n    } else {\n        logError(\n            localize('Request failed for: {{ message_type }}, retrying in {{ delay }}s', {\n                message_type: error.msg_type || localize('unknown'),\n                delay: next_delay_in_seconds,\n            })\n        );\n    }\n\n    return next_delay_in_seconds * 1000;\n};\n\nexport const updateErrorMessage = error => {\n    if (error.error?.code === 'InputValidationFailed') {\n        if (error.error.details?.duration) {\n            error.error.message = localize('Duration must be a positive integer');\n        }\n        if (error.error.details?.amount) {\n            error.error.message = localize('Amount must be a positive number.');\n        }\n    }\n};\n\nexport const shouldThrowError = (error, errors_to_ignore = []) => {\n    if (!error.error) {\n        return false;\n    }\n\n    const default_errors_to_ignore = [\n        'CallError',\n        'WrongResponse',\n        'GetProposalFailure',\n        'RateLimit',\n        'DisconnectError',\n        'MarketIsClosed',\n    ];\n    updateErrorMessage(error);\n    const is_ignorable_error = errors_to_ignore.concat(default_errors_to_ignore).includes(error.error.code);\n\n    return !is_ignorable_error;\n};\n\nexport const recoverFromError = (promiseFn, recoverFn, errors_to_ignore, delay_index, api_base) => {\n    return new Promise((resolve, reject) => {\n        const promise = promiseFn();\n\n        if (promise) {\n            promise.then(resolve).catch(error => {\n                /**\n                 * if bot is not running there is no point of recovering from error\n                 * `!api_base.is_running` will check the bot status if it is not running it will kick out the control from loop\n                 */\n                if (shouldThrowError(error, errors_to_ignore) || (api_base && !api_base.is_running)) {\n                    reject(error);\n                    return;\n                }\n                recoverFn(\n                    error.error.code,\n                    () =>\n                        new Promise(recoverResolve => {\n                            const getGlobalTimeouts = () => globalObserver.getState('global_timeouts') ?? [];\n\n                            const timeout = setTimeout(() => {\n                                const global_timeouts = getGlobalTimeouts();\n                                delete global_timeouts[timeout];\n                                globalObserver.setState(global_timeouts);\n                                recoverResolve();\n                            }, getBackoffDelayInMs(error, delay_index));\n\n                            const global_timeouts = getGlobalTimeouts();\n                            const cancellable_timeouts = ['buy'];\n                            const msg_type = findValueByKeyRecursively(error, 'msg_type');\n\n                            global_timeouts[timeout] = {\n                                is_cancellable: cancellable_timeouts.includes(msg_type),\n                                msg_type,\n                            };\n\n                            globalObserver.setState({ global_timeouts });\n                        })\n                );\n            });\n        } else {\n            resolve();\n        }\n    });\n};\n\n/**\n * @param {*} promiseFn api call - it could be api call or subscription\n * @param {*} errors_to_ignore list of errors to ignore\n * @param {*} api_base instance of APIBase class to check if the bot is running or not\n * @returns a new promise\n */\nexport const doUntilDone = (promiseFn, errors_to_ignore, api_base) => {\n    let delay_index = 1;\n\n    return new Promise((resolve, reject) => {\n        const recoverFn = (error_code, makeDelay) => {\n            delay_index++;\n            makeDelay().then(repeatFn);\n        };\n\n        const repeatFn = () => {\n            recoverFromError(promiseFn, recoverFn, errors_to_ignore, delay_index, api_base).then(resolve).catch(reject);\n        };\n\n        repeatFn();\n    });\n};\n\nexport const createDetails = contract => {\n    const { sell_price: sellPrice, buy_price: buyPrice, currency } = contract;\n    const profit = getRoundedNumber(sellPrice - buyPrice, currency);\n    const result = profit < 0 ? 'loss' : 'win';\n\n    return [\n        contract.transaction_ids.buy,\n        +contract.buy_price,\n        +contract.sell_price,\n        profit,\n        contract.contract_type,\n        formatTime(parseInt(`${contract.entry_tick_time}000`), 'HH:mm:ss'),\n        +contract.entry_tick,\n        formatTime(parseInt(`${contract.exit_tick_time}000`), 'HH:mm:ss'),\n        +contract.exit_tick,\n        +(contract.barrier ? contract.barrier : 0),\n        result,\n    ];\n};\n\nexport const getUUID = () => `${new Date().getTime() * Math.random()}`;\n\nexport const socket_state = {\n    [WebSocket.CONNECTING]: 'Connecting',\n    [WebSocket.OPEN]: 'Connected',\n    [WebSocket.CLOSING]: 'Closing',\n    [WebSocket.CLOSED]: 'Closed',\n};\n","import { localize } from '@deriv/translations';\n\nconst generateErrorMessage = (block_type, missing_space = localize('workspace')) => {\n    return {\n        missing: localize('The {{block_type}} block is mandatory and cannot be deleted/disabled.', {\n            block_type,\n        }),\n        misplaced: localize('The {{block_type}} block is misplaced from {{missing_space}}.', {\n            block_type,\n            missing_space,\n        }),\n        disabled: localize('The {{block_type}} block is mandatory and cannot be deleted/disabled.', {\n            block_type,\n        }),\n        default: localize('The {{block_type}} block is mandatory and cannot be deleted/disabled.', {\n            block_type,\n        }),\n    };\n};\n\nexport const error_message_map = {\n    trade_definition: generateErrorMessage(localize('Trade parameters')),\n    trade_parameters: generateErrorMessage(localize('Trade parameters')),\n    before_purchase: generateErrorMessage(localize('Purchase conditions')),\n    purchase_conditions: generateErrorMessage(localize('Purchase conditions')),\n    purchase: generateErrorMessage(localize('Purchase'), localize('purchase conditions')),\n    trade_definition_tradeoptions: generateErrorMessage(localize('Trade options'), localize('trade parameters')),\n    trade_definition_multiplier: generateErrorMessage(\n        localize('Trade options multipliers'),\n        localize('trade parameters')\n    ),\n};\n","import { observer as globalObserver } from './observer';\n\nexport const createError = (name, message) => {\n    const e = new Error(message);\n    e.name = name;\n    e.code = name;\n    return e;\n};\n\nexport const trackAndEmitError = (message, object = {}) => {\n    globalObserver.emit('ui.log.error', message);\n    if (window.trackJs) {\n        trackJs.track(`${message} - Error: ${JSON.stringify(object)}`);\n    }\n};\n","import { localize } from '@deriv/translations';\nimport { config } from '../constants/config';\n\n// TODO: use-shared-functions - These functions are duplicates of trader ones, export and use these instead.\nexport const getContractTypeName = contract => {\n    const { opposites } = config;\n    let name = localize('Unknown');\n\n    Object.keys(opposites).forEach(opposites_name => {\n        const contract_type_objs = opposites[opposites_name];\n\n        contract_type_objs.forEach(contract_type_obj => {\n            const contract_type_names = Object.entries(contract_type_obj)[0]; // ['CALL', 'Rise']\n\n            if (contract_type_names[0] === contract.contract_type) {\n                // Extra check for CALL & PUT types to distinguish Rise/Fall & Higher/Lower.\n                if (['CALL', 'PUT'].includes(contract_type_names[0])) {\n                    const shortcode_suffix = contract.shortcode.split('_').slice(-2)[0];\n                    const is_risefall = /^S0P$/.test(shortcode_suffix);\n                    const req_opposite_name = is_risefall ? 'CALLPUT' : 'HIGHERLOWER';\n\n                    if (opposites_name !== req_opposite_name) {\n                        return;\n                    }\n                }\n\n                name = contract_type_names[1];\n            }\n        });\n    });\n\n    return name;\n};\n","export const importExternal = url => {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = url;\n        script.async = true;\n        script.onload = () => resolve(window.external_global_component);\n        script.onerror = reject;\n\n        document.body.appendChild(script);\n    });\n};\n","import { localize } from '@deriv/translations';\n\nexport const timeSince = timestamp => {\n    const now = new Date();\n    const secondPast = (now.getTime() - timestamp) / 1000;\n\n    if (secondPast < 60) {\n        return localize('{{secondPast}}s ago', { secondPast: parseInt(secondPast) });\n    }\n    if (secondPast < 3600) {\n        return localize('{{minutePast}}m ago', { minutePast: parseInt(secondPast / 60) });\n    }\n    if (secondPast <= 86400) {\n        return localize('{{hourPast}}h ago', { hourPast: parseInt(secondPast / 3600) });\n    }\n\n    const timestampDate = new Date(timestamp);\n    const day = timestampDate.getDate();\n    const month = timestampDate\n        .toDateString()\n        .match(/ [a-zA-Z]*/)[0]\n        .replace(' ', '');\n    const year = `${timestampDate.getFullYear() === now.getFullYear() ? '' : ' '}${timestampDate.getFullYear()}`;\n    return `${day} ${month}${year}`;\n};\n","const darkMode = () => {\n    const workspace = Blockly;\n    workspace.Colours.RootBlock = {\n        colour: '#183046',\n        colourSecondary: '#F2F3F5',\n        colourTertiary: '#151717',\n    };\n    workspace.Colours.Base = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#0e0e0e',\n    };\n\n    workspace.Colours.Special1 = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special2 = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#D27954',\n    };\n\n    workspace.Colours.Special3 = {\n        colour: '#C2C2C2',\n        colourSecondary: '#0e0e0e',\n        colourTertiary: '#D27954',\n    };\n};\n\nconst lightMode = () => {\n    const workspace = Blockly;\n    workspace.Colours.RootBlock = {\n        colour: '#064e72',\n        colourSecondary: '#064e72',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Base = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special1 = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special2 = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n\n    workspace.Colours.Special3 = {\n        colour: '#e5e5e5',\n        colourSecondary: '#ffffff',\n        colourTertiary: '#6d7278',\n    };\n};\nexport const setColors = is_dark_mode => (is_dark_mode ? darkMode() : lightMode());\n","/** Helper function to perform sequential execution of functions */\nexport const pipe = (...fns) => {\n    return initialValue => {\n        return fns.reduce((nextParam, fn) => fn(nextParam), initialValue);\n    };\n};\n\n/** Helper function to parse block information from XML */\nexport const extractBlocksFromXml = xml => {\n    const parser = new DOMParser();\n    const xmlDoc = parser.parseFromString(xml, 'text/xml');\n    const blocks = xmlDoc.getElementsByTagName('block');\n\n    const blocksTypeAndFields = Array.from(blocks).map(block => {\n        const type = block.getAttribute('type');\n        const fields = Array.from(block.getElementsByTagName('field')).map(field => {\n            return {\n                name: field.getAttribute('name'),\n                value: field.textContent.trim(),\n            };\n        });\n        return { type, fields };\n    });\n\n    return blocksTypeAndFields;\n};\n\n/** Helper function to sort block childs based on type or field name */\nexport const sortBlockChild = blocksArray =>\n    blocksArray.sort((a, b) => {\n        if (a.type < b.type) {\n            return -1;\n        }\n        if (a.type > b.type) {\n            return 1;\n        }\n        return JSON.stringify(a.fields) < JSON.stringify(b.fields) ? -1 : 1;\n    });\n\n/** Compare two blocks by field name and value */\nconst areFieldsEqual = (fields1, fields2) => {\n    if (fields1?.length !== fields2?.length) {\n        return false;\n    }\n    for (let i = 0; i < fields1.length; i++) {\n        if (fields1[i]?.name !== fields2[i]?.name || fields1[i]?.value !== fields2[i]?.value) {\n            return false;\n        }\n    }\n    return true;\n};\n\n/** Sanitize XMLs and compare them */\nexport const compareXml = (xml1, xml2) => {\n    // Extract block information from the XMLs and sort the blocks\n    const sortedBlocks1 = pipe(extractBlocksFromXml, sortBlockChild);\n    const sortedBlocks2 = pipe(extractBlocksFromXml, sortBlockChild);\n    const blocks1 = sortedBlocks1(xml1);\n    const blocks2 = sortedBlocks2(xml2);\n\n    // Compare the sorted blocks\n    if (blocks1?.length !== blocks2?.length) {\n        return false;\n    }\n    for (let i = 0; i < blocks1.length; i++) {\n        if (blocks1[i]?.type !== blocks2[i]?.type || !areFieldsEqual(blocks1[i]?.fields, blocks2[i]?.fields)) {\n            return false;\n        }\n    }\n\n    return true;\n};\n","import { error_message_map } from './error-config';\nimport { observer } from './observer';\n\nconst onKeyDownHandleError = event => {\n    if (Blockly.selected !== null && Blockly.selected.parentBlock_ === null) {\n        if (event.key === 'Delete' || event.key === 'Backspace') {\n            handleError('BLOCK_DELETION', observer);\n        }\n    }\n};\n\nexport const removeErrorHandlingEventListener = (type = 'keydown') => {\n    window.removeEventListener(type, onKeyDownHandleError);\n};\n\nexport const initErrorHandlingListener = (type = 'keydown') => {\n    window.addEventListener(type, onKeyDownHandleError);\n};\n\nexport const handleError = (errorCode, observer) => {\n    switch (errorCode) {\n        case 'BLOCK_DELETION':\n            if (error_message_map[Blockly.selected.type]) {\n                observer.emit('ui.log.error', error_message_map[Blockly.selected.type]?.default);\n            }\n            break;\n        default:\n            break;\n    }\n};\n","import LZString from 'lz-string';\nimport localForage from 'localforage';\nimport DBotStore from '../scratch/dbot-store';\nimport { save_types } from '../constants/save-type';\n/**\n * Save workspace to localStorage\n * @param {String} save_type // constants/save_types.js (unsaved, local, googledrive)\n * @param {Blockly.Events} event // Blockly event object\n */\nexport const saveWorkspaceToRecent = async (xml, save_type = save_types.UNSAVED) => {\n    // Ensure strategies don't go through expensive conversion.\n    xml.setAttribute('is_dbot', true);\n    const {\n        load_modal: { updateListStrategies },\n        save_modal,\n    } = DBotStore.instance;\n\n    const workspace_id = Blockly.derivWorkspace.current_strategy_id || Blockly.utils.genUid();\n    const workspaces = await getSavedWorkspaces();\n    const current_xml = Blockly.Xml.domToText(xml);\n    const current_timestamp = Date.now();\n    const current_workspace_index = workspaces.findIndex(workspace => workspace.id === workspace_id);\n\n    if (current_workspace_index >= 0) {\n        const current_workspace = workspaces[current_workspace_index];\n        current_workspace.xml = current_xml;\n        current_workspace.name = save_modal.bot_name;\n        current_workspace.timestamp = current_timestamp;\n        current_workspace.save_type = save_type;\n    } else {\n        workspaces.push({\n            id: workspace_id,\n            timestamp: current_timestamp,\n            name: save_modal.bot_name,\n            xml: current_xml,\n            save_type,\n        });\n    }\n\n    workspaces\n        .sort((a, b) => {\n            return new Date(a.timestamp) - new Date(b.timestamp);\n        })\n        .reverse();\n\n    if (workspaces.length > 10) {\n        workspaces.pop();\n    }\n    updateListStrategies(workspaces);\n    localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(workspaces)));\n};\n\nexport const getSavedWorkspaces = async () => {\n    try {\n        return JSON.parse(LZString.decompress(await localForage.getItem('saved_workspaces'))) || [];\n    } catch (e) {\n        return [];\n    }\n};\n\nexport const removeExistingWorkspace = async workspace_id => {\n    const workspaces = await getSavedWorkspaces();\n    const current_workspace_index = workspaces.findIndex(workspace => workspace.id === workspace_id);\n\n    if (current_workspace_index >= 0) {\n        workspaces.splice(current_workspace_index, 1);\n    }\n\n    await localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(workspaces)));\n};\n","import { Map, List } from 'immutable';\n/**\nBelow are the list of events we can register to listen to :\n \n-bot.running : Emitted in trade/index.js, in old Binary Bot this is only used\nto set the label to is running.\n\n-bot.stop: Bot was stopped by the user\n\n-bot.contract: Called in OpenContract.js, object consisting of\naccountID and a proposal_open_contract response, this will\nbe emitted on each POC message from the server.\n\n-bot.info: Emitted in trade/Balance.js, it announces account ID and balance,\nwe don't need this in DerivBot. Can also be emitted during running\ncontract, it then announces an object consisting of accountID,\ntotal_runs, transaction_ids, contract_type, and buy_price.\n\n-contract.status:  First emitted in trade/Purchase.js with an idea that's more\nof a flag e.g. contract_purchase_sent (when buy was sent to\nAPI, or contract_purchase_recieved (when buy was acknowledged\nby API), or contract.sold (when a contract was sold/expired).\n\n-contract.settled: this event was emitted to initiate a\nsettlement of a contract, i.e. it would call proposal_open_contract to retrieve\nlatest values for contract, not required atm by DerivBot\n\n-googledrive.authorise : event to start auturize google flow\n\n-ui.log.success: UI Notifications\n\n-ui.log.error: UI errors\n\n-ui.log.warn: UI warning\n\n-Notify: Server Notifications\n\n-Error : Server errors\n\n */\n\nexport default class Observer {\n    constructor() {\n        this.eam = new Map(); // event action map\n    }\n\n    register(event, _action, once, unregisterIfError, unregisterAllBefore) {\n        if (unregisterAllBefore) {\n            this.unregisterAll(event);\n        }\n        const apiError = error => {\n            if (error.type === unregisterIfError.type) {\n                this.unregister('api.error', apiError);\n                unregisterIfError.unregister.forEach(unreg => {\n                    if (unreg instanceof Array) {\n                        this.unregister(...unreg);\n                    } else {\n                        this.unregisterAll(unreg);\n                    }\n                });\n            }\n        };\n        if (unregisterIfError) {\n            this.register('api.error', apiError);\n        }\n        const action = (...args) => {\n            if (once) {\n                this.unregister(event, _action);\n            }\n            if (unregisterIfError) {\n                this.unregister('api.error', apiError);\n            }\n            _action(...args);\n        };\n\n        const actionList = this.eam.get(event);\n\n        this.eam = actionList\n            ? this.eam.set(event, actionList.push({ action, searchBy: _action }))\n            : this.eam.set(event, new List().push({ action, searchBy: _action }));\n    }\n\n    unregister(event, f) {\n        this.eam = this.eam.set(\n            event,\n            this.eam.get(event).filter(r => r.searchBy !== f)\n        );\n    }\n\n    isRegistered(event) {\n        return this.eam.has(event);\n    }\n\n    unregisterAll(event) {\n        this.eam = this.eam.delete(event);\n    }\n\n    emit(event, data) {\n        if (this.eam.has(event)) {\n            this.eam.get(event).forEach(action => action.action(data));\n        }\n    }\n    setState(state = {}) {\n        this.state = { ...this.state, ...state };\n    }\n    getState(key) {\n        return this.state?.[key];\n    }\n}\n\nexport const observer = new Observer();\n","export default function PendingPromise() {\n    let resolve, reject;\n\n    const promise = new Promise((_resolve, _reject) => {\n        resolve = _resolve;\n        reject = _reject;\n    });\n\n    promise.isPending = true;\n\n    promise.resolve = res => {\n        promise.isPending = false;\n        resolve(res);\n    };\n\n    promise.reject = error => {\n        promise.isPending = false;\n        reject(error);\n    };\n\n    return promise;\n}\n","import { config } from '../constants/config';\n\nexport const hasAllRequiredBlocks = () => {\n    const blocks_in_workspace = Blockly.derivWorkspace.getAllBlocks();\n    const { mandatoryMainBlocks } = config;\n    const required_block_types = ['trade_definition_tradeoptions', ...mandatoryMainBlocks];\n    const all_block_types = blocks_in_workspace.map(block => block.type);\n    const has_all_required_blocks = required_block_types.every(required_block_type =>\n        all_block_types.includes(required_block_type)\n    );\n\n    return has_all_required_blocks;\n};\n\nexport const onWorkspaceResize = () => {\n    const workspace = Blockly.derivWorkspace;\n    if (workspace) {\n        workspace.getAllFields().forEach(field => field.forceRerender());\n\n        const el_scratch_div = document.getElementById('scratch_div');\n        if (el_scratch_div) {\n            el_scratch_div.style.width = 'calc(100vw - 3.2rem)';\n            el_scratch_div.style.height = 'var(--bot-content-height)';\n            Blockly.svgResize(workspace);\n        }\n    }\n};\n\nexport const removeLimitedBlocks = (workspace, block_types) => {\n    const types = Array.isArray(block_types) ? block_types : [block_types];\n\n    types.forEach(block_type => {\n        if (config.single_instance_blocks.includes(block_type)) {\n            workspace.getAllBlocks().forEach(ws_block => {\n                if (ws_block.type === block_type) {\n                    ws_block.dispose();\n                }\n            });\n        }\n    });\n};\n","import { setSmartChartsPublicPath } from '@deriv/deriv-charts';\n\nconst getUrlBase = (path = '') => {\n    const l = window.location;\n\n    if (!/^\\/(br_)/.test(l.pathname)) return path;\n\n    const get_path = path.startsWith('/') ? path : `/${path}`;\n\n    return `/${l.pathname.split('/')[1]}${get_path}`;\n};\n\nexport function setBotPublicPath(path: string) {\n    __webpack_public_path__ = path; // eslint-disable-line no-global-assign\n}\n\nexport const getImageLocation = (image_name: string) => getUrlBase(`/public/images/common/${image_name}`);\n\n// eslint-disable-next-line import/no-mutable-exports\nlet initSurvicateCalled = false;\nconst initSurvicate = () => {\n    initSurvicateCalled = true;\n    if (document.getElementById('dbot-survicate')) {\n        const survicate_box = document.getElementById('survicate-box') || undefined;\n        if (survicate_box) {\n            survicate_box.style.display = 'block';\n        }\n        return;\n    }\n\n    const script = document.createElement('script');\n    script.id = 'dbot-survicate';\n    script.async = true;\n    script.src = 'https://survey.survicate.com/workspaces/83b651f6b3eca1ab4551d95760fe5deb/web_surveys.js';\n    document.body.appendChild(script);\n};\n\nexport { initSurvicate, initSurvicateCalled };\n\nsetBotPublicPath(getUrlBase('/'));\nsetSmartChartsPublicPath(getUrlBase('/js/smartcharts/'));\n","import { createContext } from 'react';\nimport type { TStores } from '../types';\n\nconst StoreContext = createContext<TStores | null>(null);\n\nexport default StoreContext;\n","import { createContext } from 'react';\n\n// Don't need to type `deriv_api` here, We will be using these methods inside\n// the `useQuery`, `useMutation` and `useSubscription` hook to make it type-safe.\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst APIContext = createContext<Record<string, any> | null>(null);\n\nexport default APIContext;\n","import { useCallback, useContext } from 'react';\n\nimport type {\n    TSocketEndpointNames,\n    TSocketPaginateableEndpointNames,\n    TSocketRequestPayload,\n    TSocketResponseData,\n    TSocketSubscribableEndpointNames,\n} from '../types';\n\nimport APIContext from './APIContext';\n\nconst useAPI = () => {\n    const api = useContext(APIContext);\n\n    const send = useCallback(\n        async <T extends TSocketEndpointNames | TSocketPaginateableEndpointNames = TSocketEndpointNames>(\n            name: T,\n            payload?: TSocketRequestPayload<T>\n        ): Promise<TSocketResponseData<T>> => {\n            const response = await api?.send({ [name]: 1, ...(payload || {}) });\n\n            if (response.error) {\n                throw response.error;\n            }\n\n            return response;\n        },\n        [api]\n    );\n\n    const subscribe = useCallback(\n        <T extends TSocketSubscribableEndpointNames>(\n            name: T,\n            payload?: TSocketRequestPayload<T>\n        ): {\n            subscribe: (\n                // The type will be handled by the `useSubscription` hook.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onData: (response: any) => void,\n                // The type will be handled by the `useSubscription` hook.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                onError: (response: any) => void\n            ) => { unsubscribe?: VoidFunction };\n        } => api?.subscribe({ [name]: 1, subscribe: 1, ...(payload || {}) }),\n        [api]\n    );\n\n    return {\n        send,\n        subscribe,\n    };\n};\n\nexport default useAPI;\n","import React, { PropsWithChildren } from 'react';\n// @ts-expect-error `@deriv/deriv-api` is not in TypeScript, Hence we ignore the TS error.\nimport DerivAPIBasic from '@deriv/deriv-api/dist/DerivAPIBasic';\nimport { getAppId, getSocketURL, useWS } from '@deriv/shared';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\n// import { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport APIContext from './APIContext';\n\ndeclare global {\n    interface Window {\n        ReactQueryClient?: QueryClient;\n        DerivAPI?: Record<string, DerivAPIBasic>;\n    }\n}\n\n// This is a temporary workaround to share a single `QueryClient` instance between all the packages.\n// Later once we have each package separated we won't need this anymore and can remove this.\nconst getSharedQueryClientContext = (): QueryClient => {\n    if (!window.ReactQueryClient) {\n        window.ReactQueryClient = new QueryClient();\n    }\n\n    return window.ReactQueryClient;\n};\n\n// This is a temporary workaround to share a single `DerivAPIBasic` instance for every unique URL.\n// Later once we have each package separated we won't need this anymore and can remove this.\nconst getDerivAPIInstance = (): DerivAPIBasic => {\n    const endpoint = getSocketURL();\n    const app_id = getAppId();\n    const language = 'EN'; // Need to use the language from the app context.\n    const brand = 'deriv';\n    const wss = `wss://${endpoint}/websockets/v3?app_id=${app_id}&l=${language}&brand=${brand}`;\n\n    if (!window.DerivAPI) {\n        window.DerivAPI = {};\n    }\n\n    if (!window.DerivAPI?.[wss]) {\n        window.DerivAPI[wss] = new DerivAPIBasic({ connection: new WebSocket(wss) });\n    }\n\n    return window.DerivAPI?.[wss];\n};\n\nconst queryClient = getSharedQueryClientContext();\n\ntype TProps = {\n    /** If set to true, the APIProvider will instantiate it's own socket connection. */\n    standalone?: boolean;\n};\n\nconst APIProvider = ({ children, standalone = false }: PropsWithChildren<TProps>) => {\n    const WS = useWS();\n    // Use the new API instance if the `standalone` prop is set to true,\n    // else use the legacy socket connection.\n    const active_connection = standalone ? getDerivAPIInstance() : WS;\n\n    return (\n        <APIContext.Provider value={active_connection}>\n            <QueryClientProvider client={queryClient}>\n                {children}\n                {/* <ReactQueryDevtools /> */}\n            </QueryClientProvider>\n        </APIContext.Provider>\n    );\n};\n\nexport default APIProvider;\n","import { useCallback, useEffect, useRef, useState } from 'react';\nimport useAPI from './useAPI';\nimport type {\n    TSocketAcceptableProps,\n    TSocketRequestPayload,\n    TSocketResponseData,\n    TSocketSubscribableEndpointNames,\n} from '../types';\n\nconst useSubscription = <T extends TSocketSubscribableEndpointNames>(name: T) => {\n    const [isLoading, setIsLoading] = useState(false);\n    const [isSubscribed, setSubscribed] = useState(false);\n    const [error, setError] = useState<unknown>();\n    const [data, setData] = useState<TSocketResponseData<T>>();\n    const subscriber = useRef<{ unsubscribe?: VoidFunction }>();\n    const { subscribe: _subscribe } = useAPI();\n\n    const subscribe = useCallback(\n        (...props: TSocketAcceptableProps<T>) => {\n            const prop = props?.[0];\n            const payload = prop && 'payload' in prop ? (prop.payload as TSocketRequestPayload<T>) : undefined;\n\n            setIsLoading(true);\n            setSubscribed(true);\n\n            try {\n                subscriber.current = _subscribe(name, payload).subscribe(\n                    response => {\n                        setData(response);\n                        setIsLoading(false);\n                    },\n                    response => {\n                        setError(response.error);\n                        setIsLoading(false);\n                    }\n                );\n            } catch (e) {\n                setError(e);\n            }\n        },\n        [_subscribe, name]\n    );\n\n    const unsubscribe = useCallback(() => {\n        subscriber.current?.unsubscribe?.();\n        setSubscribed(false);\n    }, []);\n\n    useEffect(() => {\n        return () => {\n            unsubscribe();\n        };\n    }, [unsubscribe]);\n\n    return {\n        subscribe,\n        unsubscribe,\n        isLoading,\n        isSubscribed,\n        error,\n        data,\n    };\n};\n\nexport default useSubscription;\n","import { useContext } from 'react';\nimport StoreContext from './storeContext';\n\nconst useStore = () => {\n    const store = useContext(StoreContext);\n\n    if (!store) {\n        throw new Error('useStore must be used within StoreProvider');\n    }\n\n    return store;\n};\n\nexport default useStore;\n","import React, { useEffect } from 'react';\nimport { useSubscription } from '@deriv/api';\nimport merge from 'lodash.merge';\nimport { observer } from 'mobx-react-lite';\nimport useStore from '../useStore';\n\nconst ExchangeRatesProvider = observer(({ children }: React.PropsWithChildren<unknown>) => {\n    const { data, subscribe } = useSubscription('exchange_rates');\n    const {\n        exchange_rates: { update },\n    } = useStore();\n\n    useEffect(() => {\n        subscribe({ payload: { base_currency: 'USD' } });\n    }, [subscribe]);\n\n    useEffect(() => {\n        if (data) {\n            const { exchange_rates } = data;\n\n            if (exchange_rates) update(prev => merge(prev, exchange_rates));\n        }\n    }, [update, data]);\n\n    return <>{children}</>;\n});\n\nexport default ExchangeRatesProvider;\n","import { action, makeObservable, observable } from 'mobx';\nimport { makePersistable, stopPersisting } from 'mobx-persist-store';\n\nexport default class BaseStore<T> {\n    data: T | undefined = undefined;\n\n    constructor(name: string, onHydrationDone?: VoidFunction) {\n        makeObservable(this, {\n            data: observable,\n            update: action.bound,\n            unmount: action.bound,\n        });\n\n        makePersistable(this, { name, properties: ['data'], storage: window.localStorage }).then(() =>\n            onHydrationDone?.()\n        );\n    }\n\n    update(data: NonNullable<T> | ((previous?: T) => NonNullable<T>)) {\n        this.data = data instanceof Function ? data(this.data) : data;\n    }\n\n    unmount() {\n        stopPersisting(this);\n    }\n}\n","import BaseStore from './BaseStore';\nimport type { ExchangeRatesResponse } from '@deriv/api-types';\n\nexport default class ExchangeRatesStore extends BaseStore<ExchangeRatesResponse['exchange_rates']> {\n    constructor() {\n        super('ExchangeRatesStore');\n    }\n}\n","import BaseStore from './BaseStore';\n\nconst FLAGS = {\n    wallet: false,\n    next_wallet: false,\n    sharkfin: false,\n} satisfies Record<string, boolean>;\n\nexport default class FeatureFlagsStore extends BaseStore<{ [k in keyof typeof FLAGS]: boolean }> {\n    constructor() {\n        super('FeatureFlagsStore', () => {\n            // Set the default values for the first time.\n            if (!this.data) this.update(FLAGS);\n\n            // Update the store data if a new flag was added or removed.\n            if (this.data && Object.keys(this.data).length !== Object.keys(FLAGS).length) {\n                this.update(old => {\n                    const data = FLAGS;\n\n                    Object.keys(FLAGS).forEach(flag => {\n                        // @ts-expect-error flag key is always present in the object, Hence can ignore the TS error.\n                        if (old[flag] !== undefined) data[flag] = old[flag];\n                    });\n\n                    return data;\n                });\n            }\n        });\n\n        this.data = FLAGS;\n    }\n}\n","import React, { useEffect, useMemo } from 'react';\nimport { APIProvider } from '@deriv/api';\nimport { ExchangeRatesProvider } from './providers';\nimport StoreContext from './storeContext';\nimport { ExchangeRatesStore, FeatureFlagsStore } from './stores';\nimport type { TCoreStores, TStores } from '../types';\n\nconst StoreProvider = ({ children, store }: React.PropsWithChildren<{ store: TCoreStores }>) => {\n    const memoizedValue: TStores = useMemo(() => {\n        // If the store is mocked for testing purposes, then return the mocked value.\n        if ('is_mock' in store && store.is_mock) return store as unknown as TStores;\n\n        // Otherwise, instantiate store and return it.\n        return {\n            ...store,\n            exchange_rates: new ExchangeRatesStore(),\n            feature_flags: new FeatureFlagsStore(),\n        };\n    }, [store]);\n\n    useEffect(() => {\n        return () => {\n            Object.values(memoizedValue).forEach(value => {\n                if (typeof value === 'object' && 'unmount' in value) value.unmount();\n            });\n        };\n    }, [memoizedValue]);\n\n    return (\n        <APIProvider>\n            <StoreContext.Provider value={memoizedValue}>\n                <ExchangeRatesProvider>{children}</ExchangeRatesProvider>\n            </StoreContext.Provider>\n        </APIProvider>\n    );\n};\n\nexport default StoreProvider;\n","import { action, makeObservable, reaction, when } from 'mobx';\nimport { ApiHelpers, DBot, runIrreversibleEvents } from '@deriv/bot-skeleton';\nimport { ContentFlag, isEuResidenceWithOnlyVRTC, routes, showDigitalOptionsUnavailableError } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nexport default class AppStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            onMount: action.bound,\n            onUnmount: action.bound,\n            onBeforeUnload: action.bound,\n            registerReloadOnLanguageChange: action.bound,\n            registerCurrencyReaction: action.bound,\n            registerOnAccountSwitch: action.bound,\n            registerLandingCompanyChangeReaction: action.bound,\n            registerResidenceChangeReaction: action.bound,\n            setDBotEngineStores: action.bound,\n            onClickOutsideBlockly: action.bound,\n            showDigitalOptionsMaltainvestError: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n        this.dbot_store = null;\n        this.api_helpers_store = null;\n        this.timer = null;\n    }\n\n    getErrorForNonEuClients = () => ({\n        text: localize(\n            'Unfortunately, this trading platform is not available for EU Deriv account. Please switch to a non-EU account to continue trading.'\n        ),\n        title: localize('Deriv Bot is unavailable for this account'),\n        link: localize('Switch to another account'),\n    });\n\n    getErrorForEuClients = (is_logged_in = false) => {\n        return {\n            text: ' ',\n            title: is_logged_in\n                ? localize('Deriv Bot is not available for EU clients')\n                : localize('Deriv Bot is unavailable in the EU'),\n            link: is_logged_in && localize(\"Back to Trader's Hub\"),\n            route: routes.traders_hub,\n        };\n    };\n\n    handleErrorForEu = (show_default_error = false) => {\n        const { client, common, ui, traders_hub } = this.core;\n        const toggleAccountsDialog = ui?.toggleAccountsDialog;\n\n        if (!client?.is_logged_in && client?.is_eu_country) {\n            return showDigitalOptionsUnavailableError(common.showError, this.getErrorForEuClients());\n        }\n\n        if (!client.is_landing_company_loaded) {\n            return false;\n        }\n\n        if (window.location.pathname === routes.bot) {\n            if (client.should_show_eu_error) {\n                return showDigitalOptionsUnavailableError(\n                    common.showError,\n                    this.getErrorForEuClients(client.is_logged_in)\n                );\n            }\n\n            if (traders_hub.content_flag === ContentFlag.HIGH_RISK_CR) {\n                return false;\n            }\n\n            if (traders_hub.content_flag === ContentFlag.LOW_RISK_CR_EU && toggleAccountsDialog) {\n                return showDigitalOptionsUnavailableError(\n                    common.showError,\n                    this.getErrorForNonEuClients(),\n                    toggleAccountsDialog,\n                    false,\n                    false\n                );\n            }\n\n            if (\n                ((!client.is_bot_allowed && client.is_eu && client.should_show_eu_error) ||\n                    isEuResidenceWithOnlyVRTC(client.active_accounts) ||\n                    client.is_options_blocked) &&\n                toggleAccountsDialog\n            ) {\n                return showDigitalOptionsUnavailableError(\n                    common.showError,\n                    this.getErrorForNonEuClients(),\n                    toggleAccountsDialog,\n                    false,\n                    false\n                );\n            }\n        }\n\n        if (show_default_error && common.has_error) {\n            common.setError(false, null);\n        }\n        return false;\n    };\n\n    onMount() {\n        const { blockly_store, run_panel } = this.root_store;\n        const { client, ui, traders_hub } = this.core;\n        this.showDigitalOptionsMaltainvestError();\n\n        let timer_counter = 1;\n\n        this.timer = setInterval(() => {\n            if (window.sendRequestsStatistic) {\n                window.sendRequestsStatistic(false);\n                performance.clearMeasures();\n                if (timer_counter === 6 || run_panel?.is_running) {\n                    clearInterval(this.timer);\n                } else {\n                    timer_counter++;\n                }\n            }\n        }, 10000);\n\n        blockly_store.setLoading(true);\n        DBot.initWorkspace(__webpack_public_path__, this.dbot_store, this.api_helpers_store, ui.is_mobile).then(() => {\n            blockly_store.setContainerSize();\n            blockly_store.setLoading(false);\n        });\n        this.registerReloadOnLanguageChange(this);\n        this.registerCurrencyReaction.call(this);\n        this.registerOnAccountSwitch.call(this);\n        this.registerLandingCompanyChangeReaction.call(this);\n        this.registerResidenceChangeReaction.call(this);\n\n        window.addEventListener('click', this.onClickOutsideBlockly);\n        window.addEventListener('beforeunload', this.onBeforeUnload);\n\n        blockly_store.getCachedActiveTab();\n\n        when(\n            () => [client?.should_show_eu_error, client?.is_landing_company_loaded],\n            () => this.showDigitalOptionsMaltainvestError()\n        );\n\n        reaction(\n            () => traders_hub?.content_flag,\n            () => this.showDigitalOptionsMaltainvestError()\n        );\n    }\n\n    onUnmount() {\n        DBot.terminateBot();\n        DBot.terminateConnection();\n        if (Blockly.derivWorkspace) {\n            clearInterval(Blockly.derivWorkspace.save_workspace_interval);\n            Blockly.derivWorkspace.dispose();\n        }\n        if (typeof this.disposeReloadOnLanguageChangeReaction === 'function') {\n            this.disposeReloadOnLanguageChangeReaction();\n        }\n        if (typeof this.disposeCurrencyReaction === 'function') {\n            this.disposeCurrencyReaction();\n        }\n        if (typeof this.disposeSwitchAccountListener === 'function') {\n            this.disposeSwitchAccountListener();\n        }\n        if (typeof this.disposeLandingCompanyChangeReaction === 'function') {\n            this.disposeLandingCompanyChangeReaction();\n        }\n        if (typeof this.disposeResidenceChangeReaction === 'function') {\n            this.disposeResidenceChangeReaction();\n        }\n\n        window.removeEventListener('click', this.onClickOutsideBlockly);\n        window.removeEventListener('beforeunload', this.onBeforeUnload);\n\n        // Ensure account switch is re-enabled.\n        const { ui } = this.core;\n\n        ui.setAccountSwitcherDisabledMessage(false);\n        ui.setPromptHandler(false);\n\n        if (this.timer) clearInterval(this.timer);\n        performance.clearMeasures();\n    }\n\n    onBeforeUnload = event => {\n        const { is_stop_button_visible } = this.root_store.run_panel;\n\n        if (is_stop_button_visible) {\n            event.returnValue = true;\n        }\n    };\n    registerReloadOnLanguageChange() {\n        this.disposeReloadOnLanguageChangeReaction = reaction(\n            () => this.core.common.current_language,\n            () => {\n                // temporarily added this to refresh just dbot in case of changing language,\n                // otherwise it should change language without refresh.\n                const { pathname } = window.location;\n                const is_bot =\n                    /^\\/bot/.test(pathname) || (/^\\/(br_)/.test(pathname) && pathname.split('/')[2] === 'bot');\n                if (is_bot) window.location.reload();\n            }\n        );\n    }\n    registerCurrencyReaction() {\n        // Syncs all trade options blocks' currency with the client's active currency.\n        this.disposeCurrencyReaction = reaction(\n            () => this.core.client.currency,\n            currency => {\n                if (!Blockly.derivWorkspace) return;\n\n                const trade_options_blocks = Blockly.derivWorkspace\n                    .getAllBlocks()\n                    .filter(\n                        b =>\n                            b.type === 'trade_definition_tradeoptions' ||\n                            b.type === 'trade_definition_multiplier' ||\n                            (b.isDescendantOf('trade_definition_multiplier') && b.category_ === 'trade_parameters')\n                    );\n\n                trade_options_blocks.forEach(trade_options_block => trade_options_block.setCurrency(currency));\n            }\n        );\n    }\n\n    registerOnAccountSwitch() {\n        const { client } = this.core;\n\n        this.disposeSwitchAccountListener = reaction(\n            () => client.switch_broadcast,\n            switch_broadcast => {\n                if (!switch_broadcast) return;\n                this.showDigitalOptionsMaltainvestError();\n\n                const { active_symbols, contracts_for } = ApiHelpers.instance;\n\n                if (Blockly.derivWorkspace) {\n                    active_symbols.retrieveActiveSymbols(true).then(() => {\n                        contracts_for.disposeCache();\n                        Blockly.derivWorkspace\n                            .getAllBlocks()\n                            .filter(block => block.type === 'trade_definition_market')\n                            .forEach(block => {\n                                runIrreversibleEvents(() => {\n                                    const fake_create_event = new Blockly.Events.Create(block);\n                                    Blockly.Events.fire(fake_create_event);\n                                });\n                            });\n                    });\n                }\n            }\n        );\n    }\n\n    registerLandingCompanyChangeReaction() {\n        const { client } = this.core;\n\n        this.disposeLandingCompanyChangeReaction = reaction(\n            () => client.landing_company_shortcode,\n            () => this.handleErrorForEu()\n        );\n    }\n\n    registerResidenceChangeReaction() {\n        const { client } = this.core;\n\n        this.disposeResidenceChangeReaction = reaction(\n            () => client.account_settings.country_code,\n            () => this.handleErrorForEu()\n        );\n    }\n\n    setDBotEngineStores() {\n        // DO NOT pass the rootstore in, if you need a prop define it in dbot-skeleton-store ans pass it through.\n        const {\n            flyout,\n            toolbar,\n            save_modal,\n            dashboard,\n            quick_strategy,\n            load_modal,\n            run_panel,\n            blockly_store,\n            summary_card,\n        } = this.root_store;\n        const { client } = this.core;\n        const { handleFileChange } = load_modal;\n        const { loadDataStrategy } = quick_strategy;\n        const { setLoading } = blockly_store;\n        const { setContractUpdateConfig } = summary_card;\n\n        this.dbot_store = {\n            client,\n            flyout,\n            toolbar,\n            save_modal,\n            dashboard,\n            load_modal,\n            run_panel,\n            setLoading,\n            setContractUpdateConfig,\n            loadDataStrategy,\n            handleFileChange,\n        };\n\n        this.api_helpers_store = {\n            server_time: this.core.common.server_time,\n            ws: this.root_store.ws,\n        };\n    }\n\n    onClickOutsideBlockly = event => {\n        if (document.querySelector('.injectionDiv')) {\n            const path = event.path || (event.composedPath && event.composedPath());\n            const is_click_outside_blockly = !path.some(el => el.classList && el.classList.contains('injectionDiv'));\n\n            if (is_click_outside_blockly) {\n                Blockly?.hideChaff(/* allowToolbox */ false);\n            }\n        }\n    };\n\n    showDigitalOptionsMaltainvestError = () => {\n        this.handleErrorForEu(true);\n    };\n}\n","type TTabsTitleProps = {\n    [key: string]: string | number;\n};\n\ntype TDashboardTabsProps = {\n    [key: string]: number;\n};\n\nexport const tabs_title: TTabsTitleProps = Object.freeze({\n    WORKSPACE: 'Workspace',\n    CHART: 'Chart',\n});\n\nexport const DBOT_TABS: TDashboardTabsProps = Object.freeze({\n    DASHBOARD: 0,\n    BOT_BUILDER: 1,\n    CHART: 2,\n    TUTORIAL: 3,\n});\n\nexport const MAX_STRATEGIES = 10;\n\nexport const TAB_IDS = ['id-dbot-dashboard', 'id-bot-builder', 'id-charts', 'id-tutorials'];\n","const getSettingsFromLocal = () => {\n    return JSON.parse(localStorage.getItem('dbot_settings'));\n};\n\nexport const getSetting = key => {\n    const settings = getSettingsFromLocal();\n\n    if (!settings) {\n        return null;\n    }\n\n    return settings[key];\n};\n\nexport const storeSetting = (key, value) => {\n    const settings = getSettingsFromLocal() || {};\n\n    settings[key] = value;\n    localStorage.setItem('dbot_settings', JSON.stringify(settings));\n};\n\nexport const removeKeyValue = key => {\n    const settings = getSettingsFromLocal() || {};\n    delete settings[key];\n\n    localStorage.setItem('dbot_settings', JSON.stringify(settings));\n};\n","import { action, makeObservable, observable } from 'mobx';\nimport { onWorkspaceResize } from '@deriv/bot-skeleton';\nimport { tabs_title } from 'Constants/bot-contents';\nimport { getSetting, storeSetting } from 'Utils/settings';\nimport RootStore from './root-store';\n\nexport interface IBlocklyStore {\n    is_loading: boolean;\n    active_tab: string;\n    setActiveTab: (tab: string) => void;\n    setContainerSize: () => void;\n    onMount: () => void;\n    onUnmount: () => void;\n    setLoading: () => void;\n    getCachedActiveTab: () => void;\n}\n\nexport default class BlocklyStore implements IBlocklyStore {\n    root_store: RootStore;\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            is_loading: observable,\n            active_tab: observable,\n            setActiveTab: action.bound,\n            setContainerSize: action.bound,\n            onMount: action.bound,\n            getCachedActiveTab: action.bound,\n            onUnmount: action.bound,\n            setLoading: action.bound,\n        });\n        this.root_store = root_store;\n    }\n\n    is_loading = false;\n\n    active_tab = tabs_title.WORKSPACE;\n\n    setActiveTab(tab: string): void {\n        this.active_tab = tab;\n        storeSetting('active_tab', this.active_tab);\n    }\n\n    setContainerSize(): void {\n        if (this.active_tab === tabs_title.WORKSPACE) {\n            onWorkspaceResize();\n        }\n    }\n\n    onMount(): void {\n        window.addEventListener('resize', this.setContainerSize);\n    }\n\n    getCachedActiveTab(): void {\n        if (getSetting('active_tab')) {\n            this.active_tab = getSetting('active_tab');\n        }\n    }\n\n    onUnmount(): void {\n        window.removeEventListener('resize', this.setContainerSize);\n    }\n\n    setLoading(is_loading: boolean): void {\n        this.is_loading = is_loading;\n    }\n}\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\n// import { tabs_title } from '../constants/bot-contents';\nimport { ServerTime } from '@deriv/bot-skeleton';\n\nconst g_subscribers_map = {};\nlet WS;\n\nexport default class ChartStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            symbol: observable,\n            is_chart_loading: observable,\n            chart_type: observable,\n            granularity: observable,\n            is_contract_ended: computed,\n            onStartBot: action.bound,\n            onStopBot: action.bound,\n            updateSymbol: action.bound,\n            onSymbolChange: action.bound,\n            updateGranularity: action.bound,\n            updateChartType: action.bound,\n            setChartStatus: action.bound,\n            wsSubscribe: action.bound,\n            wsForget: action.bound,\n            wsForgetStream: action.bound,\n            wsSendRequest: action.bound,\n            getMarketsOrder: action.bound,\n        });\n\n        this.root_store = root_store;\n        WS = root_store.ws;\n        const { run_panel } = root_store;\n\n        reaction(\n            () => run_panel.is_running,\n            () => (run_panel.is_running ? this.onStartBot() : this.onStopBot())\n        );\n    }\n\n    symbol;\n    is_chart_loading;\n    chart_type;\n    granularity;\n\n    get is_contract_ended() {\n        const { transactions } = this.root_store;\n\n        return transactions.contracts.length > 0 && transactions.contracts[0].is_ended;\n    }\n\n    onStartBot() {\n        this.updateSymbol();\n\n        // const { main_content } = this.root_store;\n        // main_content.setActiveTab(tabs_title.CHART);\n    }\n\n    // eslint-disable-next-line\n    onStopBot() {\n        // const { main_content } = this.root_store;\n        // main_content.setActiveTab(tabs_title.WORKSPACE);\n    }\n\n    updateSymbol() {\n        const workspace = Blockly.derivWorkspace;\n        const market_block = workspace.getAllBlocks().find(block => {\n            return block.type === 'trade_definition_market';\n        });\n\n        if (market_block && market_block !== 'na') {\n            const symbol = market_block.getFieldValue('SYMBOL_LIST');\n            this.symbol = symbol;\n        }\n    }\n\n    onSymbolChange(symbol) {\n        this.symbol = symbol;\n    }\n\n    updateGranularity(granularity) {\n        this.granularity = granularity;\n    }\n\n    updateChartType(chart_type) {\n        this.chart_type = chart_type;\n    }\n\n    setChartStatus(status) {\n        this.is_chart_loading = status;\n    }\n\n    // #region WS\n    wsSubscribe = (req, callback) => {\n        if (req.subscribe === 1) {\n            const key = JSON.stringify(req);\n            const subscriber = WS.subscribeTicksHistory(req, callback);\n            g_subscribers_map[key] = subscriber;\n        }\n    };\n\n    wsForget = req => {\n        const key = JSON.stringify(req);\n        if (g_subscribers_map[key]) {\n            g_subscribers_map[key].unsubscribe();\n            delete g_subscribers_map[key];\n        }\n    };\n\n    wsForgetStream = stream_id => {\n        WS.forgetStream(stream_id);\n    };\n\n    wsSendRequest = req => {\n        if (req.time) {\n            return ServerTime.timePromise().then(() => {\n                return {\n                    msg_type: 'time',\n                    time: ServerTime.get().unix(),\n                };\n            });\n        }\n        if (req.active_symbols) {\n            return WS.activeSymbols();\n        }\n        return WS.storage.send(req);\n    };\n\n    getMarketsOrder = active_symbols => {\n        const synthetic_index = 'synthetic_index';\n\n        const has_synthetic_index = !!active_symbols.find(s => s.market === synthetic_index);\n        return active_symbols\n            .slice()\n            .sort((a, b) => (a.display_name < b.display_name ? -1 : 1))\n            .map(s => s.market)\n            .reduce(\n                (arr, market) => {\n                    if (arr.indexOf(market) === -1) arr.push(market);\n                    return arr;\n                },\n                has_synthetic_index ? [synthetic_index] : []\n            );\n    };\n    // #endregion\n}\n","export const tabs_title = Object.freeze({\n    TAB_LOCAL: 'local_tab',\n    TAB_GOOGLE: 'google_tab',\n    TAB_RECENT: 'recent_tab',\n});\n\nexport const clearInjectionDiv = (type, el_ref) => {\n    if (type === 'store') {\n        if (el_ref && el_ref.getElementsByClassName('injectionDiv').length > 1) {\n            el_ref.removeChild(el_ref.getElementsByClassName('injectionDiv')[0]);\n        }\n    } else {\n        el_ref?.current?.removeChild(el_ref?.current?.children[0]);\n    }\n};\n","import { storeSetting } from 'Utils/settings';\n\ntype TTourStatus = {\n    key: string;\n    toggle: string;\n    type: string;\n};\n\ntype TTourList = {\n    [key: number]: string;\n};\n\nexport const tour_type: TTourType = {\n    key: 'onboard_tour',\n};\n\nexport const tour_status_ended: TTourStatus = {\n    key: '',\n    toggle: '',\n    type: `${tour_type.key}_status`,\n};\n\nexport type TTourType = Pick<TTourStatus, 'key'>;\n\nexport const setTourType = (param: string) => {\n    tour_type.key = param;\n};\n\nexport const highlightLoadModalButton = (tour_active: string, step: number) => {\n    const el_ref = document.querySelector('.toolbar__group-btn svg:nth-child(2)');\n    if (tour_active && step === 1) {\n        el_ref?.classList.add('dbot-tour-blink');\n    } else {\n        el_ref?.classList.remove('dbot-tour-blink');\n    }\n};\n\nexport const setTourSettings = (param: number, type: string) => {\n    return storeSetting(type, param);\n};\n\nexport const tour_list: TTourList = Object.freeze({\n    0: 'onboarding',\n    1: 'bot_builder',\n});\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\n\nimport { setColors } from '@deriv/bot-skeleton';\nimport { isMobile } from '@deriv/shared';\n\nimport { clearInjectionDiv } from 'Constants/load-modal';\n\nimport { setTourSettings, tour_type, TTourType } from '../components/dashboard/dbot-tours/utils';\n\nimport RootStore from './root-store';\n\nexport interface IDashboardStore {\n    active_tab: number;\n    dialog_options: { [key: string]: string };\n    faq_search_value: string | null;\n    has_mobile_preview_loaded: boolean;\n    is_web_socket_intialised: boolean;\n    initInfoPanel: () => void;\n    is_dialog_open: boolean;\n    is_file_supported: boolean;\n    is_info_panel_visible: boolean;\n    is_preview_on_popup: boolean;\n    onCloseDialog: () => void;\n    onCloseTour: (param: Partial<string>) => void;\n    onTourEnd: (step: number, is_tour_active: boolean) => void;\n    setActiveTab: (active_tab: number) => void;\n    setActiveTabTutorial: (active_tab_tutorials: number) => void;\n    setFAQSearchValue: (faq_search_value: string) => void;\n    setInfoPanelVisibility: (visibility: boolean) => void;\n    setIsFileSupported: (is_file_supported: boolean) => void;\n    setWebSocketState: (is_web_socket_intialised: boolean) => void;\n    setOpenSettings: (toast_message: string, show_toast: boolean) => void;\n    setPreviewOnDialog: (has_mobile_preview_loaded: boolean) => void;\n    setStrategySaveType: (param: string) => void;\n    show_toast: boolean;\n    show_mobile_tour_dialog: boolean;\n    showVideoDialog: (param: { [key: string]: string }) => void;\n    strategy_save_type: string;\n    toast_message: string;\n}\n\nexport default class DashboardStore implements IDashboardStore {\n    root_store: RootStore;\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            active_tab_tutorials: observable,\n            active_tab: observable,\n            dialog_options: observable,\n            faq_search_value: observable,\n            getFileArray: observable,\n            has_file_loaded: observable,\n            has_mobile_preview_loaded: observable,\n            initInfoPanel: action.bound,\n            active_tour: observable,\n            is_dialog_open: observable,\n            is_file_supported: observable,\n            is_info_panel_visible: observable,\n            is_preview_on_popup: observable,\n            is_tour_dialog_visible: observable,\n            is_web_socket_intialised: observable,\n            is_dark_mode: computed,\n            onCloseDialog: action.bound,\n            onCloseTour: action.bound,\n            onTourEnd: action.bound,\n            setActiveTab: action.bound,\n            setActiveTabTutorial: action.bound,\n            setWebSocketState: action.bound,\n            setFAQSearchValue: action.bound,\n            setFileLoaded: action.bound,\n            setInfoPanelVisibility: action.bound,\n            setIsFileSupported: action.bound,\n            setPreviewOnDialog: action.bound,\n            setPreviewOnPopup: action.bound,\n            setActiveTour: action.bound,\n            setTourDialogVisibility: action.bound,\n            setOpenSettings: action.bound,\n            show_toast: observable,\n            show_mobile_tour_dialog: observable,\n            showVideoDialog: action.bound,\n            strategy_save_type: observable,\n            toast_message: observable,\n            setStrategySaveType: action.bound,\n            setShowMobileTourDialog: action.bound,\n        });\n        this.root_store = root_store;\n        const {\n            load_modal: { previewRecentStrategy, current_workspace_id },\n        } = this.root_store;\n\n        const refreshBotBuilderTheme = () => {\n            Blockly.derivWorkspace.asyncClear();\n            Blockly.Xml.domToWorkspace(\n                Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),\n                Blockly.derivWorkspace\n            );\n        };\n\n        reaction(\n            () => this.is_dark_mode,\n            () => {\n                setColors(this.is_dark_mode);\n                if (this.active_tab === 1) {\n                    refreshBotBuilderTheme();\n                } else {\n                    refreshBotBuilderTheme();\n                    previewRecentStrategy(current_workspace_id);\n                }\n            }\n        );\n        reaction(\n            () => this.is_preview_on_popup,\n            async is_preview_on_popup => {\n                if (is_preview_on_popup) {\n                    this.setPreviewOnPopup(false);\n                }\n            }\n        );\n        this.initInfoPanel();\n    }\n\n    active_tab = 0;\n    active_tab_tutorials = 0;\n    active_tour_step_number = 0;\n    dialog_options = {};\n    faq_search_value = '';\n    getFileArray = [];\n    has_file_loaded = false;\n    has_mobile_preview_loaded = false;\n    active_tour = '';\n    is_dialog_open = false;\n    is_file_supported = false;\n    is_info_panel_visible = false;\n    is_preview_on_popup = false;\n    is_tour_dialog_visible = false;\n    show_toast = false;\n    show_mobile_tour_dialog = false;\n    strategy_save_type = 'unsaved';\n    toast_message = '';\n    is_web_socket_intialised = true;\n\n    get is_dark_mode() {\n        const {\n            app: {\n                core: {\n                    ui: { is_dark_mode_on },\n                },\n            },\n        } = this.root_store;\n        return is_dark_mode_on;\n    }\n\n    setShowMobileTourDialog = (show_mobile_tour_dialog: boolean) => {\n        this.show_mobile_tour_dialog = show_mobile_tour_dialog;\n    };\n\n    setWebSocketState = (is_web_socket_intialised: boolean) => {\n        this.is_web_socket_intialised = is_web_socket_intialised;\n    };\n\n    setOpenSettings = (toast_message: string, show_toast = true) => {\n        this.toast_message = toast_message;\n        this.show_toast = show_toast;\n    };\n\n    setIsFileSupported = (is_file_supported: boolean) => {\n        this.is_file_supported = is_file_supported;\n    };\n\n    initInfoPanel() {\n        if (!localStorage.getItem('dbot_should_show_info')) this.is_info_panel_visible = true;\n    }\n\n    setTourActiveStep = (active_tour_step_number: number) => {\n        this.active_tour_step_number = active_tour_step_number;\n    };\n\n    setPreviewOnDialog = (has_mobile_preview_loaded: boolean) => {\n        this.has_mobile_preview_loaded = has_mobile_preview_loaded;\n        const {\n            load_modal: { onLoadModalClose },\n        } = this.root_store;\n        onLoadModalClose();\n    };\n\n    setStrategySaveType = (strategy_save_type: string) => {\n        this.strategy_save_type = strategy_save_type;\n    };\n\n    setPreviewOnPopup = (is_preview_on_popup: boolean): void => {\n        this.is_preview_on_popup = is_preview_on_popup;\n    };\n\n    setTourDialogVisibility = (is_tour_dialog_visible: boolean): void => {\n        this.is_tour_dialog_visible = is_tour_dialog_visible;\n    };\n\n    setActiveTour = (active_tour: string): void => {\n        this.active_tour = active_tour;\n    };\n\n    setFileLoaded = (has_file_loaded: boolean): void => {\n        this.has_file_loaded = has_file_loaded;\n        clearInjectionDiv('store', document.getElementById('load-strategy__blockly-container'));\n    };\n\n    onCloseDialog = (): void => {\n        this.is_dialog_open = false;\n    };\n\n    setActiveTab = (active_tab: number): void => {\n        this.active_tab = active_tab;\n    };\n\n    setActiveTabTutorial = (active_tab_tutorials: number): void => {\n        this.active_tab_tutorials = active_tab_tutorials;\n    };\n\n    setFAQSearchValue = (faq_search_value: string): void => {\n        this.faq_search_value = faq_search_value;\n    };\n\n    showVideoDialog = (param: { [key: string]: string }): void => {\n        const { url, type } = param;\n        const dialog_type = ['google', 'url'];\n        if (dialog_type.includes(type)) {\n            if (type === 'url') {\n                this.dialog_options = {\n                    url,\n                };\n            }\n            this.is_dialog_open = true;\n        } else {\n            this.is_dialog_open = false;\n        }\n    };\n\n    setInfoPanelVisibility = (is_info_panel_visible: boolean): void => {\n        this.is_info_panel_visible = is_info_panel_visible;\n    };\n\n    onZoomInOutClick = (is_zoom_in: boolean): void => {\n        const workspace = Blockly.mainWorkspace;\n        const metrics = workspace.getMetrics();\n        const addition = is_zoom_in ? 1 : -1;\n\n        workspace.zoom(metrics.viewWidth / 2, metrics.viewHeight / 2, addition);\n    };\n\n    onCloseTour = (): void => {\n        setTourSettings(new Date().getTime(), `${tour_type.key}_token`);\n        this.setActiveTour('');\n    };\n    setTourEnd = (param: TTourType): void => {\n        const { key } = param;\n        if (!isMobile()) this.setTourDialogVisibility(true);\n        setTourSettings(new Date().getTime(), `${key}_token`);\n    };\n\n    onTourEnd = (step: number, is_tour_active: boolean): void => {\n        if (step === 8) {\n            this.onCloseTour();\n            this.setTourEnd(tour_type);\n            this.setActiveTour('');\n        }\n        if (!is_tour_active && step === 3) {\n            this.onCloseTour();\n            this.setTourEnd(tour_type);\n            this.setActiveTour('');\n        }\n    };\n}\n","import crc32 from 'crc-32/crc32';\nimport { action, makeObservable, observable, reaction } from 'mobx';\nimport { DBot } from '@deriv/bot-skeleton';\nimport { cloneObject, isProduction } from '@deriv/shared';\n\nexport default class DataCollectionStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            IS_PENDING: observable,\n            IS_PROCESSED: observable,\n            endpoint: observable,\n            run_id: observable,\n            run_start: observable,\n            should_post_xml: observable,\n            strategy_content: observable,\n            transaction_ids: observable,\n            trackRun: action.bound,\n            trackTransaction: action.bound,\n            setRunId: action.bound,\n            setRunStart: action.bound,\n            setStrategyContent: action.bound,\n            cleanXmlDom: action.bound,\n            getHash: action.bound,\n        });\n        this.root_store = root_store;\n        this.core = core;\n        if (isProduction() || /(.*?)\\.binary.sx$/.test(window.location.hostname)) {\n            this.root_store = root_store;\n\n            reaction(\n                () => this.root_store.run_panel.is_running,\n                () => (this.root_store.run_panel.is_running ? this.trackRun() : undefined)\n            );\n            reaction(\n                () => this.root_store.transactions.transactions,\n                transactions => {\n                    if (this.run_id) this.trackTransaction(transactions);\n                }\n            );\n        }\n    }\n\n    // Constants\n    IS_PENDING = false;\n    IS_PROCESSED = true;\n\n    endpoint = 'https://dbot-conf-dot-deriv-bi-reporting.as.r.appspot.com/dbotconf';\n    run_id = '';\n    run_start = 0;\n    should_post_xml = true;\n    strategy_content = '';\n    transaction_ids = {};\n\n    async trackRun() {\n        const xml_dom = this.cleanXmlDom(Blockly.Xml.workspaceToDom(DBot.workspace, /* opt_noId */ true));\n        const xml_string = Blockly.Xml.domToText(xml_dom);\n        const xml_hash = this.getHash(xml_string);\n\n        if (this.getHash(this.strategy_content) !== xml_hash) {\n            this.should_post_xml = true;\n            this.setStrategyContent(xml_string);\n        }\n\n        this.setRunId(this.getHash(xml_hash + this.core.client.loginid + Math.random()));\n        this.setRunStart(this.core.common.server_time.unix());\n    }\n\n    async trackTransaction(contracts) {\n        const pako = await import(/* webpackChunkName: \"dbot-collection\" */ 'pako');\n        const contract = contracts[0]; // Most recent contract.\n\n        if (!contract) {\n            return;\n        }\n\n        const { buy: transaction_id } = contract.data.transaction_ids;\n        const is_known_transaction = Object.keys(this.transaction_ids).includes(transaction_id.toString());\n\n        if (!is_known_transaction) {\n            this.transaction_ids[transaction_id] = this.IS_PENDING;\n\n            const getPayload = () => {\n                const content = pako.gzip(this.strategy_content);\n                return {\n                    body: content,\n                    headers: {\n                        'Content-Encoding': 'gzip',\n                        'Content-Type': 'application/xml',\n                        Referer: window.location.hostname,\n                    },\n                };\n            };\n\n            fetch(\n                `${this.endpoint}/${this.run_id}/${transaction_id}/${this.run_start}/${this.getHash(\n                    this.strategy_content\n                )}`,\n                {\n                    ...(this.should_post_xml ? getPayload() : {}),\n                    method: 'POST',\n                    mode: 'cors',\n                }\n            )\n                .then(() => {\n                    this.should_post_xml = false;\n                    this.transaction_ids[transaction_id] = this.IS_PROCESSED;\n                })\n                .catch(() => {\n                    delete this.transaction_ids[transaction_id];\n                });\n        }\n    }\n\n    setRunId(run_id) {\n        this.run_id = run_id;\n    }\n\n    setRunStart(timestamp) {\n        this.run_start = timestamp;\n    }\n\n    setStrategyContent(strategy_content) {\n        this.strategy_content = strategy_content;\n    }\n\n    cleanXmlDom = xml_dom => {\n        const useless_attributes = ['x', 'y', 'id'];\n        const updated_dom = cloneObject(xml_dom);\n        const removeAttributesRecursively = element => {\n            useless_attributes.forEach(useless_attribute => element.removeAttribute(useless_attribute));\n            Array.from(element.children).forEach(child => removeAttributesRecursively(child));\n        };\n\n        removeAttributesRecursively(updated_dom);\n        return updated_dom;\n    };\n\n    getHash = string => btoa(crc32.str(string));\n}\n","import { action, makeObservable } from 'mobx';\n\nimport { log_types } from '@deriv/bot-skeleton';\nimport { localize } from '@deriv/translations';\n\nexport default class DownloadStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            onClickDownloadTransaction: action.bound,\n            onClickDownloadJournal: action.bound,\n            getSuccessJournalMessage: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n\n    getSuccessJournalMessage = (message, extra) => {\n        const { profit, sold_for, longcode, transaction_id, current_currency } = extra;\n        switch (message) {\n            case log_types.LOAD_BLOCK: {\n                return localize('Blocks are loaded successfully');\n            }\n            case log_types.NOT_OFFERED: {\n                return localize('Resale of this contract is not offered.');\n            }\n            case log_types.PURCHASE: {\n                return localize('Bought: {{longcode}} (ID: {{transaction_id}})', { longcode, transaction_id });\n            }\n            case log_types.SELL: {\n                return localize('Sold for: {{sold_for}}', { sold_for });\n            }\n            case log_types.PROFIT: {\n                return localize('Profit amount: {{profit}}', { profit });\n            }\n            case log_types.LOST: {\n                return localize('Loss amount: {{profit}}', { profit });\n            }\n            case log_types.WELCOME_BACK: {\n                if (current_currency)\n                    return localize(\n                        'Welcome back! Your messages have been restored. You are using your {{current_currency}} account.',\n                        { current_currency }\n                    );\n                return localize('Welcome back! Your messages have been restored.');\n            }\n            case log_types.WELCOME: {\n                if (current_currency)\n                    return localize('You are using your {{current_currency}} account.', { current_currency });\n                break;\n            }\n            default:\n                return null;\n        }\n    };\n\n    onClickDownloadTransaction = () => {\n        // Transaction Array\n        const transaction_csv_titles = [\n            [\n                localize('Market'),\n                localize('Reference ID (buy)'),\n                localize('Reference ID (sell)'),\n                localize('Barrier'),\n                localize('Start Time'),\n                localize('Entry Spot'),\n                localize('Entry Spot Time'),\n                localize('Exit Spot'),\n                localize('Exit Spot Time'),\n                localize('Buy Price'),\n                localize('Profit/Loss'),\n            ],\n        ];\n        this.root_store.transactions.transactions.forEach(item =>\n            transaction_csv_titles.push([\n                item.data.display_name,\n                item.data.transaction_ids.buy,\n                item.data.transaction_ids.sell,\n                item.data.barrier,\n                item.data.date_start,\n                item.data.entry_tick,\n                item.data.entry_tick_time,\n                item.data.exit_tick,\n                item.data.exit_tick_time,\n                item.data.buy_price,\n                item.data.profit,\n            ])\n        );\n\n        // Push Transaction array to CSV\n        const transaction_csv_content = `data:text/csv;charset=utf-8, ${transaction_csv_titles\n            .map(e => e.join(','))\n            .join('\\n')}`;\n        const transaction_encoded_uri = encodeURI(transaction_csv_content);\n        const transaction_link = document.createElement('a');\n        transaction_link.setAttribute('href', transaction_encoded_uri);\n        transaction_link.setAttribute('download', localize('Transactions.csv'));\n        document.body.appendChild(transaction_link);\n\n        transaction_link.click();\n\n        transaction_link.parentNode.removeChild(transaction_link);\n    };\n\n    onClickDownloadJournal = () => {\n        // Journal Array\n        const journal_csv_titles = [[localize('Date'), localize('Time'), localize('Message')]];\n\n        const journal_messages = this.root_store.journal.filtered_messages;\n\n        journal_messages.map(item => {\n            let array_message;\n            if (item.message_type !== 'success') {\n                array_message = JSON.stringify(item.message);\n            } else {\n                array_message = this.getSuccessJournalMessage(item.message.toString(), item.extra);\n            }\n            const arr = [item.date, item.time, array_message?.replace('&#x2F;', '/')];\n            journal_csv_titles.push(arr);\n        });\n\n        // Push Journal array to CSV\n        const journal_csv_content = `data:text/csv;charset=utf-8, ${journal_csv_titles\n            .map(e => e.join(','))\n            .join('\\n')}`;\n        const journal_encoded_uri = encodeURI(journal_csv_content);\n        const journal_link = document.createElement('a');\n        journal_link.setAttribute('href', journal_encoded_uri);\n        journal_link.setAttribute('download', localize('Journal.csv'));\n        document.body.appendChild(journal_link);\n\n        journal_link.click();\n\n        journal_link.parentNode.removeChild(journal_link);\n    };\n}\n","export const help_content_types = {\n    TEXT: 'text',\n    VIDEO: 'video',\n    IMAGE: 'image',\n    BLOCK: 'block',\n    EXAMPLE: 'example',\n};\n\nconst { TEXT, IMAGE, BLOCK, EXAMPLE } = help_content_types;\n\nexport const help_content_config = public_path => {\n    __webpack_public_path__ = public_path; // eslint-disable-line no-global-assign\n    return {\n        //= ================= Functions ==================\n        procedures_ifreturn: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'if-return' },\n        ],\n        //= ================= Math ==================\n        math_arithmetic: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        math_single: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        math_constrain: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'constrain' },\n        ],\n        // math_number: [\n        //     { type: VIDEO, url: 'https://www.youtube.com/embed/Bb0HnaYNUx4' },\n        //     { type: TEXT },\n        //     { type: IMAGE, url: 'https://d2.alternativeto.net/dist/s/scratch_830736_full.png?format=jpg&width=1600&height=1600&mode=min&upscale=false' },\n        //     { type: VIDEO, url: 'https://www.youtube.com/embed/mi18spqE7R4?controls=0' },\n        //     { type: BLOCK },\n        //     { type: TEXT },\n        //     { type: IMAGE, url: 'https://d2.alternativeto.net/dist/s/scratch_830736_full.png?format=jpg&width=1600&height=1600&mode=min&upscale=false' },\n        // ],\n        //= ================= Text ==================\n        text_print: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        text_prompt_ext: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        //= ================= Tick analysis ==================\n        tick_analysis: [{ type: TEXT }, { type: BLOCK }],\n        read_details: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        last_digit: [{ type: TEXT }, { type: BLOCK }],\n        read_ohlc: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'in_candle_list_read' },\n        ],\n        read_ohlc_obj: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'read_candle_value' },\n        ],\n        check_direction: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: TEXT }, { type: TEXT }],\n        get_ohlc: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'get_candle' },\n            { type: TEXT },\n        ],\n        ohlc: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'candle_list_1' }],\n        ohlc_values: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'candle_list' }],\n        is_candle_black: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/is_candle_black.jpeg` },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/is_candle_black_1.jpeg` },\n            { type: TEXT },\n        ],\n        ohlc_values_in_list: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'candle_list_1' },\n        ],\n        //= ================= Variables ==================\n        variables_gets: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        variables_set: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/create_variable.jpg` },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/set_variable.png` },\n        ],\n        // =============== Time blocks ============\n        epoch: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'epoch' },\n        ],\n        todatetime: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'todatetime' },\n            { type: TEXT },\n        ],\n        totimestamp: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'totimestamp' },\n            { type: TEXT },\n        ],\n        // =============== Notifications blocks ============\n        notify_telegram: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'notify_telegram' },\n        ],\n        // =============== Misc blocks ============\n        console: [{ type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }],\n        balance: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        // =============== Indicators blocks ============\n        sma_statement: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: IMAGE, width: '60%', url: `${__webpack_public_path__}media/sma_formula.png` },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/sma_chart_1.png` },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/sma_chart_2.png` },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sma_block_example' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sma_block_example_1' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sma_array' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '100%', url: `${__webpack_public_path__}media/sma_array_explanation.jpeg` },\n        ],\n        // =============== Root blocks ============\n        trade_definition: [\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n            { type: BLOCK },\n        ],\n        trade_definition_tradeoptions: [{ type: TEXT }, { type: BLOCK }],\n        trade_definition_multiplier: [{ type: TEXT }, { type: TEXT }, { type: TEXT }, { type: TEXT }],\n        before_purchase: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        during_purchase: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sell_available' },\n        ],\n        sell_at_market: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'sell_available' },\n        ],\n        after_purchase: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }],\n        trade_again: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'trade_again' }],\n        // =============== Contract ============\n        contract_check_result: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'check_result' },\n        ],\n        sell_price: [{ type: TEXT }, { type: BLOCK }, { type: TEXT }, { type: EXAMPLE, example_id: 'sell_pl' }],\n        // =============== Logic ============\n        controls_if: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'controls_if' },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'compare_logic' },\n            { type: EXAMPLE, example_id: 'compare_logic_1' },\n        ],\n        logic_operation: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: IMAGE, width: '40%', url: `${__webpack_public_path__}media/logic.png` },\n        ],\n        // =============== Loops ============\n        controls_whileUntil: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'repeat_while' },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'repeat_until' },\n        ],\n        controls_for: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'controls_for' },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        controls_forEach: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'controls_forEach' },\n            { type: TEXT },\n            { type: TEXT },\n            { type: TEXT },\n        ],\n        controls_flow_statements: [\n            { type: TEXT },\n            { type: BLOCK },\n            { type: TEXT },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'break_out' },\n            { type: TEXT },\n            { type: EXAMPLE, example_id: 'continue' },\n        ],\n    };\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is mandatory. Here is where you can decide if your bot should continue trading. Only one copy of this block is allowed.'\n        ),\n        localize(\n            'This block is commonly used to adjust the parameters of your next trade and to implement stop loss/take profit logic.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block returns current account balance.'),\n        localize(\n            'The only input parameter determines how block output is going to be formatted. In case if the input parameter is \"string\" then the account currency will be added.'\n        ),\n        localize('Example output of the below example will be:'),\n        localize('1. for \"string\": 1325.68 USD'),\n        localize('2. for \"number\": 1325.68'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is mandatory. Only one copy of this block is allowed. It is added to the canvas by default when you open Deriv Bot.'\n        ),\n        localize(\n            'After defining trade parameters and trade options, you may want to instruct your bot to purchase contracts when specific conditions are met. To do that you can use conditional blocks and indicators blocks to help your bot to make decisions.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is used to determine if the market price moves in the selected direction or not. It gives you a value of \"True\" or \"False\".'\n        ),\n        localize('Examples:'),\n        localize(\n            '1. If the selected direction is \"Rise\", and the previous tick value is less than the current tick value, the output will be \"True\". Otherwise, the output will be an empty string.'\n        ),\n        localize(\n            '2. If the selected direction is \"Fall\", and the previous tick value is more than the current tick value, the output will be \"True\". Otherwise, the output will be an empty string.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block displays messages in the developer’s console with an input that can be either a string of text, a number, boolean, or an array of data.'\n        ),\n        localize('There are 4 message types:'),\n        localize(\"1. 'Log' displays a regular message.\"),\n        localize(\"2. 'Warn' displays a message in yellow to highlight something that needs attention.\"),\n        localize(\"3. 'Error' displays a message in red to highlight something that needs to be resolved immediately.\"),\n        localize(\"4. 'Table' takes an array of data, such as a list of candles, and displays it in a table format.\"),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'You can check the result of the last trade with this block. It can only be placed within the \"Restart trading conditions\" root block.'\n        ),\n        localize(\n            'If \"Win\" is selected, it will return \"True\" if your last trade was successful. Otherwise, it will return an empty string.'\n        ),\n        localize(\n            'If \"Loss\" is selected, it will return \"True\" if your last trade was unsuccessful. Otherwise, it will return an empty string.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.'\n        ),\n        localize('Examples:'),\n        localize(\n            '1. In the below example the loop is terminated in case \"x\" is \"False\" even though only one iteration is complete'\n        ),\n        localize(\n            '2. In the below example the loop jumps to the next iteration without executing below block in case if \"x\" is \"False\"'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n        ),\n        localize('Example:'),\n        localize(\n            '\"i\" starts with the value of 1, and it will be increased by 2 at every iteration. The loop will repeat until \"i\" reaches the value of 12, and then the loop is terminated.'\n        ),\n        localize('You can use \"i\" inside the loop, for example to access list items'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block uses the variable \"i\" to control the iterations. With each iteration, the value of \"i\" is determined by the items in a given list.'\n        ),\n        localize('Example:'),\n        localize(\n            'In this example, the loop will repeat three times, as that is the number of items in the given list. During each iteration, the variable \"i\" will be assigned a value from the list. '\n        ),\n        localize('Please note that changing the value of \"i\" won\\'t change the value of the original item in the list'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block evaluates a statement and will perform an action only when the statement is true.'),\n        localize('Click the plus icon to extend the functionality of this block.'),\n        localize('You can also use \"Compare\" and \"Logic operation\" blocks to make test variables.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block repeats instructions as long as a given condition is true.'),\n        localize('Examples:'),\n        localize(\n            '1. In the example below, the instructions are repeated as long as the value of x is less than or equal to 10. Once the value of x exceeds 10, the loop is terminated.'\n        ),\n        localize(\n            '2. In this example, the instructions are repeated as long as the value of x is greater than or equal to 10. Once the value of x drops below 10, the loop is terminated.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('\"Seconds Since Epoch\" block returns the number of seconds since January 1st, 1970.'),\n        localize('Example:'),\n        localize('1551661986 seconds since Jan 01 1970 (UTC) translates to 03/04/2019 @ 1:13am (UTC).'),\n        localize('You might need it when you want to repeat an actions after certain amount of time.'),\n        localize('The example below restarts trading after 30 or more seconds after 1 minute candle was started.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block gives you a specific candle from within the selected time interval.'),\n        localize('In this example, the open price of a candle is assigned to the variable \"candle_open_price\".'),\n        localize(\n            'In the above example it is assumed that variable candle_open_price is processed somewhere within other blocks.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block returns \"True\" if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.'\n        ),\n        localize(\n            'The term \"candle\" refers to each bar on the candlestick chart. Each candle represents four market prices for the selected time interval:'\n        ),\n        localize('Each candlestick on the chart represents 4 market prices for the selected time interval:'),\n        localize('- Open price: the opening price'),\n        localize('- High price: the highest price'),\n        localize('- Low price: the lowest price'),\n        localize('- Close price: the closing price'),\n        localize(\n            'A black (or red) candle indicates that the open price is higher than the close price. This represents a downward movement of the market price.'\n        ),\n        localize(\n            'A white (or green) candle indicates that the open price is lower than the close price. This represents an upward movement of the market price.'\n        ),\n        localize('The time interval for each candle can be set from one minute to one day.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the last digit of the latest tick value of the selected market. If the latest tick value is 1410.90, this block will return 0. It’s useful for digit-based contracts such as Even/Odd, Matches/Differs, or Higher/Lower.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block performs the \"AND\" or the \"OR\" logic operation with the given values.'),\n        localize(\n            'In case if the \"AND\" operation is selected, the block returns \"True\" only if both given values are \"True\"'\n        ),\n        localize(\n            'In case if the \"OR\" operation is selected, the block returns \"True\" in case if one or both given values are \"True\"'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block performs arithmetic operations between two numbers.'),\n        localize('Available operations:'),\n        localize('- Addition'),\n        localize('- Subtraction'),\n        localize('- Multiplication'),\n        localize('- Division'),\n        localize('- Raise the first number to the power of the second number'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block constrains a given number within a set range.'),\n        localize(\n            'In case if the given number is less than the lower boundary of the range, the block returns the lower boundary value. Similarly, if the given number is greater than the higher boundary, the block will return the higher boundary value. In case if the given value is between boundaries, the block will return the given value unchanged.'\n        ),\n        localize(\n            'In the below example the block returns the value of 10 as the given value (5) is less than the lower boundary (10)'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block performs the following operations to a given number'),\n        localize('Available operations are:'),\n        localize('- Square root'),\n        localize('- Absolute'),\n        localize('- Negation'),\n        localize('- Natural log'),\n        localize('- Euler’s number (2.71) to the power of a given number'),\n        localize('- 10 to the power of a given number'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block sends a message to a Telegram channel. You will need to create your own Telegram bot to use this block.'\n        ),\n        localize('Here’s how:'),\n        localize(\n            '1. Create a Telegram bot and get your Telegram API token. Read more on how to create bots in Telegram here: https://core.telegram.org/bots#6-botfather'\n        ),\n        localize(\n            '2. Start a chat with your newly created Telegram bot and make sure to send it some messages before proceeding to the next step. (e.g. Hello Bot!)'\n        ),\n        localize(\n            '3. Get the chat ID using the Telegram REST API (read more: https://core.telegram.org/bots/api#getupdates)'\n        ),\n        localize(\n            '- Visit the following URL, make sure to replace <access_token> with the Telegram API token you created in Step 1: https://api.telegram.org/bot<access_token>/getUpdates'\n        ),\n        localize('- Find the chat ID property in the response, and copy the value of the id property'),\n        localize(\n            '4. Come back to Deriv Bot and add the Notify Telegram block to the workspace. Paste the Telegram API token and chat ID into the block fields accordingly.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block gives you a list of candles within a selected time interval.'),\n        localize(\n            'In this example, this block is used with another block to get the open prices from a list of candles. The open prices are then assigned to the variable called \"cl\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the selected candle value from a list of candles within the selected time interval. You can choose from open price, close price, high price, low price, and open time.'\n        ),\n        localize(\n            'In this example, the open prices from a list of candles are assigned to a variable called \"candle_list\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the selected candle value from a list of candles. You can choose from open price, close price, high price, low price, and open time.'\n        ),\n        localize('This block requires a list of candles as an input parameter.'),\n        localize('In this example, the open prices from a list of candles are assigned to a variable called \"cl\".'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('Used within a function block, this block returns a value when a specific condition is true.'),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('This block gives you information about your last contract.'),\n        localize('You can choose to see one of the following:'),\n        localize('- Deal reference ID: the reference ID of the contract'),\n        localize('- Purchase price: the purchase price (stake) of the contract'),\n        localize('- Payout: the payout of the contract'),\n        localize('- Profit: the profit you’ve earned'),\n        localize('- Contract type: the name of the contract type such as Rise, Fall, Touch, No Touch, etс.'),\n        localize('- Entry time: the starting time of the contract'),\n        localize('- Entry value: the value of the first tick of the contract'),\n        localize('- Exit time: the contract expiration time'),\n        localize('- Exit value: the value of the last tick of the contract'),\n        localize(\n            '- Barrier: the barrier value of the contract (applicable to barrier-based trade types such as stays in/out, touch/no touch, etc.)'\n        ),\n        localize('- Result: the result of the last contract: \"win\" or \"loss\"'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the specified candle value for a selected time interval. You can choose which value you want:'\n        ),\n        localize('- Open: the opening price'),\n        localize('- High: the highest price'),\n        localize('- Low: the lowest price'),\n        localize('- Close: the closing price'),\n        localize('- Open time: the opening time stamp'),\n        localize(\n            'In the example below, the opening price is selected, which is then assigned to a variable called \"op\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the selected candle value such as open price, close price, high price, low price, and open time. It requires a candle as an input parameter.'\n        ),\n        localize('In the example below, the open price is assigned to the variable \"op\".'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'Use this block to sell your contract at the market price. Selling your contract is optional. You may choose to sell if the market trend is unfavourable.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block gives you the potential profit or loss if you decide to sell your contract. It can only be used within the \"Sell conditions\" root block.'\n        ),\n        localize(\n            'In the example below, the contract will only be sold if the potential profit or loss is more than the stake.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'SMA adds the market price in a list of ticks or candles for a number of time periods, and divides the sum by that number of time periods.'\n        ),\n        localize('The formula for SMA is:'),\n        localize('where n is the number of periods.'),\n        '',\n        localize('What SMA tells you'),\n        localize(\n            'SMA serves as an indicator of the trend. If the SMA points up then the market price is increasing and vice versa. The larger the period number, the smoother SMA line is.'\n        ),\n        localize(\n            'In this example, each point of the SMA line is an arithmetic average of close prices for the last 10 days.'\n        ),\n        localize(\n            'In this example, each point of the SMA line is an arithmetic average of close prices for the last 50 days.'\n        ),\n        '',\n        localize('How to use the SMA block'),\n        localize('Input list accepts a list of ticks or candles, while period is the specified time period.'),\n        localize('Example:'),\n        localize('This will display the SMA for the specified period, using a candle list.'),\n        localize('SMA places equal weight to the entire distribution of values.'),\n        localize('This is the same as the above example, using a tick list.'),\n        localize(\n            'You may compare SMA values calculated on every bot run to identify the market trend direction. Alternatively, you may also use a variation of the SMA block, the Simple Moving Average Array block. '\n        ),\n        localize('This block returns the entire SMA line, containing a list of all values for a given period.'),\n        localize(\n            'If a period of 10 is entered, the Simple Moving Average Array block will return a list of SMA values calculated based on period of 10.'\n        ),\n        localize('The below image illustrates how Simple Moving Average Array block works:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block displays a dialog box with a customised message. When the dialog box is displayed, your strategy is paused and will only resume after you click \"OK\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block displays a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number and can be assigned to a variable. When the dialog box is displayed, your strategy is paused and will only resume after you enter a response and click \"OK\".'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'Any blocks placed within this block will be executed at every tick. If the default candle interval is set to 1 minute in the Trade Parameters root block, the instructions in this block will be executed once every minute. Place this block outside of any root block.'\n        ),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block converts the number of seconds since the Unix Epoch to a date and time format such as 2019-08-01 00:00:00.'\n        ),\n        localize('Example:'),\n        localize('In this example, the date and time will be displayed in a green notification box.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block converts the date and time to the number of seconds since the Unix Epoch (1970-01-01 00:00:00).'\n        ),\n        localize('Example:'),\n        localize('In this example, a Rise contract will be purchased at midnight on 1 August 2019.'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract without manually stopping and restarting your bot.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            \"This block is mandatory. It's added to your strategy by default when you create new strategy. You can not add more than one copy of this block to the canvas.\"\n        ),\n        localize('1. Market'),\n        localize('Select your desired market and asset type. For example, Forex > Major pairs > AUD/JPY'),\n        localize('2. Trade Type'),\n        localize('Select your desired trade type. For example, Up/Down > Rise/Fall'),\n        localize('3. Contract Type'),\n        localize(\n            'Choose what type of contract you want to trade. For example, for the Rise/Fall trade type you can choose one of three options: Rise, Fall, or Both. Selected option will determine available options for the Purchase block.'\n        ),\n        localize('4. Default Candle Interval'),\n        localize('Sets the default time interval for blocks that read list of candles.'),\n        localize('5. Restart buy/sell on error'),\n        localize('Restarts the bot when an error is encountered.'),\n        localize('6. Restart last trade on error'),\n        localize('Repeats the previous trade when an error is encountered.'),\n        localize('7. Run Once at Start'),\n        localize('Place blocks here to perform tasks once when your bot starts running.'),\n        localize('8. Trade Options'),\n        localize('The desired duration, stake, prediction, and/or barrier(s) for the contract is defined here.'),\n    ],\n};\n","import React from 'react';\nimport { StaticUrl } from '@deriv/components';\nimport { Localize, localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize('Use this block when you want to use multipliers as your trade type.'),\n        localize('Click the multiplier drop-down menu and choose the multiplier value you want to trade with.'),\n        localize('Your potential profit will be multiplied by the multiplier value you’ve chosen.'),\n        <Localize\n            key={0}\n            i18n_default_text='To learn more about multipliers, please go to the <0>Multipliers</0> page.'\n            components={[<StaticUrl key={0} className='link' href='trade-types/multiplier' />]}\n        />,\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\n            'This block is used to define trade options within the Trade parameters root block. Some options are only applicable for certain trade types. Parameters such as duration and stake are common among most trade types. Prediction is used for trade types such as Digits, while barrier offsets are for trade types that involve barriers such as Touch/No Touch, Ends In/Out, etc.'\n        ),\n        localize('Example:'),\n    ],\n};\n","import { localize } from '@deriv/translations';\n\nexport default {\n    text: [\n        localize(\"This block assigns a given value to a variable, creating the variable if it doesn't already exist.\"),\n        localize(\n            'A variable is among the most important and powerful components in creating a bot. It is a way to store information, either as text or numbers. The information stored as a variable can be used and changed according to the given instructions. Variables can be given any name, but usually they are given useful, symbolic names so that it is easier to call them during the execution of instructions.'\n        ),\n        localize('Creating a variable'),\n        localize('1. From the block library, enter a name for the new variable and click Create.'),\n        localize('2. The new variable will appear as a block under Set variable.'),\n    ],\n};\n","import { action, makeObservable, observable, runInAction } from 'mobx';\nimport { config } from '@deriv/bot-skeleton';\nimport { help_content_config } from 'Utils/help-content/help-content.config';\nimport * as help_strings from 'Utils/help-content/help-strings';\n\nexport default class FlyoutHelpStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            block_node: observable,\n            block_type: observable,\n            examples: observable,\n            help_string: observable,\n            title: observable,\n            should_next_disable: observable,\n            should_previous_disable: observable,\n            active_helper: observable,\n            setHelpContent: action.bound,\n            setActiveHelper: action.bound,\n            onBackClick: action.bound,\n            onSequenceClick: action.bound,\n            initFlyoutHelp: action.bound,\n            updateSequenceButtons: action.bound,\n            setExamples: action.bound,\n            getHelpContent: action.bound,\n            getFilledBlocksIndex: action.bound,\n            getNextHelpContentIndex: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n\n    options = {\n        css: false,\n        media: `${__webpack_public_path__}media/`,\n        move: { scrollbars: false, drag: true, wheel: false },\n        zoom: { startScale: config.workspaces.flyoutWorkspacesStartScale },\n        sounds: false,\n    };\n\n    block_node = null;\n    block_type = '';\n    examples = [];\n    help_string = {};\n    title = '';\n    should_next_disable = false;\n    should_previous_disable = false;\n    active_helper = '';\n\n    setHelpContent = async block_node => {\n        const block_type = block_node.getAttribute('type');\n        const title = Blockly.Blocks[block_type].meta().display_name;\n        if (block_type !== '') {\n            this.active_helper = block_type;\n        }\n\n        const { flyout } = this.root_store;\n        this.setExamples(block_type);\n        const example_blocks = this.examples.map(example => example.childNodes[0]);\n        setTimeout(() => flyout.setFlyoutWidth([block_node, ...example_blocks]), 50);\n\n        runInAction(() => {\n            flyout.is_help_content = true;\n            this.block_node = block_node;\n            this.block_type = block_type;\n            this.title = title;\n            this.help_string = help_strings[block_type];\n        });\n\n        if (!flyout.is_search_flyout) {\n            this.updateSequenceButtons();\n        }\n    };\n\n    getHelpContent = async block_node => {\n        let block_content;\n\n        if (block_node) {\n            const target_blocks = this.xml_list_group[block_node];\n            const block_type = target_blocks[0].getAttribute('type');\n            block_content = help_strings[block_type];\n        }\n        return block_content;\n    };\n\n    getFilledBlocksIndex = async blocks_type => {\n        const blocks_content = await Promise.all(blocks_type.map(block => this.getHelpContent(block)));\n        return blocks_content.map((key, index) => (key ? index : null)).filter(value => value !== null);\n    };\n\n    getNextHelpContentIndex = async is_last => {\n        const filled_blocks_index = await this.getFilledBlocksIndex(Object.keys(this.xml_list_group));\n        return is_last ? filled_blocks_index[filled_blocks_index.length - 1] : filled_blocks_index[0];\n    };\n\n    setActiveHelper(active_helper) {\n        this.active_helper = active_helper;\n    }\n\n    onBackClick() {\n        const { toolbox, flyout } = this.root_store;\n\n        if (flyout.is_search_flyout) {\n            const search = document.getElementsByName('search')[0].value;\n            toolbox.onSearch({ search });\n        } else {\n            flyout.refreshCategory();\n        }\n    }\n\n    async onSequenceClick(should_go_next) {\n        const current_block = Array.from(this.xml_list).find(xml => xml.getAttribute('type') === this.block_type);\n\n        let current_block_index;\n\n        Object.keys(this.xml_list_group).forEach((key, index) => {\n            if (current_block.getAttribute('type') === key) {\n                current_block_index = index;\n            }\n        });\n\n        const getNextBlock = async (xml, current_index, is_next) => {\n            const next_index = current_index + (is_next ? 1 : -1);\n            const next_blocks_type = Object.keys(xml).filter((key, index) =>\n                is_next ? next_index <= index : next_index >= index\n            );\n            const next_filled_block = await this.getFilledBlocksIndex(next_blocks_type);\n\n            const next_filled_block_index = is_next\n                ? next_filled_block[0]\n                : next_filled_block[next_filled_block.length - 1];\n            const next_block_type = next_blocks_type[next_filled_block_index];\n\n            if (!next_block_type) {\n                return false;\n            }\n\n            try {\n                await import(/* webpackChunkName: `[request]` */ '@deriv/bot-skeleton');\n                return next_block_type;\n            } catch (e) {\n                return getNextBlock(xml, next_index, is_next);\n            }\n        };\n\n        const block_type = await getNextBlock(this.xml_list_group, current_block_index, should_go_next);\n        if (block_type) {\n            const target_blocks = this.xml_list_group[block_type];\n            this.setHelpContent(target_blocks[0]);\n        }\n    }\n\n    initFlyoutHelp(block_node) {\n        const { flyout, toolbox } = this.root_store;\n        this.xml_list = toolbox.getCategoryContents(flyout.selected_category);\n        this.xml_list_group = this.groupBy(this.xml_list, true);\n\n        this.setHelpContent(block_node);\n    }\n\n    async updateSequenceButtons() {\n        const current_block = Array.from(this.xml_list).find(xml => xml.getAttribute('type') === this.block_type);\n        const current_index = Object.keys(this.xml_list_group).findIndex(\n            key => current_block.getAttribute('type') === key\n        );\n\n        const last_filled_content_index = await this.getNextHelpContentIndex(true);\n        const first_filled_content_index = await this.getNextHelpContentIndex(false);\n\n        runInAction(() => {\n            this.should_previous_disable = current_index === 0 || current_index === first_filled_content_index;\n            this.should_next_disable =\n                current_index === Object.keys(this.xml_list_group).length - 1 ||\n                current_index === last_filled_content_index;\n        });\n    }\n\n    // eslint-disable-next-line\n    groupBy(nodes, should_include_block_only = false) {\n        return Array.from(nodes).reduce((block_group, node) => {\n            const type = node.getAttribute('type');\n\n            if (should_include_block_only && type === null) {\n                return block_group;\n            }\n\n            if (!block_group[type]) {\n                block_group[type] = [];\n            }\n\n            if (!should_include_block_only || (should_include_block_only && type !== null)) {\n                block_group[type].push(node);\n            }\n\n            return block_group;\n        }, {});\n    }\n\n    setExamples(block_type) {\n        const { toolbox } = this.root_store;\n        const all_examples = [...toolbox.toolbox_examples.childNodes];\n        const help_content = help_content_config(__webpack_public_path__)[block_type];\n        const examples_ids = help_content.filter(el => el.type === 'example').map(example => example.example_id);\n        const examples = examples_ids.map(id => all_examples.find(example => example.id === id));\n\n        this.examples = examples;\n    }\n}\n","import { reaction } from 'mobx';\n\nconst GTM = (() => {\n    let root_store;\n\n    const getLoginId = () => {\n        return root_store.core.client.loginid;\n    };\n\n    const getServerTime = () => {\n        return root_store?.core?.server_time?.unix() || Date.now();\n    };\n\n    const pushDataLayer = data => {\n        return root_store?.core?.gtm?.pushDataLayer(data);\n    };\n\n    const init = _root_store => {\n        try {\n            root_store = _root_store;\n\n            const { run_panel, transactions } = root_store;\n            const run_statistics = run_panel.statistics;\n\n            reaction(\n                () => run_panel.is_running,\n                () => run_panel.is_running && onRunBot(run_statistics)\n            );\n\n            reaction(\n                () => transactions.contracts,\n                () => onTransactionClosed(transactions.contracts)\n            );\n        } catch (error) {\n            console.warn('Error initializing GTM reactions ', error); // eslint-disable-line no-console\n        }\n    };\n\n    const onRunBot = statistics => {\n        try {\n            const run_id = `${getLoginId()}-${getServerTime()}`;\n            const counters = `tr:${statistics.number_of_runs},\\\n                ts:${statistics.total_stake},\\\n                py:${statistics.total_payout},\\\n                lc:${statistics.lost_contracts},\\\n                wc:${statistics.won_contracts},\\\n                pr:${statistics.total_profit}`;\n\n            const data = {\n                counters: counters.replace(/\\s/g, ''),\n                event: 'dbot_run',\n                run_id,\n            };\n            pushDataLayer(data);\n        } catch (error) {\n            console.warn('Error pushing run data to datalayer', error); // eslint-disable-line no-console\n        }\n    };\n\n    const onTransactionClosed = contracts => {\n        try {\n            const contract = contracts.length > 0 && contracts[0];\n            if (contract && contract.is_completed) {\n                const data = {\n                    event: 'dbot_run_transaction',\n                    reference_id: contract.refrence_id,\n                };\n                pushDataLayer(data);\n            }\n        } catch (error) {\n            console.warn('Error pushing transaction to datalayer', error); // eslint-disable-line no-console\n        }\n    };\n\n    return {\n        init,\n        pushDataLayer,\n    };\n})();\n\nexport default GTM;\n","/* eslint-disable no-underscore-dangle */\nimport { action, computed, makeObservable, observable } from 'mobx';\nimport { config } from '@deriv/bot-skeleton';\nimport GTM from 'Utils/gtm';\n\nexport default class FlyoutStore {\n    block_listeners = [];\n    block_workspaces = [];\n    flyout_min_width = 440;\n    options = {\n        css: false,\n        media: `${__webpack_public_path__}media/`,\n        move: { scrollbars: false, drag: true, wheel: false },\n        zoom: { startScale: config.workspaces.flyoutWorkspacesStartScale },\n        sounds: false,\n    };\n\n    is_help_content = false;\n    flyout_content = [];\n    flyout_width = this.flyout_min_width;\n    is_visible = false;\n    is_search_flyout = false;\n    is_loading = false;\n    search_term = '';\n    selected_category = null;\n\n    constructor(root_store) {\n        makeObservable(this, {\n            is_help_content: observable,\n            flyout_content: observable,\n            flyout_width: observable,\n            is_visible: observable,\n            is_search_flyout: observable,\n            is_loading: observable,\n            search_term: observable,\n            selected_category: observable,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            initFlyout: action.bound,\n            initBlockWorkspace: action.bound,\n            getFlyout: action.bound,\n            setContents: action.bound,\n            setFlyoutWidth: action.bound,\n            setVisibility: action.bound,\n            setIsSearchFlyout: action.bound,\n            setSelectedCategory: action.bound,\n            getSelectedCategory: action.bound,\n            onClickOutsideFlyout: action.bound,\n            refreshCategory: action.bound,\n            variables_blocks_count: computed,\n            first_get_variable_block_index: computed,\n        });\n\n        this.root_store = root_store;\n    }\n\n    onMount() {\n        this.initFlyout();\n        window.addEventListener('click', this.onClickOutsideFlyout);\n    }\n\n    onUnmount() {\n        window.removeEventListener('click', this.onClickOutsideFlyout);\n    }\n\n    initFlyout() {\n        const workspace = Blockly.derivWorkspace;\n        const options = {\n            parentWorkspace: workspace,\n            RTL: workspace.RTL,\n            horizontalLayout: workspace.horizontalLayout,\n        };\n\n        if (workspace.horizontalLayout) {\n            this.flyout = new Blockly.HorizontalFlyout(options);\n        } else {\n            this.flyout = new Blockly.VerticalFlyout(options);\n        }\n\n        this.flyout.targetWorkspace_ = workspace;\n        this.flyout.workspace_.targetWorkspace = workspace;\n\n        // A flyout connected to a workspace doesn't have its own current gesture.\n        this.flyout.workspace_.getGesture = this.flyout.targetWorkspace_.getGesture.bind(this.flyout.targetWorkspace_);\n\n        // Get variables from the main workspace rather than the target workspace.\n        workspace.variableMap_ = this.flyout.targetWorkspace_.getVariableMap();\n\n        this.flyout.workspace_.createPotentialVariableMap();\n\n        workspace.flyout_ = this.flyout;\n    }\n\n    /**\n     * Intialises a workspace unique to the passed block_node\n     * @param {Element} el_block_workspace Element where Blockly.Workspace will be mounted on\n     * @param {Element} block_node DOM of a Blockly.Block\n     * @memberof FlyoutStore\n     */\n    initBlockWorkspace(el_block_workspace, block_node) {\n        const workspace = Blockly.inject(el_block_workspace, this.options);\n\n        workspace.isFlyout = true;\n        workspace.targetWorkspace = Blockly.derivWorkspace;\n\n        const block = Blockly.Xml.domToBlock(block_node, workspace);\n        // Using block.getHeightWidth() here because getDimentions() also calls Blockly.Xml.domToBlock\n        const block_hw = block.getHeightWidth();\n\n        block.isInFlyout = true;\n\n        // Update block workspace widths to accommodate block widths.\n        // addind 1px to highet and then moving the block 1px down to make block top border visible\n        el_block_workspace.style.height = `${Math.ceil(block_hw.height * this.options.zoom.startScale) + 1}px`;\n        el_block_workspace.style.width = `${Math.ceil(block_hw.width * this.options.zoom.startScale) + 1}px`;\n        block.moveBy(1, 1);\n\n        // Use original Blockly flyout functionality to create block on drag.\n        const block_svg_root = block.getSvgRoot();\n\n        this.block_listeners.push(\n            Blockly.bindEventWithChecks_(block_svg_root, 'mousedown', null, event => {\n                GTM.pushDataLayer({\n                    event: 'dbot_drag_block',\n                    block_type: block.type,\n                });\n                this.flyout.blockMouseDown_(block)(event);\n            }),\n            Blockly.bindEvent_(block_svg_root, 'mouseout', block, block.removeSelect),\n            Blockly.bindEvent_(block_svg_root, 'mouseover', block, block.addSelect)\n        );\n\n        this.block_workspaces.push(workspace);\n        Blockly.svgResize(workspace);\n    }\n\n    getFlyout() {\n        return this.flyout;\n    }\n\n    /**\n     * Parses XML contents passed by Blockly.Toolbox. Supports all default\n     * Blockly.Flyout elements i.e. <block>, <label>, <button> in their\n     * original format, e.g. <label text=\"Hello World\" />\n     * @param {Element[]} xml_list list of XML nodes\n     * @memberof FlyoutStore\n     */\n    setContents(xml_list, search_term = '') {\n        const text_limit = 20;\n        const processed_xml = xml_list;\n\n        this.block_listeners.forEach(listener => Blockly.unbindEvent_(listener));\n        this.block_workspaces.forEach(workspace => workspace.dispose());\n        this.block_listeners = [];\n        this.block_workspaces = [];\n\n        this.is_help_content = false;\n        this.search_term = search_term.length > text_limit ? `${search_term.substring(0, text_limit)}...` : search_term;\n        this.flyout_content = xml_list;\n\n        this.setFlyoutWidth(processed_xml);\n        this.setVisibility(true);\n\n        // apparently setFlyoutWidth doesn't calculate blocks dimentions until they're visible\n        // using setTimeout is a workaround to solve this issue\n        setTimeout(() => this.setFlyoutWidth(processed_xml), 50);\n    }\n\n    /**\n     * Walks through xmlList and finds width of the longest block while setting\n     * height and width (in workspace pixels) attributes on each of the block nodes.\n     * @param {Element[]} xmlList\n     * @memberof FlyoutStore\n     */\n    setFlyoutWidth(xmlList) {\n        let longest_block_width = 0;\n\n        xmlList.forEach(node => {\n            const tag_name = node.tagName.toUpperCase();\n\n            if (tag_name === Blockly.Xml.NODE_BLOCK) {\n                const block_hw = Blockly.Block.getDimensions(node);\n\n                node.setAttribute('width', Math.ceil(block_hw.width * this.options.zoom.startScale));\n                node.setAttribute('height', Math.ceil(block_hw.height * this.options.zoom.startScale));\n                longest_block_width = Math.max(\n                    longest_block_width,\n                    Math.ceil(block_hw.width * this.options.zoom.startScale)\n                );\n            }\n        });\n\n        this.flyout_width = Math.max(this.flyout_min_width, longest_block_width + 65);\n    }\n\n    /**\n     * Sets whether the flyout is visible or not.\n     * @param {boolean} is_visible\n     * @memberof FlyoutStore\n     */\n    setVisibility(is_visible) {\n        this.is_visible = is_visible;\n\n        if (!is_visible) {\n            this.setSelectedCategory(null);\n            this.flyout_content = [];\n        }\n    }\n\n    /**\n     * Sets whether the flyout is search or not.\n     * @param {boolean} is_search\n     * @memberof FlyoutStore\n     */\n    setIsSearchFlyout(is_search) {\n        this.is_search_flyout = is_search;\n    }\n\n    setSelectedCategory(selected_category) {\n        this.selected_category = selected_category;\n    }\n\n    getSelectedCategory() {\n        return this.selected_category;\n    }\n\n    /**\n     * Close the flyout on click outside itself or parent toolbox.\n     */\n    onClickOutsideFlyout(event) {\n        if (!this.is_visible || !Blockly.derivWorkspace) {\n            return;\n        }\n\n        const toolbox = document.getElementById('gtm-toolbox');\n        const path = event.path || (event.composedPath && event.composedPath());\n        const is_flyout_click = path.some(el => el.classList && el.classList.contains('flyout'));\n        const is_search_focus = this.root_store.toolbox.is_search_focus;\n        const isToolboxClick = () => toolbox.contains(event.target);\n\n        if (!is_flyout_click && !isToolboxClick() && !is_search_focus) {\n            this.setVisibility(false);\n            this.setSelectedCategory(null);\n        }\n    }\n\n    refreshCategory() {\n        const category = this.getSelectedCategory();\n        const { toolbox } = this.root_store;\n        const flyout_content = toolbox.getCategoryContents(category);\n        this.setContents(flyout_content);\n    }\n\n    get variables_blocks_count() {\n        return this.flyout_content.filter(block => block.getAttribute('type') === 'variables_get').length;\n    }\n\n    get first_get_variable_block_index() {\n        return this.flyout_content.length - this.variables_blocks_count;\n    }\n}\n","export const button_status = Object.freeze({\n    NORMAL: 0,\n    LOADING: 1,\n    COMPLETED: 2,\n});\n","import { action, makeObservable, observable } from 'mobx';\nimport { config, importExternal } from '@deriv/bot-skeleton';\nimport { getLanguage, localize } from '@deriv/translations';\nimport { button_status } from 'Constants/button-status';\n\nexport default class GoogleDriveStore {\n    constructor(root_store) {\n        makeObservable(this, {\n            is_authorised: observable,\n            updateSigninStatus: action.bound,\n            saveFile: action.bound,\n            loadFile: action.bound,\n            setKey: action.bound,\n            initialise: action.bound,\n            signIn: action.bound,\n            signOut: action.bound,\n            getPickerLanguage: action.bound,\n            checkFolderExists: action.bound,\n            createSaveFilePicker: action.bound,\n            createLoadFilePicker: action.bound,\n            showGoogleDriveFilePicker: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.bot_folder_name = `Binary Bot - ${localize('Strategies')}`;\n        this.google_auth = null;\n        this.setKey();\n        this.client = null;\n        this.access_token = localStorage.getItem('google_access_token') || '';\n        importExternal('https://accounts.google.com/gsi/client').then(() => this.initialiseClient());\n        importExternal('https://apis.google.com/js/api.js').then(() => this.initialise());\n    }\n\n    is_authorised = !!localStorage.getItem('google_access_token');\n\n    setKey = () => {\n        const { scope, discovery_docs } = config.gd;\n        this.client_id = process.env.GD_CLIENT_ID;\n        this.app_id = process.env.GD_APP_ID;\n        this.api_key = process.env.GD_API_KEY;\n        this.scope = scope;\n        this.discovery_docs = discovery_docs;\n    };\n\n    initialise = () => {\n        gapi.load('client:picker', () => gapi.client.load(this.discovery_docs));\n    };\n\n    initialiseClient = () => {\n        this.client = google.accounts.oauth2.initTokenClient({\n            client_id: this.client_id,\n            scope: this.scope,\n            callback: response => {\n                this.access_token = response.access_token;\n                this.updateSigninStatus(true);\n                localStorage.setItem('google_access_token', response.access_token);\n            },\n        });\n    };\n\n    updateSigninStatus(is_signed_in) {\n        this.is_authorised = is_signed_in;\n    }\n\n    signIn() {\n        if (!this.is_authorised) {\n            this.client.requestAccessToken();\n        }\n    }\n\n    signOut() {\n        if (this.access_token) {\n            gapi.client.setToken('');\n            google.accounts.oauth2.revoke(this.access_token);\n            localStorage.removeItem('google_access_token');\n            this.access_token = '';\n        }\n        this.updateSigninStatus(false);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getPickerLanguage() {\n        const language = getLanguage();\n\n        if (language === 'zhTw') {\n            return 'zh-TW';\n        } else if (language === 'zhCn') {\n            return 'zh-CN';\n        }\n        return language;\n    }\n\n    async saveFile(options) {\n        try {\n            await this.signIn();\n            if (this.access_token) gapi.client.setToken({ access_token: this.access_token });\n            await this.checkFolderExists();\n            await this.createSaveFilePicker('application/vnd.google-apps.folder', localize('Select a folder'), options);\n        } catch (err) {\n            if (err.status === 401) {\n                this.signOut();\n            }\n        }\n    }\n\n    async loadFile() {\n        await this.signIn();\n\n        if (this.access_token) gapi.client.setToken({ access_token: this.access_token });\n        try {\n            await gapi.client.drive.files.list({\n                pageSize: 10,\n                fields: 'files(id, name)',\n            });\n        } catch (err) {\n            if (err?.status === 401) {\n                await this.signOut();\n                setTimeout(() => {\n                    const picker = document.getElementsByClassName('picker-dialog-content')[0];\n                    picker.parentNode.removeChild(picker);\n                    const pickerBackground = document.getElementsByClassName('picker-dialog-bg');\n                    if (pickerBackground.length) {\n                        for (let i = 0; i < pickerBackground.length; i++) {\n                            pickerBackground[i].style.display = 'none';\n                        }\n                    }\n                }, 500);\n            }\n        }\n\n        const xml_doc = await this.createLoadFilePicker(\n            'text/xml,application/xml',\n            localize('Select a Deriv Bot Strategy')\n        );\n\n        return xml_doc;\n    }\n\n    async checkFolderExists() {\n        const { files } = gapi.client.drive;\n        const response = await files.list({ q: 'trashed=false' });\n        const mime_type = 'application/vnd.google-apps.folder';\n        const folder = response.result.files.find(file => file.mimeType === mime_type);\n\n        if (folder) {\n            return;\n        }\n\n        await files.create({\n            resource: {\n                name: this.bot_folder_name,\n                mimeType: mime_type,\n                fields: 'id',\n            },\n        });\n    }\n\n    createSaveFilePicker(mime_type, title, options) {\n        const { setButtonStatus } = this.root_store.save_modal;\n        return new Promise(resolve => {\n            const savePickerCallback = data => {\n                if (data.action === google.picker.Action.PICKED) {\n                    const folder_id = data.docs[0].id;\n                    const strategy_file = new Blob([options.content], { type: options.mimeType });\n                    const strategy_file_metadata = JSON.stringify({\n                        name: options.name,\n                        mimeType: options.mimeType,\n                        parents: [folder_id],\n                    });\n\n                    const form_data = new FormData();\n                    form_data.append('metadata', new Blob([strategy_file_metadata], { type: 'application/json' }));\n                    form_data.append('file', strategy_file);\n\n                    const xhr = new XMLHttpRequest();\n                    xhr.responseType = 'json';\n                    xhr.open('POST', 'https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart');\n                    xhr.setRequestHeader('Authorization', `Bearer ${this.access_token}`);\n                    xhr.onload = () => {\n                        if (xhr.status === 401) {\n                            this.signOut();\n                        }\n\n                        setButtonStatus(button_status.NORMAL);\n                        resolve();\n                    };\n                    xhr.send(form_data);\n                } else if (data.action === google.picker.Action.CANCEL) {\n                    setButtonStatus(button_status.NORMAL);\n                }\n            };\n\n            this.showGoogleDriveFilePicker(true, mime_type, title, savePickerCallback);\n        });\n    }\n\n    createLoadFilePicker(mime_type, title) {\n        return new Promise(resolve => {\n            const loadPickerCallback = async data => {\n                if (data.action === google.picker.Action.PICKED) {\n                    const file = data.docs[0];\n                    const file_name = file.name;\n                    const fileId = file.id;\n                    const { files } = gapi.client.drive;\n\n                    const response = await files.get({\n                        alt: 'media',\n                        fileId,\n                        mimeType: 'text/plain',\n                    });\n\n                    resolve({ xml_doc: response.body, file_name });\n                }\n            };\n\n            this.showGoogleDriveFilePicker(false, mime_type, title, loadPickerCallback);\n        });\n    }\n\n    showGoogleDriveFilePicker(is_save, mime_type, title, callback) {\n        const docs_view = new google.picker.DocsView();\n        docs_view.setIncludeFolders(true);\n        docs_view.setMimeTypes(mime_type);\n\n        if (is_save) {\n            docs_view.setSelectFolderEnabled(true);\n        }\n        const picker = new google.picker.PickerBuilder();\n        picker\n            .setOrigin(`${window.location.protocol}//${window.location.host}`)\n            .setTitle(localize(title))\n            .setLocale(this.getPickerLanguage())\n            .setAppId(this.app_id)\n            .setOAuthToken(this.access_token)\n            .addView(docs_view)\n            .setDeveloperKey(this.api_key)\n            .setSize(1051, 650)\n            .setCallback(callback)\n            .build()\n            .setVisible(true);\n    }\n}\n","import React from 'react';\n\nconst Audio = () => (\n    <>\n        <audio id='announcement' aria-label='audio' src={`${__webpack_public_path__}media/announcement.mp3`} />\n        <audio id='earned-money' aria-label='audio' src={`${__webpack_public_path__}media/coins.mp3`} />\n        <audio id='job-done' aria-label='audio' src={`${__webpack_public_path__}media/job-done.mp3`} />\n        <audio id='error' aria-label='audio' src={`${__webpack_public_path__}media/out-of-bounds.mp3`} />\n        <audio id='severe-error' aria-label='audio' src={`${__webpack_public_path__}media/i-am-being-serious.mp3`} />\n    </>\n);\n\nexport default Audio;\n","import Audio from './audio';\n\nexport default Audio;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { observer, useStore } from '@deriv/stores';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst { BOT_BUILDER, CHART } = DBOT_TABS;\n\nconst BotNotificationMessages = observer(() => {\n    const { ui } = useStore();\n    const { run_panel, dashboard } = useDBotStore();\n\n    const { is_drawer_open } = run_panel;\n    const Notifications = ui.notification_messages_ui;\n    const { active_tab, is_info_panel_visible } = dashboard;\n\n    return (\n        <div\n            className={classNames('notifications-container', {\n                'notifications-container__dashboard': active_tab === 0 && is_info_panel_visible,\n                'notifications-container--panel-open': [BOT_BUILDER, CHART].includes(active_tab) && is_drawer_open,\n            })}\n            data-testid='dt_notifications_container'\n        >\n            <Notifications />\n        </div>\n    );\n});\n\nexport default BotNotificationMessages;\n","import BotNotificationMessages from './bot-notification-messages';\nimport './bot-notification-messages.scss';\n\nexport default BotNotificationMessages;\n","import React from 'react';\nimport { ChartMode, DrawTools, Share, StudyLegend, ToolbarWidget, Views } from '@deriv/deriv-charts';\nimport { isDesktop, isMobile } from '@deriv/shared';\n\ntype TToolbarWidgetsProps = {\n    updateChartType: (chart_type: string) => void;\n    updateGranularity: (updateGranularity: number) => void;\n};\n\nconst ToolbarWidgets = ({ updateChartType, updateGranularity }: TToolbarWidgetsProps) => (\n    <ToolbarWidget position={isMobile() ? 'bottom' : null}>\n        <ChartMode portalNodeId='modal_root' onChartType={updateChartType} onGranularity={updateGranularity} />\n        {isDesktop() && (\n            <>\n                <StudyLegend portalNodeId='modal_root' searchInputClassName='data-hj-whitelist' />\n                <Views portalNodeId='modal_root' searchInputClassName='data-hj-whitelist' />\n                <DrawTools portalNodeId='modal_root' />\n                <Share portalNodeId='modal_root' />\n            </>\n        )}\n    </ToolbarWidget>\n);\n\nexport default ToolbarWidgets;\n","import React from 'react';\nimport classNames from 'classnames';\n// TODO Remove this after smartcharts is replaced\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport { ChartTitle, SmartChart } from '@deriv/deriv-charts';\nimport { isDesktop, isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport ToolbarWidgets from './toolbar-widgets';\n\nconst Chart = observer(({ show_digits_stats }: { show_digits_stats: boolean }) => {\n    const barriers: [] = [];\n    const { common, ui } = useStore();\n    const { chart_store, run_panel } = useDBotStore();\n\n    const {\n        chart_type,\n        getMarketsOrder,\n        granularity,\n        onSymbolChange,\n        setChartStatus,\n        symbol,\n        updateChartType,\n        updateGranularity,\n        wsForget,\n        wsForgetStream,\n        wsSendRequest,\n        wsSubscribe,\n    } = chart_store;\n    const { is_drawer_open } = run_panel;\n    const is_socket_opened = common.is_socket_opened;\n    const settings = {\n        assetInformation: false, // ui.is_chart_asset_info_visible,\n        countdown: true,\n        isHighestLowestMarkerEnabled: false, // TODO: Pending UI,\n        language: common.current_language.toLowerCase(),\n        position: ui.is_chart_layout_default ? 'bottom' : 'left',\n        theme: ui.is_dark_mode_on ? 'dark' : 'light',\n    };\n\n    return (\n        <div\n            className={classNames('dashboard__chart-wrapper', {\n                'dashboard__chart-wrapper--expanded': is_drawer_open && !isMobile(),\n            })}\n        >\n            <SmartChart\n                id='dbot'\n                barriers={barriers}\n                showLastDigitStats={show_digits_stats}\n                chartControlsWidgets={null}\n                enabledChartFooter={false}\n                chartStatusListener={v => setChartStatus(!v)}\n                toolbarWidget={() => (\n                    <ToolbarWidgets updateChartType={updateChartType} updateGranularity={updateGranularity} />\n                )}\n                chartType={chart_type}\n                isMobile={isMobile()}\n                enabledNavigationWidget={isDesktop()}\n                granularity={granularity}\n                requestAPI={wsSendRequest}\n                requestForget={wsForget}\n                requestForgetStream={wsForgetStream}\n                requestSubscribe={wsSubscribe}\n                settings={settings}\n                symbol={symbol}\n                topWidgets={() => <ChartTitle onChange={onSymbolChange} />}\n                isConnectionOpened={is_socket_opened}\n                getMarketsOrder={getMarketsOrder}\n                isLive={true}\n            />\n        </div>\n    );\n});\n\nexport default Chart;\n","import Chart from './chart';\nimport './chart.scss';\n\nexport default Chart;\n","import React from 'react';\nimport ContentLoader from 'react-content-loader';\n\ntype TContractCardLoader = {\n    speed?: number;\n};\n\nconst ContractCardLoader = ({ speed = 3 }: TContractCardLoader) => (\n    <ContentLoader\n        height={153}\n        width={334}\n        speed={speed}\n        backgroundColor={'var(--general-section-2)'}\n        foregroundColor={'var(--general-hover)'}\n        data-testid='contract-card-loader'\n    >\n        <rect x='12' y='15' rx='0' ry='0' width='41' height='25' />\n        <rect x='61' y='24' rx='0' ry='0' width='91' height='8' />\n        <rect x='180' y='15' rx='0' ry='0' width='41' height='25' />\n        <rect x='229' y='24' rx='0' ry='0' width='91' height='8' />\n        <rect x='12' y='48' rx='0' ry='0' width='60' height='8' />\n        <rect x='12' y='64' rx='0' ry='0' width='308' height='8' />\n        <rect x='12' y='80' rx='0' ry='0' width='308' height='1' />\n        <rect x='12' y='89' rx='0' ry='0' width='140' height='8' />\n        <rect x='12' y='105' rx='0' ry='0' width='60' height='8' />\n        <rect x='12' y='121' rx='0' ry='0' width='140' height='8' />\n        <rect x='12' y='137' rx='0' ry='0' width='60' height='8' />\n        <rect x='180' y='89' rx='0' ry='0' width='140' height='8' />\n        <rect x='180' y='105' rx='0' ry='0' width='60' height='8' />\n        <rect x='180' y='121' rx='0' ry='0' width='140' height='8' />\n        <rect x='180' y='137' rx='0' ry='0' width='60' height='8' />\n    </ContentLoader>\n);\n\nexport default ContractCardLoader;\n","import ContractCardLoader from './contract-card-loading';\n\nexport default ContractCardLoader;\n","import ContractResultOverlay from './contract-result-overlay';\nimport './contract-result-overlay.scss';\n\nexport default ContractResultOverlay;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\ntype TContractResultOverlayProps = {\n    profit: number;\n    className: string;\n};\n\nconst ContractResultOverlay = ({ profit, className }: TContractResultOverlayProps) => {\n    const has_won_contract = profit >= 0;\n\n    return (\n        <div\n            className={classNames('db-contract-card__result', className, {\n                'db-contract-card__result--won': has_won_contract,\n                'db-contract-card__result--lost': !has_won_contract,\n            })}\n        >\n            <Text weight='bold' className='db-contract-card__result-caption'>\n                {has_won_contract ? (\n                    <React.Fragment>\n                        {localize('Won')}\n                        <Icon icon='IcCheckmarkCircle' className='db-contract-card__result-icon' color='green' />\n                    </React.Fragment>\n                ) : (\n                    <React.Fragment>\n                        {localize('Lost')}\n                        <Icon icon='IcCrossCircle' className='db-contract-card__result-icon' color='red' />\n                    </React.Fragment>\n                )}\n            </Text>\n        </div>\n    );\n};\n\nexport default ContractResultOverlay;\n","export const initTrashCan = (margin = 16, height = 36) => {\n    /**\n     * Distance between trashcan and bottom edge of workspace.\n     * @type {number}\n     * @private\n     */\n    Blockly.Trashcan.prototype.MARGIN_BOTTOM_ = margin * 2 + height; // eslint-disable-line\n\n    /**\n     * Distance between trashcan and right edge of workspace.\n     * @type {number}\n     * @private\n     */\n    Blockly.Trashcan.prototype.MARGIN_SIDE_ = margin; // eslint-disable-line\n\n    /**\n     * Inspect the contents of the trash.\n     * @deriv/bot: Noop for us, restore original functionality when trashcan can be inspected.\n     */\n    Blockly.Trashcan.prototype.click = function () {};\n\n    window.dispatchEvent(new Event('resize')); // trigger UI update\n};\n","export const contract_stages = Object.freeze({\n    NOT_RUNNING: 0,\n    STARTING: 1,\n    PURCHASE_SENT: 2,\n    PURCHASE_RECEIVED: 3,\n    IS_STOPPING: 4,\n    CONTRACT_CLOSED: 5,\n});\n","import React from 'react';\nimport { TDateItemProps } from '../journal.types';\n\nconst DateItem = ({ date, time }: TDateItemProps) => (\n    <>\n        <span className='journal__text-date'>{date}</span> | <span className='journal__text-time'>{time}</span>\n    </>\n);\n\nexport default DateItem;\n","import React from 'react';\nimport { useOnClickOutside } from '@deriv/components';\nimport { TFilterDialogProps } from '../journal.types';\nimport { Filters } from '.';\n\nconst FilterDialog = ({\n    toggle_ref,\n    checked_filters,\n    filters,\n    filterMessage,\n    is_filter_dialog_visible,\n    toggleFilterDialog,\n}: TFilterDialogProps) => {\n    const wrapper_ref = React.useRef<HTMLDivElement>(null);\n    const validateClickOutside = (event: React.ChangeEvent<HTMLInputElement>) =>\n        is_filter_dialog_visible && !toggle_ref.current?.contains(event.target);\n\n    useOnClickOutside(wrapper_ref, toggleFilterDialog, validateClickOutside);\n\n    return (\n        <Filters\n            wrapper_ref={wrapper_ref}\n            checked_filters={checked_filters}\n            filters={filters}\n            filterMessage={filterMessage}\n            className='filter-dialog'\n        />\n    );\n};\n\nexport default FilterDialog;\n","import React from 'react';\nimport { Checkbox } from '@deriv/components';\nimport { TFiltersProps } from '../journal.types';\n\nconst Filters = ({\n    wrapper_ref,\n    checked_filters,\n    filters,\n    filterMessage,\n    className,\n    classNameLabel,\n}: TFiltersProps) => (\n    <div ref={wrapper_ref} className={className}>\n        {filters.map(item => {\n            const hasFilter = Array.isArray(checked_filters) && checked_filters.includes(item.id);\n            return (\n                <Checkbox\n                    key={item.id}\n                    classNameLabel={classNameLabel}\n                    value={hasFilter}\n                    defaultChecked={hasFilter}\n                    label={item.label}\n                    onChange={() => filterMessage(!hasFilter, item.id)}\n                />\n            );\n        })}\n    </div>\n);\n\nexport default Filters;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { log_types } from '@deriv/bot-skeleton';\nimport { Text } from '@deriv/components';\nimport { formatMoney, getCurrencyDisplayCode } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\nimport { TFormatMessageProps } from '../journal.types';\n\nconst FormatMessage = ({ logType, className, extra }: TFormatMessageProps) => {\n    const getLogMessage = () => {\n        switch (logType) {\n            case log_types.LOAD_BLOCK: {\n                return localize('Blocks are loaded successfully');\n            }\n            case log_types.NOT_OFFERED: {\n                return localize('Resale of this contract is not offered.');\n            }\n            case log_types.PURCHASE: {\n                const { longcode, transaction_id } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='<0>Bought</0>: {{longcode}} (ID: {{transaction_id}})'\n                        values={{ longcode, transaction_id }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-info)' }} />]}\n                        options={{ interpolation: { escapeValue: false } }}\n                    />\n                );\n            }\n            case log_types.SELL: {\n                const { sold_for } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='<0>Sold for</0>: {{sold_for}}'\n                        values={{ sold_for }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-warning)' }} />]}\n                    />\n                );\n            }\n            case log_types.PROFIT: {\n                const { currency, profit } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='Profit amount: <0>{{profit}}</0>'\n                        values={{\n                            profit: `${formatMoney(currency, profit, true)} ${getCurrencyDisplayCode(currency)}`,\n                        }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-success)' }} />]}\n                    />\n                );\n            }\n            case log_types.LOST: {\n                const { currency, profit } = extra;\n                return (\n                    <Localize\n                        i18n_default_text='Loss amount: <0>{{profit}}</0>'\n                        values={{\n                            profit: `${formatMoney(currency, profit, true)} ${getCurrencyDisplayCode(currency)}`,\n                        }}\n                        components={[<Text key={0} size='xxs' styles={{ color: 'var(--status-danger)' }} />]}\n                    />\n                );\n            }\n            case log_types.WELCOME_BACK: {\n                const { current_currency } = extra;\n                if (current_currency)\n                    return (\n                        <Localize\n                            i18n_default_text='Welcome back! Your messages have been restored. You are using your {{current_currency}} account.'\n                            values={{\n                                current_currency,\n                            }}\n                        />\n                    );\n                return <Localize i18n_default_text='Welcome back! Your messages have been restored.' />;\n            }\n\n            case log_types.WELCOME: {\n                const { current_currency } = extra;\n                if (current_currency)\n                    return (\n                        <Localize\n                            i18n_default_text='You are using your {{current_currency}} account.'\n                            values={{\n                                current_currency,\n                            }}\n                        />\n                    );\n                break;\n            }\n            default:\n                return null;\n        }\n    };\n\n    return <div className={classnames('journal__text', className)}>{getLogMessage()}</div>;\n};\n\nexport default FormatMessage;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { CSSTransition } from 'react-transition-group';\nimport { message_types } from '@deriv/bot-skeleton';\nimport { useNewRowTransition } from '@deriv/shared';\nimport { TJournalItemExtra, TJournalItemProps } from '../journal.types';\nimport { DateItem, FormatMessage } from '.';\n\nconst getJournalItemContent = (\n    message: string | ((value: () => void) => string),\n    type: string,\n    className: string,\n    extra: TJournalItemExtra,\n    measure: () => void\n) => {\n    switch (type) {\n        case message_types.SUCCESS: {\n            return <FormatMessage logType={message as string} extra={extra} className={className} />;\n        }\n        case message_types.NOTIFY: {\n            if (typeof message === 'function') {\n                return <div className={classnames('journal__text', className)}>{message(measure)}</div>;\n            }\n            return <div className={classnames('journal__text', className)}>{message}</div>;\n        }\n        case message_types.ERROR: {\n            return <div className='journal__text--error journal__text'>{message as string}</div>;\n        }\n        default:\n            return null;\n    }\n};\n\nconst JournalItem = ({ row, is_new_row, measure }: TJournalItemProps) => {\n    const { in_prop } = useNewRowTransition(is_new_row);\n    const { date, time, message, message_type, className, extra } = row;\n    const date_el = DateItem({ date, time });\n\n    return (\n        <CSSTransition in={in_prop} timeout={500} classNames='list__animation'>\n            <div className='journal__item'>\n                <div className='journal__item-content'>\n                    {getJournalItemContent(message, message_type, className, extra as TJournalItemExtra, measure)}\n                </div>\n                <div className='journal__text-datetime'>{date_el}</div>\n            </div>\n        </CSSTransition>\n    );\n};\n\nexport default JournalItem;\n","import React from 'react';\nimport classnames from 'classnames';\nimport ContentLoader from 'react-content-loader';\n\nconst JournalLoader = ({ is_mobile }: { is_mobile: boolean }) => (\n    <ContentLoader\n        className={classnames('journal__loader', { 'journal__loader--mobile': is_mobile })}\n        speed={3}\n        width={350}\n        height={92}\n        backgroundColor={'var(--general-section-1)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='15' y='15' rx='5' ry='5' width='320' height='40' />\n        <rect x='15' y='60' rx='5' ry='5' width='180' height='7' />\n    </ContentLoader>\n);\n\nexport default JournalLoader;\n","import React from 'react';\nimport { Button, Icon, Popover } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TDownloadProps = {\n    tab: string;\n};\n\nconst Download = observer(({ tab }: TDownloadProps) => {\n    const { download, run_panel, transactions } = useDBotStore();\n    const { is_clear_stat_disabled, is_running } = run_panel;\n    const { onClickDownloadTransaction, onClickDownloadJournal } = download;\n    const { transactions: transaction_list } = transactions;\n    let disabled = false;\n    let clickFunction, popover_message;\n    if (tab === 'transactions') {\n        clickFunction = onClickDownloadTransaction;\n        disabled = !transaction_list.length || is_running;\n        popover_message = localize('Download your transaction history.');\n        if (!transaction_list.length) popover_message = localize('No transaction or activity yet.');\n    } else if (tab === 'journal') {\n        clickFunction = onClickDownloadJournal;\n        popover_message = localize('Download your journal.');\n        disabled = is_clear_stat_disabled;\n        if (disabled) popover_message = localize('No transaction or activity yet.');\n    }\n    if (is_running) popover_message = localize('Download is unavailable while your bot is running.');\n\n    return (\n        <Popover\n            className='run-panel__info'\n            classNameBubble='run-panel__info--bubble'\n            alignment='bottom'\n            message={popover_message}\n            zIndex='5'\n        >\n            <Button\n                id='download-button'\n                is_disabled={disabled}\n                className='download__button'\n                icon={\n                    <Icon icon='IcDbotDownload' color={disabled ? 'disabled' : undefined} className='download__icon' />\n                }\n                text={localize('Download')}\n                onClick={clickFunction}\n                secondary\n            />\n        </Popover>\n    );\n});\n\nexport default Download;\n","import Download from './download';\nimport './download.scss';\n\nexport default Download;\n","import React from 'react';\nimport { CSSTransition } from 'react-transition-group';\nimport { Icon, Text } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport Download from 'Components/download';\nimport { TJournalToolsProps } from '../journal.types';\nimport { FilterDialog } from '.';\n\nconst JournalTools = ({\n    checked_filters,\n    filters,\n    filterMessage,\n    is_filter_dialog_visible,\n    toggleFilterDialog,\n}: TJournalToolsProps) => {\n    const toggle_ref = React.useRef<HTMLDivElement>(null);\n\n    return (\n        <>\n            <div className='journal-tools__container'>\n                <Download tab='journal' />\n                <div ref={toggle_ref} className='journal-tools__container-filter' onClick={toggleFilterDialog}>\n                    <Text size='xs' className='journal-tools__container-filter--label'>\n                        <Localize i18n_default_text='Filters' />\n                    </Text>\n                    <Icon icon='IcFilter' size={16} />\n                </div>\n            </div>\n            <CSSTransition\n                in={is_filter_dialog_visible}\n                classNames={{\n                    enter: 'filter-dialog--enter',\n                    enterDone: 'filter-dialog--enter-done',\n                    exit: 'filter-dialog--exit',\n                }}\n                timeout={150}\n                unmountOnExit\n            >\n                <FilterDialog\n                    toggle_ref={toggle_ref}\n                    checked_filters={checked_filters}\n                    filters={filters}\n                    filterMessage={filterMessage}\n                    is_filter_dialog_visible={is_filter_dialog_visible}\n                    toggleFilterDialog={toggleFilterDialog}\n                />\n            </CSSTransition>\n        </>\n    );\n};\n\nexport default JournalTools;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { DataList, Icon, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TCheckedFilters, TFilterMessageValues, TJournalDataListArgs } from './journal.types';\nimport { JournalItem, JournalLoader, JournalTools } from './journal-components';\n\nconst Journal = observer(() => {\n    const { journal, run_panel } = useDBotStore();\n    const {\n        checked_filters,\n        filterMessage,\n        filters,\n        filtered_messages,\n        is_filter_dialog_visible,\n        toggleFilterDialog,\n        unfiltered_messages,\n    } = journal;\n    const { is_stop_button_visible, contract_stage } = run_panel;\n\n    const filtered_messages_length = Array.isArray(filtered_messages) && filtered_messages.length;\n    const unfiltered_messages_length = Array.isArray(unfiltered_messages) && unfiltered_messages.length;\n    const is_mobile = isMobile();\n\n    return (\n        <div\n            className={classnames('journal run-panel-tab__content--no-stat', {\n                'run-panel-tab__content': !is_mobile,\n            })}\n        >\n            <JournalTools\n                checked_filters={checked_filters}\n                filters={filters}\n                filterMessage={filterMessage}\n                is_filter_dialog_visible={is_filter_dialog_visible}\n                toggleFilterDialog={toggleFilterDialog}\n            />\n            <div className='journal__item-list'>\n                {filtered_messages_length ? (\n                    <DataList\n                        className='journal'\n                        data_source={filtered_messages}\n                        rowRenderer={(args: TJournalDataListArgs) => <JournalItem {...args} />}\n                        keyMapper={(row: TFilterMessageValues) => row.unique_id}\n                    />\n                ) : (\n                    <>\n                        {contract_stage >= contract_stages.STARTING &&\n                        !!Object.keys(checked_filters as TCheckedFilters).length &&\n                        !unfiltered_messages_length &&\n                        is_stop_button_visible ? (\n                            <JournalLoader is_mobile={is_mobile} />\n                        ) : (\n                            <div className='journal-empty'>\n                                <Icon icon='IcBox' className='journal-empty__icon' size={64} color='secondary' />\n                                <Text\n                                    as='h4'\n                                    size='xs'\n                                    weight='bold'\n                                    align='center'\n                                    color='less-prominent'\n                                    line_height='xxs'\n                                    className='journal-empty__header'\n                                >\n                                    {localize('There are no messages to display')}\n                                </Text>\n                                <div className='journal-empty__message'>\n                                    <Text size='xxs' color='less-prominent'>\n                                        {localize('Here are the possible reasons:')}\n                                    </Text>\n                                    <ul className='journal-empty__list'>\n                                        <li>\n                                            <Text size='xxs' color='less-prominent'>\n                                                {localize('The bot is not running')}\n                                            </Text>\n                                        </li>\n                                        <li>\n                                            <Text size='xxs' color='less-prominent'>\n                                                {localize('The stats are cleared')}\n                                            </Text>\n                                        </li>\n                                        <li>\n                                            <Text size='xxs' color='less-prominent'>\n                                                {localize('All messages are filtered out')}\n                                            </Text>\n                                        </li>\n                                    </ul>\n                                </div>\n                            </div>\n                        )}\n                    </>\n                )}\n            </div>\n        </div>\n    );\n});\n\nexport default Journal;\n","import Journal from './journal';\nimport './journal.scss';\n\nexport default Journal;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Field, Form, Formik } from 'formik';\nimport PropTypes from 'prop-types';\nimport { Button, Div100vhContainer, FadeWrapper, Input, MobileWrapper, Modal, PageOverlay } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst SelfExclusionForm = props => {\n    const [max_losses_error, setMaxLossesError] = React.useState('');\n    const {\n        is_onscreen_keyboard_active,\n        is_logged_in,\n        initial_values,\n        api_max_losses,\n        onRunButtonClick,\n        resetSelfExclusion,\n        updateSelfExclusion,\n        setRunLimit,\n        is_reality_check_visible,\n    } = props;\n\n    React.useEffect(() => {\n        if (is_reality_check_visible || !is_logged_in) {\n            resetSelfExclusion();\n        }\n    });\n\n    const onSubmitLimits = async values => {\n        if (values.form_max_losses !== api_max_losses) {\n            const set_losses = await updateSelfExclusion({ max_losses: values.form_max_losses });\n            if (set_losses?.error) {\n                setMaxLossesError(localize(set_losses.error.message));\n                return;\n            }\n        }\n        setRunLimit(values.run_limit);\n        onRunButtonClick();\n    };\n    const validateFields = values => {\n        const errors = {};\n        // Regex\n        const is_number = /^\\d+(\\.\\d+)?$/;\n        const is_integer = /^\\d+$/;\n        const max_number = 9999999999999;\n\n        // Messages\n        const requested_field_message = localize('This field is required.');\n        const valid_number_message = localize('Should be a valid number');\n        const max_number_message = localize('Reached maximum number of digits');\n        const max_decimal_message = localize('Reached maximum number of decimals');\n        const max_losses_limit_message = localize('Please enter a number between 0 and {{api_max_losses}}.', {\n            api_max_losses,\n        });\n        const requested_fields = ['run_limit', 'form_max_losses'];\n        const only_numbers = ['run_limit', 'form_max_losses'];\n        const decimal_limit = ['form_max_losses'];\n        const has_max_limit = ['form_max_losses'];\n\n        const only_integers = ['run_limit'];\n\n        requested_fields.forEach(item => {\n            if (!values[item]) {\n                errors[item] = requested_field_message;\n            }\n        });\n\n        only_numbers.forEach(item => {\n            if (values[item]) {\n                if (!is_number.test(values[item])) {\n                    errors[item] = valid_number_message;\n                } else if (+values[item] > max_number) {\n                    errors[item] = max_number_message;\n                }\n            }\n        });\n\n        only_integers.forEach(item => {\n            if (values[item]) {\n                if (!is_integer.test(values[item])) {\n                    errors[item] = valid_number_message;\n                }\n            }\n        });\n\n        decimal_limit.forEach(item => {\n            const amount_decimal_array = values[item].toString().split('.')[1];\n            const amount_decimal_places = amount_decimal_array ? amount_decimal_array.length || 0 : 0;\n            if (amount_decimal_places > 2) {\n                errors[item] = max_decimal_message;\n            }\n        });\n        has_max_limit.forEach(item => {\n            if (api_max_losses !== 0 && api_max_losses !== values[item] && api_max_losses < values[item]) {\n                errors[item] = max_losses_limit_message;\n            } else {\n                setMaxLossesError('');\n            }\n        });\n\n        return errors;\n    };\n\n    return (\n        <div className='db-self-exclusion'>\n            <div className='db-self-exclusion__content'>\n                <div className='db-self-exclusion__info'>\n                    {localize('Enter limits to stop your bot from trading when any of these conditions are met.')}\n                </div>\n                <Formik initialValues={initial_values} validate={validateFields} onSubmit={onSubmitLimits}>\n                    {({ values, touched, errors, isValid, handleChange }) => {\n                        return (\n                            <Form>\n                                <div className='db-self-exclusion__form-group'>\n                                    <Field name='form_max_losses'>\n                                        {({ field }) => (\n                                            <Input\n                                                {...field}\n                                                className='db-self-exclusion__input'\n                                                type='text'\n                                                label={localize('Daily loss limit')}\n                                                value={values.form_max_losses}\n                                                onChange={handleChange}\n                                                error={max_losses_error || (touched[field.name] && errors[field.name])}\n                                                hint={localize(\n                                                    'Limits your potential losses for the day across all Deriv platforms.'\n                                                )}\n                                            />\n                                        )}\n                                    </Field>\n                                </div>\n                                <div className='db-self-exclusion__form-group'>\n                                    <Field name='run_limit'>\n                                        {({ field }) => {\n                                            return (\n                                                <Input\n                                                    {...field}\n                                                    className='db-self-exclusion__input'\n                                                    type='text'\n                                                    label={localize('Maximum consecutive trades')}\n                                                    value={values.run_limit}\n                                                    onChange={handleChange}\n                                                    error={touched[field.name] && errors.run_limit}\n                                                    hint={localize(\n                                                        'Maximum number of trades your bot will execute for this run.'\n                                                    )}\n                                                />\n                                            );\n                                        }}\n                                    </Field>\n                                </div>\n                                <div\n                                    className={classNames('db-self-exclusion__footer', {\n                                        'db-self-exclusion__footer--relative':\n                                            isMobile() && is_onscreen_keyboard_active,\n                                    })}\n                                >\n                                    <div className='db-self-exclusion__footer-btn-group'>\n                                        <Button\n                                            large\n                                            text={localize('Cancel')}\n                                            onClick={resetSelfExclusion}\n                                            secondary\n                                            type='button'\n                                        />\n                                        <Button\n                                            type='submit'\n                                            large\n                                            text={localize('Apply and run')}\n                                            is_disabled={\n                                                !isValid ||\n                                                !values.run_limit ||\n                                                !values.form_max_losses ||\n                                                max_losses_error !== ''\n                                            }\n                                            primary\n                                        />\n                                    </div>\n                                </div>\n                            </Form>\n                        );\n                    }}\n                </Formik>\n            </div>\n        </div>\n    );\n};\n\nconst SelfExclusion = observer(({ onRunButtonClick }) => {\n    const { self_exclusion } = useDBotStore();\n    const { ui, client } = useStore();\n    const { is_restricted, resetSelfExclusion, initial_values, api_max_losses, run_limit, setRunLimit } =\n        self_exclusion;\n    const { is_onscreen_keyboard_active } = ui;\n    const { is_logged_in, is_reality_check_visible, updateSelfExclusion, virtual_account_loginid } = client;\n\n    const self_exclusion_form_props = {\n        is_onscreen_keyboard_active,\n        is_logged_in,\n        initial_values,\n        api_max_losses,\n        onRunButtonClick,\n        resetSelfExclusion,\n        updateSelfExclusion,\n        setRunLimit,\n        is_reality_check_visible,\n        virtual_account_loginid,\n        run_limit,\n    };\n\n    return (\n        <>\n            {isMobile() ? (\n                <FadeWrapper is_visible={is_restricted} className='limits__wrapper' keyname='limitis__wrapper'>\n                    <PageOverlay header={localize('Limits')} onClickClose={resetSelfExclusion}>\n                        <MobileWrapper>\n                            <Div100vhContainer className='limits__wrapper--is-mobile'>\n                                <SelfExclusionForm {...self_exclusion_form_props} />\n                            </Div100vhContainer>\n                        </MobileWrapper>\n                    </PageOverlay>\n                </FadeWrapper>\n            ) : (\n                <Modal\n                    is_open={is_restricted}\n                    has_close_icon\n                    width='440px'\n                    height='374px'\n                    toggleModal={resetSelfExclusion}\n                    className='db-self-exclusion__modal'\n                    title={localize('Limits')}\n                >\n                    <SelfExclusionForm {...self_exclusion_form_props} />\n                </Modal>\n            )}\n        </>\n    );\n});\n\nSelfExclusion.propTypes = {\n    onRunButtonClick: PropTypes.func,\n};\n\nexport default SelfExclusion;\n","import SelfExclusion from './self-exclusion';\n\nexport default SelfExclusion;\n","import { getLimitOrderAmount } from '@deriv/shared';\n\nexport const getBuyPrice = contract_store => {\n    return contract_store.contract_info.buy_price;\n};\n\n/**\n * Set contract update form initial values\n * @param {object} contract_update - contract_update response\n * @param {object} limit_order - proposal_open_contract.limit_order response\n */\nexport const getContractUpdateConfig = ({ contract_update, limit_order }) => {\n    const { stop_loss, take_profit } = getLimitOrderAmount(limit_order || contract_update);\n\n    return {\n        // convert stop_loss, take_profit value to string for validation to work\n        contract_update_stop_loss: stop_loss ? Math.abs(stop_loss).toString() : '',\n        contract_update_take_profit: take_profit ? take_profit.toString() : '',\n        has_contract_update_stop_loss: !!stop_loss,\n        has_contract_update_take_profit: !!take_profit,\n    };\n};\n","import { getTotalProfit } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nimport { getBuyPrice } from 'Utils/multiplier';\n\nexport const getSupportedContracts = is_high_low => ({\n    ASIANU: {\n        name: localize('Asian Up'),\n        position: 'top',\n    },\n    ASIAND: {\n        name: localize('Asian Down'),\n        position: 'bottom',\n    },\n    CALL: {\n        name: is_high_low ? localize('Higher') : localize('Rise'),\n        position: 'top',\n    },\n    PUT: {\n        name: is_high_low ? localize('Lower') : localize('Fall'),\n        position: 'bottom',\n    },\n    CALLE: {\n        name: localize('Rise'),\n        position: 'top',\n    },\n    PUTE: {\n        name: localize('Fall'),\n        position: 'bottom',\n    },\n    CALLSPREAD: {\n        name: localize('Spread Up'),\n        position: 'top',\n    },\n    PUTSPREAD: {\n        name: localize('Spread Down'),\n        position: 'bottom',\n    },\n    DIGITMATCH: {\n        name: localize('Matches'),\n        position: 'top',\n    },\n    DIGITDIFF: {\n        name: localize('Differs'),\n        position: 'bottom',\n    },\n    DIGITEVEN: {\n        name: localize('Even'),\n        position: 'top',\n    },\n    DIGITODD: {\n        name: localize('Odd'),\n        position: 'bottom',\n    },\n    DIGITOVER: {\n        name: localize('Over'),\n        position: 'top',\n    },\n    DIGITUNDER: {\n        name: localize('Under'),\n        position: 'bottom',\n    },\n    EXPIRYMISS: {\n        name: localize('Ends Outside'),\n        position: 'top',\n    },\n    EXPIRYRANGE: {\n        name: localize('Ends Between'),\n        position: 'bottom',\n    },\n    LBFLOATCALL: {\n        name: localize('Close-to-Low'),\n        position: 'top',\n    },\n    LBFLOATPUT: {\n        name: localize('High-to-Close'),\n        position: 'top',\n    },\n    LBHIGHLOW: {\n        name: localize('High-to-Low'),\n        position: 'top',\n    },\n    MULTUP: {\n        name: localize('Up'),\n        position: 'top',\n    },\n    MULTDOWN: {\n        name: localize('Down'),\n        position: 'bottom',\n    },\n    ONETOUCH: {\n        name: localize('Touch'),\n        position: 'top',\n    },\n    NOTOUCH: {\n        name: localize('No Touch'),\n        position: 'bottom',\n    },\n    RANGE: {\n        name: localize('Stays Between'),\n        position: 'top',\n    },\n    UPORDOWN: {\n        name: localize('Goes Outside'),\n        position: 'bottom',\n    },\n    RESETCALL: {\n        name: localize('Reset Call'),\n        position: 'top',\n    },\n    RESETPUT: {\n        name: localize('Reset Put'),\n        position: 'bottom',\n    },\n    RUNHIGH: {\n        name: localize('Only Ups'),\n        position: 'top',\n    },\n    RUNLOW: {\n        name: localize('Only Downs'),\n        position: 'bottom',\n    },\n    TICKHIGH: {\n        name: localize('High Tick'),\n        position: 'top',\n    },\n    TICKLOW: {\n        name: localize('Low Tick'),\n        position: 'bottom',\n    },\n});\n\nexport const getContractConfig = is_high_low => ({\n    ...getSupportedContracts(is_high_low),\n});\n\nexport const getContractTypeDisplay = (type, is_high_low = false) =>\n    getContractConfig(is_high_low)[type] ? getContractConfig(is_high_low)[type.toUpperCase()].name : '';\n\nexport const getValidationRules = () => ({\n    has_contract_update_stop_loss: {\n        trigger: 'contract_update_stop_loss',\n    },\n    contract_update_stop_loss: {\n        rules: [\n            [\n                'req',\n                {\n                    condition: contract_store => !contract_store.contract_update_stop_loss,\n                    message: localize('Please enter a stop loss amount.'),\n                },\n            ],\n            [\n                'custom',\n                {\n                    func: (value, options, contract_store) => {\n                        const profit = getTotalProfit(contract_store.contract_info);\n                        return !(profit < 0 && -value > profit);\n                    },\n                    message: localize(\"Please enter a stop loss amount that's higher than the current potential loss.\"),\n                },\n            ],\n            [\n                'custom',\n                {\n                    func: (value, options, contract_store) => {\n                        const stake = getBuyPrice(contract_store);\n                        return value < stake + 1;\n                    },\n                    message: localize('Invalid stop loss. Stop loss cannot be more than stake.'),\n                },\n            ],\n        ],\n    },\n    has_contract_update_take_profit: {\n        trigger: 'contract_update_take_profit',\n    },\n    contract_update_take_profit: {\n        rules: [\n            [\n                'req',\n                {\n                    condition: contract_store => !contract_store.contract_update_take_profit,\n                    message: localize('Please enter a take profit amount.'),\n                },\n            ],\n            [\n                'custom',\n                {\n                    func: (value, options, contract_store) => {\n                        const profit = getTotalProfit(contract_store.contract_info);\n                        return !(profit > 0 && +value < profit);\n                    },\n                    message: localize(\n                        \"Please enter a take profit amount that's higher than the current potential profit.\"\n                    ),\n                },\n            ],\n        ],\n    },\n});\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { ContractCard, Text } from '@deriv/components';\nimport { getCardLabels, isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport ContractCardLoader from 'Components/contract-card-loading';\nimport { getContractTypeDisplay } from 'Constants/contract';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport { TSummaryCardProps } from './summary-card.types';\n\nconst SummaryCard = observer(({ contract_info, is_contract_loading }: TSummaryCardProps) => {\n    const { summary_card, run_panel } = useDBotStore();\n    const { ui, common } = useStore();\n    const { is_contract_completed, is_contract_inactive, is_multiplier } = summary_card;\n    const { onClickSell, is_sell_requested } = run_panel;\n    const { addToast, current_focus, removeToast, setCurrentFocus } = ui;\n    const { server_time } = common;\n\n    const is_mobile = isMobile();\n\n    const card_header = (\n        <ContractCard.Header\n            contract_info={contract_info}\n            getCardLabels={getCardLabels}\n            getContractTypeDisplay={getContractTypeDisplay}\n            has_progress_slider={!is_multiplier}\n            is_sold={is_contract_completed}\n            server_time={server_time}\n        />\n    );\n\n    const card_body = (\n        <ContractCard.Body\n            addToast={addToast}\n            contract_info={contract_info}\n            currency={contract_info?.currency ?? ''}\n            current_focus={current_focus}\n            error_message_alignment='left'\n            getCardLabels={getCardLabels}\n            getContractById={() => summary_card}\n            is_mobile={is_mobile}\n            is_multiplier={is_multiplier}\n            is_sold={is_contract_completed}\n            removeToast={removeToast}\n            server_time={server_time}\n            setCurrentFocus={setCurrentFocus}\n        />\n    );\n\n    const card_footer = (\n        <ContractCard.Footer\n            contract_info={contract_info}\n            getCardLabels={getCardLabels}\n            is_multiplier={is_multiplier}\n            is_sell_requested={is_sell_requested}\n            onClickSell={onClickSell}\n        />\n    );\n\n    const contract_el = (\n        <React.Fragment>\n            {card_header}\n            {card_body}\n            {card_footer}\n        </React.Fragment>\n    );\n\n    return (\n        <div\n            className={classNames('db-summary-card', {\n                'db-summary-card--mobile': is_mobile,\n                'db-summary-card--inactive': is_contract_inactive && !is_contract_loading && !contract_info,\n                'db-summary-card--is-loading': is_contract_loading,\n                'db-summary-card--completed': is_contract_completed,\n                'db-summary-card--completed-mobile': is_contract_completed && is_mobile,\n            })}\n        >\n            {is_contract_loading && <ContractCardLoader speed={2} />}\n            {!is_contract_loading && contract_info && (\n                <ContractCard\n                    contract_info={contract_info}\n                    getCardLabels={getCardLabels}\n                    is_multiplier={is_multiplier}\n                    profit_loss={contract_info.profit}\n                    should_show_result_overlay={true}\n                >\n                    <div\n                        className={classNames('dc-contract-card', {\n                            'dc-contract-card--green': contract_info.profit > 0,\n                            'dc-contract-card--red': contract_info.profit < 0,\n                        })}\n                    >\n                        {contract_el}\n                    </div>\n                </ContractCard>\n            )}\n            {!is_contract_loading && !contract_info && (\n                <Text as='p' line_height='s' size='xs'>\n                    {localize('When you’re ready to trade, hit ')}\n                    <strong>{localize('Run')}</strong>\n                    {localize('. You’ll be able to track your bot’s performance here.')}\n                </Text>\n            )}\n        </div>\n    );\n});\n\nexport default SummaryCard;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { ThemedScrollbars } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport SummaryCard from './summary-card';\n\ntype TSummary = {\n    is_drawer_open: boolean;\n};\n\nconst Summary = observer(({ is_drawer_open }: TSummary) => {\n    const { dashboard, summary_card } = useDBotStore();\n    const { is_contract_loading, contract_info } = summary_card;\n    const { active_tour } = dashboard;\n\n    const is_mobile = isMobile();\n    return (\n        <div\n            className={classnames({\n                'run-panel-tab__content': !is_mobile,\n                'run-panel-tab__content--mobile': is_mobile && is_drawer_open,\n                'run-panel-tab__content--summary-tab': (!is_mobile && is_drawer_open) || active_tour,\n            })}\n        >\n            <ThemedScrollbars\n                className={classnames({\n                    summary: !is_contract_loading && !contract_info,\n                    'summary--loading':\n                        (is_mobile && is_contract_loading) || (is_mobile && !is_contract_loading && contract_info),\n                })}\n            >\n                <SummaryCard is_contract_loading={is_contract_loading} contract_info={contract_info} />\n            </ThemedScrollbars>\n        </div>\n    );\n});\n\nexport default Summary;\n","import Summary from './summary';\nimport './summary.scss';\nimport './summary-card.scss';\n\nexport default Summary;\n","import React, { useRef } from 'react';\nimport { observer } from 'mobx-react';\nimport { Icon, Toast } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst BotStopNotification = observer(() => {\n    const { run_panel } = useDBotStore();\n    const { setShowBotStopMessage } = run_panel;\n    const notification_timer = useRef(6000);\n\n    const notificationTimer = setTimeout(() => {\n        if (notification_timer.current) {\n            setShowBotStopMessage(false);\n        }\n    }, notification_timer.current);\n\n    const resetTimer = () => {\n        setTimeout(() => {\n            setShowBotStopMessage(false);\n        }, 4000);\n    };\n\n    return (\n        <div\n            className='bot-stop-notification'\n            onMouseOver={e => {\n                clearTimeout(notificationTimer);\n            }}\n            onMouseLeave={e => {\n                resetTimer();\n            }}\n            data-testid='bot-stop-notification'\n        >\n            <Toast>\n                <div>\n                    <Localize\n                        i18n_default_text='You’ve just stopped the bot. Any open contracts can be viewed on the <0>Reports</0> page.'\n                        components={[\n                            <a\n                                key={0}\n                                style={{ color: 'var(--general-main-1)' }}\n                                rel='noopener noreferrer'\n                                target='_blank'\n                                href={'/reports'}\n                            />,\n                        ]}\n                    />\n                </div>\n                <Icon\n                    icon='IcCross'\n                    className={'notification-close'}\n                    data_testid={'notification-close'}\n                    onClick={() => setShowBotStopMessage(false)}\n                />\n            </Toast>\n        </div>\n    );\n});\n\nexport default BotStopNotification;\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { Button, Icon } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport ContractResultOverlay from 'Components/contract-result-overlay';\nimport BotStopNotification from 'Components/dashboard/bot-stop-notification';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst CircularWrapper = ({ className }) => (\n    <div className={classNames('circular-wrapper', className)}>\n        <span className='static-circle' />\n        <span className='dynamic-circle' />\n    </div>\n);\n\nconst ContractStageText = ({ contract_stage }) => {\n    switch (contract_stage) {\n        case contract_stages.NOT_RUNNING:\n        default:\n            return <Localize i18n_default_text='Bot is not running' />;\n        case contract_stages.STARTING:\n            return <Localize i18n_default_text='Bot is starting' />;\n        case contract_stages.PURCHASE_SENT:\n            return <Localize i18n_default_text='Buying contract' />;\n        case contract_stages.PURCHASE_RECEIVED:\n            return <Localize i18n_default_text='Contract bought' />;\n        case contract_stages.IS_STOPPING:\n            return <Localize i18n_default_text='Bot is stopping' />;\n        case contract_stages.CONTRACT_CLOSED:\n            return <Localize i18n_default_text='Contract closed' />;\n    }\n};\n\nconst TradeAnimation = observer(({ className }) => {\n    const { run_panel, summary_card } = useDBotStore();\n    const { client } = useStore();\n    const { is_contract_completed, profit } = summary_card;\n    const {\n        contract_stage,\n        is_stop_button_visible,\n        is_stop_button_disabled,\n        onRunButtonClick,\n        onStopBotClick,\n        performSelfExclusionCheck,\n        should_show_overlay,\n        show_bot_stop_message,\n    } = run_panel;\n    const { account_status } = client;\n    const cashier_validation = account_status?.cashier_validation;\n    const [is_button_disabled, updateIsButtonDisabled] = React.useState(false);\n    const is_unavailable_for_payment_agent = cashier_validation?.includes('WithdrawServiceUnavailableForPA');\n\n    // perform self-exclusion checks which will be stored under the self-exclusion-store\n    React.useEffect(() => {\n        performSelfExclusionCheck();\n    }, []);\n\n    React.useEffect(() => {\n        if (is_button_disabled) {\n            setTimeout(() => {\n                updateIsButtonDisabled(false);\n            }, 1000);\n        }\n    }, [is_button_disabled]);\n\n    const status_classes = ['', '', ''];\n    let progress_status =\n        contract_stage -\n        (contract_stage === contract_stages.PURCHASE_SENT || contract_stage === contract_stages.PURCHASE_RECEIVED\n            ? 2\n            : 3);\n\n    if (progress_status >= 0) {\n        if (progress_status < status_classes.length) {\n            status_classes[progress_status] = 'active';\n        }\n\n        if (is_contract_completed) {\n            progress_status += 1;\n        }\n\n        for (let i = 0; i < progress_status; i++) {\n            status_classes[i] = 'completed';\n        }\n    }\n\n    return (\n        <div className={classNames('animation__wrapper', className)}>\n            <Button\n                is_disabled={(is_stop_button_disabled || is_button_disabled) && !is_unavailable_for_payment_agent}\n                className='animation__button'\n                id={is_stop_button_visible ? 'db-animation__stop-button' : 'db-animation__run-button'}\n                text={is_stop_button_visible ? localize('Stop') : localize('Run')}\n                icon={<Icon icon={is_stop_button_visible ? 'IcBotStop' : 'IcPlay'} color='active' />}\n                onClick={() => {\n                    updateIsButtonDisabled(true);\n                    if (is_stop_button_visible) {\n                        onStopBotClick();\n                        return;\n                    }\n                    onRunButtonClick();\n                }}\n                has_effect\n                {...(is_stop_button_visible || !is_unavailable_for_payment_agent ? { primary: true } : { green: true })}\n            />\n            {show_bot_stop_message && <BotStopNotification />}\n            <div\n                className={classNames('animation__container', className, {\n                    'animation--running': contract_stage > 0,\n                    'animation--completed': should_show_overlay && is_contract_completed,\n                })}\n            >\n                {should_show_overlay && is_contract_completed && <ContractResultOverlay profit={profit} />}\n                <span className='animation__text'>\n                    <ContractStageText contract_stage={contract_stage} />\n                </span>\n                <div className='animation__progress'>\n                    <div className='animation__progress-line'>\n                        <div className={`animation__progress-bar animation__progress-${contract_stage}`} />\n                    </div>\n                    {status_classes.map((status_class, i) => (\n                        <CircularWrapper key={i} className={status_class} />\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n});\n\nTradeAnimation.propTypes = {\n    className: PropTypes.string,\n};\n\nexport default TradeAnimation;\n","import TradeAnimation from './trade-animation.jsx';\nimport './trade-animation.scss';\n\nexport default TradeAnimation;\n","export const transaction_elements = Object.freeze({\n    CONTRACT: 'contract',\n    DIVIDER: 'divider',\n});\n","export const popover_zindex = Object.freeze({\n    QUICK_STRATEGY: 99999,\n    TOOLBAR: 100,\n    TRANSACTION: 10,\n    SUMMARY_TOOLTIPS: 5,\n    RUN_PANEL: 8,\n});\n","import React from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport ContentLoader from 'react-content-loader';\nimport { getContractTypeName } from '@deriv/bot-skeleton';\nimport { Icon, IconTradeTypes, Money, Popover } from '@deriv/components';\nimport { convertDateFormat } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { popover_zindex } from 'Constants/z-indexes';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst TransactionIconWithText = ({ icon, title, message, className }) => (\n    <React.Fragment>\n        <Popover\n            className={classNames(className, 'transactions__icon')}\n            alignment='left'\n            message={title}\n            zIndex={popover_zindex.TRANSACTION}\n        >\n            {icon}\n        </Popover>\n        {message}\n    </React.Fragment>\n);\n\nconst TransactionFieldLoader = () => (\n    <ContentLoader\n        className='transactions__loader-text'\n        height={10}\n        width={80}\n        speed={3}\n        backgroundColor={'var(--general-section-2)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='0' ry='0' width='100' height='12' />\n    </ContentLoader>\n);\n\nconst TransactionIconLoader = () => (\n    <ContentLoader\n        className='transactions__loader-icon'\n        speed={3}\n        width={24}\n        height={24}\n        backgroundColor={'var(--general-section-1)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='5' ry='5' width='24' height='24' />\n    </ContentLoader>\n);\n\nconst PopoverItem = ({ icon, title, children }) => (\n    <div className='transactions__popover-item'>\n        {icon && <div className='transaction__popover-icon'>{icon}</div>}\n        <div className='transactions__popover-details'>\n            <div className='transactions__popover-title'>{title}</div>\n            {children}\n        </div>\n    </div>\n);\n\nconst PopoverContent = ({ contract }) => (\n    <div className='transactions__popover-content'>\n        {contract.transaction_ids && (\n            <PopoverItem title={localize('Reference IDs')}>\n                {contract.transaction_ids.buy && (\n                    <div className='transactions__popover-value'>\n                        {`${contract.transaction_ids.buy} ${localize('(Buy)')}`}\n                    </div>\n                )}\n                {contract.transaction_ids.sell && (\n                    <div className='transactions__popover-value'>\n                        {`${contract.transaction_ids.sell} ${localize('(Sell)')}`}\n                    </div>\n                )}\n            </PopoverItem>\n        )}\n        {contract.tick_count && (\n            <PopoverItem title={localize('Duration')}>\n                <div className='transactions__popover-value'>{`${contract.tick_count} ${localize('ticks')}`}</div>\n            </PopoverItem>\n        )}\n        {(contract.barrier && (\n            <PopoverItem title={localize('Barrier')}>\n                <div className='transactions__popover-value'>{contract.barrier}</div>\n            </PopoverItem>\n        )) ||\n            (contract.high_barrier && contract.low_barrier && (\n                <PopoverItem title={localize('Barriers')}>\n                    <div className='transactions__popover-value'>{`${contract.high_barrier} ${localize(\n                        '(High)'\n                    )}`}</div>\n                    <div className='transactions__popover-value'>{`${contract.low_barrier} ${localize('(Low)')}`}</div>\n                </PopoverItem>\n            ))}\n        {contract.date_start && (\n            <PopoverItem title={localize('Start time')}>\n                <div className='transactions__popover-value'>\n                    {convertDateFormat(contract.date_start, 'YYYY-M-D HH:mm:ss [GMT]', 'YYYY-MM-DD HH:mm:ss [GMT]')}\n                </div>\n            </PopoverItem>\n        )}\n        {\n            contract.entry_tick && (\n                <PopoverItem title={localize('Entry spot')}>\n                    <div className='transactions__popover-value'>{contract.entry_tick}</div>\n                    {contract.entry_tick_time && (\n                        <div className='transactions__popover-value'>\n                            {convertDateFormat(\n                                contract.entry_tick_time,\n                                'YYYY-M-D HH:mm:ss [GMT]',\n                                'YYYY-MM-DD HH:mm:ss [GMT]'\n                            )}\n                        </div>\n                    )}\n                </PopoverItem>\n            )\n            // TODO: Durations for non-tick contracts, requires helpers from Trader.\n        }\n        {(contract.exit_tick && contract.exit_tick_time && (\n            <PopoverItem title={localize('Exit spot')}>\n                <div className='transactions__popover-value'>{contract.exit_tick}</div>\n                <div className='transactions__popover-value'>\n                    {convertDateFormat(contract.exit_tick_time, 'YYYY-M-D HH:mm:ss [GMT]', 'YYYY-MM-DD HH:mm:ss [GMT]')}\n                </div>\n            </PopoverItem>\n        )) ||\n            (contract.exit_tick && (\n                <PopoverItem title={localize('Exit time')}>\n                    <div className='transactions__popover-value'>{contract.exit_tick}</div>\n                </PopoverItem>\n            ))}\n    </div>\n);\n\nconst Transaction = observer(({ contract }) => {\n    const { transactions } = useDBotStore();\n    const { active_transaction_id, setActiveTransactionId } = transactions;\n\n    return (\n        <Popover\n            zIndex={popover_zindex.TRANSACTION}\n            alignment='left'\n            className='transactions__item-wrapper'\n            is_open={contract && active_transaction_id === contract.transaction_ids.buy}\n            message={contract && <PopoverContent contract={contract} />}\n        >\n            <div\n                className='transactions__item'\n                onClick={contract && (() => setActiveTransactionId(contract.transaction_ids.buy))}\n            >\n                <div className='transactions__cell transactions__trade-type'>\n                    <div className='transactions__loader-container'>\n                        {contract ? (\n                            <TransactionIconWithText\n                                icon={<Icon icon={`IcUnderlying${contract.underlying}`} size={16} />}\n                                title={contract.display_name}\n                            />\n                        ) : (\n                            <TransactionIconLoader />\n                        )}\n                    </div>\n                    <div className='transactions__loader-container'>\n                        {contract ? (\n                            <TransactionIconWithText\n                                icon={<IconTradeTypes type={contract.contract_type} size={16} />}\n                                title={getContractTypeName(contract)}\n                            />\n                        ) : (\n                            <TransactionIconLoader />\n                        )}\n                    </div>\n                </div>\n                <div className='transactions__cell transactions__entry-spot'>\n                    <TransactionIconWithText\n                        icon={<Icon icon='IcContractEntrySpot' />}\n                        title={localize('Entry spot')}\n                        message={(contract && contract.entry_tick) || <TransactionFieldLoader />}\n                    />\n                </div>\n                <div className='transactions__cell transactions__exit-spot'>\n                    <TransactionIconWithText\n                        icon={<Icon icon='IcContractExitSpot' />}\n                        title={localize('Exit spot')}\n                        message={(contract && contract.exit_tick) || <TransactionFieldLoader />}\n                    />\n                </div>\n                <div className='transactions__cell transactions__stake'>\n                    {contract ? (\n                        <Money amount={contract.buy_price} currency={contract.currency} show_currency />\n                    ) : (\n                        <TransactionFieldLoader />\n                    )}\n                </div>\n                <div className='transactions__cell transactions__profit'>\n                    {contract?.is_completed ? (\n                        <div\n                            className={classNames({\n                                'transactions__profit--win': contract.profit >= 0,\n                                'transactions__profit--loss': contract.profit < 0,\n                            })}\n                        >\n                            <Money amount={Math.abs(contract.profit)} currency={contract.currency} show_currency />\n                        </div>\n                    ) : (\n                        <TransactionFieldLoader />\n                    )}\n                </div>\n            </div>\n        </Popover>\n    );\n});\n\nTransaction.propTypes = {\n    contract: PropTypes.object,\n};\n\nexport default Transaction;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { PropTypes } from 'prop-types';\nimport { CSSTransition } from 'react-transition-group';\nimport { Button, DataList, Icon, Text, ThemedScrollbars } from '@deriv/components';\nimport { isMobile, useNewRowTransition } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport Download from 'Components/download';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { transaction_elements } from 'Constants/transactions';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport Transaction from './transaction.jsx';\n\nconst TransactionItem = ({ row, is_new_row }) => {\n    const { in_prop } = useNewRowTransition(is_new_row);\n\n    switch (row.type) {\n        case transaction_elements.CONTRACT: {\n            const { data: contract } = row;\n            return (\n                <CSSTransition in={in_prop} timeout={500} classNames='list__animation'>\n                    <Transaction contract={contract} />\n                </CSSTransition>\n            );\n        }\n        case transaction_elements.DIVIDER: {\n            return (\n                <div className='transactions__divider'>\n                    <div className='transactions__divider-line' />\n                </div>\n            );\n        }\n        default: {\n            return null;\n        }\n    }\n};\n\nconst Transactions = observer(({ is_drawer_open }) => {\n    const { run_panel, transactions } = useDBotStore();\n    const { contract_stage } = run_panel;\n    const { transactions: transaction_list, onMount, onUnmount, toggleTransactionDetailsModal } = transactions;\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    const is_mobile = isMobile();\n\n    return (\n        <div\n            className={classnames('transactions', {\n                'run-panel-tab__content': !is_mobile,\n                'run-panel-tab__content--mobile': is_mobile && is_drawer_open,\n            })}\n        >\n            <div className='download__container transaction-details__button-container'>\n                <Download tab='transactions' />\n                <Button\n                    id='download__container__view-detail-button'\n                    className='download__container__view-detail-button'\n                    is_disabled={!transaction_list?.length}\n                    text={localize('View Detail')}\n                    onClick={() => {\n                        toggleTransactionDetailsModal(true);\n                    }}\n                    secondary\n                    icon={<Icon icon='IcDbotViewDetail' size={18} />}\n                />\n            </div>\n            <div className='transactions__header'>\n                <span className='transactions__header-column transactions__header-type'>{localize('Type')}</span>\n                <span className='transactions__header-column transactions__header-spot'>\n                    {localize('Entry/Exit spot')}\n                </span>\n                <span className='transactions__header-column transactions__header-profit'>\n                    {localize('Buy price and P/L')}\n                </span>\n            </div>\n            <div\n                className={classnames({\n                    transactions__content: !is_mobile,\n                    'transactions__content--mobile': is_mobile,\n                })}\n            >\n                <div className='transactions__scrollbar'>\n                    {transaction_list?.length ? (\n                        <DataList\n                            className='transactions'\n                            data_source={transaction_list}\n                            rowRenderer={props => <TransactionItem {...props} />}\n                            keyMapper={row => {\n                                switch (row.type) {\n                                    case transaction_elements.CONTRACT: {\n                                        return row.data.transaction_ids.buy;\n                                    }\n                                    case transaction_elements.DIVIDER: {\n                                        return row.data;\n                                    }\n                                    default: {\n                                        return null;\n                                    }\n                                }\n                            }}\n                            getRowSize={({ index }) => {\n                                const row = transaction_list?.[index];\n                                switch (row.type) {\n                                    case transaction_elements.CONTRACT: {\n                                        return 50;\n                                    }\n                                    case transaction_elements.DIVIDER: {\n                                        return 21;\n                                    }\n                                    default: {\n                                        return 0;\n                                    }\n                                }\n                            }}\n                        />\n                    ) : (\n                        <>\n                            {contract_stage >= contract_stages.STARTING ? (\n                                <Transaction contract={null} />\n                            ) : (\n                                <ThemedScrollbars>\n                                    <div className='transactions-empty-box'>\n                                        <div className='transactions-empty'>\n                                            <div className='transactions-empty__icon-box'>\n                                                <Icon\n                                                    icon='IcBox'\n                                                    className='transactions-empty__icon'\n                                                    size={64}\n                                                    color='secondary'\n                                                />\n                                            </div>\n                                            <Text\n                                                as='h4'\n                                                size='xs'\n                                                weight='bold'\n                                                align='center'\n                                                color='less-prominent'\n                                                line_height='xxs'\n                                                className='transactions-empty__header'\n                                            >\n                                                {localize('There are no transactions to display')}\n                                            </Text>\n                                            <div className='transactions-empty__message'>\n                                                <Text size='xxs' color='less-prominent'>\n                                                    {localize('Here are the possible reasons:')}\n                                                </Text>\n                                                <ul className='transactions-empty__list'>\n                                                    <li>{localize('The bot is not running')}</li>\n                                                    <li>{localize('The stats are cleared')}</li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </ThemedScrollbars>\n                            )}\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n});\n\nTransactions.propTypes = {\n    is_drawer_open: PropTypes.bool,\n};\n\nexport default Transactions;\n","import Transactions from './transactions.jsx';\nimport './transactions.scss';\n\nexport default Transactions;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Button, Drawer, Modal, Money, Tabs, Text, ThemedScrollbars } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport Journal from 'Components/journal';\nimport SelfExclusion from 'Components/self-exclusion';\nimport Summary from 'Components/summary';\nimport TradeAnimation from 'Components/trade-animation';\nimport Transactions from 'Components/transactions';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { popover_zindex } from 'Constants/z-indexes';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TStatisticsTile = {\n    content: React.ElementType | string;\n    contentClassName: string;\n    title: string;\n};\n\ntype TStatisticsSummary = {\n    currency: string;\n    is_mobile: boolean;\n    lost_contracts: number;\n    number_of_runs: number;\n    total_stake: number;\n    total_payout: number;\n    toggleStatisticsInfoModal: () => void;\n    total_profit: number;\n    won_contracts: number;\n};\ntype TDrawerHeader = {\n    is_clear_stat_disabled: boolean;\n    is_mobile: boolean;\n    is_drawer_open: boolean;\n    onClearStatClick: () => void;\n};\n\ntype TDrawerContent = {\n    active_index: number;\n    is_drawer_open: boolean;\n    active_tour: string;\n    setActiveTabIndex: () => void;\n};\n\ntype TDrawerFooter = {\n    is_clear_stat_disabled: boolean;\n    onClearStatClick: () => void;\n};\n\ntype TStatisticsInfoModal = {\n    is_mobile: boolean;\n    is_statistics_info_modal_open: boolean;\n    toggleStatisticsInfoModal: () => void;\n};\n\nconst StatisticsTile = ({ content, contentClassName, title }: TStatisticsTile) => (\n    <div className='run-panel__tile'>\n        <div className='run-panel__tile-title'>{title}</div>\n        <div className={classNames('run-panel__tile-content', contentClassName)}>{content}</div>\n    </div>\n);\n\nexport const StatisticsSummary = ({\n    currency,\n    is_mobile,\n    lost_contracts,\n    number_of_runs,\n    total_stake,\n    total_payout,\n    toggleStatisticsInfoModal,\n    total_profit,\n    won_contracts,\n}: TStatisticsSummary) => (\n    <div\n        className={classNames('run-panel__stat', {\n            'run-panel__stat--mobile': is_mobile,\n        })}\n    >\n        <div className='run-panel__stat--info' onClick={toggleStatisticsInfoModal}>\n            <div className='run-panel__stat--info-item'>\n                <Localize i18n_default_text=\"What's this?\" />\n            </div>\n        </div>\n        <div className='run-panel__stat--tiles'>\n            <StatisticsTile\n                title={localize('Total stake')}\n                alignment='top'\n                content={<Money amount={total_stake} currency={currency} show_currency />}\n            />\n            <StatisticsTile\n                title={localize('Total payout')}\n                alignment='top'\n                content={<Money amount={total_payout} currency={currency} show_currency />}\n            />\n            <StatisticsTile title={localize('No. of runs')} alignment='top' content={number_of_runs} />\n            <StatisticsTile title={localize('Contracts lost')} alignment='bottom' content={lost_contracts} />\n            <StatisticsTile title={localize('Contracts won')} alignment='bottom' content={won_contracts} />\n            <StatisticsTile\n                title={localize('Total profit/loss')}\n                content={<Money amount={total_profit} currency={currency} has_sign show_currency />}\n                alignment='bottom'\n                contentClassName={classNames('run-panel__stat-amount', {\n                    'run-panel__stat-amount--positive': total_profit > 0,\n                    'run-panel__stat-amount--negative': total_profit < 0,\n                })}\n            />\n        </div>\n    </div>\n);\n\nconst DrawerHeader = ({ is_clear_stat_disabled, is_mobile, is_drawer_open, onClearStatClick }: TDrawerHeader) =>\n    is_mobile &&\n    is_drawer_open && (\n        <Button\n            id='db-run-panel__clear-button'\n            className='run-panel__clear-button'\n            is_disabled={is_clear_stat_disabled}\n            text={localize('Reset')}\n            onClick={onClearStatClick}\n            secondary\n        />\n    );\n\nconst DrawerContent = ({ active_index, is_drawer_open, active_tour, setActiveTabIndex, ...props }: TDrawerContent) => {\n    return (\n        <>\n            <Tabs active_index={active_index} onTabItemClick={setActiveTabIndex} top>\n                <div id='db-run-panel-tab__summary' label={localize('Summary')}>\n                    <Summary is_drawer_open={is_drawer_open} />\n                </div>\n                <div id='db-run-panel-tab__transactions' label={localize('Transactions')}>\n                    <Transactions is_drawer_open={is_drawer_open} />\n                </div>\n                <div id='db-run-panel-tab__journal' label={localize('Journal')}>\n                    <Journal />\n                </div>\n            </Tabs>\n            {(is_drawer_open || active_tour) && <StatisticsSummary {...props} />}\n        </>\n    );\n};\n\nconst DrawerFooter = ({ is_clear_stat_disabled, onClearStatClick }: TDrawerFooter) => (\n    <div className='run-panel__footer'>\n        <Button\n            id='db-run-panel__clear-button'\n            className='run-panel__footer-button'\n            is_disabled={is_clear_stat_disabled}\n            text={localize('Reset')}\n            onClick={onClearStatClick}\n            has_effect\n            secondary\n        />\n    </div>\n);\n\nconst MobileDrawerFooter = () => {\n    return (\n        <div className='controls__section'>\n            <div className='controls__buttons'>\n                <TradeAnimation className='controls__animation' should_show_overlay info_direction={'right'} />\n            </div>\n        </div>\n    );\n};\n\nconst StatisticsInfoModal = ({\n    is_mobile,\n    is_statistics_info_modal_open,\n    toggleStatisticsInfoModal,\n}: TStatisticsInfoModal) => {\n    return (\n        <Modal\n            className={classNames('statistics__modal', { 'statistics__modal--mobile': is_mobile })}\n            title={localize(\"What's this?\")}\n            is_open={is_statistics_info_modal_open}\n            toggleModal={toggleStatisticsInfoModal}\n            width={'440px'}\n        >\n            <Modal.Body>\n                <div className={classNames('statistics__modal-body', { 'statistics__modal-body--mobile': is_mobile })}>\n                    <ThemedScrollbars className='statistics__modal-scrollbar'>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content no-margin'>\n                            {localize('Total stake')}\n                        </Text>\n                        <Text as='p'>{localize('Total stake since you last cleared your stats.')}</Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Total payout')}\n                        </Text>\n                        <Text as='p'>{localize('Total payout since you last cleared your stats.')}</Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('No. of runs')}\n                        </Text>\n                        <Text as='p'>\n                            {localize(\n                                'The number of times your bot has run since you last cleared your stats. Each run includes the execution of all the root blocks.'\n                            )}\n                        </Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Contracts lost')}\n                        </Text>\n                        <Text as='p'>\n                            {localize('The number of contracts you have lost since you last cleared your stats.')}\n                        </Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Contracts won')}\n                        </Text>\n                        <Text as='p'>\n                            {localize('The number of contracts you have won since you last cleared your stats.')}\n                        </Text>\n                        <Text as='p' weight='bold' className='statistics__modal-body--content'>\n                            {localize('Total profit/loss')}\n                        </Text>\n                        <Text as='p'>\n                            {localize(\n                                'Your total profit/loss since you last cleared your stats. It is the difference between your total payout and your total stake.'\n                            )}\n                        </Text>\n                    </ThemedScrollbars>\n                </div>\n            </Modal.Body>\n        </Modal>\n    );\n};\n\nconst RunPanel = observer(() => {\n    const { run_panel, dashboard } = useDBotStore();\n    const {\n        client,\n        ui: { is_mobile },\n    } = useStore();\n    const { currency } = client;\n    const {\n        active_index,\n        is_drawer_open,\n        is_statistics_info_modal_open,\n        is_clear_stat_disabled,\n        onClearStatClick,\n        onMount,\n        onRunButtonClick,\n        onUnmount,\n        setActiveTabIndex,\n        toggleDrawer,\n        toggleStatisticsInfoModal,\n        statistics,\n    } = run_panel;\n    const { active_tour, active_tab } = dashboard;\n    const { total_payout, total_profit, total_stake, won_contracts, lost_contracts, number_of_runs } = statistics;\n    const { BOT_BUILDER, CHART } = DBOT_TABS;\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    React.useEffect(() => {\n        if (is_mobile) {\n            toggleDrawer(false);\n        }\n    }, []);\n\n    const content = (\n        <DrawerContent\n            active_index={active_index}\n            currency={currency}\n            is_drawer_open={is_drawer_open}\n            is_mobile={is_mobile}\n            lost_contracts={lost_contracts}\n            number_of_runs={number_of_runs}\n            setActiveTabIndex={setActiveTabIndex}\n            toggleStatisticsInfoModal={toggleStatisticsInfoModal}\n            total_payout={total_payout}\n            total_profit={total_profit}\n            total_stake={total_stake}\n            won_contracts={won_contracts}\n            active_tour={active_tour}\n        />\n    );\n\n    const footer = <DrawerFooter is_clear_stat_disabled={is_clear_stat_disabled} onClearStatClick={onClearStatClick} />;\n\n    const header = (\n        <DrawerHeader\n            is_clear_stat_disabled={is_clear_stat_disabled}\n            is_mobile={is_mobile}\n            is_drawer_open={is_drawer_open}\n            onClearStatClick={onClearStatClick}\n        />\n    );\n\n    const show_run_panel = [BOT_BUILDER, CHART].includes(active_tab) || active_tour;\n    if ((!show_run_panel && !is_mobile) || active_tour === 'bot_builder') return null;\n\n    return (\n        <>\n            <div className={is_mobile && is_drawer_open ? 'run-panel__container--mobile' : 'run-panel'}>\n                <Drawer\n                    anchor='right'\n                    className={classNames('run-panel', {\n                        'run-panel__container': !is_mobile,\n                        'run-panel__container--tour-active': !is_mobile && active_tour,\n                    })}\n                    contentClassName='run-panel__content'\n                    header={header}\n                    footer={!is_mobile && footer}\n                    is_open={is_drawer_open}\n                    toggleDrawer={toggleDrawer}\n                    width={366}\n                    zIndex={popover_zindex.RUN_PANEL}\n                >\n                    {content}\n                </Drawer>\n                {is_mobile && <MobileDrawerFooter />}\n            </div>\n            <SelfExclusion onRunButtonClick={onRunButtonClick} />\n            <StatisticsInfoModal\n                is_mobile={is_mobile}\n                is_statistics_info_modal_open={is_statistics_info_modal_open}\n                toggleStatisticsInfoModal={toggleStatisticsInfoModal}\n            />\n        </>\n    );\n});\n\nexport default RunPanel;\n","import RunPanel from './run-panel';\nimport './run-panel.scss';\n\nexport default RunPanel;\n","import React from 'react';\nimport TradeAnimation from 'Components/trade-animation';\n\nconst RunStrategy = () => (\n    <div className='toolbar__section' data-testid='dt_run_strategy'>\n        <TradeAnimation className='toolbar__animation' should_show_overlay info_direction='left' />\n    </div>\n);\n\nexport default RunStrategy;\n","import React from 'react';\nimport ReactJoyride, { CallBackProps, Step, Styles } from 'react-joyride';\n\nimport { localize } from '@deriv/translations';\n\nconst common_tour_button_properties = {\n    fontWeight: '700',\n    fontSize: '1.4rem',\n    height: '4rem',\n    padding: '1rem 1.6rem',\n};\n\ninterface IReactJoyrideWrapperProps {\n    steps: Step[];\n    styles: Styles;\n    handleCallback: (data: CallBackProps) => void;\n}\n\nconst ReactJoyrideWrapper: React.FC<IReactJoyrideWrapperProps> = ({ steps, styles, handleCallback, ...props }) => {\n    return (\n        <ReactJoyride\n            steps={steps}\n            continuous\n            callback={handleCallback}\n            locale={{ back: localize('Previous'), next: localize('Next') }}\n            {...props}\n            styles={{\n                options: {\n                    arrowColor: 'var(--general-main-2)',\n                    backgroundColor: 'var(--general-main-2)',\n                    primaryColor: 'var(--brand-red-coral)',\n                    textColor: 'var(--text-general)',\n                    spotlightShadow: '0 0 15px rgba(0, 0, 0, 0.5)',\n                    width: 440,\n                },\n                buttonBack: {\n                    border: '0.2rem solid var(--text-less-prominent)',\n                    marginRight: '1rem',\n                    borderRadius: '0.4rem',\n                    color: 'var(--text-general)',\n                    ...common_tour_button_properties,\n                },\n                buttonNext: {\n                    ...common_tour_button_properties,\n                },\n                overlay: {\n                    height: '100%',\n                },\n                ...styles,\n            }}\n        />\n    );\n};\n\nexport default ReactJoyrideWrapper;\n","import React from 'react';\n\nimport { getUUID } from '@deriv/bot-skeleton/src/services/tradeEngine/utils/helpers';\nimport { Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\n\ntype TTourSteps = {\n    content: string[] | React.ReactElement[];\n    media?: string;\n    label: string | boolean;\n    step_index: number;\n    show_actions?: boolean;\n    has_localize_component?: boolean;\n};\n\nconst TourSteps = observer(\n    ({ content, media, label, step_index, has_localize_component = false, show_actions = true }: TTourSteps) => {\n        return (\n            <React.Fragment>\n                <div className='onboard'>\n                    {show_actions && (\n                        <div className='onboard__header'>\n                            <Text color='less-prominent' line_height='l'>\n                                {step_index}/6\n                            </Text>\n                        </div>\n                    )}\n                    <div className='onboard__steps'>\n                        <div className='onboard__label'>\n                            <Text as='h' line_height='l' weight='bold'>\n                                {label}\n                            </Text>\n                        </div>\n\n                        {media && (\n                            <video\n                                autoPlay={true}\n                                loop\n                                controls\n                                preload='auto'\n                                playsInline\n                                disablePictureInPicture\n                                controlsList='nodownload'\n                                style={{ width: '100%' }}\n                                src={media}\n                            />\n                        )}\n\n                        <div className='onboard__content'>\n                            <>\n                                {content.map((content_data, index) => {\n                                    return has_localize_component ? (\n                                        content_data\n                                    ) : (\n                                        <div className='onboard__content__block' key={`onboard--${getUUID()}`}>\n                                            <Text align='left' as='h' size='xs' line_height='l'>\n                                                {content_data}\n                                            </Text>\n                                        </div>\n                                    );\n                                })}\n                            </>\n                        </div>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n);\n\nexport default TourSteps;\n","import React from 'react';\n\nimport { Icon, Text } from '@deriv/components';\nimport { getUrlBase, isMobile } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { getImageLocation } from '../../../../public-path';\nimport TourSteps from '../common/tour-steps';\n\nconst is_mobile = isMobile();\n\ntype TJoyrideConfig = Record<\n    'showProgress' | 'spotlightClicks' | 'disableBeacon' | 'disableOverlay' | 'disableCloseOnEsc',\n    boolean\n>;\n\nconst joyride_props: TJoyrideConfig = {\n    showProgress: false,\n    spotlightClicks: false,\n    disableBeacon: true,\n    disableOverlay: true,\n    disableCloseOnEsc: true,\n};\n\nexport const DBOT_ONBOARDING = [\n    {\n        target: '#id-bot-builder',\n        content: (\n            <TourSteps\n                label={localize('Build from scratch')}\n                content={[\n                    localize(\n                        'Create your bot using our drag-and-drop blocks or click Quick Strategy to choose from the ready-to-use bot templates.'\n                    ),\n                    localize(\n                        'We also provide a guide on the Tutorial tab to show you how you can build and execute a simple strategy.'\n                    ),\n                ]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-1.mp4')}\n                step_index={1}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#id-charts',\n        content: (\n            <TourSteps\n                label={localize('Monitor the market')}\n                content={[localize('View the market price of your favourite assets.')]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-2.mp4')}\n                step_index={2}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#id-tutorials',\n        content: (\n            <TourSteps\n                label={localize('Learn more with our tutorials')}\n                content={[localize('Explore the video guides and FAQs to build your bot in the tutorials tab.')]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-3.mp4')}\n                step_index={3}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#tab__dashboard__table__tiles',\n        content: (\n            <TourSteps\n                label={localize('Use these shortcuts')}\n                content={[localize('You can also import or build your bot using any of these shortcuts.')]}\n                step_index={4}\n            />\n        ),\n        placement: 'right',\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '.dc-drawer__container',\n        content: (\n            <TourSteps\n                label={localize('Check your bot’s performance')}\n                content={[localize('See how your bot is doing in real-time.')]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-5.mp4')}\n                step_index={5}\n            />\n        ),\n        placement: 'left',\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '.animation__wrapper',\n        content: (\n            <TourSteps\n                label={localize('Run your bot')}\n                content={[\n                    <Localize\n                        key='run your bot'\n                        i18n_default_text='Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.'\n                        components={[<strong key={0} />]}\n                    />,\n                ]}\n                media={getUrlBase('/public/videos/dbot-onboarding-tour-step-6.mp4')}\n                step_index={6}\n            />\n        ),\n        ...joyride_props,\n        disableOverlay: false,\n    },\n    {\n        target: '#id-tutorials',\n        content: (\n            <TourSteps\n                label={localize('Want to retake the tour?')}\n                content={[\n                    <Text key={`${0}-id-tutorials`} as='p'>\n                        <Localize i18n_default_text={`Head to the Tutorials tab to do so.`} />\n                    </Text>,\n                ]}\n                step_index={7}\n                show_actions={false}\n                has_localize_component\n            />\n        ),\n        locale: { last: localize('Got it, thanks!') },\n        ...joyride_props,\n        hideBackButton: true,\n        disableOverlay: false,\n    },\n];\n\nconst Step1 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 1 :' />\n            </div>\n        )}\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text={'First, set the <0>Trade parameters</0> block.'}\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left joyride-content__sub-title'>\n            <Localize i18n_default_text='<0>1. Trade parameters:<0>' components={[<strong key={0} />]} />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize\n                        i18n_default_text='First, set <0>Market</0> to Derived > Continuous Indices > Volatility 100 (1s) Index.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Then, set <0>Trade type</0> to Up/Down > Rise/Fall.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='For <0>Contract type,</0> set it to Both.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='For <0>Default candle interval,</0> set it to 1 minute'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n        </div>\n    </div>\n);\n\nconst Step1A = () => (\n    <div className='joyride-content'>\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='For <0>Trade options</0>, set it as below:'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize i18n_default_text='<0>Duration</0>: Ticks 1' components={[<strong key={0} />]} />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='<0>Stake: USD</0> 10 (min: 0.35 - max: 50000)'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n        </div>\n    </div>\n);\n\nconst Step2 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 2 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Then, set the <0>Purchase conditions</0> block.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left joyride-content__sub-title'>\n            <Localize i18n_default_text='<0>2. Purchase conditions</0>:' components={[<strong key={0} />]} />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize i18n_default_text='<0>Purchase</0>: Rise' components={[<strong key={0} />]} />\n                </li>\n            </ul>\n        </div>\n    </div>\n);\n\nconst Step3 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left joyride-content__left__step-three'>\n                <Localize i18n_default_text='Step 3 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='The third block is <0>optional</0>. You may use this block if you want to sell your contract before it expires. For now, leave the block as it is. '\n                components={[<strong key={0} />]}\n            />\n        </div>\n    </div>\n);\n\nconst Step4 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 4 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Next, go to <0>Utility tab</0> under the Blocks menu. Tap the drop-down arrow and hit <0>Loops</0>.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize\n                        i18n_default_text='Look for the <0>Repeat While/Until</0>, and click the + icon to add the block to the workspace area.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Choose <0>until</0> as the repeat option.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n            <div className='joyride-content__left joyride-content__with-icon'>\n                <div className='joyride-content__with-icon__left'>\n                    <Icon icon='IcCheckmarkCircle' className='db-contract-card__result-icon' color='green' />\n                </div>\n                <div className='joyride-content__with-icon__right'>\n                    <Localize\n                        i18n_default_text='Pro tip: You can also click and drag out the desired block'\n                        components={[<strong key={0} />]}\n                    />\n                </div>\n            </div>\n        </div>\n        <div>\n            <video autoPlay loop controls playsInline preload='auto' disablePictureInPicture controlsList='nodownload'>\n                <source src={getUrlBase('/public/videos/bot-builder-tour-step-4.mp4')} type='video/mp4' />\n            </video>\n        </div>\n    </div>\n);\n\nconst Step5 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 5 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Now, tap the <0>Analysis</0> drop-down arrow and hit <0>Contract</0>.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n        <div className='joyride-content__left'>\n            <ul>\n                <li>\n                    <Localize\n                        i18n_default_text='Go to the <0>Last trade result</0> block and click + icon to add the <0>Result is Win</0> block to the workspace.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Then, drag the <0>Result is win</0> into the empty slot next to <0>repeat until</0> block.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Now, go to the <0>Restart trading conditions</0> block.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n                <li>\n                    <Localize\n                        i18n_default_text='Drag the <0>Trade again</0> block and add it into the <0>do</0> part of the <0>Repeat until</0> block.'\n                        components={[<strong key={0} />]}\n                    />\n                </li>\n            </ul>\n        </div>\n        <div>\n            <video autoPlay loop controls playsInline preload='auto' disablePictureInPicture controlsList='nodownload'>\n                <source src={getUrlBase('/public/videos/bot-builder-tour-step-5.mp4')} type='video/mp4' />\n            </video>\n        </div>\n    </div>\n);\n\nconst Step6 = ({ show_label = false }) => (\n    <div className='joyride-content'>\n        {show_label && (\n            <div className='joyride-content__left'>\n                <Localize i18n_default_text='Step 6 :' />\n            </div>\n        )}\n\n        <div className='joyride-content__left'>\n            <Localize\n                i18n_default_text='Finally, drag and add the whole <0>Repeat</0> block to the <0>Restart trading conditions</0> block.'\n                components={[<strong key={0} />]}\n            />\n        </div>\n    </div>\n);\n\nexport const BOT_BUILDER_TOUR = [\n    {\n        target: '.animation__wrapper',\n        content: <Step1 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step1A />,\n        placement: 'bottom',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step2 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step3 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step4 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step5 show_label />,\n        placement: 'right',\n        ...joyride_props,\n    },\n    {\n        target: '.animation__wrapper',\n        content: <Step6 show_label />,\n        locale: { last: localize('Next') },\n        ...joyride_props,\n    },\n];\n\nexport type TMobileTourConfig = {\n    header: string;\n    content: Array<React.ReactElement>;\n    tour_step_key: number;\n    img?: string;\n    media?: string;\n};\n\nexport const BOT_BUILDER_MOBILE: TMobileTourConfig[] = [\n    {\n        header: localize('Step 1'),\n        content: [<Localize key='step-1' i18n_default_text={`First, click the Import icon on the tool bar.`} />],\n        tour_step_key: 1,\n    },\n    {\n        header: localize('Step 2'),\n        content: [\n            <Localize\n                key='step-2'\n                i18n_default_text={`Next, import your bot directly from your mobile device or from Google Drive.`}\n            />,\n        ],\n        tour_step_key: 2,\n    },\n    {\n        header: localize('Step 3'),\n        content: [\n            <Localize\n                key='step-3'\n                i18n_default_text={`Once imported, you will see a preview of the bot on the workspace. Click run to start trading with this bot.`}\n            />,\n        ],\n        tour_step_key: 3,\n    },\n];\n\nexport const DBOT_ONBOARDING_MOBILE: TMobileTourConfig[] = [\n    {\n        header: localize('Get started on Deriv Bot'),\n        content: [\n            <Localize\n                key='get-started-on-deriv-bot'\n                i18n_default_text='Hi! Hit <0>Start</0> for a quick tour.'\n                components={[<strong key={0} />]}\n            />,\n        ],\n        tour_step_key: 1,\n    },\n    {\n        header: localize('Import or choose your bot'),\n        content: [\n            <Localize\n                key='import-or-choose-your-bot'\n                i18n_default_text='Import your bot or tap Quick Strategies to choose from the ready-to-use bot templates.'\n            />,\n        ],\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-1.mp4'),\n        tour_step_key: 2,\n    },\n    {\n        header: localize('Monitor the market'),\n        content: [\n            <Localize key='monitor-the-market' i18n_default_text='View the market price of your favourite assets.' />,\n        ],\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-2.mp4'),\n        tour_step_key: 3,\n    },\n    {\n        header: localize('Learn more with our tutorials'),\n        content: [\n            <Localize\n                key='learn-more-with-our-tutorials'\n                i18n_default_text='Explore the video guides and FAQs to build your bot in the tutorials tab.'\n            />,\n        ],\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-3.mp4'),\n        tour_step_key: 4,\n    },\n    {\n        header: localize('Use these shortcuts'),\n        img: getImageLocation('dbot-mobile-onboarding-step-4.png'),\n        content: [\n            <Localize\n                key='use-these-shortcuts'\n                i18n_default_text='You can also import or build your bot using any of these shortcuts.'\n            />,\n        ],\n        tour_step_key: 5,\n    },\n    {\n        header: localize('Check your bot’s performance'),\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-5.mp4'),\n        content: [\n            <Localize key='check-your-bots-performance' i18n_default_text='See how your bot is doing in real-time.' />,\n        ],\n        tour_step_key: 6,\n    },\n    {\n        header: localize('Run your bot'),\n        media: getUrlBase('/public/videos/dbot-mobile-onboarding-step-6.mp4'),\n        content: [\n            <Localize\n                key='run-your-bot'\n                i18n_default_text='Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.'\n                components={[<strong key={0} />]}\n            />,\n        ],\n        tour_step_key: 7,\n    },\n    {\n        header: localize('Want to retake the tour?'),\n        img: getImageLocation('dbot-mobile-onboarding-step-7.png'),\n        content: [<Localize key='want-to-retake-the-tour' i18n_default_text='Head to the Tutorials tab to do so.' />],\n        tour_step_key: 8,\n    },\n];\n\nexport const tourDialogInfo = is_mobile ? (\n    <Localize\n        key='tour-dialog-info-mobile'\n        i18n_default_text='Here’s a quick guide on how to use Deriv Bot on the go.'\n    />\n) : (\n    <Localize\n        key='tour-dialog-info-desktop'\n        i18n_default_text='Learn how to build your bot from scratch using a simple strategy.'\n    />\n);\n\nexport const tourDialogAction = is_mobile ? (\n    <Localize\n        key='tour-dialog-action-mobile'\n        i18n_default_text='You can import a bot from your mobile device or from Google drive, see a preview in the bot builder, and start trading by running the bot.'\n    />\n) : (\n    <Localize\n        key='tour-dialog-action-desktop'\n        i18n_default_text='Hit the <0>Start</0> button to begin and follow the tutorial.'\n    />\n);\n\nexport const onboarding_tour_header = (\n    <Localize key='onboarding-tour-header' i18n_default_text='Get started on Deriv Bot' />\n);\n\nexport const bot_builder_tour_header = is_mobile ? (\n    <Localize key='tour_header-mobile' i18n_default_text='Bot Builder guide' />\n) : (\n    <Localize key='tour_header-desktop' i18n_default_text=\"Let's build a Bot!\" />\n);\n","import React from 'react';\n\nimport { Dialog, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { DBOT_TABS } from 'Constants/bot-contents';\n\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport { bot_builder_tour_header, onboarding_tour_header, tourDialogAction, tourDialogInfo } from '../config';\nimport { setTourSettings, tour_list } from '../utils';\n\nconst TourStartDialog = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { active_tab, is_tour_dialog_visible, setTourDialogVisibility, setActiveTour, setShowMobileTourDialog } =\n        dashboard;\n\n    const is_mobile = isMobile();\n    const tour_token = active_tab === 0 ? 'onboard_tour_token' : 'bot_builder_token';\n    const toggleTour = () => {\n        if (is_mobile) setShowMobileTourDialog(false);\n        setTourDialogVisibility(false);\n        setActiveTour('');\n        setTourSettings(new Date().getTime(), tour_token);\n    };\n\n    const onboard_tour = active_tab === DBOT_TABS.DASHBOARD;\n\n    const getTourContent = () => {\n        return (\n            <>\n                {onboard_tour ? (\n                    <Localize\n                        key={0}\n                        i18n_default_text='Hi! Hit <0>Start</0> for a quick tour.'\n                        components={[<strong key={0} />]}\n                    />\n                ) : (\n                    <>\n                        <div className='dc-dialog__content__description__text'>{tourDialogInfo}</div>\n                        <div className='dc-dialog__content__description__text'>{tourDialogAction}</div>\n                        <div className='dc-dialog__content__description__text'>\n                            <Localize\n                                key={0}\n                                i18n_default_text={'Note: You can also find this tutorial in the <0>Tutorials</0> tab.'}\n                                components={[<strong key={0} />]}\n                            />\n                        </div>\n                    </>\n                )}\n            </>\n        );\n    };\n\n    const onHandleConfirm = () => {\n        setActiveTour(tour_list[active_tab]);\n        if (is_mobile) setShowMobileTourDialog(false);\n        setTourDialogVisibility(false);\n        setTourSettings(new Date().getTime(), tour_token);\n    };\n    const header_text_size = is_mobile ? 'xs' : 's';\n    const content_text_size = is_mobile ? 'xxs' : 'xs';\n\n    const tour_headers = active_tab === 0 ? onboarding_tour_header : bot_builder_tour_header;\n    return (\n        <div>\n            <Dialog\n                is_visible={is_tour_dialog_visible}\n                cancel_button_text={localize('Skip')}\n                onCancel={() => toggleTour()}\n                confirm_button_text={localize('Start')}\n                onConfirm={onHandleConfirm}\n                is_mobile_full_width\n                className={'dc-dialog tour-dialog'}\n                has_close_icon={false}\n            >\n                <div className='dc-dialog__content__header'>\n                    <Text weight='bold' color='prominent' size={header_text_size}>\n                        {tour_headers}\n                    </Text>\n                </div>\n                <div className='dc-dialog__content__description'>\n                    <Text size={content_text_size} color='prominent'>\n                        {getTourContent()}\n                    </Text>\n                </div>\n            </Dialog>\n        </div>\n    );\n});\n\nexport default TourStartDialog;\n","import { useState } from 'react';\nimport { CallBackProps } from 'react-joyride';\n\nexport const useTourHandler = () => {\n    const [is_finished, setIsFinished] = useState(false);\n    const [is_close_tour, setIsCloseTour] = useState(false);\n\n    const handleJoyrideCallback = (data: CallBackProps) => {\n        const { action, status } = data;\n        if (status === 'finished') {\n            setIsFinished(true);\n        } else if (action === 'close' || action === 'skip') {\n            setIsCloseTour(true);\n        }\n    };\n\n    return {\n        is_finished,\n        handleJoyrideCallback,\n        setIsFinished,\n        is_close_tour,\n        setIsCloseTour,\n    };\n};\n","import React from 'react';\n\nimport { observer } from '@deriv/stores';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport ReactJoyrideWrapper from '../common/react-joyride-wrapper';\nimport TourStartDialog from '../common/tour-start-dialog';\nimport { DBOT_ONBOARDING } from '../config';\nimport { useTourHandler } from '../hooks/useTourHandler';\n\nconst OnboardingTourDesktop = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { active_tab, active_tour, setActiveTour, setTourDialogVisibility } = dashboard;\n    const { is_close_tour, is_finished, handleJoyrideCallback, setIsCloseTour } = useTourHandler();\n    React.useEffect(() => {\n        if (is_close_tour || is_finished) {\n            setIsCloseTour(false);\n            setActiveTour('');\n        }\n    }, [is_close_tour, is_finished, setActiveTour, setIsCloseTour]);\n\n    const token = getSetting('onboard_tour_token');\n    if (!token && active_tab === 0) setTourDialogVisibility(true);\n\n    return (\n        <>\n            <TourStartDialog />\n            {active_tour && (\n                <ReactJoyrideWrapper handleCallback={handleJoyrideCallback} steps={DBOT_ONBOARDING} spotlightClicks />\n            )}\n        </>\n    );\n});\n\nexport default OnboardingTourDesktop;\n","import React from 'react';\n\nimport { Text } from '@deriv/components';\n\ntype TTourButton = {\n    type?: string;\n    onClick: () => void;\n    label: string;\n};\n\nconst TourButton = ({ label, type = 'default', ...props }: TTourButton) => {\n    if (!label) return null;\n    return (\n        <button className={type} {...props}>\n            <Text color='prominent' align='center' weight='bold' as='span' line_height='s' size='xs'>\n                {label}\n            </Text>\n        </button>\n    );\n};\n\nexport default TourButton;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Icon, ProgressBarTracker, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport TourButton from '../common/tour-button';\nimport { DBOT_ONBOARDING_MOBILE, TMobileTourConfig } from '../config';\n\nconst default_tour_data = {\n    content: [],\n    header: '',\n    img: '',\n    tour_step_key: 1,\n};\n\ntype TTourData = TMobileTourConfig & {\n    img: string;\n    tour_step_key: number;\n};\n\nconst OnboardingTourMobile = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { onCloseTour, onTourEnd, setTourActiveStep, active_tour, active_tab, setActiveTour } = dashboard;\n    const [tour_step, setStep] = React.useState<number>(1);\n    const [tour_data, setTourData] = React.useState<TTourData>(default_tour_data);\n    const { content, header, img, media, tour_step_key } = tour_data;\n    const start_button = tour_step === 1 ? localize('Start') : localize('Next');\n    const tour_button_text = tour_step === 8 ? localize('Got it, thanks!') : start_button;\n    const test_id = tour_step_key === 8 ? 'finish-onboard-tour' : 'next-onboard-tour';\n    const hide_prev_button = [1, 2, 8];\n    const is_tour_active = active_tour === 'onboarding';\n\n    React.useEffect(() => {\n        DBOT_ONBOARDING_MOBILE.forEach(data => {\n            if (data.tour_step_key === tour_step) {\n                setTourData(data);\n            }\n            setTourActiveStep(tour_step);\n        });\n    }, [tour_step]);\n\n    const token = getSetting('onboard_tour_token');\n    if (!token && active_tab === 0) setActiveTour('onboarding');\n\n    if (!active_tour) {\n        return null;\n    }\n\n    return (\n        <div\n            className={classNames('dbot-slider', {\n                'dbot-slider--active': tour_step === 1,\n                'dbot-slider--tour-position': tour_step !== 1,\n            })}\n            data-testid='onboarding-tour-mobile'\n        >\n            {tour_step_key !== 1 && (\n                <div className='dbot-slider__navbar'>\n                    <Text\n                        color='less-prominent'\n                        weight='less-prominent'\n                        line_height='s'\n                        size='xxs'\n                        data-testid='dbot-onboard-slider__navbar'\n                    >{`${tour_step_key - 1}/7`}</Text>\n                    <span onClick={onCloseTour}>\n                        <Icon\n                            icon='IcCross'\n                            data_testid='exit-onboard-tour'\n                            className='db-contract-card__result-icon'\n                            color='secondary'\n                        />\n                    </span>\n                </div>\n            )}\n            {header && (\n                <Text\n                    color='prominent'\n                    weight='bold'\n                    align='center'\n                    className='dbot-slider__title'\n                    as='span'\n                    line_height='s'\n                    size='xs'\n                >\n                    {localize(header)}\n                </Text>\n            )}\n            {media && (\n                <div className='dbot-slider__media'>\n                    <video\n                        autoPlay={true}\n                        loop\n                        controls\n                        preload='auto'\n                        playsInline\n                        disablePictureInPicture\n                        controlsList='nodownload'\n                        src={media}\n                    />\n                </div>\n            )}\n            {img && (\n                <div className='dbot-slider__image'>\n                    <img src={img} />\n                </div>\n            )}\n\n            {content && (\n                <>\n                    {content.map(data => {\n                        return (\n                            <Text\n                                key={data}\n                                align='center'\n                                color='prominent'\n                                className='dbot-slider__content'\n                                as='div'\n                                line_height='s'\n                                size='xxs'\n                            >\n                                {data}\n                            </Text>\n                        );\n                    })}\n                </>\n            )}\n            <div className='dbot-slider__status'>\n                <div className='dbot-slider__progress-bar'>\n                    <ProgressBarTracker\n                        step={tour_step}\n                        steps_list={DBOT_ONBOARDING_MOBILE.map(v => v.tour_step_key.toString())}\n                        setStep={setStep}\n                    />\n                </div>\n                <div className='dbot-slider__button-group'>\n                    {tour_step === 1 && (\n                        <TourButton\n                            onClick={() => {\n                                onCloseTour();\n                            }}\n                            label={localize('Skip')}\n                            data-testid='skip-onboard-tour'\n                        />\n                    )}\n                    {!hide_prev_button.includes(tour_step) && (\n                        <TourButton\n                            onClick={() => {\n                                setStep(tour_step - 1);\n                            }}\n                            label={localize('Previous')}\n                            data-testid='prev-onboard-tour'\n                        />\n                    )}\n                    <TourButton\n                        type='danger'\n                        onClick={() => {\n                            setStep(tour_step + 1);\n                            onTourEnd(tour_step, is_tour_active);\n                        }}\n                        label={tour_button_text}\n                        data-testid={test_id}\n                    />\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default OnboardingTourMobile;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { isMobile } from '@deriv/shared';\n\nimport OnboardingTourDesktop from './onboarding-tour-desktop';\nimport OnboardingTourMobile from './onboarding-tour-mobile';\n\nconst is_mobile = isMobile();\nconst OnboardTourHandler = observer(() => {\n    return <>{is_mobile ? <OnboardingTourMobile /> : <OnboardingTourDesktop />}</>;\n});\n\nexport default OnboardTourHandler;\n","import React from 'react';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst WorkspaceControl = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { onZoomInOutClick } = dashboard;\n    return (\n        <div className='load-strategy__preview-workspace-controls'>\n            <Icon\n                icon={'IcAddRounded'}\n                className='load-strategy__preview-workspace-icon'\n                custom_color='$color-black-1'\n                onClick={() => onZoomInOutClick(true)}\n            />\n            <Icon\n                icon={'IcMinusRounded'}\n                className='load-strategy__preview-workspace-icon'\n                custom_color='$color-black-1'\n                onClick={() => onZoomInOutClick(false)}\n            />\n        </div>\n    );\n});\n\nexport default WorkspaceControl;\n","import React, { RefObject } from 'react';\nimport WorkspaceControl from './workspace-control';\n\ntype TBotPreview = {\n    id_ref: RefObject<HTMLDivElement>;\n};\n\nconst BotPreview = ({ id_ref }: TBotPreview) => {\n    return (\n        <div className='load-strategy__preview-workspace-container' id='load-strategy__blockly-container' ref={id_ref}>\n            <WorkspaceControl />\n        </div>\n    );\n};\n\nexport default BotPreview;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Dialog, Icon, MobileWrapper, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { clearInjectionDiv } from 'Constants/load-modal';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport BotPreview from './bot-preview';\nimport './index.scss';\n\nconst LocalComponent = observer(() => {\n    const { load_modal, save_modal, dashboard } = useDBotStore();\n    const { handleFileChange, loadFileFromRecent, dashboard_strategies } = load_modal;\n    const { onConfirmSave } = save_modal;\n    const { setActiveTab, setPreviewOnDialog, has_mobile_preview_loaded, setActiveTabTutorial } = dashboard;\n\n    const file_input_ref = React.useRef<HTMLInputElement | null>(null);\n    const [is_file_supported, setIsFileSupported] = React.useState<boolean>(true);\n    const el_ref = React.useRef<HTMLInputElement | null>(null);\n    const is_mobile = isMobile();\n    const has_dashboard_strategies = !!dashboard_strategies?.length;\n\n    React.useEffect(() => {\n        if (el_ref.current?.children.length === 3) {\n            el_ref?.current?.removeChild(el_ref?.current?.children[1]);\n        }\n    }, [el_ref.current?.children.length]);\n\n    const renderOpenButton = () => (\n        <button\n            className='load-strategy__button-group--open'\n            onClick={() => {\n                setPreviewOnDialog(false);\n                loadFileFromRecent();\n                setActiveTab(DBOT_TABS.BOT_BUILDER);\n            }}\n        >\n            {localize('Open')}\n        </button>\n    );\n    return (\n        <div className='load-strategy__container load-strategy__container--has-footer'>\n            {is_file_supported && (\n                <div\n                    className={classNames('load-strategy__local-preview', {\n                        'load-strategy__local-preview--listed': has_dashboard_strategies,\n                    })}\n                >\n                    <div className='load-strategy__recent-preview'>\n                        <div\n                            className={classNames('load-strategy__title', 'load-strategy__recent-preview-title', {\n                                'load-strategy__title--listed': has_dashboard_strategies && is_mobile,\n                            })}\n                        >\n                            {!is_mobile && <Localize i18n_default_text='Preview' />}\n                            <div className='tab__dashboard__preview__retrigger'>\n                                <button\n                                    onClick={() => {\n                                        setActiveTab(DBOT_TABS.TUTORIAL);\n                                        setActiveTabTutorial(0);\n                                    }}\n                                >\n                                    <Icon\n                                        className='tab__dashboard__preview__retrigger__icon'\n                                        icon={'IcDbotUserGuide'}\n                                    />\n                                    {!is_mobile && (\n                                        <Text\n                                            size='xs'\n                                            line_height='s'\n                                            className={'tab__dashboard__preview__retrigger__text'}\n                                        >\n                                            {localize('User Guide')}\n                                        </Text>\n                                    )}\n                                </button>\n                            </div>\n                        </div>\n\n                        {!is_mobile && (\n                            <>\n                                <div className='load-strategy__preview-workspace'>\n                                    <BotPreview id_ref={el_ref} type={'local'} />\n                                </div>\n                                <div className='load-strategy__button-group'>\n                                    <input\n                                        type='file'\n                                        ref={file_input_ref}\n                                        accept='.xml'\n                                        style={{ display: 'none' }}\n                                        onChange={e => {\n                                            clearInjectionDiv('component', el_ref);\n                                            onConfirmSave();\n                                            setIsFileSupported(handleFileChange(e, false));\n                                        }}\n                                    />\n                                    {renderOpenButton()}\n                                </div>\n                            </>\n                        )}\n                        <MobileWrapper>\n                            <Dialog\n                                is_visible={has_mobile_preview_loaded}\n                                onCancel={() => setPreviewOnDialog(false)}\n                                is_mobile_full_width\n                                className='dc-dialog__wrapper--preview'\n                                has_close_icon\n                                title={localize('Preview')}\n                            >\n                                <BotPreview id_ref={el_ref} type='local' />\n                                <div className='load-strategy__button-group'>{renderOpenButton()}</div>\n                            </Dialog>\n                        </MobileWrapper>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n});\n\nexport default LocalComponent;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Button, Icon, StaticUrl } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst GoogleDrive = observer(() => {\n    const { google_drive, load_modal, dashboard } = useDBotStore();\n    const { is_authorised } = google_drive;\n    const { is_open_button_loading, onDriveConnect, onDriveOpen } = load_modal;\n    const { setOpenSettings } = dashboard;\n\n    return (\n        <div className='load-strategy__container'>\n            <div className='load-strategy__google-drive'>\n                <Icon\n                    icon={'IcGoogleDrive'}\n                    className={classnames('load-strategy__google-drive-icon', {\n                        'load-strategy__google-drive-icon--disabled': !is_authorised,\n                    })}\n                    size={isMobile() ? 96 : 128}\n                />\n                <div className='load-strategy__google-drive-connected-text'>\n                    {is_authorised ? (\n                        <Localize i18n_default_text='You are connected to Google Drive' />\n                    ) : (\n                        'Google Drive'\n                    )}\n                </div>\n                {is_authorised ? (\n                    <Button.Group>\n                        <Button text={localize('Disconnect')} onClick={onDriveConnect} has_effect secondary large />\n                        <Button\n                            text={localize('Open')}\n                            onClick={() => {\n                                onDriveOpen();\n                                setOpenSettings('import');\n                            }}\n                            is_loading={is_open_button_loading}\n                            has_effect\n                            primary\n                            large\n                        />\n                    </Button.Group>\n                ) : (\n                    <React.Fragment>\n                        <div className='load-strategy__google-drive-terms'>\n                            <div className='load-strategy__google-drive-text'>\n                                <Localize i18n_default_text=\"To import your bot from your Google Drive, you'll need to sign in to your Google account.\" />\n                            </div>\n                            <div className='load-strategy__google-drive-text'>\n                                <Localize\n                                    i18n_default_text='To know how Google Drive handles your data, please review Deriv’s <0>Privacy policy.</0>'\n                                    components={[\n                                        <StaticUrl\n                                            key={0}\n                                            className='link'\n                                            href='tnc/security-and-privacy.pdf'\n                                            is_document\n                                        />,\n                                    ]}\n                                />\n                            </div>\n                        </div>\n                        <Button text={localize('Sign in')} onClick={onDriveConnect} has_effect primary large />\n                    </React.Fragment>\n                )}\n            </div>\n        </div>\n    );\n});\n\nexport default GoogleDrive;\n","import React from 'react';\nimport localForage from 'localforage';\nimport LZString from 'lz-string';\nimport { getSavedWorkspaces } from '@deriv/bot-skeleton';\nimport { Dialog, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { TStrategy } from 'Types';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst DeleteDialog = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const {\n        is_delete_modal_open,\n        onToggleDeleteDialog,\n        selected_strategy_id,\n        setDashboardStrategies,\n        setSelectedStrategyId,\n        loadStrategyToBuilder,\n        previewed_strategy_id,\n        setPreviewedStrategyId,\n        refreshStrategiesTheme,\n        resetBotBuilderStrategy,\n    } = load_modal;\n    const { setOpenSettings } = dashboard;\n\n    const resetStrategiesAfterDelete = async (deleted_strategy_id: string, updated_workspaces: Array<TStrategy>) => {\n        if (updated_workspaces.length) {\n            const current_previewed_strategy = updated_workspaces?.filter(\n                (strategy: TStrategy) => strategy.id === previewed_strategy_id\n            );\n            if (selected_strategy_id === deleted_strategy_id) {\n                setSelectedStrategyId(updated_workspaces?.[0]?.id);\n                // Change bot builder strategy to the first strategy in the list\n                await loadStrategyToBuilder(updated_workspaces?.[0]);\n            }\n            if (current_previewed_strategy.length) {\n                setPreviewedStrategyId(previewed_strategy_id);\n                setSelectedStrategyId(previewed_strategy_id);\n            } else {\n                setPreviewedStrategyId(updated_workspaces?.[0]?.id);\n            }\n            // Change preview strategy to the one that was previously previewed\n            await refreshStrategiesTheme();\n        } else {\n            resetBotBuilderStrategy();\n        }\n    };\n\n    const removeBotStrategy = async (strategy_id: string) => {\n        const workspaces = await getSavedWorkspaces();\n        const updated_workspaces = workspaces.filter(\n            (strategy_from_workspace: TStrategy) => strategy_from_workspace.id !== strategy_id\n        );\n        setDashboardStrategies(updated_workspaces);\n        localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(updated_workspaces)));\n        await resetStrategiesAfterDelete(strategy_id, updated_workspaces);\n        onToggleDeleteDialog(false);\n    };\n\n    const onHandleChange = (type: string, param: boolean) => {\n        if (type === 'confirm') {\n            removeBotStrategy(selected_strategy_id);\n            setOpenSettings('delete', true);\n        }\n        onToggleDeleteDialog(param);\n    };\n\n    return (\n        <div>\n            <Dialog\n                title={localize('Delete bot')}\n                is_visible={is_delete_modal_open}\n                confirm_button_text={localize('Yes, delete')}\n                onConfirm={() => {\n                    onHandleChange('confirm', false);\n                    setOpenSettings('delete', true);\n                }}\n                cancel_button_text={localize('No')}\n                onCancel={() => {\n                    onHandleChange('cancel', false);\n                }}\n                is_mobile_full_width={false}\n                className={'dc-dialog__delete-strategy--delete'}\n                has_close_icon\n            >\n                <div>\n                    <Text color='prominent' line_height='s' size='xs'>\n                        {localize('Your bot will be permanently deleted when you hit ')}\n                        <strong>{localize('Yes, delete.')}</strong>\n                    </Text>\n                </div>\n                <div>\n                    <Text color='prominent' line_height='xl' size='xs'>\n                        {localize('Are you sure you want to delete it?')}\n                    </Text>\n                </div>\n            </Dialog>\n        </div>\n    );\n});\n\nexport default DeleteDialog;\n","import React from 'react';\n\nexport const useComponentVisibility = (ref: React.RefObject<HTMLInputElement>) => {\n    const [is_dropdown_visible, setDropdownVisibility] = React.useState(false);\n\n    const handleHideDropdown = (event: KeyboardEvent) => {\n        if (event.key.toUpperCase() === 'ESCAPE') {\n            setDropdownVisibility(false);\n        }\n    };\n\n    const handleClickOutside = (event: Event) => {\n        if (!ref?.current?.contains(event.target as Node)) {\n            setDropdownVisibility(false);\n        }\n    };\n\n    React.useEffect(() => {\n        document.addEventListener('keydown', handleHideDropdown, true);\n        document.addEventListener('click', handleClickOutside, true);\n        return () => {\n            document.removeEventListener('keydown', handleHideDropdown, true);\n            document.removeEventListener('click', handleClickOutside, true);\n        };\n    }, []);\n\n    return {\n        is_dropdown_visible,\n        setDropdownVisibility,\n    };\n};\n","import { localize } from '@deriv/translations';\n\nexport const STRATEGY = {\n    EDIT: 'edit',\n    SAVE: 'save',\n    DELETE: 'delete',\n    PREVIEW: 'preview',\n    PREVIEW_LIST: 'list',\n    INIT: 'init',\n};\n\nexport const MENU_DESKTOP = [\n    {\n        type: STRATEGY.EDIT,\n        icon: 'IcEdit',\n    },\n    {\n        type: STRATEGY.SAVE,\n        icon: 'IcSave',\n    },\n    {\n        type: STRATEGY.DELETE,\n        icon: 'IcDelete',\n    },\n];\n\nexport const CONTEXT_MENU_MOBILE = [\n    {\n        type: STRATEGY.PREVIEW_LIST,\n        icon: 'IcPreview',\n        label: localize('Preview'),\n    },\n    {\n        type: STRATEGY.EDIT,\n        icon: 'IcEdit',\n        label: localize('Edit'),\n    },\n    {\n        type: STRATEGY.SAVE,\n        icon: 'IcSave',\n        label: localize('Save'),\n    },\n    {\n        type: STRATEGY.DELETE,\n        icon: 'IcDelete',\n        label: localize('Delete'),\n    },\n];\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { timeSince } from '@deriv/bot-skeleton';\nimport { save_types } from '@deriv/bot-skeleton/src/constants/save-type';\nimport { DesktopWrapper, Icon, MobileWrapper, Text } from '@deriv/components';\nimport { isDesktop, isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\n\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { waitForDomElement } from 'Utils/dom-observer';\n\nimport { useComponentVisibility } from '../../hooks/useComponentVisibility';\n\nimport { CONTEXT_MENU_MOBILE, MENU_DESKTOP, STRATEGY } from './constants';\n\nimport './index.scss';\n\ntype TRecentWorkspace = {\n    index: number;\n    workspace: { [key: string]: string };\n    updateBotName: (name: string) => void;\n};\n\nconst RecentWorkspace = observer(({ workspace, index }: TRecentWorkspace) => {\n    const { dashboard, load_modal, save_modal } = useDBotStore();\n    const { active_tab, setActiveTab, setPreviewOnDialog } = dashboard;\n    const { toggleSaveModal, updateBotName } = save_modal;\n    const {\n        dashboard_strategies = [],\n        getRecentFileIcon,\n        getSaveType,\n        getSelectedStrategyID,\n        loadFileFromRecent,\n        onToggleDeleteDialog,\n        previewRecentStrategy,\n        previewed_strategy_id,\n        selected_strategy_id,\n        setSelectedStrategyId,\n        setPreviewedStrategyId,\n    } = load_modal;\n\n    const trigger_div_ref = React.useRef<HTMLInputElement | null>(null);\n    const toggle_ref = React.useRef<HTMLInputElement>(null);\n    const is_div_triggered_once = React.useRef<boolean>(false);\n    const visible = useComponentVisibility(toggle_ref);\n    const { setDropdownVisibility, is_dropdown_visible } = visible;\n    const is_mobile = isMobile();\n    const is_desktop = isDesktop();\n\n    React.useEffect(() => {\n        let timer: ReturnType<typeof setTimeout>;\n\n        const select_first_strategy = dashboard_strategies?.length && index === 0 && !is_div_triggered_once.current;\n\n        if (select_first_strategy) {\n            timer = setTimeout(() => {\n                is_div_triggered_once.current = true;\n                trigger_div_ref?.current?.click();\n            }, 50);\n        }\n        return () => {\n            if (timer) clearTimeout(timer);\n        };\n    }, [dashboard_strategies, index]);\n\n    const onToggleDropdown = (e: React.MouseEvent<HTMLElement>) => {\n        e.stopPropagation();\n        setDropdownVisibility(!is_dropdown_visible);\n        setSelectedStrategyId(workspace.id);\n    };\n\n    const handleInit = () => {\n        setPreviewedStrategyId(workspace?.id);\n        // Fires for desktop\n        if (active_tab === 0) {\n            previewRecentStrategy(workspace.id);\n        }\n    };\n\n    const handlePreviewList = () => {\n        setPreviewedStrategyId(workspace.id);\n        // Fires for mobile on clicking preview button\n        if (is_mobile) {\n            setPreviewOnDialog(true);\n            const dashboard_tab_dom_element = document.getElementsByClassName('tab__dashboard')?.[0];\n            waitForDomElement('#load-strategy__blockly-container', dashboard_tab_dom_element).then(() => {\n                previewRecentStrategy(workspace.id);\n            });\n        }\n    };\n\n    const handleEdit = async () => {\n        await loadFileFromRecent();\n        setActiveTab(DBOT_TABS.BOT_BUILDER);\n    };\n\n    const handleSave = () => {\n        updateBotName(workspace?.name);\n        toggleSaveModal();\n    };\n\n    const viewRecentStrategy = async (type: string) => {\n        setSelectedStrategyId(workspace.id);\n\n        switch (type) {\n            case STRATEGY.INIT:\n                handleInit();\n                break;\n\n            case STRATEGY.PREVIEW_LIST:\n                handlePreviewList();\n                break;\n\n            case STRATEGY.EDIT:\n                await handleEdit();\n                break;\n\n            case STRATEGY.SAVE:\n                handleSave();\n                break;\n\n            case STRATEGY.DELETE:\n                onToggleDeleteDialog(true);\n                break;\n\n            default:\n                break;\n        }\n    };\n\n    const is_active_mobile = selected_strategy_id === workspace.id && is_dropdown_visible;\n    const text_size = is_desktop ? 'xs' : 'xxs';\n\n    return (\n        <div\n            className={classnames('load-strategy__recent-item', {\n                'load-strategy__recent-item--selected': previewed_strategy_id === workspace.id,\n                'load-strategy__recent-item__loaded': dashboard_strategies,\n                'load-strategy__recent-item--minimized': !!dashboard_strategies?.length && !is_desktop,\n            })}\n            key={workspace.id}\n            ref={trigger_div_ref}\n            onClick={e => {\n                e.stopPropagation(); //stop event bubbling for child element\n                if (is_dropdown_visible) setDropdownVisibility(false);\n                getSelectedStrategyID(workspace.id);\n                viewRecentStrategy(STRATEGY.INIT);\n            }}\n        >\n            <div className='load-strategy__recent-item-text'>\n                <div className='load-strategy__recent-item-title'>\n                    <Text align='left' as='p' size={text_size} line_height='l'>\n                        {workspace.name}\n                    </Text>\n                </div>\n            </div>\n            <div className='load-strategy__recent-item-time'>\n                <Text align='left' as='p' size={text_size} line_height='l'>\n                    {timeSince(workspace.timestamp)}\n                </Text>\n            </div>\n            <div className='load-strategy__recent-item-location'>\n                <Icon\n                    icon={getRecentFileIcon(workspace.save_type)}\n                    className={classnames({\n                        'load-strategy__recent-icon--active': workspace.save_type === save_types.GOOGLE_DRIVE,\n                    })}\n                />\n                <div className='load-strategy__recent-item-saved'>\n                    <Text align='left' as='p' size={text_size} line_height='l'>\n                        {getSaveType(workspace.save_type)}\n                    </Text>\n                </div>\n            </div>\n            <DesktopWrapper>\n                <div className='load-strategy__recent-item__button'>\n                    {MENU_DESKTOP.map(item => (\n                        <div\n                            key={item.type}\n                            className='load-strategy__recent-item__button'\n                            onClick={e => {\n                                e.stopPropagation();\n                                viewRecentStrategy(item.type);\n                            }}\n                        >\n                            <Icon icon={item.icon} />\n                        </div>\n                    ))}\n                </div>\n            </DesktopWrapper>\n            <MobileWrapper>\n                <div ref={toggle_ref} onClick={onToggleDropdown}>\n                    <Icon icon='IcMenuDots' />\n                </div>\n                <div\n                    className={classnames('load-strategy__recent-item__mobile', {\n                        'load-strategy__recent-item__mobile--active': is_active_mobile,\n                        'load-strategy__recent-item__mobile--min': dashboard_strategies.length <= 5,\n                    })}\n                >\n                    {CONTEXT_MENU_MOBILE.map(item => (\n                        <div\n                            key={item.type}\n                            className='load-strategy__recent-item__group'\n                            onClick={e => {\n                                e.stopPropagation();\n                                viewRecentStrategy(item.type);\n                            }}\n                        >\n                            <div>\n                                <Icon icon={item.icon} />\n                            </div>\n                            <Text\n                                color='prominent'\n                                className='load-strategy__recent-item__group__label'\n                                as='p'\n                                size='xxs'\n                            >\n                                {item.label}\n                            </Text>\n                        </div>\n                    ))}\n                </div>\n            </MobileWrapper>\n        </div>\n    );\n});\n\nexport default RecentWorkspace;\n","export const waitForDomElement = (selector: string, observingParent?: Element) => {\n    return new Promise(resolve => {\n        if (document.querySelector(selector)) {\n            return resolve(document.querySelector(selector));\n        }\n\n        const observer = new MutationObserver(() => {\n            if (document.querySelector(selector)) {\n                resolve(document.querySelector(selector));\n                observer.disconnect();\n            }\n        });\n\n        observer.observe(observingParent ?? document.body, {\n            childList: true,\n            subtree: true,\n        });\n    });\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\ntype TIconRadio = {\n    google_drive_connected?: boolean;\n    icon: React.ReactElement<{ className: string }, string>;\n    text: string;\n    onDriveConnect?: () => void;\n};\nconst IconRadio = ({ icon, text, google_drive_connected, onDriveConnect }: TIconRadio) => {\n    const is_drive_radio = text === 'Google Drive';\n\n    return (\n        <div className='save-type__container'>\n            <div className='save-type__radio'>\n                {icon &&\n                    React.cloneElement(icon, {\n                        className: classNames(\n                            'save-type__icon',\n                            {\n                                'save-type__icon--active': is_drive_radio && google_drive_connected,\n                                'save-type__icon--disabled': is_drive_radio && !google_drive_connected,\n                            },\n                            icon.props.className\n                        ),\n                    })}\n                <Text\n                    as='p'\n                    align='center'\n                    size='xxs'\n                    color={is_drive_radio && !google_drive_connected ? 'disabled' : 'prominent'}\n                    line_height='s'\n                    className='save-type__radio-text'\n                >\n                    {localize(text)}\n                </Text>\n            </div>\n            {is_drive_radio && (\n                <Text\n                    as='p'\n                    align='center'\n                    size='xs'\n                    weight='bold'\n                    styles={{ color: 'var(--brand-red-coral)' }}\n                    className='save-type__drive-status'\n                    onClick={onDriveConnect}\n                >\n                    {localize(google_drive_connected ? localize('Disconnect') : localize('Connect'))}\n                </Text>\n            )}\n        </div>\n    );\n};\n\nexport default IconRadio;\n","import React, { useEffect } from 'react';\nimport classNames from 'classnames';\nimport { Field, Form, Formik } from 'formik';\nimport { config, save_types } from '@deriv/bot-skeleton';\nimport { Button, Icon, Input, MobileFullPageModal, Modal, RadioGroup, Text, ThemedScrollbars } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport IconRadio from './icon-radio';\n\ntype TSaveModalForm = {\n    bot_name: string;\n    button_status: number;\n    google_drive_connected?: boolean;\n    is_authorised: boolean;\n    is_mobile?: boolean;\n    is_onscreen_keyboard_active?: boolean;\n    is_save_modal_open?: boolean;\n    icon?: string;\n    text?: string;\n    onConfirmSave: () => void;\n    onDriveConnect: () => void;\n    toggleSaveModal: () => void;\n    setCurrentFocus: () => void;\n    validateBotName: () => void;\n};\n\nconst SaveModalForm = ({\n    bot_name,\n    button_status,\n    is_authorised,\n    onConfirmSave,\n    onDriveConnect,\n    validateBotName,\n    toggleSaveModal,\n    is_mobile,\n    is_onscreen_keyboard_active,\n    setCurrentFocus,\n}: TSaveModalForm) => (\n    <Formik\n        initialValues={{\n            is_local: true,\n            save_as_collection: false,\n            bot_name: bot_name === config.default_file_name ? '' : bot_name,\n        }}\n        validate={validateBotName}\n        onSubmit={onConfirmSave}\n    >\n        {({ values: { is_local }, setFieldValue, touched, errors }) => {\n            const content_height = !is_mobile ? '500px' : `calc(100%)`;\n            return (\n                <ThemedScrollbars height={content_height} autohide>\n                    <Form className={classNames({ 'form--active-keyboard': is_onscreen_keyboard_active })}>\n                        <div className='modal__content'>\n                            <Text size='xs' line_height='l'>\n                                {localize(\n                                    'Enter your bot name, choose to save on your computer or Google Drive, and hit '\n                                )}\n                                <strong>{localize('Save.')}</strong>\n                            </Text>\n                            <div className='modal__content-row'>\n                                <Field name='bot_name'>\n                                    {({ field }) => (\n                                        <Input\n                                            className='save-type__input'\n                                            type='text'\n                                            placeholder={localize('Untitled Strategy')}\n                                            error={touched[field.name] && errors[field.name]}\n                                            label={localize('Bot name')}\n                                            onFocus={e => setCurrentFocus(e.currentTarget.name)}\n                                            onBlur={() => setCurrentFocus(null)}\n                                            {...field}\n                                        />\n                                    )}\n                                </Field>\n                            </div>\n                            <div className='modal__content-row'>\n                                <RadioGroup\n                                    className='radio-group__save-type'\n                                    name='is_local'\n                                    selected={() => {\n                                        if (is_authorised && !is_local) return save_types.GOOGLE_DRIVE;\n                                        return save_types.LOCAL;\n                                    }}\n                                    onToggle={() => setFieldValue('is_local', !is_local)}\n                                >\n                                    <RadioGroup.Item\n                                        id='local'\n                                        label={\n                                            <IconRadio\n                                                text={localize('Local')}\n                                                icon={<Icon icon={is_mobile ? 'IcLocal' : 'IcMyComputer'} size={48} />}\n                                            />\n                                        }\n                                        value={save_types.LOCAL}\n                                    />\n                                    <RadioGroup.Item\n                                        id='drive'\n                                        label={\n                                            <IconRadio\n                                                text={'Google Drive'}\n                                                icon={<Icon icon={'IcGoogleDrive'} size={48} />}\n                                                google_drive_connected={is_authorised}\n                                                onDriveConnect={onDriveConnect}\n                                            />\n                                        }\n                                        value={save_types.GOOGLE_DRIVE}\n                                        disabled={!is_authorised}\n                                        className={classNames({\n                                            'dc-radio-group__item-disabled': !is_authorised,\n                                        })}\n                                    />\n                                </RadioGroup>\n                            </div>\n                            {/* removed this from the save modal popup because it is not there in the design */}\n                            {/* <>\n                                <Field name='save_as_collection'>\n                                    {({ field }) => (\n                                        <Checkbox\n                                            onChange={() => setFieldValue('save_as_collection', !save_as_collection)}\n                                            defaultChecked={save_as_collection}\n                                            label={\n                                                <Text size='xs' line_height='s' weight='bold'>\n                                                    <Localize i18n_default_text='Save as collection' />\n                                                </Text>\n                                            }\n                                            classNameLabel='save-type__checkbox-text'\n                                            {...field}\n                                        />\n                                    )}\n                                </Field>\n                                <div className='save-type__checkbox-description'>\n                                    {localize(\n                                        'Enabling this allows you to save your blocks as one collection which can be easily integrated into other bots.'\n                                    )}\n                                </div>\n                            </> */}\n                        </div>\n                        <div\n                            className={classNames('modal__footer', {\n                                'modal__footer--active-keyboard': is_onscreen_keyboard_active,\n                            })}\n                        >\n                            <Button\n                                type='button'\n                                className='modal__footer--button'\n                                text={localize('Cancel')}\n                                onClick={toggleSaveModal}\n                                secondary\n                            />\n                            <Button\n                                className='modal__footer--button'\n                                type='submit'\n                                is_loading={button_status === 1}\n                                is_submit_success={button_status === 2}\n                                text={localize('Continue')}\n                                primary\n                            />\n                        </div>\n                    </Form>\n                </ThemedScrollbars>\n            );\n        }}\n    </Formik>\n);\nconst SaveModal = observer(() => {\n    const { save_modal, google_drive, dashboard, load_modal } = useDBotStore();\n    const { ui } = useStore();\n    const { dashboard_strategies } = load_modal;\n    const {\n        button_status,\n        bot_name,\n        is_save_modal_open,\n        onConfirmSave,\n        onDriveConnect,\n        toggleSaveModal,\n        updateBotName,\n        validateBotName,\n    } = save_modal;\n    const { is_authorised } = google_drive;\n    const { is_onscreen_keyboard_active, setCurrentFocus } = ui;\n    const { active_tab } = dashboard;\n\n    const is_mobile = isMobile();\n\n    useEffect(() => {\n        if (active_tab === 1) {\n            updateBotName(dashboard_strategies?.[0]?.name ?? '');\n        }\n    }, [active_tab, dashboard_strategies, updateBotName]);\n\n    return is_mobile ? (\n        <MobileFullPageModal\n            is_modal_open={is_save_modal_open}\n            className='save-modal__wrapper'\n            header={localize('Save strategy')}\n            onClickClose={toggleSaveModal}\n            height_offset='80px'\n            page_overlay\n        >\n            <SaveModalForm\n                bot_name={bot_name}\n                button_status={button_status}\n                is_authorised={is_authorised}\n                onConfirmSave={onConfirmSave}\n                onDriveConnect={onDriveConnect}\n                validateBotName={validateBotName}\n                toggleSaveModal={toggleSaveModal}\n                is_mobile={is_mobile}\n                is_onscreen_keyboard_active={is_onscreen_keyboard_active}\n                setCurrentFocus={setCurrentFocus}\n            />\n        </MobileFullPageModal>\n    ) : (\n        <Modal\n            title={localize('Save Strategy')}\n            className='modal--save'\n            width='32.8rem'\n            height='50rem'\n            is_open={is_save_modal_open}\n            toggleModal={toggleSaveModal}\n        >\n            <SaveModalForm\n                bot_name={bot_name}\n                button_status={button_status}\n                is_authorised={is_authorised}\n                onConfirmSave={onConfirmSave}\n                onDriveConnect={onDriveConnect}\n                validateBotName={validateBotName}\n                toggleSaveModal={toggleSaveModal}\n                setCurrentFocus={setCurrentFocus}\n            />\n        </Modal>\n    );\n});\n\nexport default SaveModal;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { getSavedWorkspaces } from '@deriv/bot-skeleton';\nimport { MobileWrapper, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport DeleteDialog from './delete-dialog';\nimport RecentWorkspace from './recent-workspace';\nimport SaveModal from './save-modal';\nimport './index.scss';\n\nconst HEADERS = [localize('Bot name'), localize('Last modified'), localize('Status')];\n\nconst RecentComponent = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { setDashboardStrategies, dashboard_strategies } = load_modal;\n    const { setStrategySaveType, strategy_save_type } = dashboard;\n\n    React.useEffect(() => {\n        setStrategySaveType('');\n        const getStrategies = async () => {\n            const recent_strategies = await getSavedWorkspaces();\n            setDashboardStrategies(recent_strategies);\n        };\n        getStrategies();\n        //this dependency is used when we use the save modal popup\n    }, [strategy_save_type]);\n\n    const is_mobile = isMobile();\n\n    if (!dashboard_strategies?.length) return null;\n    return (\n        <div className='load-strategy__container load-strategy__container--has-footer'>\n            <div className='load-strategy__recent'>\n                <div className='load-strategy__recent__files'>\n                    <div className='load-strategy__title'>\n                        <Text size={is_mobile ? 'xs' : 's'} weight='bold'>\n                            <Localize i18n_default_text='Your bots:' />\n                        </Text>\n                    </div>\n                    <div\n                        className={classNames('load-strategy__recent-item load-strategy__recent-item__loaded', {\n                            'load-strategy__recent-item__loaded--first-child': !is_mobile,\n                        })}\n                    >\n                        {HEADERS.map(tab_name => {\n                            return (\n                                <Text size='xs' weight='bold' key={tab_name}>\n                                    {tab_name}\n                                </Text>\n                            );\n                        })}\n                    </div>\n                    <div className='load-strategy__recent__files__list'>\n                        {dashboard_strategies.map((workspace, index) => {\n                            return <RecentWorkspace key={workspace.id} workspace={workspace} index={index} />;\n                        })}\n                    </div>\n                    <DeleteDialog setStrategies={setDashboardStrategies} />\n                    <MobileWrapper>\n                        <SaveModal />\n                    </MobileWrapper>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default RecentComponent;\n","//kept sometihings commented beacuse of mobx to integrate popup functionality here\nimport React from 'react';\nimport classNames from 'classnames';\nimport { DesktopWrapper, Dialog, Icon, MobileFullPageModal, MobileWrapper, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport GoogleDrive from './load-bot-preview/google-drive';\nimport Recent from './load-bot-preview/recent';\n\ntype TCardProps = {\n    has_dashboard_strategies: boolean;\n    is_mobile: boolean;\n};\n\ntype TCardArray = {\n    icon: string;\n    content: string;\n    method: () => void;\n};\n\nconst Cards = observer(({ is_mobile, has_dashboard_strategies }: TCardProps) => {\n    const { dashboard, load_modal, quick_strategy } = useDBotStore();\n    const {\n        onCloseDialog,\n        dialog_options,\n        is_dialog_open,\n        setActiveTab,\n        setFileLoaded,\n        setPreviewOnPopup,\n        setOpenSettings,\n        showVideoDialog,\n    } = dashboard;\n    const { handleFileChange, loadFileFromLocal } = load_modal;\n    const { loadDataStrategy } = quick_strategy;\n\n    const [is_file_supported, setIsFileSupported] = React.useState<boolean>(true);\n    const file_input_ref = React.useRef<HTMLInputElement | null>(null);\n\n    const openGoogleDriveDialog = () => {\n        showVideoDialog({\n            type: 'google',\n        });\n    };\n\n    const openFileLoader = () => {\n        file_input_ref?.current?.click();\n    };\n\n    const actions: TCardArray[] = [\n        {\n            icon: is_mobile ? 'IcLocal' : 'IcMyComputer',\n            content: is_mobile ? localize('Local') : localize('My computer'),\n            method: openFileLoader,\n        },\n        {\n            icon: 'IcGoogleDriveDbot',\n            content: localize('Google Drive'),\n            method: openGoogleDriveDialog,\n        },\n        {\n            icon: 'IcBotBuilder',\n            content: localize('Bot Builder'),\n            method: () => setActiveTab(DBOT_TABS.BOT_BUILDER),\n        },\n        {\n            icon: 'IcQuickStrategy',\n            content: localize('Quick strategy'),\n            method: () => {\n                setActiveTab(DBOT_TABS.BOT_BUILDER);\n                loadDataStrategy();\n            },\n        },\n    ];\n\n    return React.useMemo(\n        () => (\n            <div\n                className={classNames('tab__dashboard__table', {\n                    'tab__dashboard__table--minimized': has_dashboard_strategies && is_mobile,\n                })}\n            >\n                <div\n                    className={classNames('tab__dashboard__table__tiles', {\n                        'tab__dashboard__table__tiles--minimized': has_dashboard_strategies && is_mobile,\n                    })}\n                    id='tab__dashboard__table__tiles'\n                >\n                    {actions.map(icons => {\n                        const { icon, content, method } = icons;\n                        return (\n                            <div\n                                key={content}\n                                className={classNames('tab__dashboard__table__block', {\n                                    'tab__dashboard__table__block--minimized': has_dashboard_strategies && is_mobile,\n                                })}\n                            >\n                                <Icon\n                                    className={classNames('tab__dashboard__table__images', {\n                                        'tab__dashboard__table__images--minimized': has_dashboard_strategies,\n                                    })}\n                                    width='8rem'\n                                    height='8rem'\n                                    icon={icon}\n                                    id={icon}\n                                    onClick={method}\n                                />\n                                <Text color='prominent' size={is_mobile ? 'xxs' : 'xs'}>\n                                    {content}\n                                </Text>\n                            </div>\n                        );\n                    })}\n                    <input\n                        type='file'\n                        ref={file_input_ref}\n                        accept='application/xml, text/xml'\n                        hidden\n                        onChange={e => {\n                            setIsFileSupported(handleFileChange(e, false));\n                            loadFileFromLocal();\n                            setFileLoaded(true);\n                            setOpenSettings('import');\n                        }}\n                    />\n                    <DesktopWrapper>\n                        <Dialog\n                            title={dialog_options.title}\n                            is_visible={is_dialog_open}\n                            onCancel={onCloseDialog}\n                            is_mobile_full_width\n                            className='dc-dialog__wrapper--google-drive'\n                            has_close_icon\n                        >\n                            <GoogleDrive />\n                        </Dialog>\n                    </DesktopWrapper>\n                    <MobileWrapper>\n                        <MobileFullPageModal\n                            is_modal_open={is_dialog_open}\n                            className='load-strategy__wrapper'\n                            header={localize('Load strategy')}\n                            onClickClose={() => {\n                                setPreviewOnPopup(false);\n                                onCloseDialog();\n                            }}\n                            height_offset='80px'\n                            page_overlay\n                        >\n                            <div label='Google Drive' className='google-drive-label'>\n                                <GoogleDrive />\n                            </div>\n                        </MobileFullPageModal>\n                    </MobileWrapper>\n                </div>\n                <Recent is_file_supported={is_file_supported} />\n            </div>\n        ),\n        [is_dialog_open, has_dashboard_strategies]\n    );\n});\n\nexport default Cards;\n","import { localize } from '@deriv/translations';\n\nexport type TSidebarItem = {\n    label: string;\n    content: string[];\n    link: boolean;\n};\n\nexport const SIDEBAR_INTRO: TSidebarItem[] = [\n    {\n        label: localize('Welcome to Deriv Bot!'),\n        content: [\n            localize(\n                'Ready to automate your trading strategy without writing any code? You’ve come to the right place.'\n            ),\n            localize('Check out these guides and FAQs to learn more about building your bot:'),\n        ],\n        link: false,\n    },\n    {\n        label: localize('Guide'),\n        content: [localize('Deriv Bot - your automated trading partner')],\n        link: true,\n    },\n    {\n        label: localize('FAQs'),\n        content: [\n            localize('What is Deriv Bot?'),\n            localize('Where do I find the blocks I need?'),\n            localize('How do I remove blocks from the workspace?'),\n        ],\n        link: true,\n    },\n];\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { DesktopWrapper, Icon, MobileWrapper, Modal, Text } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\n\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport { SIDEBAR_INTRO } from './constants';\n\nconst InfoPanel = observer(() => {\n    const {\n        ui: { is_mobile },\n    } = useStore();\n    const { dashboard } = useDBotStore();\n    const { active_tour, is_info_panel_visible, setActiveTab, setActiveTabTutorial, setInfoPanelVisibility } =\n        dashboard;\n    const switchTab = (link: boolean, label: string) => {\n        const tutorial_link = link ? setActiveTab(DBOT_TABS.TUTORIAL) : null;\n        const tutorial_label = label === 'Guide' ? setActiveTabTutorial(0) : setActiveTabTutorial(1);\n        return {\n            tutorial_link,\n            tutorial_label,\n        };\n    };\n\n    const handleClose = () => {\n        setInfoPanelVisibility(false);\n        localStorage.setItem('dbot_should_show_info', JSON.stringify(Date.now()));\n    };\n\n    const renderInfo = () => (\n        <div className='db-info-panel'>\n            <div className='db-info-panel__close-action' onClick={handleClose}>\n                <Icon width='1rem' height='1rem' icon='IcCloseIconDbot' />\n            </div>\n\n            {SIDEBAR_INTRO.map(sidebar_item => {\n                const { label, content, link } = sidebar_item;\n                return (\n                    <div key={`${label}-${content}`}>\n                        <Text color='prominent' line_height='xxl' size={is_mobile ? 's' : 'm'} weight='bold' as='h1'>\n                            {label}\n                        </Text>\n                        {content.map(text => (\n                            <Text\n                                key={`info-panel-tour${text}`}\n                                className={classNames('db-info-panel__card', {\n                                    'db-info-panel__content': link,\n                                })}\n                                color='prominent'\n                                line_height='xl'\n                                as='p'\n                                onClick={() => switchTab(link, label)}\n                                size={is_mobile ? 'xxs' : 's'}\n                            >\n                                {text}\n                            </Text>\n                        ))}\n                    </div>\n                );\n            })}\n        </div>\n    );\n\n    return (\n        <>\n            <DesktopWrapper>\n                {!active_tour && (\n                    <div\n                        className={classNames('tab__dashboard__info-panel', {\n                            'tab__dashboard__info-panel--active': is_info_panel_visible,\n                        })}\n                    >\n                        {renderInfo()}\n                    </div>\n                )}\n            </DesktopWrapper>\n            <MobileWrapper>\n                <Modal\n                    className='statistics__modal statistics__modal--mobile'\n                    is_open={is_info_panel_visible}\n                    toggleModal={handleClose}\n                    width={'440px'}\n                >\n                    <Modal.Body>{renderInfo()}</Modal.Body>\n                </Modal>\n            </MobileWrapper>\n        </>\n    );\n});\n\nexport default InfoPanel;\n","import React from 'react';\nimport { Icon, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\n\ntype TUserGuide = {\n    setActiveTab: (param: number) => void;\n    setActiveTabTutorial: (active_tab_tutorials: number) => void;\n};\n\nconst UserGuide = ({ setActiveTab, setActiveTabTutorial }: TUserGuide) => {\n    return (\n        <div className='tab__dashboard__home__retrigger'>\n            <button\n                data-testid='btn-user-guide'\n                onClick={() => {\n                    setActiveTab(DBOT_TABS.TUTORIAL);\n                    setActiveTabTutorial(0);\n                }}\n            >\n                <Icon className='tab__dashboard__home__retrigger__icon' icon={'IcDbotUserGuide'} />\n                <Text size='xs' line_height='s' className={'tab__dashboard__home__retrigger__text'}>\n                    {localize('User Guide')}\n                </Text>\n            </button>\n        </div>\n    );\n};\n\nexport default UserGuide;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { DesktopWrapper, MobileWrapper, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport OnboardTourHandler from '../dbot-tours/onboarding-tour';\n\nimport Local from './load-bot-preview/local';\nimport Cards from './cards';\nimport InfoPanel from './info-panel';\nimport UserGuide from './user-guide';\n\ntype TMobileIconGuide = {\n    has_dashboard_strategies: boolean;\n    handleTabChange: (active_number: number) => void;\n};\n\ntype TDashboardMobileCommonProps = {\n    is_mobile: boolean;\n    has_dashboard_strategies: boolean;\n};\n\nconst DashboardTitle = ({ is_mobile, has_dashboard_strategies }: TDashboardMobileCommonProps) => (\n    <div\n        className={classNames('tab__dashboard__header', {\n            'tab__dashboard__header--not-listed': !has_dashboard_strategies && is_mobile,\n        })}\n    >\n        <Text color='prominent' line_height='xxl' size={is_mobile ? 's' : 'm'} weight='bold'>\n            {localize('Load or build your bot')}\n        </Text>\n    </div>\n);\n\nconst MobileIconGuide = ({ handleTabChange }: TMobileIconGuide) => (\n    <MobileWrapper>\n        <div>\n            <Local handleTabChange={handleTabChange} />\n        </div>\n    </MobileWrapper>\n);\n\nconst DashboardDescription = ({ is_mobile, has_dashboard_strategies }: TDashboardMobileCommonProps) => (\n    <div\n        className={classNames('tab__dashboard__description', {\n            'tab__dashboard__description__loaded--listed': has_dashboard_strategies && !is_mobile,\n            'tab__dashboard__description__loaded--not-listed':\n                !has_dashboard_strategies || (!has_dashboard_strategies && is_mobile),\n        })}\n    >\n        <Text color='prominent' line_height='s' size={is_mobile ? 'xxs' : 's'}>\n            {localize(\n                'Import a bot from your computer or Google Drive, build it from scratch, or start with a quick strategy.'\n            )}\n        </Text>\n    </div>\n);\n\nconst DashboardComponent = observer(({ handleTabChange }: TMobileIconGuide) => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { dashboard_strategies } = load_modal;\n    const { setActiveTab, setActiveTabTutorial, active_tab, active_tour } = dashboard;\n    const has_dashboard_strategies = !!dashboard_strategies?.length;\n    const is_mobile = isMobile();\n\n    return (\n        <React.Fragment>\n            <div\n                className={classNames('tab__dashboard', {\n                    'tab__dashboard--tour-active': active_tour,\n                })}\n            >\n                <div className='tab__dashboard__content'>\n                    <div\n                        className={classNames('tab__dashboard__centered', {\n                            'tab__dashboard__centered--listed': !is_mobile && has_dashboard_strategies,\n                            'tab__dashboard__centered--not-listed': !has_dashboard_strategies,\n                        })}\n                    >\n                        {!has_dashboard_strategies && !is_mobile && (\n                            <DashboardTitle is_mobile={is_mobile} has_dashboard_strategies={has_dashboard_strategies} />\n                        )}\n                        <DesktopWrapper>\n                            {!has_dashboard_strategies && (\n                                <UserGuide setActiveTab={setActiveTab} setActiveTabTutorial={setActiveTabTutorial} />\n                            )}\n                        </DesktopWrapper>\n                        <div>\n                            <div\n                                className={classNames({\n                                    'tab__dashboard__mobile-container': is_mobile,\n                                    'tab__dashboard__mobile-container--minimized':\n                                        is_mobile && has_dashboard_strategies,\n                                })}\n                            >\n                                {is_mobile && !has_dashboard_strategies && (\n                                    <DashboardTitle\n                                        is_mobile={is_mobile}\n                                        has_dashboard_strategies={has_dashboard_strategies}\n                                    />\n                                )}\n                                {(!is_mobile || (is_mobile && has_dashboard_strategies)) && (\n                                    <DashboardDescription\n                                        is_mobile={is_mobile}\n                                        has_dashboard_strategies={has_dashboard_strategies}\n                                    />\n                                )}\n                                <MobileIconGuide\n                                    handleTabChange={handleTabChange}\n                                    has_dashboard_strategies={has_dashboard_strategies}\n                                />\n                            </div>\n                            {is_mobile && !has_dashboard_strategies && (\n                                <DashboardDescription\n                                    is_mobile={is_mobile}\n                                    has_dashboard_strategies={has_dashboard_strategies}\n                                />\n                            )}\n                        </div>\n                        <Cards has_dashboard_strategies={has_dashboard_strategies} is_mobile={is_mobile} />\n                    </div>\n\n                    {has_dashboard_strategies && !is_mobile && (\n                        <div className='tab__dashboard__preview'>\n                            <Local handleTabChange={handleTabChange} />\n                        </div>\n                    )}\n                </div>\n            </div>\n            <InfoPanel />\n            {active_tab === 0 && <OnboardTourHandler />}\n        </React.Fragment>\n    );\n});\n\nexport default DashboardComponent;\n","import DashboardComponent from './dashboard-component';\n\nexport default DashboardComponent;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Toast } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst StrategyNotification = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { show_toast, toast_message, setOpenSettings } = dashboard;\n\n    React.useEffect(() => {\n        setTimeout(() => {\n            setOpenSettings(toast_message, false);\n        }, 3000);\n    }, [show_toast]);\n    const el_portal = document.getElementById('popup_root');\n\n    if (el_portal && show_toast) {\n        return ReactDOM.createPortal(\n            <div className='import-notification'>\n                <div>\n                    <Toast>\n                        {toast_message === 'delete'\n                            ? localize('You’ve successfully deleted a bot.')\n                            : localize('You’ve successfully imported a bot.')}\n                    </Toast>\n                </div>\n            </div>,\n            el_portal\n        );\n    }\n    return null;\n});\n\nexport default StrategyNotification;\n","import React from 'react';\nimport { Accordion, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { TDescription } from './tutorial-content';\n\ntype TFAQContent = {\n    faq_list: TFAQList[];\n    hide_header?: boolean;\n};\n\ntype TFAQList = {\n    title: string;\n    description: TDescription[];\n};\n\nconst FAQ = ({ type, content, src, imageclass }: TDescription) => {\n    if (type === 'image') return <img src={src} className={imageclass} />;\n    const is_mobile = isMobile();\n\n    return (\n        <Text\n            as='p'\n            size={is_mobile ? 'xs' : 's'}\n            line_height={is_mobile ? 'xl' : 'xxl'}\n            className='faq__description'\n            weight='normal'\n            key={content}\n            dangerouslySetInnerHTML={{ __html: content }}\n        />\n    );\n};\n\nconst scrollToElement = (wrapper_element: HTMLElement, offset: number) => {\n    if (wrapper_element) {\n        wrapper_element.scrollTo({\n            top: offset,\n            behavior: 'smooth',\n        });\n    }\n};\n\nconst FAQContent = observer(({ faq_list, hide_header = false }: TFAQContent) => {\n    const { dashboard } = useDBotStore();\n    const { faq_search_value } = dashboard;\n    const faq_wrapper_element = React.useRef<HTMLDivElement>(null);\n    const timer_id = React.useRef<ReturnType<typeof setTimeout> | null>(null);\n\n    const handleAccordionClick = () => {\n        // Scroll to the top of the open accordion item.\n        // Need timer to first close the accordion item then scroll the new item to top.\n        timer_id.current = setTimeout(() => {\n            const open_accordion_element: HTMLElement | null | undefined =\n                faq_wrapper_element.current?.querySelector('.dc-accordion__item--open');\n            const previous_sibling_element = open_accordion_element?.previousElementSibling as HTMLElement;\n            if (faq_wrapper_element.current && open_accordion_element) {\n                const offset = previous_sibling_element ? previous_sibling_element.offsetTop - 80 : 0;\n                scrollToElement(faq_wrapper_element?.current, offset);\n            }\n            if (timer_id?.current) clearTimeout(timer_id.current);\n        }, 5);\n    };\n\n    React.useEffect(() => {\n        return () => {\n            if (timer_id.current) clearTimeout(timer_id.current);\n        };\n    }, []);\n\n    const getList = () => {\n        return faq_list.map(({ title, description }: TFAQList) => ({\n            header: (\n                <Text\n                    as='p'\n                    line_height='xl'\n                    className='faq__title'\n                    weight='bold'\n                    key={title}\n                    size={isMobile() ? 'xs' : 's'}\n                >\n                    {title}\n                </Text>\n            ),\n            content: description.map((item, index) => (\n                <FAQ {...item} key={`faq-description-item-${item?.content}-${index}`} />\n            )),\n        }));\n    };\n\n    return (\n        <div>\n            <div className='faq__wrapper' ref={faq_wrapper_element}>\n                {!hide_header && (\n                    <Text as='p' line_height='xl' className='faq__wrapper__header' weight='bold'>\n                        {localize('FAQ')}\n                    </Text>\n                )}\n                {faq_list?.length ? (\n                    <div onClick={handleAccordionClick}>\n                        <Accordion className='faq__wrapper__content' list={getList()} icon_close='' icon_open='' />\n                    </div>\n                ) : (\n                    <div className='faq__wrapper__nosearch'>\n                        <Text as='h1' weight='bold' line_height='xxs'>\n                            {localize('No results found \"{{ faq_search_value }}\"', {\n                                faq_search_value,\n                            })}\n                        </Text>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n});\n\nexport default FAQContent;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Dialog, Icon, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { DBOT_TABS } from 'Constants/bot-contents';\nimport { removeKeyValue } from 'Utils/settings';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TGuideList = {\n    content?: string;\n    id: number;\n    src?: string;\n    subtype?: string;\n    type: string;\n    url?: string;\n    imageclass?: string;\n};\n\ntype TGuideContent = {\n    guide_list: TGuideList[];\n};\n\nconst GuideContent = observer(({ guide_list }: TGuideContent) => {\n    const { dashboard } = useDBotStore();\n    const {\n        dialog_options,\n        faq_search_value,\n        is_dialog_open,\n        onCloseDialog: onOkButtonClick,\n        setActiveTab,\n        setTourDialogVisibility,\n        showVideoDialog,\n        setActiveTour,\n        setShowMobileTourDialog,\n    } = dashboard;\n    const is_mobile = isMobile();\n\n    const triggerTour = (type: string) => {\n        if (type === 'OnBoard') {\n            removeKeyValue('onboard_tour_token');\n            setActiveTab(DBOT_TABS.DASHBOARD);\n            if (is_mobile) setActiveTour('onboarding');\n            setTourDialogVisibility(true);\n        } else {\n            setActiveTab(DBOT_TABS.BOT_BUILDER);\n            if (is_mobile) setActiveTour('bot_builder');\n            setTourDialogVisibility(true);\n            if (is_mobile) setShowMobileTourDialog(true);\n        }\n    };\n\n    return React.useMemo(\n        () => (\n            <div className='tutorials-wrap'>\n                {guide_list?.length > 0 && (\n                    <Text align='center' weight='bold' color='prominent' line_height='s' size={is_mobile ? 'xxs' : 's'}>\n                        {localize('Step-by-step guides')}\n                    </Text>\n                )}\n                <div className='tutorials-wrap__group'>\n                    {guide_list?.map(({ id, content, src, type, subtype }) => {\n                        return (\n                            type === 'Tour' && (\n                                <div\n                                    className='tutorials-wrap__group__cards tutorials-wrap--tour'\n                                    key={id}\n                                    onClick={() => triggerTour(subtype)}\n                                >\n                                    <div\n                                        className={classNames('tutorials-wrap__placeholder__tours', {\n                                            'tutorials-wrap__placeholder--disabled': !src,\n                                        })}\n                                        style={{\n                                            backgroundImage: `url(${src})`,\n                                        }}\n                                    />\n                                    <Text\n                                        align='center'\n                                        color='prominent'\n                                        line_height='s'\n                                        size={is_mobile ? 'xxs' : 's'}\n                                    >\n                                        {content}\n                                    </Text>\n                                </div>\n                            )\n                        );\n                    })}\n                </div>\n                {guide_list?.length > 0 && (\n                    <Text align='center' weight='bold' color='prominent' line_height='s' size={is_mobile ? 'xxs' : 's'}>\n                        {localize('Videos on Deriv Bot')}\n                    </Text>\n                )}\n                <div className='tutorials-wrap__group'>\n                    {guide_list?.map(({ id, content, url, type, src }) => {\n                        return (\n                            type !== 'Tour' && (\n                                <div className='tutorials-wrap__group__cards tutorials-wrap--placeholder' key={id}>\n                                    <div\n                                        className={classNames('tutorials-wrap__placeholder', {\n                                            'tutorials-wrap__placeholder--disabled': !url,\n                                        })}\n                                        style={{\n                                            backgroundImage: `url(${src})`,\n                                        }}\n                                    >\n                                        <div className='tutorials-wrap__placeholder__button-group'>\n                                            <Icon\n                                                className='tutorials-wrap__placeholder__button-group--play'\n                                                width='4rem'\n                                                height='4rem'\n                                                icon={'IcPlayOutline'}\n                                                onClick={() =>\n                                                    showVideoDialog({\n                                                        type: 'url',\n                                                        url,\n                                                    })\n                                                }\n                                            />\n                                        </div>\n                                    </div>\n                                    <Text\n                                        align='center'\n                                        color='prominent'\n                                        line_height='s'\n                                        size={is_mobile ? 'xxs' : 's'}\n                                    >\n                                        {content}\n                                    </Text>\n                                </div>\n                            )\n                        );\n                    })}\n                    {!guide_list.length && (\n                        <div className='tutorials-wrap__group__nosearch'>\n                            <Text as='h1' weight='bold' line_height='xxs'>\n                                {localize('No results found \"{{ faq_search_value }}\"', {\n                                    faq_search_value,\n                                })}\n                            </Text>\n                        </div>\n                    )}\n                </div>\n                <Dialog\n                    title={dialog_options.title}\n                    is_visible={is_dialog_open}\n                    cancel_button_text={localize('Cancel')}\n                    onCancel={onOkButtonClick}\n                    confirm_button_text={localize('OK')}\n                    onConfirm={onOkButtonClick}\n                    is_mobile_full_width\n                    className={'dc-dialog'}\n                    has_close_icon\n                    onClose={onOkButtonClick}\n                >\n                    <iframe width='100%' height='100%' src={dialog_options.url} frameBorder='0' allowFullScreen />\n                </Dialog>\n            </div>\n        ),\n        [guide_list, is_dialog_open]\n    );\n});\n\nexport default GuideContent;\n","import { getImageLocation } from '../../../public-path';\nimport { localize } from '@deriv/translations';\n\nexport type TDescription = Pick<TContent, 'type' | 'content' | 'src' | 'imageclass'>;\n\nexport type TFaqContent = Pick<TContent, 'title' | 'description' | 'src'>;\n\nexport type TGuideContent = Omit<TContent, 'title' | 'description'>;\n\nexport type TUserGuideContent = Omit<TContent, 'title' | 'description'>;\n\nexport type TContent = {\n    content?: string;\n    description: TDescription[];\n    id: number;\n    src?: string;\n    subtype?: string;\n    title: string;\n    type: string;\n    url?: string;\n    imageclass?: string;\n};\nexport const user_guide_content: TUserGuideContent[] = [\n    {\n        id: 1,\n        type: 'Tour',\n        subtype: 'OnBoard',\n        content: localize('Get started on Deriv Bot'),\n        src: getImageLocation('dbot-onboard-tour.png'),\n    },\n    {\n        id: 2,\n        type: 'Tour',\n        subtype: 'BotBuilder',\n        content: localize('Let’s build a bot!'),\n        src: getImageLocation('bot-builder-tour.png'),\n    },\n];\n\nexport const guide_content: TGuideContent[] = [\n    {\n        id: 1,\n        type: 'DBotVideo',\n        content: localize('Deriv Bot - your automated trading partner'),\n        url: 'https://www.youtube.com/embed/QdI5zCkO4Gk',\n        src: getImageLocation('video_dbot.webp'),\n    },\n];\n\nexport const faq_content: TFaqContent[] = [\n    {\n        title: localize('What is Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"Deriv Bot is a web-based strategy builder for trading digital options. It’s a platform where you can build your own automated trading bot using drag-and-drop 'blocks'.\"\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('Where do I find the blocks I need?'),\n        description: [\n            {\n                type: 'text',\n                content: localize('Follow these steps:'),\n            },\n            {\n                type: 'text',\n                content: localize('1. Go to <strong>Bot Builder</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    \"2. Under the <strong>Blocks menu</strong>, you'll see a list of categories. Blocks are grouped within these categories. Choose the block you want and drag them to the workspace.\"\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('blocks_menu.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '3. You can also search for the blocks you want using the search bar above the categories.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('blocks_menu_search.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    'For more info, <a href=\"https://deriv.com/academy/blog/posts/how-to-build-a-basic-trading-bot-with-dbot/\" target=\"_blank\">check out this blog post</a> on the basics of building a trading bot.'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('How do I remove blocks from the workspace?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'Click on the block you want to remove and press <strong>Delete</strong> on your keyboard.'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('How do I create variables?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    '1. Under the <strong>Blocks</strong> menu, go to <strong>Utility > Variables</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '2. Enter a name for your variable, and hit <strong>Create</strong>. New blocks containing your new variable will appear below.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('3. Choose the block you want and drag it to the workspace.'),\n            },\n        ],\n    },\n    {\n        title: localize('Do you offer pre-built trading bots on Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"Yes, you can get started with a pre-built bot using the <strong>Quick strategy</strong> feature. You’ll find some of the most popular trading strategies here: Martingale, D'Alembert, and Oscar's Grind. Just select the strategy, enter your trade parameters, and your bot will be created for you. You can always tweak the parameters later.\"\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('What is a quick strategy?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"A quick strategy is a ready-made strategy that you can use in Deriv Bot. There are 3 quick strategies you can choose from: Martingale, D'Alembert, and Oscar's Grind.\"\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('<strong>Using a quick strategy</strong>'),\n            },\n            {\n                type: 'text',\n                content: localize('1. Go to <strong>Quick strategy</strong> and select the strategy you want.'),\n            },\n            {\n                type: 'text',\n                content: localize('2. Select the asset and trade type.'),\n            },\n            {\n                type: 'text',\n                content: localize('3. Set your trade parameters and hit <strong>Run</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '4. Once the blocks are loaded onto the workspace, tweak the parameters if you want, or hit <strong>Run</strong> to start trading.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '5. Hit <strong>Save</strong> to download your bot. You can choose to download your bot to your device or your Google Drive.'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('How do I save my strategy?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'In <strong>Bot Builder</strong>, hit <strong>Save</strong> on the toolbar at the top to download your bot. Give your bot a name, and choose to download your bot to your device or Google Drive. Your bot will be downloaded as an XML file.'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('How do I import my own trading bot into Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'Just drag the XML file from your computer onto the workspace, and your bot will be loaded accordingly. Alternatively, you can hit <strong>Import</strong> in <strong>Bot Builder</strong>, and choose to import your bot from your computer or from your Google Drive.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('<strong>Import from your computer</strong>'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '1. After hitting <strong>Import</strong>, select <strong>Local</strong> and click <strong>Continue</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('2. Select your XML file and hit <strong>Open</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize('3. Your bot will be loaded accordingly.'),\n            },\n            {\n                type: 'text',\n                content: localize('<strong>Import from your Google Drive</strong>'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '1. After hitting <strong>Import</strong>, select <strong>Google Drive</strong> and click <strong>Continue</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize('2. Select your XML file and hit <strong>Select</strong>.'),\n            },\n            {\n                type: 'text',\n                content: localize('3. Your bot will be loaded accordingly.'),\n            },\n        ],\n    },\n    {\n        title: localize('How do I reset the workspace?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'In <strong>Bot Builder</strong>, hit <strong>Reset</strong> on the toolbar at the top. This will clear the workspace. Please note that any unsaved changes will be lost.'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('How do I clear my transaction log?'),\n        description: [\n            {\n                type: 'text',\n                content: localize('1. Hit <strong>Reset</strong> at the bottom of stats panel.'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('reset_transaction_log.png'),\n            },\n            {\n                type: 'text',\n                content: localize('2. Hit <strong>Ok</strong> to confirm.'),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('reset_transaction_log_message.png'),\n            },\n        ],\n    },\n    {\n        title: localize('How do I control my losses with Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'There are several ways to control your losses with Deriv Bot. Here’s a simple example of how you can implement loss control in your strategy:'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control.png'),\n                imageclass: 'loss-control',\n            },\n            {\n                type: 'text',\n                content: localize('1. Create the following variables:'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '- <strong>current profit/loss</strong>: Use this variable to store the cumulative profit or loss while your bot is running. Set the initial value to <strong>0</strong>.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '- <strong>current stake</strong>: Use this variable to store the stake amount used in the last contract. You can assign any amount you want, but it must be a positive number.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '- <strong>maximum loss</strong>: Use this variable to store your maximum loss limit. You can assign any amount you want, but it must be a positive number.'\n                ),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '- <strong>trade again</strong>: Use this variable to stop trading when your loss limit is reached. Set the initial value to <strong>true</strong>.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_trade_parameters.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '2. Use a logic block to check if <strong>current profit/loss</strong> exceeds <strong>maximum loss</strong>. If it does, set <strong>trade again</strong> to false to prevent the bot from running another cycle.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_purchase_conditions.png'),\n            },\n            {\n                type: 'text',\n                content: localize(\n                    '3. Update <strong>current profit/loss</strong> with the profit from the last contract. If the last contract was lost, the value of <strong>current profit/loss</strong> will be negative.'\n                ),\n            },\n            {\n                type: 'image',\n                src: getImageLocation('loss_control_restart_trade_conditions.png'),\n            },\n        ],\n    },\n    {\n        title: localize('Can I run Deriv Bot on multiple tabs in my web browser?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'Yes, you can. However, there are limits on your account, such as maximum number of open positions and maximum aggregate payouts on open positions. So, just keep these limits in mind when opening multiple positions. You can find more info about these limits at <a href=\"https://app.deriv.com/account/account-limits\" target=\"_blank\">Settings > Account limits</a>.'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('Can I trade cryptocurrencies on Deriv Bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\"No, we don't offer cryptocurrencies on Deriv Bot.\"),\n            },\n        ],\n    },\n    {\n        title: localize('Do you sell trading bots?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"No, we don't. However, you'll find quick strategies on Deriv Bot that'll help you build your own trading bot for free.\"\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('In which countries is Deriv Bot available?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    'We offer our services in all countries, except for the ones <a href=\"https://deriv.com/tnc/general-terms.pdf\" target=\"_blank\">mentioned in our terms and conditions.</a>'\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('If I close my web browser, will Deriv Bot continue to run?'),\n        description: [\n            {\n                type: 'text',\n                content: localize('No, Deriv Bot will stop running when your web browser is closed.'),\n            },\n        ],\n    },\n    {\n        title: localize('What are the most popular strategies for automated trading?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    \"Three of the most commonly used strategies in automated trading are Martingale, D'Alembert, and Oscar's Grind — you can find them all ready-made and waiting for you in Deriv Bot.\"\n                ),\n            },\n        ],\n    },\n    {\n        title: localize('How do I build a trading bot?'),\n        description: [\n            {\n                type: 'text',\n                content: localize(\n                    '<a href=\"https://www.youtube.com/watch?v=QdI5zCkO4Gk&t=203s\" target=\"_blank\">Watch this video</a> to learn how to build a trading bot on Deriv Bot. Also, <a href=\"https://deriv.com/academy/blog/posts/how-to-build-a-basic-trading-bot-with-dbot/\" target=\"_blank\">check out this blog post</a> on building a trading bot.'\n                ),\n            },\n        ],\n    },\n];\n","import React from 'react';\nimport classNames from 'classnames';\nimport { DesktopWrapper, Icon, MobileWrapper, SelectNative, Tabs } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport FAQContent from './faq-content';\nimport GuideContent from './guide-content';\nimport { faq_content, guide_content, user_guide_content } from './tutorial-content';\n\ntype TFilteredList = {\n    content?: string;\n    id: number;\n    src?: string;\n    subtype?: string;\n    type: string;\n    url?: string;\n    imageclass?: string;\n};\n\ntype TSelectedTab = {\n    label: string;\n    content: string | React.ReactNode;\n};\n\nconst initialSelectedTab: TSelectedTab = {\n    label: '',\n    content: '',\n};\n\nconst Sidebar = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { active_tab_tutorials, active_tab, faq_search_value, setActiveTabTutorial, setFAQSearchValue } = dashboard;\n    const guide_tab_content = [...user_guide_content, ...guide_content];\n    const [search_filtered_list, setsearchFilteredList] = React.useState<TFilteredList[]>([...guide_tab_content]);\n    const [search_faq_list, setsearchFAQList] = React.useState([...faq_content]);\n    const [selected_tab, setSelectedTab] = React.useState<TSelectedTab>(initialSelectedTab);\n    const menu_items = [\n        {\n            label: localize('Guide'),\n            content: <GuideContent guide_list={[...search_filtered_list]} />,\n        },\n        {\n            label: localize('FAQ'),\n            content: <FAQContent faq_list={[...search_faq_list]} hide_header={isMobile()} />,\n        },\n    ];\n\n    React.useEffect(() => {\n        setFAQSearchValue('');\n        setSelectedTab(menu_items?.[active_tab_tutorials] || {});\n        setsearchFilteredList([...guide_tab_content]);\n        setsearchFAQList([...faq_content]);\n    }, [active_tab_tutorials, active_tab]);\n\n    const removeHTMLTagsFromString = (param = '') => {\n        return param.replace(/<.*?>/g, '');\n    };\n\n    React.useEffect(() => {\n        const is_faq = active_tab_tutorials === 1;\n        const search = faq_search_value?.toLowerCase();\n\n        if (is_faq) {\n            const filtered_list = faq_content?.filter(({ title, description = [] }) => {\n                const match = description?.map(item => (item.type === 'text' ? item.content : '')).join(' ');\n                const title_has_match = removeHTMLTagsFromString(title)?.toLowerCase()?.includes(search);\n                const description_has_match = removeHTMLTagsFromString(match)?.toLowerCase()?.includes(search);\n                return title_has_match || description_has_match;\n            });\n            setsearchFAQList(filtered_list);\n        } else {\n            const filtered_list = guide_tab_content?.filter(({ content = '' }) =>\n                content?.toLowerCase()?.includes(search)\n            );\n            setsearchFilteredList(filtered_list);\n        }\n    }, [faq_search_value, active_tab_tutorials]);\n\n    const onSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setFAQSearchValue(event.target.value);\n    };\n\n    const onChangeHandle = React.useCallback(\n        ({ target }: React.ChangeEvent<HTMLInputElement>) => {\n            setActiveTabTutorial(menu_items.findIndex(i => i.label === target.value));\n        },\n        [active_tab_tutorials]\n    );\n\n    return (\n        <>\n            <DesktopWrapper>\n                <div className='dc-tabs__wrapper'>\n                    <div className='dc-tabs__wrapper__group'>\n                        <Icon data-testid='id-test-search' width='1.6rem' height='1.6rem' icon={'IcSearch'} />\n                        <input\n                            data-testid='id-test-search'\n                            type='text'\n                            placeholder={localize('Search')}\n                            className='dc-tabs__wrapper__group__search-input'\n                            onChange={onSearch}\n                            value={faq_search_value}\n                        />\n                    </div>\n                    <Tabs\n                        className='tutorials'\n                        active_index={active_tab_tutorials}\n                        onTabItemClick={setActiveTabTutorial}\n                        top\n                    >\n                        {menu_items.map(({ label, content }) => (\n                            <div label={label} key={label}>\n                                {content}\n                            </div>\n                        ))}\n                    </Tabs>\n                </div>\n            </DesktopWrapper>\n            <MobileWrapper>\n                <div className='tutorials-mobile'>\n                    <div className='tutorials-mobile__select'>\n                        <SelectNative\n                            data-testid='id-test-search'\n                            list_items={menu_items.map(({ label }, idx) => ({ id: idx, value: label, text: label }))}\n                            value={selected_tab.label}\n                            label={''}\n                            should_show_empty_option={false}\n                            onChange={onChangeHandle}\n                        />\n                    </div>\n                    <div className={classNames({ 'tutorials-mobile__guide': active_tab_tutorials === 0 })}>\n                        {selected_tab.content}\n                    </div>\n                </div>\n            </MobileWrapper>\n        </>\n    );\n});\n\nexport default Sidebar;\n","import Sidebar from './sidebar';\nimport './index.scss';\n\nexport default Sidebar;\n","import React, { useEffect } from 'react';\nimport classNames from 'classnames';\n\nimport { updateWorkspaceName } from '@deriv/bot-skeleton';\nimport dbot from '@deriv/bot-skeleton/src/scratch/dbot';\nimport { initTrashCan } from '@deriv/bot-skeleton/src/scratch/hooks/trashcan';\nimport { api_base } from '@deriv/bot-skeleton/src/services/api/api-base';\nimport { DesktopWrapper, Dialog, MobileWrapper, Tabs } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport Chart from 'Components/chart';\nimport { DBOT_TABS, TAB_IDS } from 'Constants/bot-contents';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport RunPanel from '../run-panel';\n\nimport RunStrategy from './dashboard-component/run-strategy';\nimport { tour_list } from './dbot-tours/utils';\nimport DashboardComponent from './dashboard-component';\nimport StrategyNotification from './strategy-notification';\nimport Tutorial from './tutorial-tab';\n\nconst Dashboard = observer(() => {\n    const { dashboard, load_modal, run_panel, quick_strategy, summary_card } = useDBotStore();\n    const { active_tab, active_tour, setActiveTab, setWebSocketState, setActiveTour } = dashboard;\n    const { onEntered, dashboard_strategies } = load_modal;\n    const { is_dialog_open, is_drawer_open, dialog_options, onCancelButtonClick, onCloseDialog, onOkButtonClick } =\n        run_panel;\n    const { is_strategy_modal_open } = quick_strategy;\n    const { clear } = summary_card;\n    const { DASHBOARD, BOT_BUILDER } = DBOT_TABS;\n    const is_mobile = isMobile();\n    const init_render = React.useRef(true);\n    const { ui } = useStore();\n    const { url_hashed_values } = ui;\n    const hash = ['dashboard', 'bot_builder', 'chart', 'tutorial'];\n\n    let tab_value: number | string = active_tab;\n    const GetHashedValue = (tab: number) => {\n        tab_value = url_hashed_values?.split('#')[1];\n        if (!tab_value) return tab;\n        return Number(hash.indexOf(String(tab_value)));\n    };\n    const active_hash_tab = GetHashedValue(active_tab);\n\n    const checkAndHandleConnection = () => {\n        const api_status = api_base.getConnectionStatus();\n        //added this check because after sleep mode all the store values refresh and is_running is false.\n        const is_bot_running = document.getElementById('db-animation__stop-button') !== null;\n        if (is_bot_running && (api_status === 'Closed' || api_status === 'Closing')) {\n            dbot.terminateBot();\n            clear();\n            setWebSocketState(false);\n        }\n    };\n\n    React.useEffect(() => {\n        window.addEventListener('focus', checkAndHandleConnection);\n    }, []);\n\n    React.useEffect(() => {\n        if (init_render.current) {\n            setActiveTab(Number(active_hash_tab));\n            if (is_mobile) handleTabChange(Number(active_hash_tab));\n            init_render.current = false;\n        } else {\n            window.location.hash = hash[active_tab] || hash[0];\n        }\n        if (tour_list[active_tab] !== active_tour) {\n            setActiveTour('');\n        }\n    }, [active_tab]);\n\n    React.useEffect(() => {\n        if (active_tab === BOT_BUILDER) {\n            if (is_drawer_open) {\n                initTrashCan(400, -748);\n            } else {\n                initTrashCan(20);\n            }\n            setTimeout(() => {\n                window.dispatchEvent(new Event('resize')); // make the trash can work again after resize\n            }, 500);\n        }\n    }, [active_tab, is_drawer_open]);\n\n    useEffect(() => {\n        let timer: ReturnType<typeof setTimeout>;\n        if (dashboard_strategies.length > 0) {\n            // Needed to pass this to the Callback Queue as on tab changes\n            // document title getting override by 'Bot | Deriv' only\n            timer = setTimeout(() => {\n                updateWorkspaceName();\n            });\n        }\n        return () => {\n            if (timer) clearTimeout(timer);\n        };\n    }, [dashboard_strategies, active_tab]);\n\n    const handleTabChange = React.useCallback(\n        (tab_index: number) => {\n            setActiveTab(tab_index);\n            const el_id = TAB_IDS[tab_index];\n            if (el_id) {\n                const el_tab = document.getElementById(el_id);\n                el_tab?.scrollIntoView({\n                    behavior: 'smooth',\n                    block: 'center',\n                    inline: 'center',\n                });\n            }\n        },\n        [active_tab]\n    );\n\n    return (\n        <React.Fragment>\n            <div className='dashboard__main'>\n                <div\n                    className={classNames('dashboard__container', {\n                        'dashboard__container--active': active_tour && active_tab === DASHBOARD && is_mobile,\n                    })}\n                >\n                    <Tabs\n                        active_index={active_tab}\n                        className='dashboard__tabs'\n                        onTabItemChange={onEntered}\n                        onTabItemClick={handleTabChange}\n                        top\n                    >\n                        <div icon='IcDashboardComponentTab' label={localize('Dashboard')} id='id-dbot-dashboard'>\n                            <DashboardComponent handleTabChange={handleTabChange} />\n                        </div>\n                        <div icon='IcBotBuilderTabIcon' label={localize('Bot Builder')} id='id-bot-builder' />\n                        <div icon='IcChartsTabDbot' label={localize('Charts')} id='id-charts'>\n                            <Chart />\n                        </div>\n                        <div icon='IcTutorialsTabs' label={localize('Tutorials')} id='id-tutorials'>\n                            <div className='tutorials-wrapper'>\n                                <Tutorial />\n                            </div>\n                        </div>\n                    </Tabs>\n                </div>\n            </div>\n            <DesktopWrapper>\n                <div className={'dashboard__run-strategy-wrapper'}>\n                    <RunStrategy />\n                    <RunPanel />\n                </div>\n            </DesktopWrapper>\n            <MobileWrapper>{!is_strategy_modal_open && <RunPanel />}</MobileWrapper>\n            <Dialog\n                cancel_button_text={dialog_options.cancel_button_text || localize('Cancel')}\n                className={'dc-dialog__wrapper--fixed'}\n                confirm_button_text={dialog_options.ok_button_text || localize('OK')}\n                has_close_icon\n                is_mobile_full_width={false}\n                is_visible={is_dialog_open}\n                onCancel={onCancelButtonClick}\n                onClose={onCloseDialog}\n                onConfirm={onOkButtonClick || onCloseDialog}\n                portal_element_id='modal_root'\n                title={dialog_options.title}\n            >\n                {dialog_options.message}\n            </Dialog>\n            <StrategyNotification />\n        </React.Fragment>\n    );\n});\n\nexport default Dashboard;\n","import Dashboard from './dashboard';\nimport './dashboard.scss';\n\nexport default Dashboard;\n","import React from 'react';\nimport { TQuickStrategyProps, TSymbolItem } from '../quick-strategy.types';\nimport { MarketOption, QuickStrategyForm, TradeTypeOption } from '.';\n\nconst QuickStrategyContainer = (props: TQuickStrategyProps) => {\n    const {\n        symbol_dropdown,\n        trade_type_dropdown,\n        active_index,\n        description,\n        duration_unit_dropdown,\n        types_strategies_dropdown,\n        initial_values,\n        is_onscreen_keyboard_active,\n        is_stop_button_visible,\n        selected_symbol,\n        selected_trade_type,\n        selected_duration_unit,\n        selected_type_strategy,\n        is_running,\n        is_contract_dialog_open,\n        is_stop_bot_dialog_open,\n        createStrategy,\n        getSizeDesc,\n        onChangeDropdownItem,\n        onChangeInputValue,\n        onHideDropdownList,\n        onScrollStopDropdownList,\n        setCurrentFocus,\n        toggleStopBotDialog,\n    } = props;\n\n    const symbol_dropdown_options = React.useMemo(\n        () =>\n            symbol_dropdown\n                .map((symbol: TSymbolItem) => ({\n                    component: <MarketOption key={symbol.text} symbol={symbol} />,\n                    ...symbol,\n                }))\n                // Until Crypto enabled for Dbot\n                .filter(option => option.group !== 'Cryptocurrencies')\n                .filter(\n                    option => option.text !== 'Volatility 150 (1s) Index' && option.text !== 'Volatility 250 (1s) Index'\n                ),\n        [symbol_dropdown]\n    );\n\n    const trade_type_dropdown_options = React.useMemo(\n        () =>\n            trade_type_dropdown.map(trade_type => ({\n                component: <TradeTypeOption key={trade_type.text} trade_type={trade_type} />,\n                ...trade_type,\n            })),\n        [trade_type_dropdown]\n    );\n\n    return (\n        <QuickStrategyForm\n            active_index={active_index}\n            description={description}\n            duration_unit_dropdown={duration_unit_dropdown}\n            types_strategies_dropdown={types_strategies_dropdown}\n            initial_values={initial_values}\n            is_onscreen_keyboard_active={is_onscreen_keyboard_active}\n            is_stop_button_visible={is_stop_button_visible}\n            symbol_dropdown={symbol_dropdown_options}\n            trade_type_dropdown={trade_type_dropdown_options}\n            selected_symbol={selected_symbol}\n            selected_trade_type={selected_trade_type}\n            selected_duration_unit={selected_duration_unit}\n            selected_type_strategy={selected_type_strategy}\n            getSizeDesc={getSizeDesc}\n            createStrategy={createStrategy}\n            onChangeDropdownItem={onChangeDropdownItem}\n            onChangeInputValue={onChangeInputValue}\n            onHideDropdownList={onHideDropdownList}\n            onScrollStopDropdownList={onScrollStopDropdownList}\n            setCurrentFocus={setCurrentFocus}\n            toggleStopBotDialog={toggleStopBotDialog}\n            is_running={is_running}\n            is_contract_dialog_open={is_contract_dialog_open}\n            is_stop_bot_dialog_open={is_stop_bot_dialog_open}\n        />\n    );\n};\n\nexport default React.memo(QuickStrategyContainer);\n","import { popover_zindex } from 'Constants/z-indexes';\n\nexport type TCommonInputsProperties = {\n    className?: string;\n    zIndex?: number;\n};\n\nconst common_inputs_properties: Readonly<TCommonInputsProperties> = {\n    className: 'quick-strategy__input',\n    zIndex: popover_zindex.QUICK_STRATEGY,\n};\n\nexport default common_inputs_properties;\n","import { localize } from '@deriv/translations';\nimport { TDropdownItems, TInputBaseFields, TInputsFieldNames, TSelectsFieldNames } from '../../quick-strategy.types';\nimport { common_inputs_properties } from '..';\nimport { TCommonInputsProperties } from './common-input-properties';\n\nconst getMessage = (property: string) => `The bot will stop trading if your total ${property} exceeds this amount.`;\n\nexport type TDataFields = {\n    id: string;\n    field_name: TSelectsFieldNames | TInputsFieldNames;\n    className?: string;\n    input_value?: TInputBaseFields;\n    select_value?: TDropdownItems;\n    label: string;\n    placeholder?: string;\n    trailing_icon_message?: string;\n    is_able_disabled?: boolean;\n    is_uniq_strategy_field?: boolean;\n} & Readonly<TCommonInputsProperties>;\n\nconst data_fields: ReadonlyArray<TDataFields> = [\n    {\n        id: 'type-strategy',\n        field_name: 'quick-strategy__type-strategy',\n        className: '',\n        select_value: 'type-strategy',\n        label: '',\n    },\n    {\n        id: 'symbol',\n        field_name: 'quick-strategy__symbol',\n        className: 'quick-strategy__dropdown quick-strategy__leading',\n        select_value: 'symbol',\n        label: localize('Asset'),\n    },\n    {\n        id: 'trade-type',\n        field_name: 'quick-strategy__trade-type',\n        className: 'quick-strategy__dropdown quick-strategy__leading',\n        select_value: 'trade-type',\n        label: localize('Trade type'),\n    },\n    {\n        id: 'duration-unit',\n        field_name: 'quick-strategy__duration-unit',\n        className: '',\n        select_value: 'duration-unit',\n        label: localize('Duration unit'),\n        is_able_disabled: true,\n    },\n    {\n        id: 'duration-value',\n        field_name: 'quick-strategy__duration-value',\n        input_value: 'input_duration_value',\n        label: localize('Duration value'),\n        placeholder: '5',\n        trailing_icon_message: 'The trade length of your purchased contract.',\n        ...common_inputs_properties,\n    },\n    {\n        id: 'stake',\n        field_name: 'quick-strategy__stake',\n        input_value: 'input_stake',\n        label: localize('Initial stake'),\n        placeholder: '10',\n        trailing_icon_message: 'The amount that you pay to enter a trade.',\n        ...common_inputs_properties,\n    },\n    {\n        id: 'loss',\n        field_name: 'quick-strategy__loss',\n        input_value: 'input_loss',\n        label: localize('Loss threshold'),\n        placeholder: '5000',\n        trailing_icon_message: getMessage('loss'),\n        ...common_inputs_properties,\n    },\n    {\n        id: 'strategy-data',\n        is_uniq_strategy_field: true,\n        label: '',\n        field_name: '',\n    },\n    {\n        id: 'profit',\n        field_name: 'quick-strategy__profit',\n        input_value: 'input_profit',\n        label: localize('Profit threshold'),\n        placeholder: '5000',\n        trailing_icon_message: getMessage('profit'),\n        ...common_inputs_properties,\n    },\n];\n\nexport default data_fields;\n","import { action, computed, makeObservable, observable, runInAction } from 'mobx';\nimport { ApiHelpers, config, load } from '@deriv/bot-skeleton';\nimport { save_types } from '@deriv/bot-skeleton/src/constants/save-type';\nimport { localize } from '@deriv/translations';\nimport GTM from 'Utils/gtm';\nimport { getSetting, storeSetting } from 'Utils/settings';\nimport {\n    TDropdownItems,\n    TDropdowns,\n    TDurationOptions,\n    TDurations,\n    TDurationUnitDropdown,\n    TFieldMapData,\n    TFieldsToUpdate,\n    TInputCommonFields,\n    TKeysStrategies,\n    TMarketOption,\n    TQSCache,\n    TSelectedValuesSelect,\n    TSelectsFieldNames,\n    TSetFieldValue,\n    TStrategies,\n    TSymbol,\n    TSymbolDropdown,\n    TTradeType,\n    TTradeTypeContractsFor,\n    TTradeTypeDropdown,\n    TTypeStrategiesDropdown,\n    TTypeStrategy,\n} from '../components/dashboard/quick-strategy/quick-strategy.types';\nimport RootStore from './root-store';\n\nconst Blockly = window.Blockly;\n\nexport default class QuickStrategyStore {\n    root_store: RootStore;\n    qs_cache: TQSCache = (getSetting('quick_strategy') as TQSCache) || {};\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            selected_symbol: observable,\n            selected_trade_type: observable,\n            selected_type_strategy: observable,\n            selected_duration_unit: observable,\n            input_duration_value: observable,\n            input_stake: observable,\n            input_alembert_unit: observable,\n            input_martingale_size: observable,\n            input_oscar_unit: observable,\n            input_loss: observable,\n            input_profit: observable,\n            is_strategy_modal_open: observable,\n            active_index: observable,\n            symbol_dropdown: observable,\n            trade_type_dropdown: observable,\n            duration_unit_dropdown: observable,\n            description: observable,\n            is_contract_dialog_open: observable,\n            is_stop_bot_dialog_open: observable,\n            initial_values: computed,\n            types_strategies_dropdown: observable,\n            onScrollStopDropdownList: action.bound,\n            getSizeDesc: action.bound,\n            getFieldMap: action.bound,\n            getFieldValue: action.bound,\n            getQuickStrategyFields: action.bound,\n            setDescription: action.bound,\n            setActiveTypeStrategyIndex: action.bound,\n            setDurationUnitDropdown: action.bound,\n            setSymbolDropdown: action.bound,\n            setTradeTypeDropdown: action.bound,\n            setTypesStrategiesDropdown: action.bound,\n            setSelectedTypeStrategy: action.bound,\n            setSelectedDurationUnit: action.bound,\n            setSelectedSymbol: action.bound,\n            setSelectedTradeType: action.bound,\n            setDurationInputValue: action.bound,\n            onChangeDropdownItem: action.bound,\n            onChangeInputValue: action.bound,\n            onHideDropdownList: action.bound,\n            loadDataStrategy: action.bound,\n            createStrategy: action.bound,\n            updateSymbolDropdown: action.bound,\n            updateTypesStrategiesDropdown: action.bound,\n            updateTradeTypeDropdown: action.bound,\n            updateDurationDropdown: action.bound,\n            updateDurationValue: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n    selected_symbol: TMarketOption =\n        (this.qs_cache.selected_symbol as TMarketOption) || {\n            group: 'Continuous Indices',\n            text: 'Volatility 100 Index',\n            value: 'R_100',\n        } ||\n        {};\n    selected_trade_type: TTradeType = (this.qs_cache.selected_trade_type as TTradeType) || {};\n    selected_type_strategy: TTypeStrategy = (this.qs_cache.selected_type_strategy as TTypeStrategy) || {};\n    selected_duration_unit: TDurationOptions = (this.qs_cache.selected_duration_unit as TDurationOptions) || {};\n    input_duration_value: string | number = this.qs_cache.input_duration_value ?? '';\n    input_stake: string = this.qs_cache.input_stake ?? '';\n    input_martingale_size: string = this.qs_cache.input_martingale_size ?? '';\n    input_alembert_unit: string = this.qs_cache.input_alembert_unit ?? '';\n    input_oscar_unit: string = this.qs_cache.input_oscar_unit ?? '';\n    input_loss: string = this.qs_cache.input_loss ?? '';\n    input_profit: string = this.qs_cache.input_profit ?? '';\n    active_index: number = this.selected_type_strategy.index ?? 0;\n    description: string = this.qs_cache.selected_type_strategy?.description ?? '';\n    types_strategies_dropdown: TTypeStrategiesDropdown = [];\n    symbol_dropdown: TSymbolDropdown = [];\n    trade_type_dropdown: TTradeTypeDropdown = [];\n    duration_unit_dropdown: TDurationUnitDropdown = [];\n    is_contract_dialog_open = false;\n    is_stop_bot_dialog_open = false;\n    is_strategy_modal_open = false;\n\n    get initial_values() {\n        const init = {\n            'quick-strategy__type-strategy':\n                this.getFieldValue(this.types_strategies_dropdown, this.selected_type_strategy.value) || '',\n            'quick-strategy__symbol': this.getFieldValue(this.symbol_dropdown, this.selected_symbol.value) || '',\n            'quick-strategy__trade-type':\n                this.getFieldValue(this.trade_type_dropdown, this.selected_trade_type.value) || '',\n            'quick-strategy__duration-unit':\n                this.getFieldValue(this.duration_unit_dropdown, this.selected_duration_unit.value) || '',\n            'quick-strategy__duration-value': this.input_duration_value || '',\n            'quick-strategy__stake': this.input_stake,\n            ...(this.active_index === 0 && { 'martingale-size': this.input_martingale_size || '' }),\n            ...(this.active_index === 1 && { 'alembert-unit': this.input_alembert_unit || '' }),\n            ...(this.active_index === 2 && { 'oscar-unit': this.input_oscar_unit || '' }),\n\n            'quick-strategy__loss': this.input_loss || '',\n            'quick-strategy__profit': this.input_profit || '',\n        };\n        storeSetting('quick_strategy', this.qs_cache);\n\n        return init;\n    }\n\n    setActiveTypeStrategyIndex(index: number): void {\n        this.active_index = index;\n    }\n\n    setDescription(type_strategy: TTypeStrategy): void {\n        this.description =\n            this.types_strategies_dropdown?.find(strategy => strategy.value === type_strategy.value)?.description ?? '';\n    }\n\n    setDurationUnitDropdown(duration_unit_options: TDurationUnitDropdown): void {\n        this.duration_unit_dropdown = duration_unit_options;\n    }\n\n    setSymbolDropdown(symbol_options: TSymbolDropdown): void {\n        this.symbol_dropdown = symbol_options;\n    }\n\n    setTradeTypeDropdown(trade_type_options: TTradeTypeDropdown): void {\n        this.trade_type_dropdown = trade_type_options;\n    }\n\n    setSelectedDurationUnit(duration_unit: TDurationOptions): void {\n        this.qs_cache.selected_duration_unit = duration_unit;\n        this.selected_duration_unit = duration_unit;\n    }\n\n    setTypesStrategiesDropdown(types_strategies_options: TTypeStrategiesDropdown): void {\n        this.types_strategies_dropdown = types_strategies_options;\n    }\n\n    setSelectedTypeStrategy(type_strategy: TTypeStrategy): void {\n        this.qs_cache.selected_type_strategy = type_strategy;\n        this.selected_type_strategy = type_strategy;\n        this.setDescription(type_strategy);\n    }\n\n    setSelectedSymbol(symbol: TMarketOption): void {\n        this.qs_cache.selected_symbol = symbol;\n        this.selected_symbol = symbol;\n        delete this.qs_cache.selected_duration_unit;\n        delete this.qs_cache.selected_trade_type;\n    }\n\n    setSelectedTradeType(trade_type: TTradeType): void {\n        this.qs_cache.selected_trade_type = trade_type;\n        this.selected_trade_type = trade_type;\n        delete this.qs_cache.selected_duration_unit;\n    }\n\n    setDurationInputValue(duration_value: string | number): void {\n        this.qs_cache.input_duration_value = duration_value;\n        this.input_duration_value = duration_value;\n    }\n\n    onChangeDropdownItem(type: TDropdownItems, value: string, setFieldValue: TSetFieldValue): void {\n        if (!value) {\n            return;\n        }\n\n        const field_map = this.getFieldMap(type);\n        if (type === 'symbol') {\n            this.updateTradeTypeDropdown(value, setFieldValue);\n\n            const symbol = this.symbol_dropdown.find(item => item.value === value);\n\n            if (symbol) {\n                this.setSelectedSymbol(symbol);\n                setFieldValue(field_map?.field_name, symbol.text);\n            }\n        } else if (type === 'trade-type') {\n            this.updateDurationDropdown(this.selected_symbol.value, value, setFieldValue);\n\n            const trade_type = this.trade_type_dropdown.find(item => item.value === value);\n\n            if (trade_type) {\n                this.setSelectedTradeType(trade_type);\n                setFieldValue(field_map?.field_name, trade_type.text);\n            }\n        } else if (type === 'duration-unit') {\n            this.updateDurationValue(value, setFieldValue);\n\n            const duration_unit = this.duration_unit_dropdown.find(item => item.value === value);\n\n            if (duration_unit) {\n                this.setSelectedDurationUnit(duration_unit);\n                setFieldValue(field_map?.field_name, duration_unit.text);\n            }\n        } else if (type === 'type-strategy') {\n            const typeStrategy = this.types_strategies_dropdown.find(item => item.value === value);\n\n            if (typeStrategy) {\n                this.setSelectedTypeStrategy(typeStrategy);\n                this.setActiveTypeStrategyIndex(typeStrategy.index);\n                setFieldValue(field_map?.field_name, typeStrategy.text);\n            }\n        }\n    }\n\n    onChangeInputValue(field: TInputCommonFields, event: React.ChangeEvent<HTMLInputElement>): void {\n        this.qs_cache[field] = event.currentTarget.value;\n        this[field] = event.currentTarget.value;\n        storeSetting('quick_strategy', this.qs_cache);\n    }\n\n    onHideDropdownList(type: TDropdownItems, value: TSelectsFieldNames, setFieldValue: TSetFieldValue): void {\n        const field_map = this.getFieldMap(type);\n        const item = field_map.dropdown?.find(i => i.text.toLowerCase() === value.toLowerCase()) || field_map.selected;\n\n        // Don't allow bogus input.\n        if (!item) {\n            setFieldValue(field_map?.field_name, '');\n            return;\n        }\n        // Restore value if user closed list.\n        if (item.text !== value) {\n            setFieldValue(field_map?.field_name, item.text);\n        }\n        // Update item if different item was typed.\n        if (item !== field_map.selected) {\n            field_map.setSelected(item);\n        }\n    }\n\n    async loadDataStrategy() {\n        this.root_store.flyout.setVisibility(false);\n        this.is_strategy_modal_open = !this.is_strategy_modal_open;\n\n        if (this.is_strategy_modal_open) {\n            await this.updateSymbolDropdown();\n            await this.updateTypesStrategiesDropdown();\n        }\n    }\n\n    async createStrategy({ button }: Record<'button', 'run' | 'edit'>) {\n        const symbol = this.selected_symbol.value;\n        const trade_type = this.selected_trade_type.value;\n        const duration_unit = this.selected_duration_unit.value;\n        const duration_value = this.input_duration_value;\n        const stake = this.input_stake;\n        const size = this.input_martingale_size;\n        const alembert_unit = this.input_alembert_unit;\n        const oscar_unit = this.input_oscar_unit;\n        const loss = this.input_loss;\n        const profit = this.input_profit;\n\n        const { contracts_for } = ApiHelpers.instance;\n        const market = await contracts_for.getMarketBySymbol(symbol);\n        const submarket = await contracts_for.getSubmarketBySymbol(symbol);\n        const trade_type_cat = await contracts_for.getTradeTypeCategoryByTradeType(trade_type);\n\n        const { strategies } = config;\n        const strategy_name = Object.keys(strategies).find(s => strategies[s].index === this.active_index);\n        const strategy_xml = await import(/* webpackChunkName: `[request]` */ `../xml/${strategy_name}.xml`);\n        const strategy_dom = Blockly.Xml.textToDom(strategy_xml.default);\n\n        const modifyValueInputs = (key: string, value: number) => {\n            const el_value_inputs = strategy_dom.querySelectorAll(`value[strategy_value=\"${key}\"]`);\n\n            el_value_inputs.forEach((el_value_input: HTMLElement) => {\n                el_value_input.innerHTML = `<shadow type=\"math_number\"><field name=\"NUM\">${value}</field></shadow>`;\n            });\n        };\n\n        const modifyFieldDropdownValues = (name: string, value: string) => {\n            const name_list = `${name.toUpperCase()}_LIST`;\n            const el_blocks = strategy_dom.querySelectorAll(`field[name=\"${name_list}\"]`);\n\n            el_blocks.forEach((el_block: HTMLElement) => {\n                el_block.innerHTML = value;\n            });\n        };\n\n        const fields_to_update: TFieldsToUpdate = {\n            market,\n            submarket,\n            symbol,\n            tradetype: trade_type,\n            tradetypecat: trade_type_cat,\n            durationtype: duration_unit,\n            duration: duration_value,\n            stake,\n            size,\n            alembert_unit,\n            oscar_unit,\n            loss,\n            profit,\n        };\n\n        Object.keys(fields_to_update).forEach(key => {\n            const value = fields_to_update[key as keyof typeof fields_to_update];\n\n            if (!isNaN(value as number)) {\n                modifyValueInputs(key, value as number);\n            } else if (typeof value === 'string') {\n                modifyFieldDropdownValues(key, value);\n            }\n        });\n\n        const file_name = (strategies as TStrategies)?.[strategy_name as TKeysStrategies]?.label || localize('Unknown');\n\n        const { derivWorkspace: workspace } = Blockly;\n\n        if (button === 'run') {\n            workspace\n                .waitForBlockEvent({\n                    block_type: 'trade_definition',\n                    event_type: Blockly.Events.BLOCK_CREATE,\n                    timeout: 5000,\n                })\n                .then(() => {\n                    this.root_store.run_panel.onRunButtonClick();\n                });\n        }\n\n        if (this.is_strategy_modal_open) {\n            this.loadDataStrategy();\n        }\n\n        await load({\n            block_string: Blockly.Xml.domToText(strategy_dom),\n            file_name,\n            workspace,\n            from: save_types.UNSAVED,\n            drop_event: null,\n            strategy_id: null,\n            showIncompatibleStrategyDialog: null,\n        });\n    }\n\n    async updateSymbolDropdown() {\n        const { active_symbols } = ApiHelpers.instance;\n        const symbols = active_symbols.getAllSymbols(/* should_be_open */ true);\n\n        const symbol_options = symbols\n            .filter((symbol: TSymbol) => symbol.submarket_display !== 'Crash/Boom Indices')\n            .map((symbol: TSymbol) => ({\n                group: symbol.submarket_display,\n                text: symbol.symbol_display,\n                value: symbol.symbol,\n            }));\n\n        this.setSymbolDropdown(symbol_options);\n\n        if (!this.selected_symbol.value && symbol_options.length) {\n            this.selected_symbol = symbol_options[0];\n        }\n\n        await this.updateTradeTypeDropdown(this.selected_symbol.value);\n    }\n\n    async updateTradeTypeDropdown(symbol: string, setFieldValue?: TSetFieldValue) {\n        const { contracts_for } = ApiHelpers.instance;\n        const trade_type_options: TTradeTypeDropdown = [];\n        const market = contracts_for.getMarketBySymbol(symbol);\n        const submarket = contracts_for.getSubmarketBySymbol(symbol);\n        const trade_type_categories = await contracts_for.getTradeTypeCategories(market, submarket, symbol);\n\n        const filtered_trade_type_categories = [];\n\n        for (let i = 0; i < trade_type_categories.length; i++) {\n            const trade_type_category = trade_type_categories[i];\n            // eslint-disable-next-line no-await-in-loop\n            const trade_types = await contracts_for.getTradeTypeByTradeCategory(\n                market,\n                submarket,\n                symbol,\n                trade_type_category[1]\n            );\n\n            const hidden_categories = this.getHiddenCategories(trade_types);\n\n            if (hidden_categories < trade_types.length) {\n                filtered_trade_type_categories.push(trade_type_category);\n            }\n        }\n\n        for (let i = 0; i < filtered_trade_type_categories.length; i++) {\n            const trade_type_category = filtered_trade_type_categories[i]; // e.g. ['Up/Down', 'callput']\n            // eslint-disable-next-line no-await-in-loop\n            const trade_types = await contracts_for.getTradeTypeByTradeCategory(\n                market,\n                submarket,\n                symbol,\n                trade_type_category[1]\n            );\n\n            trade_type_options.push(...this.getTradeTypeOptions(trade_types, trade_type_category));\n        }\n\n        this.setTradeTypeDropdown(trade_type_options);\n        let first_trade_type = trade_type_options[0];\n\n        if (this.selected_trade_type && trade_type_options.some(e => e.value === this.selected_trade_type.value)) {\n            first_trade_type = this.selected_trade_type;\n            runInAction(() => {\n                first_trade_type.text = this.getFieldValue(this.trade_type_dropdown, this.selected_trade_type.value);\n            });\n        } else {\n            delete this.qs_cache?.selected_trade_type;\n        }\n        if (first_trade_type) {\n            this.setSelectedTradeType(first_trade_type);\n            await this.updateDurationDropdown(\n                this.selected_symbol.value,\n                this.selected_trade_type.value,\n                setFieldValue\n            );\n\n            if (setFieldValue) {\n                setFieldValue('quick-strategy__trade-type', first_trade_type.text);\n            }\n        }\n    }\n\n    async updateTypesStrategiesDropdown() {\n        const { strategies } = config;\n        const types_strategies = Object.values(strategies as TStrategies).map(strategy => ({\n            index: strategy.index,\n            text: strategy.label,\n            value: strategy.label,\n            description: strategy.description,\n        }));\n\n        this.setTypesStrategiesDropdown(types_strategies);\n        let first_type_strategy = types_strategies[0];\n        if (this.selected_type_strategy && types_strategies.some(e => e.value === this.selected_type_strategy.value)) {\n            first_type_strategy = this.selected_type_strategy;\n            runInAction(() => {\n                first_type_strategy.text = this.getFieldValue(types_strategies, this.selected_type_strategy.value);\n            });\n        } else {\n            delete this.qs_cache.selected_type_strategy;\n        }\n        if (first_type_strategy) {\n            this.setSelectedTypeStrategy(first_type_strategy);\n        }\n    }\n\n    async updateDurationDropdown(symbol: string, trade_type: string, setFieldValue?: TSetFieldValue) {\n        const { contracts_for } = ApiHelpers.instance;\n        const durations = await contracts_for.getDurations(symbol, trade_type);\n\n        const duration_options = (durations as TDurations).map(duration => ({\n            text: duration.display,\n            value: duration.unit,\n            min: duration.min,\n            max: duration.max,\n        }));\n        this.setDurationUnitDropdown(duration_options);\n        let first_duration_unit: TDurationOptions = duration_options[0];\n        if (this.selected_duration_unit && duration_options?.some(e => e.value === this.selected_duration_unit.value)) {\n            first_duration_unit =\n                duration_options?.find(e => e.value === this.selected_duration_unit.value) ??\n                this.selected_duration_unit;\n            runInAction(() => {\n                first_duration_unit.text = this.getFieldValue(duration_options, this.selected_duration_unit.value);\n            });\n        } else {\n            delete this.qs_cache?.selected_duration_unit;\n        }\n        if (first_duration_unit) {\n            this.setSelectedDurationUnit(first_duration_unit);\n            this.updateDurationValue(\n                this.qs_cache?.selected_duration_unit?.value ?? this.selected_duration_unit.value,\n                setFieldValue\n            );\n\n            if (setFieldValue) {\n                setFieldValue('quick-strategy__duration-unit', first_duration_unit.text);\n            }\n        }\n    }\n\n    async updateDurationValue(duration_type: string, setFieldValue?: TSetFieldValue) {\n        const { contracts_for } = ApiHelpers.instance;\n        const durations = await contracts_for.getDurations(this.selected_symbol.value, this.selected_trade_type.value);\n        const min_duration = (durations as TDurations).find(duration => duration.unit === duration_type);\n        if (min_duration) {\n            let duration_input_value: number | string = min_duration.min;\n            const cache_unit = this.qs_cache?.input_duration_value;\n            if (cache_unit && cache_unit < min_duration.max && cache_unit > min_duration.min) {\n                duration_input_value = cache_unit;\n            } else {\n                delete this.qs_cache?.input_duration_value;\n            }\n            this.setDurationInputValue(duration_input_value);\n\n            if (setFieldValue) {\n                setFieldValue('quick-strategy__duration-value', duration_input_value);\n            }\n        }\n    }\n\n    onScrollStopDropdownList = (type: TDropdownItems): void => {\n        GTM.pushDataLayer({ event: `dbot_quick_strategy_scroll_${type}` });\n    };\n\n    getSizeDesc = (index: number): string => {\n        switch (index) {\n            case 0:\n                return 'The multiplier amount used to increase your stake if you’re losing a trade. Value must be higher than 2.';\n            case 1:\n                return 'The amount that you may add to your stake if you’re losing a trade.';\n            case 2:\n                return 'The amount that you may add to your stake after each successful trade.';\n            default:\n                return '';\n        }\n    };\n\n    getFieldMap = (type: TDropdownItems): TFieldMapData => {\n        const field_mapping = {\n            symbol: {\n                field_name: 'quick-strategy__symbol',\n                dropdown: this.symbol_dropdown,\n                selected: this.selected_symbol,\n                setSelected: this.setSelectedSymbol,\n            },\n            'trade-type': {\n                field_name: 'quick-strategy__trade-type',\n                dropdown: this.trade_type_dropdown,\n                selected: this.selected_trade_type,\n                setSelected: this.setSelectedTradeType,\n            },\n            'duration-unit': {\n                field_name: 'quick-strategy__duration-unit',\n                dropdown: this.duration_unit_dropdown,\n                selected: this.selected_duration_unit,\n                setSelected: this.setSelectedDurationUnit,\n            },\n            'type-strategy': {\n                field_name: 'quick-strategy__type-strategy',\n                dropdown: this.types_strategies_dropdown,\n                selected: this.selected_type_strategy,\n                setSelected: this.setSelectedTypeStrategy,\n            },\n        };\n        return field_mapping[type] as TFieldMapData;\n    };\n\n    getFieldValue = (list_items: TDropdowns, value: string): string => {\n        const list_obj: TSelectedValuesSelect =\n            list_items?.find(item =>\n                typeof item.value !== 'string'\n                    ? item.value === value\n                    : item.value?.toLowerCase() === value?.toLowerCase()\n            ) || {};\n\n        return typeof list_obj !== 'string' ? list_obj?.text : '';\n    };\n\n    getQuickStrategyFields = (): void => {\n        return getSetting('quick_strategy');\n    };\n\n    getHiddenCategories = (trade_types: Array<TTradeTypeContractsFor>) => {\n        // TODO: Temporary filtering of barrier + prediction types. Should later\n        // render more inputs for these types. We should only filter out trade type\n        // categories which only feature prediction/barrier trade types. e.g.\n        // in Digits category, users can still purchase Even/Odd types.\n        let hidden_categories = 0;\n\n        for (let j = 0; j < trade_types.length; j++) {\n            const trade_type = trade_types[j];\n            const has_barrier = config.BARRIER_TRADE_TYPES.includes(trade_type.value);\n            const has_prediction = config.PREDICTION_TRADE_TYPES.includes(trade_type.value);\n\n            if (has_barrier || has_prediction) {\n                hidden_categories++;\n            }\n        }\n\n        return hidden_categories;\n    };\n\n    getTradeTypeOptions = (trade_types: Array<TTradeTypeContractsFor>, trade_type_category: Array<string>) => {\n        const trade_type_options: TTradeTypeDropdown = [];\n        trade_types.forEach((trade_type: TTradeTypeContractsFor) => {\n            const has_barrier = config.BARRIER_TRADE_TYPES.includes(trade_type.value);\n            const has_prediction = config.PREDICTION_TRADE_TYPES.includes(trade_type.value);\n            const is_muliplier = ['multiplier'].includes(trade_type.value);\n\n            // TODO: Render extra inputs for barrier + prediction and multiplier types.\n            if (!has_barrier && !has_prediction && !is_muliplier) {\n                trade_type_options.push({\n                    text: trade_type.name,\n                    value: trade_type.value,\n                    group: trade_type_category[0],\n                    icon: trade_type.icon,\n                });\n            }\n        });\n        return trade_type_options;\n    };\n\n    toggleStopBotDialog = (): void => {\n        this.is_contract_dialog_open = !this.is_contract_dialog_open;\n        this.is_stop_bot_dialog_open = !this.is_stop_bot_dialog_open;\n    };\n}\n","import QuickStrategyStore from 'Stores/quick-strategy-store';\nimport RootStore from 'Stores/root-store';\nimport { TInputUniqFields } from '../../quick-strategy.types';\nimport common_inputs_properties, { TCommonInputsProperties } from './common-input-properties';\n\nconst quick_strategy_store = new QuickStrategyStore(RootStore);\n\nexport type TDataUniqInput = {\n    id: TFieldNameUniqInput;\n    field_name: TFieldNameUniqInput;\n    input_value: TInputUniqFields;\n    label: TFieldNameUniqLabel;\n    placeholder: string;\n    trailing_icon_message: string;\n} & Readonly<TCommonInputsProperties>;\n\ntype TFieldNameUniqInput = 'martingale-size' | 'alembert-unit' | 'oscar-unit';\ntype TFieldNameUniqLabel = 'Size' | '' | 'Units';\n\nconst data_uniq_input_obj: ReadonlyArray<TDataUniqInput> = [\n    {\n        id: 'martingale-size',\n        field_name: 'martingale-size',\n        input_value: 'input_martingale_size',\n        label: 'Size',\n        placeholder: '2',\n        trailing_icon_message: quick_strategy_store.getSizeDesc(0),\n        ...common_inputs_properties,\n    },\n    {\n        id: 'alembert-unit',\n        field_name: 'alembert-unit',\n        input_value: 'input_alembert_unit',\n        label: 'Units',\n        placeholder: '2',\n        trailing_icon_message: quick_strategy_store.getSizeDesc(1),\n        ...common_inputs_properties,\n    },\n    {\n        id: 'oscar-unit',\n        field_name: 'oscar-unit',\n        input_value: 'input_oscar_unit',\n        label: 'Units',\n        placeholder: '2',\n        trailing_icon_message: quick_strategy_store.getSizeDesc(2),\n        ...common_inputs_properties,\n    },\n];\n\nexport default data_uniq_input_obj;\n","import React from 'react';\nimport { Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\n\ntype TDescription = {\n    id: string;\n    description: string;\n};\n\nconst Description = ({ id, description }: TDescription) => (\n    <React.Fragment>\n        {id === 'type-strategy' && (\n            <div key='description' className='quick-strategy__text'>\n                <Text size={isMobile() ? 'xxs' : 's'} align='justify'>\n                    {description}\n                </Text>\n            </div>\n        )}\n    </React.Fragment>\n);\n\nDescription.displayName = 'Description';\n\nexport default React.memo(Description);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { isMobile } from '@deriv/shared';\nimport { TDropdownItems, TSelectsFieldNames } from '../quick-strategy.types';\nimport { TDurationFields } from './components.types';\nimport { SelectField } from '.';\n\nconst DurationFields = ({\n    id,\n    field_name,\n    dropdown_list,\n    selected_value,\n    label,\n    select_value,\n    className,\n    is_able_disabled,\n    values,\n    selected_trade_type,\n    selected_symbol,\n    setFieldValue,\n    onChangeDropdownItem,\n    onHideDropdownList,\n    onScrollStopDropdownList,\n}: TDurationFields) => {\n    const is_mobile = isMobile();\n    return id === 'duration-unit' ? (\n        <div\n            className={classNames('quick-strategy__form-row', {\n                'quick-strategy__form-row--multiple': !is_mobile,\n            })}\n        >\n            <SelectField\n                field_name={field_name as TSelectsFieldNames}\n                id={id}\n                is_mobile={is_mobile}\n                dropdown_list={dropdown_list}\n                selected_value={selected_value}\n                label={label}\n                select_value={select_value as TDropdownItems}\n                setFieldValue={setFieldValue}\n                className={className}\n                is_able_disabled={is_able_disabled}\n                values={values}\n                onChangeDropdownItem={onChangeDropdownItem}\n                onHideDropdownList={onHideDropdownList}\n                onScrollStopDropdownList={onScrollStopDropdownList}\n                selected_trade_type={selected_trade_type}\n                selected_symbol={selected_symbol}\n            />\n        </div>\n    ) : (\n        <></>\n    );\n};\n\nexport default React.memo(DurationFields);\n","import React from 'react';\nimport { TDropdownItems, TDropdowns, TSelectedValuesSelect } from '../quick-strategy.types';\nimport { TDropdownLists, TQuickStrategyFields, TSelectedValues } from './components.types';\nimport { data_fields, data_uniq_input_obj, Description, DurationFields, Inputs, Selects } from '.';\n\nconst QuickStrategyFields = React.memo(\n    ({\n        types_strategies_dropdown,\n        symbol_dropdown,\n        trade_type_dropdown,\n        duration_unit_dropdown,\n        selected_type_strategy,\n        selected_trade_type,\n        selected_symbol,\n        selected_duration_unit,\n        onChangeDropdownItem,\n        onHideDropdownList,\n        setFieldValue,\n        onScrollStopDropdownList,\n        handleChange,\n        onChangeInputValue,\n        setCurrentFocus,\n        values,\n        description,\n        errors,\n    }: TQuickStrategyFields) => {\n        const uniq_selected_input = React.useMemo(\n            () => data_uniq_input_obj.filter((_elem, index) => index === selected_type_strategy.index)[0],\n            [selected_type_strategy]\n        );\n\n        const dropdown_lists: TDropdownLists = {\n            symbol: symbol_dropdown,\n            'trade-type': trade_type_dropdown,\n            'duration-unit': duration_unit_dropdown,\n            'type-strategy': types_strategies_dropdown,\n        };\n\n        const selected_values: TSelectedValues = {\n            symbol: selected_symbol,\n            'trade-type': selected_trade_type,\n            'duration-unit': selected_duration_unit,\n            'type-strategy': selected_type_strategy,\n        };\n\n        const fields = React.useMemo(\n            () => {\n                return data_fields.map((item, idx) => {\n                    const {\n                        id,\n                        field_name,\n                        className,\n                        input_value,\n                        select_value,\n                        label,\n                        placeholder,\n                        trailing_icon_message,\n                        zIndex,\n                        is_able_disabled,\n                    } = item;\n\n                    const is_uniq_strategy_field = item?.is_uniq_strategy_field;\n                    const is_input_field = is_uniq_strategy_field || !!input_value;\n                    const is_select_field = !!select_value;\n\n                    const dropdown_list: TDropdowns = !is_uniq_strategy_field\n                        ? dropdown_lists[id as TDropdownItems]\n                        : [];\n\n                    const selected_value: Partial<TSelectedValuesSelect> = !is_uniq_strategy_field\n                        ? selected_values[id as TDropdownItems]\n                        : {};\n\n                    return (\n                        <React.Fragment key={id}>\n                            {id === 'duration-unit' && (\n                                <DurationFields\n                                    id={id}\n                                    field_name={field_name}\n                                    idx={idx}\n                                    dropdown_list={dropdown_list}\n                                    selected_value={selected_value}\n                                    label={label}\n                                    select_value={select_value}\n                                    setFieldValue={setFieldValue}\n                                    className={className}\n                                    is_able_disabled={is_able_disabled}\n                                    values={values}\n                                    onChangeDropdownItem={onChangeDropdownItem}\n                                    onHideDropdownList={onHideDropdownList}\n                                    onScrollStopDropdownList={onScrollStopDropdownList}\n                                    selected_trade_type={selected_trade_type}\n                                    selected_symbol={selected_symbol}\n                                    handleChange={handleChange}\n                                    onChangeInputValue={onChangeInputValue}\n                                    setCurrentFocus={setCurrentFocus}\n                                    errors={errors}\n                                />\n                            )}\n                            {is_input_field && (\n                                <Inputs\n                                    idx={idx}\n                                    handleChange={handleChange}\n                                    onChangeInputValue={onChangeInputValue}\n                                    setCurrentFocus={setCurrentFocus}\n                                    field_name={field_name}\n                                    id={id}\n                                    className={className}\n                                    label={label}\n                                    input_value={input_value}\n                                    placeholder={placeholder}\n                                    is_uniq_strategy_field={is_uniq_strategy_field}\n                                    trailing_icon_message={trailing_icon_message}\n                                    zIndex={zIndex}\n                                    uniq_selected_input={uniq_selected_input}\n                                    errors={errors}\n                                    is_input_field={is_input_field}\n                                />\n                            )}\n                            {is_select_field && id !== 'duration-unit' && (\n                                <Selects\n                                    field_name={field_name}\n                                    id={id}\n                                    dropdown_list={dropdown_list}\n                                    selected_value={selected_value}\n                                    label={label}\n                                    select_value={select_value}\n                                    setFieldValue={setFieldValue}\n                                    className={className}\n                                    is_able_disabled={is_able_disabled}\n                                    values={values}\n                                    onChangeDropdownItem={onChangeDropdownItem}\n                                    onHideDropdownList={onHideDropdownList}\n                                    onScrollStopDropdownList={onScrollStopDropdownList}\n                                    selected_trade_type={selected_trade_type}\n                                    selected_symbol={selected_symbol}\n                                    is_input_field={is_input_field}\n                                />\n                            )}\n                            <Description key={description} id={id} description={description} />\n                        </React.Fragment>\n                    );\n                });\n            },\n            // eslint-disable-next-line react-hooks/exhaustive-deps\n            [\n                types_strategies_dropdown,\n                symbol_dropdown,\n                trade_type_dropdown,\n                duration_unit_dropdown,\n                selected_type_strategy,\n                selected_trade_type,\n                selected_symbol,\n                selected_duration_unit,\n                errors,\n            ]\n        );\n\n        return <div className='quick-strategy__fields'>{fields}</div>;\n    },\n    (prevProps, nextProps) =>\n        prevProps.values === nextProps.values &&\n        prevProps.errors === nextProps.errors &&\n        prevProps.duration_unit_dropdown === nextProps.duration_unit_dropdown\n);\n\nQuickStrategyFields.displayName = 'QuickStrategyFields';\n\nexport default QuickStrategyFields;\n","import React from 'react';\nimport { Button } from '@deriv/components';\nimport { isDesktop } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { TQuickStrategyFooter } from './components.types';\n\nconst QuickStrategyFooter = ({\n    is_submit_enabled,\n    is_running,\n    setFieldValue,\n    submitForm,\n    toggleStopBotDialog,\n}: TQuickStrategyFooter) => {\n    const handleCreateEdit = React.useCallback(() => {\n        setFieldValue('button', 'edit');\n        submitForm();\n    }, [is_submit_enabled]);\n\n    const handleRun = React.useCallback(async () => {\n        if (is_running) {\n            await Promise.resolve(setFieldValue('button', 'edit'))\n                .then(() => submitForm())\n                .then(() => toggleStopBotDialog());\n        } else {\n            setFieldValue('button', 'run');\n            submitForm();\n        }\n    }, [is_submit_enabled]);\n\n    return (\n        <div className={'quick-strategy__form-footer'}>\n            <Button.Group>\n                {isDesktop() && (\n                    <Button\n                        type='button'\n                        id='db-quick-strategy__button-edit'\n                        text={localize('Edit')}\n                        is_disabled={!is_submit_enabled}\n                        secondary\n                        large\n                        onClick={handleCreateEdit}\n                    />\n                )}\n                <Button\n                    type='button'\n                    id='db-quick-strategy__button-run'\n                    text={localize('Run')}\n                    is_disabled={!is_submit_enabled}\n                    primary\n                    large\n                    onClick={handleRun}\n                />\n            </Button.Group>\n        </div>\n    );\n};\n\nexport default React.memo(QuickStrategyFooter);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Form, Formik, FormikProps } from 'formik';\nimport * as Yup from 'yup';\nimport { Text, ThemedScrollbars } from '@deriv/components';\nimport { isMobile, isSafari } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { TQuickStrategyFormValues } from '../quick-strategy.types';\nimport { TQuickStrategyForm } from './components.types';\nimport { QuickStrategyFields, QuickStrategyFooter } from '.';\n\nconst QuickStrategyForm = ({\n    duration_unit_dropdown,\n    types_strategies_dropdown,\n    initial_values,\n    is_onscreen_keyboard_active,\n    is_stop_button_visible,\n    symbol_dropdown,\n    trade_type_dropdown,\n    selected_symbol,\n    selected_trade_type,\n    selected_duration_unit,\n    selected_type_strategy,\n    description,\n    is_contract_dialog_open,\n    is_stop_bot_dialog_open,\n    is_running,\n    createStrategy,\n    onChangeDropdownItem,\n    onChangeInputValue,\n    onHideDropdownList,\n    onScrollStopDropdownList,\n    setCurrentFocus,\n    toggleStopBotDialog,\n}: TQuickStrategyForm) => {\n    const { min, max } = selected_duration_unit;\n\n    const setDefaultValidationNumber = () =>\n        Yup.number()\n            .typeError(localize('Must be a number'))\n            .round('ceil')\n            .min(1, localize('Must be a number higher than 0'));\n\n    const SchemaFields = Yup.object().shape({\n        'quick-strategy__duration-value': Yup.number()\n            .typeError(localize('Must be a number'))\n            .required(localize('Field cannot be empty'))\n            .min(min, localize('Minimum duration: {{ min }}', { min }))\n            .max(max, localize('Maximum duration: {{ max }}', { max })),\n        'quick-strategy__stake': setDefaultValidationNumber(),\n        'quick-strategy__loss': setDefaultValidationNumber(),\n        'martingale-size': Yup.number()\n            .typeError(localize('Must be a number'))\n            .round('floor')\n            .min(2, localize('The value must be equal to or greater than 2.')),\n        'alembert-unit': setDefaultValidationNumber(),\n        'oscar-unit': setDefaultValidationNumber(),\n        'quick-strategy__profit': setDefaultValidationNumber(),\n    });\n    return (\n        <Formik\n            initialValues={initial_values}\n            validationSchema={SchemaFields}\n            onSubmit={createStrategy}\n            enableReinitialize={true}\n            validateOnMount={true}\n        >\n            {({\n                errors,\n                handleChange,\n                values,\n                isSubmitting,\n                setFieldValue,\n                submitForm,\n            }: FormikProps<TQuickStrategyFormValues>) => {\n                const is_valid =\n                    Object.keys(errors).length === 0 && !Object.values(values).some(elem => (elem as string) === '');\n                const is_submit_enabled = !isSubmitting && is_valid;\n                const is_mobile = isMobile();\n\n                return (\n                    <Form\n                        className={classNames('quick-strategy__form', {\n                            'quick-strategy__form--active-keyboard': is_onscreen_keyboard_active,\n                        })}\n                    >\n                        <ThemedScrollbars autohide is_bypassed={is_mobile} className='quick-strategy__form-scrollbar'>\n                            <div\n                                className={classNames('quick-strategy__form-content', {\n                                    'quick-strategy__form-content--active-keyboard': is_onscreen_keyboard_active,\n                                    'quick-strategy__form-content--safari-fix': isSafari(),\n                                })}\n                            >\n                                <div className={classNames('quick-strategy__text', 'quick-strategy__text--margin')}>\n                                    <Text weight='normal' size={is_mobile ? 'xxs' : 's'}>\n                                        {localize('Choose a template and set your trade parameters.')}\n                                    </Text>\n                                </div>\n\n                                <QuickStrategyFields\n                                    types_strategies_dropdown={types_strategies_dropdown}\n                                    symbol_dropdown={symbol_dropdown}\n                                    trade_type_dropdown={trade_type_dropdown}\n                                    duration_unit_dropdown={duration_unit_dropdown}\n                                    selected_type_strategy={selected_type_strategy}\n                                    selected_trade_type={selected_trade_type}\n                                    selected_symbol={selected_symbol}\n                                    selected_duration_unit={selected_duration_unit}\n                                    onChangeDropdownItem={onChangeDropdownItem}\n                                    onHideDropdownList={onHideDropdownList}\n                                    setFieldValue={setFieldValue}\n                                    onScrollStopDropdownList={onScrollStopDropdownList}\n                                    handleChange={handleChange}\n                                    onChangeInputValue={onChangeInputValue}\n                                    setCurrentFocus={setCurrentFocus}\n                                    values={values}\n                                    description={description}\n                                    errors={errors}\n                                />\n                            </div>\n                        </ThemedScrollbars>\n                        <QuickStrategyFooter\n                            is_submit_enabled={is_submit_enabled}\n                            is_stop_button_visible={is_stop_button_visible}\n                            setFieldValue={setFieldValue}\n                            submitForm={submitForm}\n                            is_running={is_running}\n                            is_contract_dialog_open={is_contract_dialog_open}\n                            toggleStopBotDialog={toggleStopBotDialog}\n                            is_stop_bot_dialog_open={is_stop_bot_dialog_open}\n                        />\n                    </Form>\n                );\n            }}\n        </Formik>\n    );\n};\n\nexport default React.memo(QuickStrategyForm);\n","import React from 'react';\nimport { Field, FieldProps } from 'formik';\nimport { Icon, Input, Popover } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { TFormValues, TInputBaseFields, TInputCommonFields } from '../quick-strategy.types';\nimport { TDataFields } from './data/data-fields';\nimport { TDataUniqInput } from './data/data-uniq-input-obj';\nimport { TInputFieldProps } from './components.types';\nimport { data_fields } from '.';\n\nconst InputField = ({\n    idx,\n    handleChange,\n    onChangeInputValue,\n    setCurrentFocus,\n    is_mobile,\n    field_name,\n    id,\n    className,\n    label,\n    input_value,\n    placeholder,\n    is_uniq_strategy_field,\n    trailing_icon_message,\n    zIndex,\n    uniq_selected_input,\n    errors,\n}: TInputFieldProps) => {\n    const dataField = () => {\n        if (is_uniq_strategy_field) {\n            return uniq_selected_input;\n        }\n        return idx ? data_fields[idx] : {};\n    };\n\n    const {\n        field_name: new_field_name,\n        id: new_id,\n        className: new_className,\n        label: new_label,\n        input_value: new_input_value,\n        placeholder: new_placeholder,\n        trailing_icon_message: new_trailing_icon_message,\n        zIndex: new_zIndex,\n    } = (dataField() as TDataUniqInput | TDataFields) || {};\n\n    return (\n        <Field name={field_name || new_field_name} key={id || new_id} id={id || new_id}>\n            {({ field }: FieldProps<string, TFormValues>) => {\n                return (\n                    <Input\n                        {...field}\n                        className={className || new_className}\n                        type='text'\n                        error={errors[(field.name as keyof typeof errors) || (new_field_name as keyof typeof errors)]}\n                        label={localize(label || new_label)}\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                            handleChange(e);\n                            onChangeInputValue(\n                                input_value\n                                    ? (input_value as TInputBaseFields)\n                                    : (new_input_value as TInputCommonFields),\n                                e\n                            );\n                        }}\n                        onFocus={(e: React.FocusEvent<HTMLInputElement>) => setCurrentFocus(e.currentTarget.name)}\n                        onBlur={() => setCurrentFocus(null)}\n                        placeholder={placeholder || new_placeholder}\n                        trailing_icon={\n                            <Popover\n                                alignment={is_mobile ? 'top' : 'bottom'}\n                                message={localize(trailing_icon_message || new_trailing_icon_message)}\n                                zIndex={zIndex || new_zIndex}\n                            >\n                                <Icon icon='IcInfoOutline' />\n                            </Popover>\n                        }\n                    />\n                );\n            }}\n        </Field>\n    );\n};\n\nexport default React.memo(InputField);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { isMobile } from '@deriv/shared';\nimport { TInputsFieldNames } from '../quick-strategy.types';\nimport { TInputs } from './components.types';\nimport { InputField } from '.';\n\nconst Inputs = ({\n    idx,\n    field_name,\n    id,\n    className,\n    label,\n    input_value,\n    placeholder,\n    is_uniq_strategy_field,\n    trailing_icon_message,\n    zIndex,\n    uniq_selected_input,\n    errors,\n    is_input_field,\n    handleChange,\n    onChangeInputValue,\n    setCurrentFocus,\n}: TInputs) => {\n    const is_mobile = isMobile();\n    return is_input_field ? (\n        <div\n            className={classNames('quick-strategy__form-row', {\n                'quick-strategy__form-row--multiple': !is_mobile,\n            })}\n        >\n            <InputField\n                idx={idx}\n                handleChange={handleChange}\n                onChangeInputValue={onChangeInputValue}\n                setCurrentFocus={setCurrentFocus}\n                is_mobile={is_mobile}\n                field_name={field_name as TInputsFieldNames}\n                id={id}\n                className={className}\n                label={label}\n                input_value={input_value}\n                placeholder={placeholder}\n                is_uniq_strategy_field={is_uniq_strategy_field}\n                trailing_icon_message={trailing_icon_message}\n                zIndex={zIndex}\n                uniq_selected_input={uniq_selected_input}\n                errors={errors}\n            />\n        </div>\n    ) : (\n        <></>\n    );\n};\n\nInputs.displayName = 'Inputs';\n\nexport default React.memo(Inputs);\n","import React from 'react';\nimport { Icon, Text } from '@deriv/components';\nimport { TMarketOptionProps } from './components.types';\n\nconst MarketOption = ({ symbol }: TMarketOptionProps) => (\n    <div key={symbol.value} className='quick-strategy__option'>\n        <Icon icon={`IcUnderlying${symbol.value}`} size={32} />\n        <Text className='quick-strategy__symbol' size='xs' color='prominent'>\n            {symbol.text}\n        </Text>\n    </div>\n);\n\nexport default React.memo(MarketOption);\n","import React from 'react';\nimport { Field, FieldProps } from 'formik';\nimport { Autocomplete, Icon, IconTradeTypes, SelectNative, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport { TFormValues, TSelectsFieldNames } from '../quick-strategy.types';\nimport { TSelectFieldProps } from './components.types';\n\nconst SelectField = React.memo(\n    ({\n        field_name,\n        id,\n        is_mobile,\n        dropdown_list,\n        selected_value,\n        label,\n        select_value,\n        setFieldValue,\n        className,\n        is_able_disabled,\n        values,\n        onChangeDropdownItem,\n        onHideDropdownList,\n        onScrollStopDropdownList,\n        selected_trade_type,\n        selected_symbol,\n    }: TSelectFieldProps) => (\n        <Field name={field_name} key={id} id={id}>\n            {({ field }: FieldProps<string, TFormValues>) => (\n                <>\n                    {is_mobile ? (\n                        <SelectNative\n                            list_items={dropdown_list}\n                            value={typeof selected_value === 'string' ? selected_value : selected_value.value}\n                            label={localize(label)}\n                            should_show_empty_option={false}\n                            onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                                onChangeDropdownItem(select_value, e.target.value, setFieldValue);\n                            }}\n                        />\n                    ) : (\n                        <Autocomplete\n                            {...field}\n                            autoComplete='off'\n                            className={className}\n                            type='text'\n                            label={localize(label)}\n                            list_items={dropdown_list}\n                            disabled={is_able_disabled && dropdown_list?.length === 1}\n                            onHideDropdownList={() => {\n                                onHideDropdownList(\n                                    select_value,\n                                    values[field.name] as TSelectsFieldNames,\n                                    setFieldValue\n                                );\n                            }}\n                            onItemSelection={({ value }: { value: string }) => {\n                                onChangeDropdownItem(select_value, value, setFieldValue);\n                            }}\n                            onScrollStop={() => onScrollStopDropdownList(select_value)}\n                            leading_icon={\n                                (select_value === 'trade-type' && selected_trade_type?.icon && (\n                                    <Text>\n                                        <IconTradeTypes type={selected_trade_type?.icon[0]} />\n                                        <IconTradeTypes type={selected_trade_type?.icon[1]} />\n                                    </Text>\n                                )) ||\n                                (select_value === 'symbol' && (selected_symbol?.value as string) && (\n                                    <Icon icon={`IcUnderlying${selected_symbol?.value}`} size={24} />\n                                ))\n                            }\n                        />\n                    )}\n                </>\n            )}\n        </Field>\n    ),\n    (prevProps, nextProps) => {\n        return (\n            prevProps.dropdown_list === nextProps.dropdown_list && prevProps.selected_value === nextProps.selected_value\n        );\n    }\n);\nSelectField.displayName = 'SelectField';\n\nexport default SelectField;\n","import React from 'react';\nimport { isMobile } from '@deriv/shared';\nimport { TDropdownItems, TSelectsFieldNames } from '../quick-strategy.types';\nimport { TSelects } from './components.types';\nimport { SelectField } from '.';\n\nconst Selects = ({\n    field_name,\n    id,\n    dropdown_list,\n    selected_value,\n    label,\n    select_value,\n    setFieldValue,\n    className,\n    is_able_disabled,\n    values,\n    onChangeDropdownItem,\n    onHideDropdownList,\n    onScrollStopDropdownList,\n    selected_trade_type,\n    selected_symbol,\n    is_input_field,\n}: TSelects & { is_input_field: boolean }) =>\n    !is_input_field && id !== 'duration-unit' ? (\n        <div className='quick-strategy__form-row'>\n            <SelectField\n                field_name={field_name as TSelectsFieldNames}\n                id={id}\n                is_mobile={isMobile()}\n                dropdown_list={dropdown_list}\n                selected_value={selected_value}\n                label={label}\n                select_value={select_value as TDropdownItems}\n                setFieldValue={setFieldValue}\n                className={className}\n                is_able_disabled={is_able_disabled}\n                values={values}\n                onChangeDropdownItem={onChangeDropdownItem}\n                onHideDropdownList={onHideDropdownList}\n                onScrollStopDropdownList={onScrollStopDropdownList}\n                selected_trade_type={selected_trade_type}\n                selected_symbol={selected_symbol}\n            />\n        </div>\n    ) : (\n        <></>\n    );\n\nSelects.displayName = 'Selects';\n\nexport default React.memo(Selects);\n","import React from 'react';\nimport { IconTradeTypes, Text } from '@deriv/components';\nimport { TTradeTypeOptionProps } from './components.types';\n\nconst TradeTypeOption = ({ trade_type }: TTradeTypeOptionProps) => (\n    <div key={trade_type.value} className='quick-strategy__option'>\n        <IconTradeTypes type={trade_type.icon[0]} className='quick-strategy__icon' />\n        <IconTradeTypes type={trade_type.icon[1]} className='quick-strategy__icon' />\n        <Text className='quick-strategy__symbol' size='xs' color='prominent'>\n            {trade_type.text}\n        </Text>\n    </div>\n);\n\nexport default React.memo(TradeTypeOption);\n","import React from 'react';\nimport { MobileFullPageModal, Modal } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { QuickStrategyContainer } from './quick-strategy-components';\n\nconst QuickStrategy = observer(() => {\n    const is_mobile = isMobile();\n    const { quick_strategy, run_panel } = useDBotStore();\n    const { ui } = useStore();\n    const {\n        is_strategy_modal_open,\n        loadDataStrategy,\n        active_index,\n        description,\n        createStrategy,\n        duration_unit_dropdown,\n        types_strategies_dropdown,\n        getSizeDesc,\n        initial_values,\n        onChangeDropdownItem,\n        onChangeInputValue,\n        onHideDropdownList,\n        onScrollStopDropdownList,\n        selected_symbol,\n        selected_trade_type,\n        selected_duration_unit,\n        selected_type_strategy,\n        symbol_dropdown,\n        trade_type_dropdown,\n        toggleStopBotDialog,\n        is_contract_dialog_open,\n        is_stop_bot_dialog_open,\n    } = quick_strategy;\n    const { is_stop_button_visible, is_running } = run_panel;\n    const { is_onscreen_keyboard_active, setCurrentFocus } = ui;\n\n    const quick_strategy_props = {\n        symbol_dropdown,\n        trade_type_dropdown,\n        active_index,\n        description,\n        duration_unit_dropdown,\n        types_strategies_dropdown,\n        initial_values,\n        is_onscreen_keyboard_active,\n        is_stop_button_visible,\n        selected_symbol,\n        selected_trade_type,\n        selected_duration_unit,\n        selected_type_strategy,\n        is_running,\n        is_contract_dialog_open,\n        is_stop_bot_dialog_open,\n        createStrategy,\n        getSizeDesc,\n        onChangeDropdownItem,\n        onChangeInputValue,\n        onHideDropdownList,\n        onScrollStopDropdownList,\n        setCurrentFocus,\n        toggleStopBotDialog,\n    };\n\n    return (\n        <>\n            {is_mobile ? (\n                <MobileFullPageModal\n                    is_modal_open={is_strategy_modal_open}\n                    className='quick-strategy__wrapper'\n                    header={localize('Quick Strategy')}\n                    onClickClose={loadDataStrategy}\n                    height_offset='8rem'\n                >\n                    <QuickStrategyContainer {...quick_strategy_props} />\n                </MobileFullPageModal>\n            ) : (\n                <Modal\n                    title={localize('Quick strategy')}\n                    className='modal--strategy'\n                    is_open={is_strategy_modal_open}\n                    toggleModal={loadDataStrategy}\n                    width={'78rem'}\n                >\n                    <div className='modal__content'>\n                        <QuickStrategyContainer {...quick_strategy_props} />\n                    </div>\n                </Modal>\n            )}\n        </>\n    );\n});\n\nexport default QuickStrategy;\n","import QuickStrategy from './quick-strategy';\nimport './quick-strategy.scss';\n\nexport default QuickStrategy;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype FlyoutBlockProps = {\n    block_node: React.ReactNode;\n    should_hide_display_name: boolean;\n};\n\nconst FlyoutBlock = observer(({ block_node, should_hide_display_name }: FlyoutBlockProps) => {\n    const { flyout } = useDBotStore();\n    const { initBlockWorkspace } = flyout;\n\n    let el_block_workspace = React.useRef();\n\n    React.useEffect(() => {\n        initBlockWorkspace(el_block_workspace, block_node);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <div\n            ref={el => (el_block_workspace = el)}\n            className={classNames({\n                'flyout__block-workspace--center': should_hide_display_name,\n                'flyout__block-workspace--top': !should_hide_display_name,\n            })}\n            data-testid='flyout-block-workspace'\n        />\n    );\n});\n\nexport default FlyoutBlock;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { PropTypes } from 'prop-types';\nimport { Button, Text } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\nimport FlyoutBlock from './flyout-block';\n\nconst FlyoutBlockGroup = ({ onInfoClick, block_node, is_active, should_hide_display_name }) => {\n    const block_type = block_node.getAttribute('type');\n    const block_meta = Blockly.Blocks[block_type].meta();\n    const is_variables_get = block_type === 'variables_get';\n    const is_variables_set = block_type === 'variables_set';\n    const { display_name, description } = block_meta;\n\n    const AddButton = () => (\n        <div className='flyout__item-buttons'>\n            <Button\n                id={`db-flyout__add--${block_type}`}\n                className='flyout__button-add flyout__button-add--hide'\n                has_effect\n                is_plus\n                onClick={() => Blockly.derivWorkspace.addBlockNode(block_node)}\n                type='button'\n            />\n        </div>\n    );\n\n    return (\n        <>\n            {is_variables_set && <div className='flyout__hr' />}\n            <div className={classNames('flyout__item', { 'flyout__item--active': is_active })}>\n                {!should_hide_display_name && (\n                    <>\n                        <div className='flyout__item-header'>\n                            <Text\n                                size={is_variables_get ? 'xs' : 'xsm'}\n                                line_height={is_variables_get ? undefined : 'xl'}\n                                weight={is_variables_get ? undefined : 'bold'}\n                            >\n                                {display_name}\n                            </Text>\n                            {!is_variables_get && <AddButton />}\n                        </div>\n                        <div className='flyout__item-description'>\n                            {description}\n                            {onInfoClick && (\n                                <a\n                                    id={display_name.replace(/\\s/gi, '-')}\n                                    className='flyout__item-info'\n                                    onClick={onInfoClick}\n                                >\n                                    <Localize i18n_default_text='Learn more' />\n                                </a>\n                            )}\n                        </div>\n                    </>\n                )}\n                <div className='flyout__block-workspace__header'>\n                    <FlyoutBlock block_node={block_node} should_hide_display_name />\n                    {is_variables_get && <AddButton />}\n                </div>\n            </div>\n        </>\n    );\n};\n\nFlyoutBlockGroup.propTypes = {\n    block_nodes: PropTypes.array,\n    onInfoClick: PropTypes.func,\n};\n\nexport default FlyoutBlockGroup;\n","import React from 'react';\n\ntype TFlyoutImageProps = {\n    width: string;\n    url: string;\n};\n\nconst FlyoutImage = (props: TFlyoutImageProps) => {\n    const { width, url } = props;\n    const style = { width };\n\n    return (\n        <div className='flyout__item' data-testid='dt_flyout_image'>\n            <img src={url} className='flyout__image' style={style} />\n        </div>\n    );\n};\n\nexport default FlyoutImage;\n","import React from 'react';\nimport { Text } from '@deriv/components';\n\nconst FlyoutText = (props: { text: string }) => {\n    const { text } = props;\n\n    return (\n        <Text as='p' size='xs' styles={{ lineHeight: '1.3em' }}>\n            {text}\n        </Text>\n    );\n};\n\nexport default FlyoutText;\n","import React from 'react';\n\nconst FlyoutVideo = (props: { url: string }) => (\n    <div className='flyout__item' data-testid='dt_flyout_video_container'>\n        <iframe\n            data-testid='dt_flyout_video'\n            className='flyout__video'\n            src={props.url}\n            frameBorder='0'\n            allow='accelerometer; encrypted-media; gyroscope; picture-in-picture'\n            allowFullScreen\n            width='100%'\n        />\n    </div>\n);\n\nexport default FlyoutVideo;\n","import React from 'react';\nimport { Button, Icon, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { help_content_config, help_content_types } from 'Utils/help-content/help-content.config';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport FlyoutBlock from '../flyout-block';\nimport FlyoutImage from './flyout-img';\nimport FlyoutText from './flyout-text';\nimport FlyoutVideo from './flyout-video';\n\nconst HelpBase = observer(() => {\n    const { flyout, flyout_help } = useDBotStore();\n    const {\n        block_node,\n        block_type,\n        examples,\n        help_string,\n        onBackClick,\n        onSequenceClick,\n        should_next_disable,\n        should_previous_disable,\n        title,\n    } = flyout_help;\n    const { is_search_flyout } = flyout;\n\n    const block_help_component = help_string && help_content_config(__webpack_public_path__)[block_type];\n    let text_count = 0;\n\n    return (\n        <React.Fragment>\n            <div className='flyout__help-header'>\n                <button className='dc-btn flyout__button-back' onClick={onBackClick}>\n                    <Icon icon='IcArrowLeft' />\n                </button>\n                <Text weight='bold' className='flyout__help-title'>\n                    {title}\n                </Text>\n                <div className='flyout__item-buttons'>\n                    <Button\n                        className='flyout__button-add'\n                        has_effect\n                        id={`db-flyout-help__add--${block_type}`}\n                        onClick={() => Blockly.derivWorkspace.addBlockNode(block_node)}\n                        primary\n                        text={localize('Add')}\n                        type='button'\n                    />\n                </div>\n            </div>\n            <div className='flyout__help-content'>\n                {block_help_component &&\n                    block_help_component.map((component, index) => {\n                        const { type, width, url, example_id } = component;\n                        const { text } = help_string;\n                        const example_node = examples.find(example => example.id === example_id);\n                        switch (type) {\n                            case help_content_types.TEXT:\n                                if (text_count < text.length) {\n                                    return <FlyoutText key={`${block_type}_${index}`} text={text[text_count++]} />;\n                                }\n                                return null;\n                            case help_content_types.VIDEO:\n                                return <FlyoutVideo key={`${block_type}_${index}`} url={url} />;\n                            case help_content_types.IMAGE:\n                                return <FlyoutImage key={`${block_type}_${index}`} width={width} url={url} />;\n                            case help_content_types.BLOCK: {\n                                return <FlyoutBlock key={`${block_type}_${index}`} block_node={block_node} />;\n                            }\n                            case help_content_types.EXAMPLE:\n                                if (example_node) {\n                                    return (\n                                        <FlyoutBlock\n                                            key={`${block_type}_${index}`}\n                                            block_node={example_node.childNodes[0]}\n                                        />\n                                    );\n                                }\n                                return null;\n                            default:\n                                return null;\n                        }\n                    })}\n            </div>\n            {!is_search_flyout && !(should_previous_disable && should_next_disable) && (\n                <div className='flyout__help-footer'>\n                    <Button\n                        className='flyout__button-previous'\n                        secondary\n                        onClick={() => onSequenceClick(false)}\n                        text={localize('Previous')}\n                        type='button'\n                        is_disabled={should_previous_disable}\n                        renderText={text =>\n                            should_previous_disable && (\n                                <Text size='xs' weight='bold' align='center' color='disabled'>\n                                    {text}\n                                </Text>\n                            )\n                        }\n                    />\n                    <Button\n                        className='flyout__button-next'\n                        secondary\n                        onClick={() => onSequenceClick(true)}\n                        text={localize('Next')}\n                        type='button'\n                        is_disabled={should_next_disable}\n                        renderText={text =>\n                            should_next_disable && (\n                                <Text size='xs' weight='bold' align='center' color='disabled'>\n                                    {text}\n                                </Text>\n                            )\n                        }\n                    />\n                </div>\n            )}\n        </React.Fragment>\n    );\n});\n\nexport default HelpBase;\n","import HelpBase from './flyout-help-base.jsx';\n\nexport default HelpBase;\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, Input, Text, ThemedScrollbars } from '@deriv/components';\nimport { getPlatformSettings } from '@deriv/shared';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { help_content_config } from 'Utils/help-content/help-content.config';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport FlyoutBlockGroup from './flyout-block-group.jsx';\nimport HelpBase from './help-contents';\n\nconst SearchResult = ({ search_term, total_result }) => (\n    <div className='flyout__search-header'>\n        <Text weight='bold' className='flyout__search-header-text'>\n            {localize('Results for \"{{ search_term }}\"', {\n                search_term,\n                interpolation: { escapeValue: false },\n            })}\n        </Text>\n        <Text weight='bold' color='profit-success' className='flyout__search-header-text'>\n            {`${total_result} ${total_result > 1 ? localize('results') : localize('result')}`}\n        </Text>\n    </div>\n);\n\nconst FlyoutContent = props => {\n    const flyout_ref = React.useRef();\n    const {\n        flyout_content,\n        active_helper,\n        setHelpContent,\n        initFlyoutHelp,\n        is_empty,\n        is_search_flyout,\n        selected_category,\n        first_get_variable_block_index,\n    } = props;\n\n    return (\n        <div\n            ref={flyout_ref}\n            className={classNames('flyout__content', { 'flyout__normal-content': !is_search_flyout })}\n        >\n            <ThemedScrollbars className='flyout__content-scrollbar'>\n                {selected_category?.getAttribute('id') === 'indicators' && (\n                    <div className='flyout__content-disclaimer'>\n                        <span className='flyout__content-disclaimer-icon'>\n                            <Icon\n                                icon='IcBlackWarning'\n                                custom_color='#000000'\n                                className='flyout__content-disclaimer__warning-icon'\n                            />\n                        </span>\n                        <span className='flyout__content-disclaimer-text'>\n                            {localize(\n                                'Indicators on the chart tab are for indicative purposes only and may vary slightly from the ones on the {{platform_name_dbot}} workspace.',\n                                { platform_name_dbot: getPlatformSettings('dbot').name }\n                            )}\n                        </span>\n                    </div>\n                )}\n                {is_empty ? (\n                    <div className='flyout__search-empty'>\n                        <Text as='h2' weight='bold' line_height='xxs'>\n                            {localize('No results found')}\n                        </Text>\n                    </div>\n                ) : (\n                    flyout_content.map((node, index) => {\n                        const tag_name = node.tagName.toUpperCase();\n\n                        switch (tag_name) {\n                            case Blockly.Xml.NODE_BLOCK: {\n                                const block_type = node.getAttribute('type');\n\n                                return (\n                                    <FlyoutBlockGroup\n                                        key={`${node.getAttribute('type')}${Blockly.utils.genUid()}`}\n                                        id={`flyout__item-workspace--${index}`}\n                                        block_node={node}\n                                        should_hide_display_name={\n                                            block_type === 'variables_get'\n                                                ? index !== first_get_variable_block_index\n                                                : false\n                                        }\n                                        onInfoClick={\n                                            help_content_config(__webpack_public_path__)[block_type] &&\n                                            (is_search_flyout\n                                                ? () => setHelpContent(node)\n                                                : () => initFlyoutHelp(node, block_type))\n                                        }\n                                        is_active={active_helper === block_type}\n                                    />\n                                );\n                            }\n                            case Blockly.Xml.NODE_LABEL: {\n                                return (\n                                    <div\n                                        key={`${node.getAttribute('text')}${index}`}\n                                        className='flyout__item-label-bold'\n                                    >\n                                        {node.getAttribute('text')}\n                                    </div>\n                                );\n                            }\n                            case Blockly.Xml.NODE_INPUT: {\n                                return (\n                                    <Input\n                                        key={`${node.getAttribute('name')}${index}`}\n                                        className={`${node.getAttribute('className')}`}\n                                        type={`${node.getAttribute('type')}`}\n                                        name={`${node.getAttribute('name')}`}\n                                        placeholder={`${node.getAttribute('placeholder')}`}\n                                        autoComplete='off'\n                                    />\n                                );\n                            }\n                            case Blockly.Xml.NODE_BUTTON: {\n                                const callback_key = node.getAttribute('callbackKey');\n                                const callback_id = node.getAttribute('id');\n\n                                return (\n                                    <button\n                                        id={callback_id}\n                                        key={`${callback_key}${index}`}\n                                        className={classNames(\n                                            'dc-btn',\n                                            'dc-btn-effect',\n                                            'dc-btn--primary',\n                                            `${node.getAttribute('className')}`\n                                        )}\n                                        onClick={button => {\n                                            const workspace = Blockly.derivWorkspace;\n                                            const button_cb = workspace.getButtonCallback(callback_key);\n                                            const callback = button_cb || (() => {});\n\n                                            // Workaround for not having a flyout workspace.\n                                            // eslint-disable-next-line no-underscore-dangle\n                                            button.targetWorkspace_ = workspace;\n                                            button.getTargetWorkspace = () => {\n                                                // eslint-disable-next-line no-underscore-dangle\n                                                return button.targetWorkspace_;\n                                            };\n\n                                            callback(button);\n                                        }}\n                                    >\n                                        {node.getAttribute('text')}\n                                    </button>\n                                );\n                            }\n                            default:\n                                return null;\n                        }\n                    })\n                )}\n            </ThemedScrollbars>\n        </div>\n    );\n};\n\nconst Flyout = observer(() => {\n    const { flyout, flyout_help } = useDBotStore();\n    const { gtm } = useStore();\n    const { active_helper, initFlyoutHelp, setHelpContent } = flyout_help;\n    const {\n        flyout_content,\n        flyout_width,\n        is_help_content,\n        is_search_flyout,\n        is_visible,\n        onMount,\n        onUnmount,\n        search_term,\n        selected_category,\n        first_get_variable_block_index,\n    } = flyout;\n    const { pushDataLayer } = gtm;\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, [onMount, onUnmount]);\n\n    if (is_visible && is_search_flyout) {\n        pushDataLayer({ event: 'dbot_search_results', value: true });\n    }\n\n    const total_result = Object.keys(flyout_content).length;\n    const is_empty = total_result === 0;\n\n    return (\n        is_visible && (\n            <div\n                id='gtm-search-results'\n                className={classNames('flyout', {\n                    flyout__search: is_search_flyout,\n                    flyout__help: is_help_content,\n                    flyout__normal: !is_help_content && !is_search_flyout,\n                })}\n                style={{ width: `${flyout_width}px` }}\n            >\n                {is_search_flyout && !is_help_content && (\n                    <SearchResult search_term={search_term} total_result={total_result} />\n                )}\n                {is_help_content ? (\n                    <HelpBase />\n                ) : (\n                    <FlyoutContent\n                        is_empty={is_empty}\n                        flyout_content={flyout_content}\n                        active_helper={active_helper}\n                        setHelpContent={setHelpContent}\n                        initFlyoutHelp={initFlyoutHelp}\n                        is_search_flyout={is_search_flyout}\n                        selected_category={selected_category}\n                        first_get_variable_block_index={first_get_variable_block_index}\n                    />\n                )}\n            </div>\n        )\n    );\n});\n\nexport default Flyout;\n","import Flyout from './flyout.jsx';\nimport './flyout.scss';\n\nexport default Flyout;\n","import React from 'react';\nimport { Button } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst LocalFooter = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { is_open_button_loading, loadFileFromLocal, setLoadedLocalFile, toggleLoadModal } = load_modal;\n    const { setOpenSettings, setPreviewOnPopup } = dashboard;\n\n    const is_mobile = isMobile();\n    const Wrapper = is_mobile ? Button.Group : React.Fragment;\n\n    return (\n        <Wrapper>\n            {is_mobile && (\n                <Button text={localize('Cancel')} onClick={() => setLoadedLocalFile(null)} has_effect secondary large />\n            )}\n            <Button\n                text={localize('Open')}\n                onClick={() => {\n                    loadFileFromLocal();\n                    toggleLoadModal();\n                    setPreviewOnPopup(false);\n                    setOpenSettings('import');\n                }}\n                is_loading={is_open_button_loading}\n                has_effect\n                primary\n                large\n            />\n        </Wrapper>\n    );\n});\n\nexport default LocalFooter;\n","import React from 'react';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TWorkspaceControlProps = {\n    mockZoomInOut?: (is_zoom_in: boolean) => void;\n};\n\nconst WorkspaceControl = observer(({ mockZoomInOut }: TWorkspaceControlProps) => {\n    const { dashboard } = useDBotStore();\n    const { onZoomInOutClick } = dashboard;\n\n    return (\n        <div className='load-strategy__preview-workspace-controls'>\n            <Icon\n                icon={'IcAddRounded'}\n                className='load-strategy__preview-workspace-icon'\n                onClick={() => {\n                    mockZoomInOut ? mockZoomInOut(true) : onZoomInOutClick(true);\n                }}\n                data_testid='zoom-in'\n            />\n            <Icon\n                icon={'IcMinusRounded'}\n                className='load-strategy__preview-workspace-icon'\n                onClick={() => {\n                    mockZoomInOut ? mockZoomInOut(false) : onZoomInOutClick(false);\n                }}\n                data_testid='zoom-out'\n            />\n        </div>\n    );\n});\n\nexport default WorkspaceControl;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Button, Icon } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport LocalFooter from './local-footer';\nimport WorkspaceControl from './workspace-control';\n\nconst LocalComponent = observer(() => {\n    const { dashboard, load_modal } = useDBotStore();\n    const { active_tab, active_tour } = dashboard;\n    const { handleFileChange, loaded_local_file, setLoadedLocalFile } = load_modal;\n\n    const file_input_ref = React.useRef(null);\n    const [is_file_supported, setIsFileSupported] = React.useState(true);\n    const is_mobile = isMobile();\n\n    if (loaded_local_file && is_file_supported) {\n        return (\n            <div className='load-strategy__container load-strategy__container--has-footer'>\n                <div\n                    className={classNames('load-strategy__local-preview', {\n                        'load-strategy__local-preview--active': active_tab === 1 && active_tour,\n                    })}\n                >\n                    <div className='load-strategy__title'>\n                        <Localize i18n_default_text='Preview' />\n                    </div>\n                    <div className='load-strategy__preview-workspace'>\n                        <div id='load-strategy__blockly-container' style={{ height: '100%' }}>\n                            <div className='load-strategy__local-preview-close'>\n                                <Icon icon='IcCross' onClick={() => setLoadedLocalFile(null)} />\n                            </div>\n                            <WorkspaceControl />\n                        </div>\n                    </div>\n                </div>\n                {is_mobile && (\n                    <div className='load-strategy__local-footer'>\n                        <LocalFooter />\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    return (\n        <div className='load-strategy__container'>\n            <div className='load-strategy__local-dropzone'>\n                <input\n                    type='file'\n                    ref={file_input_ref}\n                    accept='application/xml, text/xml'\n                    style={{ display: 'none' }}\n                    onChange={e => setIsFileSupported(handleFileChange(e, false))}\n                />\n                <div\n                    className='load-strategy__local-dropzone-area'\n                    onDrop={e => {\n                        handleFileChange(e, false);\n                    }}\n                >\n                    {is_mobile ? (\n                        <Icon icon='IcLocal' className='load-strategy__local-icon' size={is_mobile ? 96 : 128} />\n                    ) : (\n                        <React.Fragment>\n                            <Icon icon='IcPc' className='load-strategy__local-icon' size={is_mobile ? 96 : 128} />\n                            <div className='load-strategy__local-title'>\n                                <Localize i18n_default_text='Drag your XML file here' />\n                            </div>\n                            <div className='load-strategy__local-description'>\n                                <Localize i18n_default_text='or, if you prefer...' />\n                            </div>\n                        </React.Fragment>\n                    )}\n                    <Button\n                        text={\n                            is_file_supported\n                                ? localize('Select an XML file from your device')\n                                : localize('Please upload an XML file')\n                        }\n                        onClick={() => file_input_ref.current.click()}\n                        has_effect\n                        primary\n                        large\n                    />\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default LocalComponent;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { timeSince } from '@deriv/bot-skeleton';\nimport { save_types } from '@deriv/bot-skeleton/src/constants/save-type';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\ntype TRecentWorkspaceProps = {\n    workspace: { [key: string]: any };\n};\n\nconst RecentWorkspace = observer(({ workspace }: TRecentWorkspaceProps) => {\n    const { load_modal } = useDBotStore();\n    const { getRecentFileIcon, getSaveType, previewRecentStrategy, selected_strategy_id } = load_modal;\n    return (\n        <div\n            className={classnames('load-strategy__recent-item load-dialog', {\n                'load-strategy__recent-item--selected': selected_strategy_id === workspace.id,\n            })}\n            key={workspace.id}\n            onClick={selected_strategy_id === workspace.id ? undefined : () => previewRecentStrategy(workspace.id)}\n        >\n            <div className='load-strategy__recent-item-text load-dialog'>\n                <div className='load-strategy__recent-item-title'>{workspace.name}</div>\n                <div className='load-strategy__recent-item-time'>{timeSince(workspace.timestamp)}</div>\n            </div>\n            <div className='load-strategy__recent-item-location load-dialog'>\n                <Icon\n                    icon={getRecentFileIcon(workspace.save_type)}\n                    className={classnames({\n                        'load-strategy__recent-icon--active': workspace.save_type === save_types.GOOGLE_DRIVE,\n                    })}\n                />\n                <div className='load-strategy__recent-item-saved'>{getSaveType(workspace.save_type)}</div>\n            </div>\n        </div>\n    );\n});\n\nexport default RecentWorkspace;\n","import React from 'react';\nimport classnames from 'classnames';\nimport { Icon } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { Localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport RecentWorkspace from './recent-workspace';\nimport WorkspaceControl from './workspace-control';\n\nconst RecentComponent = observer(() => {\n    const { load_modal } = useDBotStore();\n    const { is_explanation_expand, recent_strategies, toggleExplanationExpand } = load_modal;\n    if (recent_strategies.length) {\n        return (\n            <div className='load-strategy__container load-strategy__container--has-footer'>\n                <div className='load-strategy__recent'>\n                    <div className='load-strategy__recent-files'>\n                        <div className='load-strategy__title'>\n                            <Localize i18n_default_text='Recent' />\n                        </div>\n                        <div className='load-strategy__recent-files-list'>\n                            {recent_strategies.map(workspace => (\n                                <RecentWorkspace key={workspace.id} workspace={workspace} />\n                            ))}\n                        </div>\n                    </div>\n                    <div className='load-strategy__recent-preview'>\n                        <div className='load-strategy__title load-strategy__recent-preview-title'>\n                            <Localize i18n_default_text='Preview' />\n                        </div>\n                        <div className='load-strategy__preview-workspace'>\n                            <div id='load-strategy__blockly-container' style={{ height: '100%' }}>\n                                <WorkspaceControl />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className='load-strategy__container'>\n            <div className='load-strategy__recent-empty'>\n                <Icon icon='IcEmptyFolder' className='load-strategy__recent-empty-icon' size={128} />\n                <div className='load-strategy__recent-empty-title'>\n                    <Localize i18n_default_text='You do not have any recent bots' />\n                </div>\n                <div className='load-strategy__recent-empty-description'>\n                    <Localize i18n_default_text='Create one or upload one from your local drive or Google Drive.' />\n                </div>\n                <div className='load-strategy__recent-empty-expand' onClick={toggleExplanationExpand}>\n                    <Localize i18n_default_text=\"Why can't I see my recent bots?\" />\n                </div>\n                <div\n                    className={classnames('load-strategy__recent-empty-explanation', {\n                        'load-strategy__recent-empty-explanation--show': is_explanation_expand,\n                    })}\n                >\n                    <div>\n                        <Localize i18n_default_text=\"If you've recently used bots but don't see them in this list, it may be because you:\" />\n                    </div>\n                    <ol className='load-strategy__recent-empty-explanation-list'>\n                        <li>\n                            <Localize i18n_default_text='1. Logged in from a different device' />\n                        </li>\n                        <li>\n                            <Localize i18n_default_text='2. Logged in from a different browser' />\n                        </li>\n                        <li>\n                            <Localize i18n_default_text='3. Cleared your browser cache' />\n                        </li>\n                    </ol>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nexport default RecentComponent;\n","import React from 'react';\nimport { Button } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst RecentFooter = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const { is_open_button_loading, loadFileFromRecent, toggleLoadModal } = load_modal;\n    const { setOpenSettings } = dashboard;\n\n    return (\n        <Button\n            text={localize('Open')}\n            onClick={() => {\n                loadFileFromRecent();\n                toggleLoadModal();\n                setOpenSettings('import');\n            }}\n            is_loading={is_open_button_loading}\n            has_effect\n            primary\n            large\n        />\n    );\n});\n\nexport default RecentFooter;\n","import React from 'react';\nimport { MobileFullPageModal, Modal, Tabs } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { tabs_title } from 'Constants/load-modal';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport GoogleDrive from '../dashboard/dashboard-component/load-bot-preview/google-drive';\nimport Local from './local';\nimport LocalFooter from './local-footer';\nimport Recent from './recent';\nimport RecentFooter from './recent-footer';\n\nconst LoadModal = observer(() => {\n    const { load_modal, dashboard } = useDBotStore();\n    const {\n        active_index,\n        is_load_modal_open,\n        loaded_local_file,\n        onEntered,\n        recent_strategies,\n        setActiveTabIndex,\n        toggleLoadModal,\n        tab_name,\n    } = load_modal;\n    const { setPreviewOnPopup } = dashboard;\n    const header_text = localize('Load strategy');\n\n    if (isMobile()) {\n        return (\n            <MobileFullPageModal\n                is_modal_open={is_load_modal_open}\n                className='load-strategy__wrapper'\n                header={localize('Load strategy')}\n                onClickClose={() => {\n                    setPreviewOnPopup(false);\n                    toggleLoadModal();\n                }}\n                height_offset='80px'\n                page_overlay\n            >\n                <Tabs active_index={active_index} onTabItemClick={setActiveTabIndex} top>\n                    <div label={localize('Local')}>\n                        <Local />\n                    </div>\n                    <div label='Google Drive'>\n                        <GoogleDrive />\n                    </div>\n                </Tabs>\n            </MobileFullPageModal>\n        );\n    }\n\n    const has_loaded_file = loaded_local_file && tab_name === tabs_title.TAB_LOCAL;\n    const has_recent_strategies = recent_strategies.length > 0 && tab_name === tabs_title.TAB_RECENT;\n\n    return (\n        <Modal\n            title={header_text}\n            className='load-strategy'\n            width='1000px'\n            height='80vh'\n            is_open={is_load_modal_open}\n            toggleModal={toggleLoadModal}\n            onEntered={onEntered}\n            elements_to_ignore={[document.querySelector('.injectionDiv')]}\n        >\n            <Modal.Body>\n                <Tabs active_index={active_index} onTabItemClick={setActiveTabIndex} top header_fit_content>\n                    <div label={localize('Recent')}>\n                        <Recent />\n                    </div>\n                    <div label={localize('Local')}>\n                        <Local />\n                    </div>\n                    <div label='Google Drive'>\n                        <GoogleDrive />\n                    </div>\n                </Tabs>\n            </Modal.Body>\n            {has_recent_strategies && (\n                <Modal.Footer has_separator>\n                    <RecentFooter />\n                </Modal.Footer>\n            )}\n            {has_loaded_file && (\n                <Modal.Footer has_separator>\n                    <LocalFooter />\n                </Modal.Footer>\n            )}\n        </Modal>\n    );\n});\n\nexport default LoadModal;\n","import LoadModal from './load-modal';\nimport './load-modal.scss';\n\nexport default LoadModal;\n","import React from 'react';\nimport classNames from 'classnames';\nimport ReactDOM from 'react-dom';\nimport { MobileWrapper, Toast } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\n\n// TODO: Need to sanitize,\n// Same sort of component is being used inside DTrader,\n// In Future we might move the `NetworkStatusToastError` to the core packages for resuability.\n\n/**\n * Network status Toast components\n */\n\nconst NetworkStatusToastError = observer(() => {\n    const { common } = useStore();\n    const { network_status } = common;\n    const [is_open, setIsOpen] = React.useState(false);\n    const { message, status } = network_status;\n    const portal_id = 'popup_root';\n\n    if (!document.getElementById(portal_id) || !message) return null;\n\n    if (!is_open && status !== 'online') {\n        setIsOpen(true); // open if status === 'blinker' or 'offline'\n    } else if (is_open && status === 'online') {\n        setTimeout(() => {\n            setIsOpen(false);\n        }, 1500);\n    }\n\n    return ReactDOM.createPortal(\n        <MobileWrapper>\n            <Toast\n                className={classNames({\n                    'dc-toast--blinker': status === 'blinker',\n                })}\n                is_open={is_open}\n                timeout={0}\n                type='error'\n            >\n                {message}\n            </Toast>\n        </MobileWrapper>,\n        document.getElementById(portal_id)\n    );\n});\n\nexport default NetworkStatusToastError;\n","import NetworkToastPopup from './network-toast-popup';\n\nexport default NetworkToastPopup;\n","import React from 'react';\nimport { Button, ExpansionPanel, Icon } from '@deriv/components';\n\nconst getIcon = type => {\n    switch (type) {\n        case 'error':\n            return 'IcAlertDanger';\n        case 'warn':\n            return 'IcAlertWarning';\n        case 'info':\n            return 'IcAlertInfo';\n        default:\n            return 'IcAlertWarning';\n    }\n};\n\nexport const messageWithButton = ({ unique_id, type, message, btn_text, onClick }) => (\n    <>\n        <div key={`${unique_id}_message`} className='notify__item-container'>\n            <Icon key={`${unique_id}_icon`} icon={getIcon(type)} size='22' />\n            <div key={`${unique_id}_text`} className='notify__item-message'>\n                {message}\n            </div>\n        </div>\n        <Button\n            key={`${unique_id}_btn`}\n            className='notify__item-button'\n            text={btn_text}\n            onClick={onClick}\n            has_effect\n            secondary\n        />\n    </>\n);\n\nexport const messageWithImage = (message, image) => (\n    <>\n        <div className='notify__item-message'>{message}</div>\n        <img src={image} style={{ width: '100%' }} />\n    </>\n);\n\n// eslint-disable-next-line react/display-name\nexport const arrayAsMessage = parsedArray => measure => <ExpansionPanel message={parsedArray} onResize={measure} />;\n","import React from 'react';\nimport { Dialog } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst RoutePromptDialog = observer(() => {\n    const { route_prompt_dialog } = useDBotStore();\n    const { continueRoute, should_show, is_confirmed, last_location, onCancel, onConfirm } = route_prompt_dialog;\n\n    React.useEffect(continueRoute, [is_confirmed, last_location, continueRoute]);\n\n    return (\n        <Dialog\n            title={localize('Leaving already?')}\n            confirm_button_text={localize(\"Yes, I'll come back later\")}\n            cancel_button_text={localize(\"No, I'll stay\")}\n            onConfirm={onConfirm}\n            onCancel={onCancel}\n            is_visible={should_show}\n            has_close_icon={false}\n        >\n            <Localize i18n_default_text='If you leave, your current contract will be completed, but your bot will stop running immediately.' />\n        </Dialog>\n    );\n});\n\nexport default RoutePromptDialog;\n","import RoutePromptDialog from './route-prompt-dialog';\n\nexport default RoutePromptDialog;\n","import { localize } from '@deriv/translations';\nimport { arrayAsMessage, messageWithButton } from '../components';\n\nconst showErrorMessageWithButton = (message, block_id, showErrorMessage, centerAndHighlightBlock) => {\n    showErrorMessage(\n        messageWithButton({\n            unique_id: block_id,\n            type: 'error',\n            message,\n            btn_text: localize('Go to block'),\n            onClick: () => {\n                centerAndHighlightBlock();\n            },\n        })\n    );\n};\n\nexport const isCustomJournalMessage = (\n    { message, block_id, variable_name },\n    showErrorMessage,\n    centerAndHighlightBlock,\n    pushMessage\n) => {\n    // notify undefined variable block\n    if (message === undefined && variable_name != null) {\n        showErrorMessageWithButton(\n            localize(\n                \"Variable '{{variable_name}}' has no value. Please set a value for variable '{{variable_name}}' to notify.\",\n                { variable_name }\n            ),\n            block_id,\n            showErrorMessage,\n            centerAndHighlightBlock\n        );\n        return true;\n    }\n    // notify null variable block\n    if (message === null) {\n        pushMessage('NULL');\n        return true;\n    }\n    // notify NaN variable block\n    if (Object.is(message, NaN)) {\n        showErrorMessageWithButton(\n            localize('Tried to perform an invalid operation.'),\n            block_id,\n            showErrorMessage,\n            centerAndHighlightBlock\n        );\n        return true;\n    }\n    // notify list block\n    if (Array.isArray(message)) {\n        const message_length = message.length;\n        const parsedArray = {\n            header:\n                variable_name !== 'null'\n                    ? `${variable_name}: (${message_length})`\n                    : localize('List: ({{message_length}})', { message_length }),\n            content: parseArray(message),\n        };\n        pushMessage(arrayAsMessage(parsedArray));\n        return true;\n    }\n    // notify boolean results\n    if (typeof message === 'boolean') {\n        pushMessage(message.toString());\n        return true;\n    }\n\n    return false;\n};\n\nconst parseArray = message => {\n    return message.map(item => {\n        return {\n            id: new Date().getTime() * Math.random(),\n            value: item && Array.isArray(item) ? parseArray(item) : item,\n        };\n    });\n};\n","import LZString from 'lz-string';\n\nexport const getStoredItemsByUser = (storage_key, loginid, default_value) => {\n    if (!loginid) {\n        return default_value;\n    }\n\n    const storage = getStoredItemsByKey(storage_key, default_value);\n    return storage[loginid] || default_value;\n};\n\nexport const getStoredItemsByKey = (storage_key, default_value) => {\n    try {\n        const session_storage_item = sessionStorage.getItem(storage_key);\n        const decompressed_item = LZString.decompress(session_storage_item);\n        const stored_items = JSON.parse(decompressed_item);\n\n        if (stored_items) {\n            return stored_items;\n        }\n    } catch (e) {\n        // Do nothing.\n    }\n\n    return default_value;\n};\n\nexport const setStoredItemsByKey = (storage_key, value) => {\n    try {\n        const compressed_value = LZString.compress(JSON.stringify(value));\n        sessionStorage.setItem(storage_key, compressed_value);\n    } catch (e) {\n        // eslint-disable-next-line no-console\n        console.warn('Could not write to storage.');\n    }\n};\n","import { action, computed, makeObservable, observable, reaction, when } from 'mobx';\n\nimport { log_types, message_types } from '@deriv/bot-skeleton';\nimport { config } from '@deriv/bot-skeleton/src/constants/config';\nimport { formatDate } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nimport { isCustomJournalMessage } from '../utils/journal-notifications';\nimport { getStoredItemsByKey, getStoredItemsByUser, setStoredItemsByKey } from '../utils/session-storage';\nimport { getSetting, storeSetting } from '../utils/settings';\n\nexport default class JournalStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            is_filter_dialog_visible: observable,\n            journal_filters: observable.shallow,\n            filters: observable.shallow,\n            unfiltered_messages: observable.shallow,\n            toggleFilterDialog: action.bound,\n            onLogSuccess: action.bound,\n            onError: action.bound,\n            onNotify: action.bound,\n            pushMessage: action.bound,\n            filtered_messages: computed,\n            getServerTime: action.bound,\n            playAudio: action.bound,\n            checked_filters: computed,\n            filterMessage: action.bound,\n            clear: action.bound,\n            welcomeBackUser: action.bound,\n            welcomeUser: action.bound,\n            registerReactions: action.bound,\n            restoreStoredJournals: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n        this.restoreStoredJournals();\n    }\n\n    JOURNAL_CACHE = 'journal_cache';\n\n    is_filter_dialog_visible = false;\n\n    filters = [\n        { id: message_types.ERROR, label: localize('Errors') },\n        { id: message_types.NOTIFY, label: localize('Notifications') },\n        { id: message_types.SUCCESS, label: localize('System') },\n    ];\n    journal_filters = [];\n    unfiltered_messages = [];\n\n    restoreStoredJournals() {\n        const { loginid } = this.core?.client;\n        this.journal_filters = getSetting('journal_filter') || this.filters.map(filter => filter.id);\n        this.unfiltered_messages = getStoredItemsByUser(this.JOURNAL_CACHE, loginid, []);\n    }\n\n    getServerTime() {\n        return this.core?.common.server_time.get();\n    }\n\n    playAudio = sound => {\n        if (sound !== config.lists.NOTIFICATION_SOUND[0][1]) {\n            const audio = document.getElementById(sound);\n            audio.play();\n        }\n    };\n\n    toggleFilterDialog() {\n        this.is_filter_dialog_visible = !this.is_filter_dialog_visible;\n    }\n\n    onLogSuccess(message) {\n        const { log_type, extra } = message;\n        this.pushMessage(log_type, message_types.SUCCESS, '', extra);\n    }\n\n    onError(message) {\n        this.pushMessage(message, message_types.ERROR);\n    }\n\n    onNotify(data) {\n        const { run_panel, dbot } = this.root_store;\n        const { message, className, message_type, sound, block_id, variable_name } = data;\n\n        if (\n            isCustomJournalMessage(\n                { message, block_id, variable_name },\n                run_panel.showErrorMessage,\n                () => dbot.centerAndHighlightBlock(block_id, true),\n                parsed_message => this.pushMessage(parsed_message, message_type || message_types.NOTIFY, className)\n            )\n        ) {\n            this.playAudio(sound);\n            return;\n        }\n        this.pushMessage(message, message_type || message_types.NOTIFY, className);\n        this.playAudio(sound);\n    }\n\n    pushMessage(message, message_type, className, extra = {}) {\n        const { client } = this.core;\n        const { loginid, account_list } = client;\n\n        if (loginid) {\n            const current_account = account_list?.find(account => account?.loginid === loginid);\n            extra.current_currency = current_account?.is_virtual ? 'Demo' : current_account?.title;\n        } else if (message === log_types.WELCOME) {\n            return;\n        }\n\n        const date = formatDate(this.getServerTime());\n        const time = formatDate(this.getServerTime(), 'HH:mm:ss [GMT]');\n        const unique_id = Blockly.utils.genUid();\n\n        this.unfiltered_messages.unshift({ date, time, message, message_type, className, unique_id, extra });\n        this.unfiltered_messages = this.unfiltered_messages.slice(); // force array update\n    }\n\n    get filtered_messages() {\n        return (\n            this.unfiltered_messages\n                // filter messages based on filtered-checkbox\n                .filter(\n                    message =>\n                        this.journal_filters.length &&\n                        this.journal_filters.some(filter => message.message_type === filter)\n                )\n        );\n    }\n\n    get checked_filters() {\n        return this.journal_filters.filter(filter => filter != null);\n    }\n\n    filterMessage(checked, item_id) {\n        if (checked) {\n            this.journal_filters.push(item_id);\n        } else {\n            this.journal_filters.splice(this.journal_filters.indexOf(item_id), 1);\n        }\n\n        storeSetting('journal_filter', this.journal_filters);\n    }\n\n    clear() {\n        this.unfiltered_messages = this.unfiltered_messages.slice(0, 0);\n    }\n\n    welcomeBackUser() {\n        this.pushMessage(log_types.WELCOME_BACK, message_types.SUCCESS, 'journal__text');\n    }\n\n    welcomeUser() {\n        this.pushMessage(log_types.WELCOME, message_types.SUCCESS, 'journal__text');\n    }\n\n    registerReactions() {\n        const { client } = this.core;\n\n        // Write journal messages to session storage on each change in unfiltered messages.\n        const disposeWriteJournalMessageListener = reaction(\n            () => this.unfiltered_messages,\n            unfiltered_messages => {\n                const stored_journals = getStoredItemsByKey(this.JOURNAL_CACHE, {});\n                stored_journals[client.loginid] = unfiltered_messages.slice(0, 5000);\n\n                setStoredItemsByKey(this.JOURNAL_CACHE, stored_journals);\n            }\n        );\n\n        // Attempt to load cached journal messages on client loginid change.\n        const disposeJournalMessageListener = reaction(\n            () => client?.loginid,\n            async loginid => {\n                await when(() => client.account_list?.find(account => account.loginid === loginid)?.title ?? false);\n                this.unfiltered_messages = getStoredItemsByUser(this.JOURNAL_CACHE, loginid, []);\n                if (this.unfiltered_messages.length === 0) {\n                    this.welcomeUser();\n                } else if (this.unfiltered_messages.length > 0) {\n                    this.welcomeBackUser();\n                }\n            },\n            { fireImmediately: true } // For initial welcome message\n        );\n\n        return () => {\n            disposeWriteJournalMessageListener();\n            disposeJournalMessageListener();\n        };\n    }\n}\n","import React from 'react';\nimport { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { config, getSavedWorkspaces, load, removeExistingWorkspace, save_types, setColors } from '@deriv/bot-skeleton';\nimport { isMobile } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { clearInjectionDiv, tabs_title } from 'Constants/load-modal';\nimport { TStrategy } from 'Types';\nimport RootStore from './root-store';\n\nconst Blockly = window.Blockly;\n\ninterface ILoadModalStore {\n    active_index: number;\n    is_load_modal_open: boolean;\n    is_explanation_expand: boolean;\n    is_open_button_loading: boolean;\n    is_strategy_loaded: boolean;\n    loaded_local_file: File | null;\n    recent_strategies: string[];\n    dashboard_strategies: Array<TStrategy>;\n    selected_strategy_id: string | undefined;\n    is_strategy_removed: boolean;\n    is_delete_modal_open: boolean;\n    current_workspace_id: string;\n    getSelectedStrategyID: (current_workspace_id: string) => void;\n    refreshStrategies: () => void;\n    loadStrategyToBuilder: (param: TStrategy) => void;\n    refreshStrategiesTheme: () => void;\n    handleFileChange: (\n        event: React.MouseEvent | React.FormEvent<HTMLFormElement> | DragEvent,\n        is_body: boolean\n    ) => boolean;\n    loadFileFromLocal: () => void;\n    onActiveIndexChange: () => void;\n    onDriveConnect: () => void;\n    onDriveOpen: () => void;\n    onEntered: () => void;\n    onLoadModalClose: () => void;\n    onToggleDeleteDialog: (is_delete_modal_open: boolean) => void;\n    onZoomInOutClick: (is_zoom_in: string) => void;\n    previewRecentStrategy: (workspace_id: string) => void;\n    setActiveTabIndex: (index: number) => void;\n    setLoadedLocalFile: (loaded_local_file: File | null) => void;\n    setDashboardStrategies: (strategies: Array<TStrategy>) => void;\n    setRecentStrategies: (recent_strategies: string[]) => void;\n    setSelectedStrategyId: (selected_strategy_id: string) => void;\n    toggleExplanationExpand: () => void;\n    toggleLoadModal: () => void;\n    toggleTourLoadModal: (toggle: boolean) => void;\n    readFile: (is_preview: boolean, drop_event: DragEvent, file: File) => void;\n    updateListStrategies: (workspaces: Array<TStrategy>) => void;\n    getRecentFileIcon: (save_type: { [key: string]: string } | string) => string;\n    getSaveType: (save_type: { [key: string]: string } | string) => string;\n}\n\nexport default class LoadModalStore implements ILoadModalStore {\n    root_store: RootStore;\n    previewed_strategy_id = '';\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            active_index: observable,\n            previewed_strategy_id: observable,\n            is_load_modal_open: observable,\n            is_explanation_expand: observable,\n            is_open_button_loading: observable,\n            is_strategy_loaded: observable,\n            is_delete_modal_open: observable,\n            is_strategy_removed: observable,\n            loaded_local_file: observable,\n            recent_strategies: observable,\n            dashboard_strategies: observable,\n            selected_strategy_id: observable,\n            current_workspace_id: observable,\n            preview_workspace: computed,\n            selected_strategy: computed,\n            tab_name: computed,\n            setPreviewedStrategyId: action.bound,\n            getSelectedStrategyID: action.bound,\n            refreshStrategies: action.bound,\n            loadStrategyToBuilder: action.bound,\n            refreshStrategiesTheme: action.bound,\n            handleFileChange: action.bound,\n            loadFileFromRecent: action.bound,\n            loadFileFromLocal: action.bound,\n            onActiveIndexChange: action.bound,\n            onDriveConnect: action.bound,\n            onDriveOpen: action.bound,\n            onEntered: action.bound,\n            onLoadModalClose: action.bound,\n            onZoomInOutClick: action.bound,\n            previewRecentStrategy: action.bound,\n            setActiveTabIndex: action.bound,\n            setLoadedLocalFile: action.bound,\n            setRecentStrategies: action.bound,\n            setSelectedStrategyId: action.bound,\n            toggleExplanationExpand: action.bound,\n            toggleLoadModal: action.bound,\n            toggleTourLoadModal: action.bound,\n            readFile: action.bound,\n            resetBotBuilderStrategy: action.bound,\n            setDashboardStrategies: action.bound,\n            updateListStrategies: action.bound,\n        });\n\n        this.root_store = root_store;\n\n        reaction(\n            () => this.active_index,\n            () => this.onActiveIndexChange()\n        );\n        reaction(\n            () => this.is_load_modal_open,\n            async is_load_modal_open => {\n                if (is_load_modal_open) {\n                    this.setRecentStrategies((await getSavedWorkspaces()) || []);\n                } else {\n                    this.onLoadModalClose();\n                }\n            }\n        );\n    }\n\n    recent_workspace: Blockly.WorkspaceSvg | null = null;\n    local_workspace: Blockly.WorkspaceSvg | null = null;\n    drop_zone: unknown;\n\n    active_index = 0;\n    is_load_modal_open = false;\n    is_explanation_expand = false;\n    is_open_button_loading = false;\n    loaded_local_file: File | null = null;\n    recent_strategies: Array<string> = [];\n    dashboard_strategies: Array<TStrategy> | [] = [];\n    selected_strategy_id = '';\n    is_strategy_loaded = false;\n    is_delete_modal_open = false;\n    is_strategy_removed = false;\n    current_workspace_id = '';\n\n    get preview_workspace(): Blockly.WorkspaceSvg | null {\n        if (this.tab_name === tabs_title.TAB_LOCAL) return this.local_workspace;\n        if (this.tab_name === tabs_title.TAB_RECENT) return this.recent_workspace;\n        return null;\n    }\n\n    get selected_strategy(): TStrategy {\n        return (\n            this.dashboard_strategies.find((ws: { id: string }) => ws.id === this.selected_strategy_id) ??\n            this.dashboard_strategies[0]\n        );\n    }\n\n    get tab_name() {\n        if (isMobile()) {\n            if (this.active_index === 0) return tabs_title.TAB_LOCAL;\n            if (this.active_index === 1) return tabs_title.TAB_GOOGLE;\n        }\n        if (this.active_index === 0) return tabs_title.TAB_RECENT;\n        if (this.active_index === 1) return tabs_title.TAB_LOCAL;\n        if (this.active_index === 2) return tabs_title.TAB_GOOGLE;\n        return '';\n    }\n\n    setPreviewedStrategyId = (clicked_id: string) => {\n        this.previewed_strategy_id = clicked_id;\n    };\n\n    getSelectedStrategyID = (current_workspace_id: string) => {\n        this.current_workspace_id = current_workspace_id;\n    };\n\n    setDashboardStrategies(strategies: Array<TStrategy>) {\n        this.dashboard_strategies = strategies;\n        if (!strategies.length) {\n            this.selected_strategy_id = '';\n        }\n    }\n\n    async getDashboardStrategies() {\n        const recent_strategies = await getSavedWorkspaces();\n        this.dashboard_strategies = recent_strategies;\n    }\n\n    handleFileChange = (\n        event: React.MouseEvent | React.FormEvent<HTMLFormElement> | DragEvent,\n        is_body = true\n    ): boolean => {\n        let files;\n        if (event.type === 'drop') {\n            event.stopPropagation();\n            event.preventDefault();\n\n            ({ files } = event.dataTransfer);\n        } else {\n            ({ files } = event.target);\n        }\n\n        const [file] = files;\n\n        if (!is_body) {\n            if (file.name.includes('xml')) {\n                this.setLoadedLocalFile(file);\n                this.getDashboardStrategies();\n            } else {\n                return false;\n            }\n        }\n        this.readFile(!is_body, event, file);\n        event.target.value = '';\n        return true;\n    };\n\n    resetBotBuilderStrategy = () => {\n        const workspace = Blockly.derivWorkspace;\n        if (workspace) {\n            Blockly.derivWorkspace.asyncClear();\n            Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(workspace.cached_xml.main), workspace);\n            Blockly.derivWorkspace.strategy_to_load = workspace.cached_xml.main;\n        }\n    };\n\n    loadStrategyToBuilder = async (strategy: TStrategy) => {\n        if (strategy?.id) {\n            await load({\n                block_string: strategy.xml,\n                strategy_id: strategy.id,\n                file_name: strategy.name,\n                workspace: Blockly?.derivWorkspace,\n                from: strategy.save_type,\n                drop_event: {},\n                showIncompatibleStrategyDialog: false,\n            });\n            Blockly.derivWorkspace.strategy_to_load = strategy.xml;\n        }\n    };\n\n    refreshStrategiesTheme = async () => {\n        await load({\n            block_string: this.selected_strategy?.xml,\n            drop_event: {},\n            workspace: this.recent_workspace,\n            file_name: this.selected_strategy?.name,\n            strategy_id: this.selected_strategy?.id,\n            from: this.selected_strategy?.save_type,\n            showIncompatibleStrategyDialog: false,\n        });\n    };\n\n    loadFileFromRecent = async () => {\n        this.is_open_button_loading = true;\n        if (!this.selected_strategy) {\n            Blockly.derivWorkspace.asyncClear();\n            Blockly.Xml.domToWorkspace(\n                Blockly.Xml.textToDom(Blockly.derivWorkspace.strategy_to_load),\n                Blockly.derivWorkspace\n            );\n            this.is_open_button_loading = false;\n            return;\n        }\n\n        removeExistingWorkspace(this.selected_strategy.id);\n        await load({\n            block_string: this.selected_strategy.xml,\n            strategy_id: this.selected_strategy.id,\n            file_name: this.selected_strategy.name,\n            workspace: Blockly.derivWorkspace,\n            from: this.selected_strategy.save_type,\n            drop_event: {},\n            showIncompatibleStrategyDialog: false,\n        });\n        const recent_files = await getSavedWorkspaces();\n        recent_files.map((strategy: TStrategy) => {\n            const { xml, id } = strategy;\n            if (this.selected_strategy.id === id) {\n                Blockly.derivWorkspace.strategy_to_load = xml;\n            }\n        });\n        this.is_open_button_loading = false;\n    };\n\n    loadFileFromLocal = (): void => {\n        this.is_open_button_loading = true;\n        if (this.loaded_local_file) {\n            this.readFile(false, {} as DragEvent, this.loaded_local_file);\n        }\n        this.is_open_button_loading = false;\n    };\n\n    onActiveIndexChange = (): void => {\n        if (this.tab_name === tabs_title.TAB_RECENT) {\n            this.previewRecentStrategy(this.selected_strategy_id);\n        } else if (this.recent_workspace) {\n            setTimeout(() => {\n                // Dispose of recent workspace when switching away from Recent tab.\n                // Process in next cycle so user doesn't have to wait.\n                this.recent_workspace?.dispose();\n                this.recent_workspace = null;\n            });\n        }\n\n        if (this.tab_name === tabs_title.TAB_LOCAL) {\n            if (!this.drop_zone) {\n                this.drop_zone = document.querySelector('load-strategy__local-dropzone-area');\n\n                if (this.drop_zone) {\n                    this.drop_zone.addEventListener('drop', event => this.handleFileChange(event, false));\n                }\n            }\n        }\n\n        // Dispose of local workspace when switching away from Local tab.\n        else if (this.local_workspace) {\n            setTimeout(() => {\n                this.local_workspace?.dispose();\n                this.local_workspace = null;\n                this.setLoadedLocalFile(null);\n            }, 0);\n        }\n\n        // Forget about drop zone when not on Local tab.\n        if (this.tab_name !== tabs_title.TAB_LOCAL && this.drop_zone) {\n            this.drop_zone.removeEventListener('drop', event => this.handleFileChange(event, false));\n        }\n    };\n\n    onDriveConnect = (): void => {\n        const { google_drive } = this.root_store;\n\n        if (google_drive.is_authorised) {\n            google_drive.signOut();\n        } else {\n            google_drive.signIn();\n        }\n    };\n\n    async onDriveOpen() {\n        const { loadFile } = this.root_store.google_drive;\n        const { xml_doc, file_name } = await loadFile();\n        await load({\n            block_string: xml_doc,\n            file_name,\n            workspace: Blockly.derivWorkspace,\n            from: save_types.GOOGLE_DRIVE,\n            drop_event: null,\n            strategy_id: null,\n            showIncompatibleStrategyDialog: null,\n        });\n\n        const { active_tab } = this.root_store.dashboard;\n        if (active_tab === 1) this.toggleLoadModal();\n\n        this.root_store.dashboard.is_dialog_open = false;\n    }\n\n    onEntered = (): void => {\n        this.previewRecentStrategy(this.selected_strategy_id);\n    };\n\n    onLoadModalClose = (): void => {\n        if (this.recent_workspace) {\n            this.recent_workspace = null;\n        }\n        if (this.local_workspace) {\n            this.local_workspace = null;\n        }\n\n        this.setActiveTabIndex(0); // Reset to first tab.\n        this.setLoadedLocalFile(null);\n    };\n\n    onZoomInOutClick = (is_zoom_in: string): void => {\n        if (this.preview_workspace) {\n            this.preview_workspace.zoomCenter(is_zoom_in ? 1 : -1);\n        }\n    };\n\n    previewRecentStrategy = (workspace_id: string): void => {\n        if (!workspace_id) this.setSelectedStrategyId(this.current_workspace_id);\n        else this.setSelectedStrategyId(workspace_id);\n        if (!this.selected_strategy) {\n            return;\n        }\n        const {\n            dashboard: { active_tab },\n        } = this.root_store;\n        //removed the dispose here so on switch of tab it does not\n        //throw xml error\n        if (active_tab === 1 && !this.is_load_modal_open) {\n            this.recent_workspace = null;\n            this.setLoadedLocalFile(null);\n        }\n\n        const dark_mode = document.body.classList.contains('theme--dark');\n        setColors(dark_mode);\n\n        //to load the bot on first load\n        const ref = document.getElementById('load-strategy__blockly-container');\n        if (!ref) {\n            // eslint-disable-next-line no-console\n            console.warn('Could not find preview workspace element.');\n            return;\n        }\n        if (this.tab_name !== tabs_title.TAB_LOCAL && this.recent_workspace) {\n            clearInjectionDiv('store', ref);\n            this.recent_workspace.dispose();\n            this.recent_workspace = null;\n        }\n        if (!this.recent_workspace?.rendered) {\n            this.recent_workspace = Blockly.inject(ref, {\n                media: `${__webpack_public_path__}media/`,\n                zoom: {\n                    wheel: true,\n                    startScale: config.workspaces.previewWorkspaceStartScale,\n                },\n                readOnly: true,\n                scrollbars: true,\n            });\n        }\n        this.refreshStrategiesTheme();\n    };\n\n    setActiveTabIndex = (index: number): void => {\n        this.active_index = index;\n    };\n\n    setLoadedLocalFile = (loaded_local_file: File | null): void => {\n        this.loaded_local_file = loaded_local_file;\n    };\n\n    setRecentStrategies = (recent_strategies: string[]): void => {\n        this.recent_strategies = recent_strategies;\n    };\n\n    refreshStrategies = (): void => {\n        this.setRecentStrategies(this.recent_strategies);\n    };\n\n    setSelectedStrategyId = (selected_strategy_id: string): void => {\n        this.selected_strategy_id = selected_strategy_id;\n    };\n\n    toggleExplanationExpand = (): void => {\n        this.is_explanation_expand = !this.is_explanation_expand;\n    };\n\n    toggleLoadModal = (): void => {\n        this.is_load_modal_open = !this.is_load_modal_open;\n        if (this.selected_strategy_id) this.previewRecentStrategy(this.selected_strategy_id);\n    };\n\n    toggleTourLoadModal = (toggle = !this.is_load_modal_open) => {\n        this.is_load_modal_open = toggle;\n    };\n\n    updateListStrategies = (workspaces: Array<TStrategy>): void => {\n        if (workspaces) {\n            (this.dashboard_strategies as Array<TStrategy>) = workspaces;\n        }\n    };\n\n    getRecentFileIcon = (save_type: { [key: string]: string } | string): string => {\n        switch (save_type) {\n            case save_types.UNSAVED:\n                return 'IcReports';\n            case save_types.LOCAL:\n                return 'IcMyComputer';\n            case save_types.GOOGLE_DRIVE:\n                return 'IcGoogleDrive';\n            default:\n                return 'IcReports';\n        }\n    };\n\n    getSaveType = (save_type: { [key: string]: string } | string): string => {\n        switch (save_type) {\n            case save_types.UNSAVED:\n                return localize('Unsaved');\n            case save_types.LOCAL:\n                return localize('Local');\n            case save_types.GOOGLE_DRIVE:\n                return localize('Google Drive');\n            default:\n                return localize('Unsaved');\n        }\n    };\n\n    onToggleDeleteDialog = (is_delete_modal_open: boolean): void => {\n        this.is_delete_modal_open = is_delete_modal_open;\n    };\n\n    readFile = (is_preview: boolean, drop_event: DragEvent, file: File): void => {\n        const file_name = file?.name.replace(/\\.[^/.]+$/, '');\n        const reader = new FileReader();\n        reader.onload = action(e => {\n            const load_options = {\n                block_string: e?.target?.result,\n                drop_event,\n                from: save_types.LOCAL,\n                workspace: null as Blockly.WorkspaceSvg | null,\n                file_name: '',\n                strategy_id: '',\n                showIncompatibleStrategyDialog: false,\n            };\n            const ref = document.getElementById('load-strategy__blockly-container');\n            if (is_preview && ref) {\n                this.local_workspace = Blockly.inject(ref, {\n                    media: `${__webpack_public_path__}media/`, // eslint-disable-line\n                    zoom: {\n                        wheel: false,\n                        startScale: config.workspaces.previewWorkspaceStartScale,\n                    },\n                    readOnly: true,\n                    scrollbars: true,\n                });\n                load_options.workspace = this.local_workspace;\n            } else {\n                load_options.workspace = Blockly.derivWorkspace;\n                load_options.file_name = file_name;\n            }\n            load(load_options);\n        });\n        reader.readAsText(file);\n    };\n}\n","import { action, makeObservable, observable } from 'mobx';\n\nexport default class RoutePromptDialogStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            should_show: observable,\n            is_confirmed: observable,\n            last_location: observable,\n            shouldNavigateAfterPrompt: action.bound,\n            onConfirm: action.bound,\n            onCancel: action.bound,\n            continueRoute: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n    }\n\n    should_show = false;\n    is_confirmed = false;\n    last_location = null;\n\n    shouldNavigateAfterPrompt(next_location) {\n        if (!this.is_confirmed) {\n            this.last_location = next_location;\n            if (next_location.pathname !== '/bot') this.should_show = true;\n            return false;\n        }\n\n        return true;\n    }\n\n    onConfirm() {\n        this.should_show = false;\n        this.is_confirmed = true;\n    }\n\n    onCancel() {\n        this.should_show = false;\n    }\n\n    continueRoute() {\n        const { common } = this.core;\n        if (this.is_confirmed && this.last_location) common.routeTo(this.last_location.pathname);\n    }\n}\n","export const run_panel = Object.freeze({\n    SUMMARY: 0,\n    TRANSACTIONS: 1,\n    JOURNAL: 2,\n});\n","import { platform_name } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nexport const switch_account_notification = {\n    key: 'bot_switch_account',\n    header: localize('You have switched accounts.'),\n    message: localize(\n        'Our system will finish any Deriv Bot trades that are running, and Deriv Bot will not place any new trades.'\n    ),\n    type: 'warning',\n    is_persistent: true,\n};\n\nexport const journalError = onClick => {\n    return {\n        key: 'bot_error',\n        header: localize('The bot encountered an error while running.'),\n        action: {\n            text: localize('View in Journal'),\n            onClick,\n        },\n        type: 'danger',\n        platform: [platform_name.DBot],\n        is_disposable: true,\n    };\n};\n","import React from 'react';\nimport { action, computed, makeObservable, observable, reaction, runInAction } from 'mobx';\nimport { error_types, message_types, observer, unrecoverable_errors } from '@deriv/bot-skeleton';\nimport { isSafari, mobileOSDetect } from '@deriv/shared';\nimport { Localize, localize } from '@deriv/translations';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { run_panel } from 'Constants/run-panel';\nimport { journalError, switch_account_notification } from 'Utils/bot-notifications';\n\nexport default class RunPanelStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            active_index: observable,\n            contract_stage: observable,\n            dialog_options: observable,\n            has_open_contract: observable,\n            is_running: observable,\n            is_statistics_info_modal_open: observable,\n            is_drawer_open: observable,\n            is_dialog_open: observable,\n            is_sell_requested: observable,\n            run_id: observable,\n            error_type: observable,\n            show_bot_stop_message: observable,\n            statistics: computed,\n            is_stop_button_visible: computed,\n            is_stop_button_disabled: computed,\n            is_clear_stat_disabled: computed,\n            onStopButtonClick: action.bound,\n            onStopBotClick: action.bound,\n            stopBot: action.bound,\n            onClearStatClick: action.bound,\n            clearStat: action.bound,\n            toggleStatisticsInfoModal: action.bound,\n            toggleDrawer: action.bound,\n            setActiveTabIndex: action.bound,\n            onCloseDialog: action.bound,\n            performSelfExclusionCheck: action.bound,\n            showStopMultiplierContractDialog: action.bound,\n            showLoginDialog: action.bound,\n            showRealAccountDialog: action.bound,\n            showClearStatDialog: action.bound,\n            showIncompatibleStrategyDialog: action.bound,\n            showContractUpdateErrorDialog: action.bound,\n            onBotSellEvent: action.bound,\n            onBotStopEvent: action.bound,\n            onBotReadyEvent: action.bound,\n            onBotTradeAgain: action.bound,\n            onContractStatusEvent: action.bound,\n            onClickSell: action.bound,\n            onBotContractEvent: action.bound,\n            onError: action.bound,\n            showErrorMessage: action.bound,\n            switchToJournal: action.bound,\n            setContractStage: action.bound,\n            setHasOpenContract: action.bound,\n            setIsRunning: action.bound,\n            setShowBotStopMessage: action.bound,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            handleInvalidToken: action.bound,\n            onRunButtonClick: action.bound,\n            registerBotListeners: action.bound,\n            registerReactions: action.bound,\n            onBotRunningEvent: action.bound,\n            unregisterBotListeners: action.bound,\n            clear: action.bound,\n            preloadAudio: action.bound,\n            stopMyBot: action.bound,\n            closeMultiplierContract: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.dbot = this.root_store.dbot;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n        this.timer = null;\n    }\n\n    active_index = 0;\n    contract_stage = contract_stages.NOT_RUNNING;\n    dialog_options = {};\n    has_open_contract = false;\n    is_running = false;\n    is_statistics_info_modal_open = false;\n    is_drawer_open = true;\n    is_dialog_open = false;\n    is_sell_requested = false;\n    show_bot_stop_message = false;\n\n    run_id = '';\n\n    // when error happens, if it is unrecoverable_errors we reset run-panel\n    // we activate run-button and clear trade info and set the ContractStage to NOT_RUNNING\n    // otherwise we keep opening new contracts and set the ContractStage to PURCHASE_SENT\n    error_type = undefined;\n\n    get statistics() {\n        let total_runs = 0;\n        const { transactions } = this.root_store.transactions;\n        const statistics = transactions.reduce(\n            (stats, { data: trx }) => {\n                if (trx.is_completed) {\n                    if (trx.profit > 0) {\n                        stats.won_contracts += 1;\n                        stats.total_payout += trx.payout;\n                    } else {\n                        stats.lost_contracts += 1;\n                    }\n\n                    stats.total_profit += trx.profit;\n                    stats.total_stake += trx.buy_price;\n                    total_runs += 1;\n                }\n\n                return stats;\n            },\n            {\n                lost_contracts: 0,\n                number_of_runs: 0,\n                total_profit: 0,\n                total_payout: 0,\n                total_stake: 0,\n                won_contracts: 0,\n            }\n        );\n        statistics.number_of_runs = total_runs;\n        return statistics;\n    }\n\n    get is_stop_button_visible() {\n        return this.is_running || this.has_open_contract;\n    }\n\n    get is_stop_button_disabled() {\n        return [contract_stages.PURCHASE_SENT, contract_stages.IS_STOPPING].includes(this.contract_stage);\n    }\n\n    get is_clear_stat_disabled() {\n        const { journal, transactions } = this.root_store;\n\n        return (\n            this.is_running ||\n            this.has_open_contract ||\n            (journal.unfiltered_messages.length === 0 && transactions?.transactions?.length === 0)\n        );\n    }\n\n    setShowBotStopMessage(value) {\n        this.show_bot_stop_message = value;\n    }\n\n    async performSelfExclusionCheck() {\n        const { self_exclusion } = this.root_store;\n        await self_exclusion.checkRestriction();\n    }\n\n    async onRunButtonClick() {\n        let timer_counter = 1;\n        if (window.sendRequestsStatistic) {\n            performance.clearMeasures();\n            performance.mark('bot-start');\n            // Log is sent every 10 seconds for 5 minutes\n            this.timer = setInterval(() => {\n                window.sendRequestsStatistic(true);\n                performance.clearMeasures();\n                if (timer_counter === 12) {\n                    clearInterval(this.timer);\n                } else {\n                    timer_counter++;\n                }\n            }, 10000);\n        }\n        const { summary_card, route_prompt_dialog, self_exclusion } = this.root_store;\n        const { client, ui } = this.core;\n        const is_ios = mobileOSDetect() === 'iOS';\n        this.dbot.saveRecentWorkspace();\n        this.dbot.unHighlightAllBlocks();\n        if (!client.is_logged_in) {\n            this.showLoginDialog();\n            return;\n        }\n\n        /**\n         * Due to Apple's policy on cellular data usage in ios audioElement.play() should be initially called on\n         * user action(e.g click/touch) to be downloaded, otherwise throws an error. Also it should be called\n         * syncronously, so keep above await.\n         */\n        if (is_ios || isSafari()) this.preloadAudio();\n\n        if (!self_exclusion.should_bot_run) {\n            self_exclusion.setIsRestricted(true);\n            return;\n        }\n        self_exclusion.setIsRestricted(false);\n\n        this.registerBotListeners();\n\n        if (!this.dbot.shouldRunBot()) {\n            this.unregisterBotListeners();\n            return;\n        }\n\n        ui.setAccountSwitcherDisabledMessage(\n            localize(\n                'Account switching is disabled while your bot is running. Please stop your bot before switching accounts.'\n            )\n        );\n        runInAction(() => {\n            this.setIsRunning(true);\n            ui.setPromptHandler(true, route_prompt_dialog.shouldNavigateAfterPrompt);\n            this.toggleDrawer(true);\n            this.run_id = `run-${Date.now()}`;\n\n            summary_card.clear();\n            this.setContractStage(contract_stages.STARTING);\n            this.dbot.runBot();\n        });\n        this.setShowBotStopMessage(false);\n    }\n\n    onStopButtonClick() {\n        const { is_multiplier } = this.root_store.summary_card;\n\n        if (is_multiplier) {\n            this.showStopMultiplierContractDialog();\n        } else {\n            this.stopBot();\n        }\n    }\n\n    onStopBotClick() {\n        const { is_multiplier } = this.root_store.summary_card;\n        const { summary_card } = this.root_store;\n\n        if (is_multiplier) {\n            this.showStopMultiplierContractDialog();\n        } else {\n            this.stopBot();\n            summary_card.clear();\n            this.setShowBotStopMessage(true);\n        }\n    }\n\n    stopBot() {\n        const { ui } = this.core;\n\n        this.dbot.stopBot();\n\n        ui.setPromptHandler(false);\n\n        if (this.error_type) {\n            // when user click stop button when there is a error but bot is retrying\n            this.setContractStage(contract_stages.NOT_RUNNING);\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.setIsRunning(false);\n        } else if (this.has_open_contract) {\n            // when user click stop button when bot is running\n            this.setContractStage(contract_stages.IS_STOPPING);\n        } else {\n            // when user click stop button before bot start running\n            this.setContractStage(contract_stages.NOT_RUNNING);\n            this.unregisterBotListeners();\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.setIsRunning(false);\n        }\n\n        if (this.error_type) {\n            this.error_type = undefined;\n        }\n\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n        if (window.sendRequestsStatistic) {\n            window.sendRequestsStatistic(true);\n            performance.clearMeasures();\n        }\n    }\n\n    onClearStatClick() {\n        this.showClearStatDialog();\n    }\n\n    clearStat() {\n        const { summary_card, journal, transactions } = this.root_store;\n\n        this.setIsRunning(false);\n        this.setHasOpenContract(false);\n        this.clear();\n        journal.clear();\n        summary_card.clear();\n        transactions.clear();\n        this.setContractStage(contract_stages.NOT_RUNNING);\n    }\n\n    toggleStatisticsInfoModal() {\n        this.is_statistics_info_modal_open = !this.is_statistics_info_modal_open;\n    }\n\n    toggleDrawer(is_open) {\n        this.is_drawer_open = is_open;\n    }\n\n    setActiveTabIndex(index) {\n        this.active_index = index;\n\n        if (this.active_index !== 1) {\n            this.root_store.transactions.setActiveTransactionId(null);\n        }\n    }\n\n    onCloseDialog() {\n        this.is_dialog_open = false;\n    }\n\n    stopMyBot() {\n        const { summary_card, quick_strategy } = this.root_store;\n        const { ui } = this.core;\n        const { toggleStopBotDialog } = quick_strategy;\n\n        ui.setPromptHandler(false);\n        this.dbot.terminateBot();\n        this.onCloseDialog();\n        summary_card.clear();\n        toggleStopBotDialog();\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n        if (window.sendRequestsStatistic) {\n            window.sendRequestsStatistic(true);\n            performance.clearMeasures();\n        }\n    }\n\n    closeMultiplierContract() {\n        const { quick_strategy } = this.root_store;\n        const { toggleStopBotDialog } = quick_strategy;\n\n        this.onClickSell();\n        this.stopBot();\n        this.onCloseDialog();\n        toggleStopBotDialog();\n    }\n\n    showStopMultiplierContractDialog() {\n        const { summary_card } = this.root_store;\n        const { ui } = this.core;\n\n        this.onOkButtonClick = () => {\n            ui.setPromptHandler(false);\n            this.dbot.terminateBot();\n            if (this.timer) {\n                clearInterval(this.timer);\n            }\n            if (window.sendRequestsStatistic) {\n                window.sendRequestsStatistic(true);\n                performance.clearMeasures();\n            }\n            this.onCloseDialog();\n            summary_card.clear();\n        };\n        this.onCancelButtonClick = () => {\n            this.onClickSell();\n            this.stopBot();\n            this.onCloseDialog();\n        };\n        this.dialog_options = {\n            title: localize('Keep your current contract?'),\n            message: (\n                <Localize\n                    i18n_default_text='Would you like to keep your current contract or close it? If you decide to keep it running, you can check and close it later on the <0>Reports</0> page.'\n                    components={[\n                        <a\n                            key={0}\n                            className='link'\n                            rel='noopener noreferrer'\n                            target='_blank'\n                            href='/reports/positions'\n                        />,\n                    ]}\n                />\n            ),\n            ok_button_text: localize('Keep my contract'),\n            cancel_button_text: localize('Close my contract'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showLoginDialog() {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize('Please log in'),\n            message: localize('You need to log in to run the bot.'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showRealAccountDialog() {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize(\"Deriv Bot isn't quite ready for real accounts\"),\n            message: localize('Please switch to your demo account to run your Deriv Bot.'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showClearStatDialog() {\n        this.onOkButtonClick = () => {\n            this.clearStat();\n            this.onCloseDialog();\n        };\n        this.onCancelButtonClick = this.onCloseDialog;\n        this.dialog_options = {\n            title: localize('Are you sure?'),\n            message: localize(\n                'This will clear all data in the summary, transactions, and journal panels. All counters will be reset to zero.'\n            ),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showIncompatibleStrategyDialog() {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize('Import error'),\n            message: localize('This strategy is currently not compatible with Deriv Bot.'),\n        };\n        this.is_dialog_open = true;\n    }\n\n    showContractUpdateErrorDialog(message) {\n        this.onOkButtonClick = this.onCloseDialog;\n        this.onCancelButtonClick = undefined;\n        this.dialog_options = {\n            title: localize('Contract Update Error'),\n            message: localize(message),\n        };\n        this.is_dialog_open = true;\n    }\n\n    registerBotListeners() {\n        const { summary_card, transactions } = this.root_store;\n\n        observer.register('bot.running', this.onBotRunningEvent);\n        observer.register('bot.sell', this.onBotSellEvent);\n        observer.register('bot.stop', this.onBotStopEvent);\n        observer.register('bot.bot_ready', this.onBotReadyEvent);\n        observer.register('bot.click_stop', this.onStopButtonClick);\n        observer.register('bot.trade_again', this.onBotTradeAgain);\n        observer.register('contract.status', this.onContractStatusEvent);\n        observer.register('bot.contract', this.onBotContractEvent);\n        observer.register('bot.contract', summary_card.onBotContractEvent);\n        observer.register('bot.contract', transactions.onBotContractEvent);\n        observer.register('Error', this.onError);\n    }\n\n    registerReactions() {\n        const { client, common, notifications } = this.core;\n\n        const registerIsSocketOpenedListener = () => {\n            if (common.is_socket_opened) {\n                this.disposeIsSocketOpenedListener = reaction(\n                    () => client.loginid,\n                    loginid => {\n                        if (loginid && this.is_running) {\n                            notifications.addNotificationMessage(switch_account_notification);\n                        }\n                        this.dbot.terminateBot();\n                        this.unregisterBotListeners();\n                    }\n                );\n            } else if (typeof this.disposeLogoutListener === 'function') {\n                this.disposeLogoutListener();\n            }\n        };\n\n        registerIsSocketOpenedListener();\n\n        this.disposeLogoutListener = reaction(\n            () => common.is_socket_opened,\n            () => registerIsSocketOpenedListener()\n        );\n\n        this.disposeStopBotListener = reaction(\n            () => !this.is_running,\n            () => {\n                if (!this.is_running) this.setContractStage(contract_stages.NOT_RUNNING);\n            }\n        );\n\n        return () => {\n            if (typeof this.disposeIsSocketOpenedListener === 'function') {\n                this.disposeIsSocketOpenedListener();\n            }\n\n            if (typeof this.disposeLogoutListener === 'function') {\n                this.disposeLogoutListener();\n            }\n\n            if (typeof this.disposeStopBotListener === 'function') {\n                this.disposeStopBotListener();\n            }\n        };\n    }\n\n    onBotRunningEvent() {\n        this.setHasOpenContract(true);\n\n        // prevent new version update\n        const ignore_new_version = new Event('IgnorePWAUpdate');\n        document.dispatchEvent(ignore_new_version);\n        const { self_exclusion } = this.root_store;\n\n        if (self_exclusion.should_bot_run && self_exclusion.run_limit !== -1) {\n            self_exclusion.run_limit -= 1;\n            if (self_exclusion.run_limit < 0) {\n                this.onStopButtonClick();\n            }\n        }\n    }\n\n    onBotSellEvent() {\n        this.is_sell_requested = true;\n    }\n\n    onBotStopEvent() {\n        const { self_exclusion, summary_card } = this.root_store;\n        const { ui } = this.core;\n        const indicateBotStopped = () => {\n            this.error_type = undefined;\n            this.setContractStage(contract_stages.NOT_RUNNING);\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.unregisterBotListeners();\n            self_exclusion.resetSelfExclusion();\n        };\n        if (this.error_type === error_types.RECOVERABLE_ERRORS) {\n            // Bot should indicate it started in below cases:\n            // - When error happens it's a recoverable error\n            const { shouldRestartOnError, timeMachineEnabled } = this.dbot.interpreter.bot.tradeEngine.options;\n            const is_bot_recoverable = shouldRestartOnError || timeMachineEnabled;\n\n            if (is_bot_recoverable) {\n                this.error_type = undefined;\n                this.setContractStage(contract_stages.PURCHASE_SENT);\n            } else {\n                this.setIsRunning(false);\n                indicateBotStopped();\n            }\n        } else if (this.error_type === error_types.UNRECOVERABLE_ERRORS) {\n            // Bot should indicate it stopped in below cases:\n            // - When error happens and it's an unrecoverable error\n            this.setIsRunning(false);\n            indicateBotStopped();\n        } else if (this.has_open_contract) {\n            // Bot should indicate the contract is closed in below cases:\n            // - When bot was running and an error happens\n            this.error_type = undefined;\n            this.is_sell_requested = false;\n            this.setContractStage(contract_stages.CONTRACT_CLOSED);\n            ui.setAccountSwitcherDisabledMessage(false);\n            this.unregisterBotListeners();\n            self_exclusion.resetSelfExclusion();\n        }\n\n        this.setHasOpenContract(false);\n\n        summary_card.clearContractUpdateConfigValues();\n\n        // listen for new version update\n        const listen_new_version = new Event('ListenPWAUpdate');\n        document.dispatchEvent(listen_new_version);\n    }\n\n    onBotReadyEvent() {\n        this.setIsRunning(false);\n        observer.unregisterAll('bot.bot_ready');\n    }\n\n    onBotTradeAgain(is_trade_again) {\n        if (!is_trade_again) {\n            this.stopBot();\n        }\n    }\n\n    onContractStatusEvent(contract_status) {\n        switch (contract_status.id) {\n            case 'contract.purchase_sent': {\n                this.setContractStage(contract_stages.PURCHASE_SENT);\n                break;\n            }\n            case 'contract.purchase_received': {\n                this.setContractStage(contract_stages.PURCHASE_RECEIVED);\n\n                // Close transaction-specific popover, if any.\n                this.root_store.transactions.setActiveTransactionId(null);\n\n                const { buy } = contract_status;\n                const { is_virtual } = this.core.client;\n\n                if (!is_virtual) {\n                    this.core.gtm.pushDataLayer({ event: 'dbot_purchase', buy_price: buy.buy_price });\n                }\n\n                break;\n            }\n            case 'contract.sold': {\n                this.is_sell_requested = false;\n                this.setContractStage(contract_stages.CONTRACT_CLOSED);\n                break;\n            }\n            default:\n                break;\n        }\n    }\n\n    onClickSell() {\n        const { is_multiplier } = this.root_store.summary_card;\n\n        if (is_multiplier) {\n            this.setContractStage(contract_stages.IS_STOPPING);\n        }\n\n        this.dbot.interpreter.bot.getInterface().sellAtMarket();\n    }\n\n    clear = () => {\n        observer.emit('statistics.clear');\n    };\n\n    onBotContractEvent(data) {\n        if (data?.is_sold) {\n            this.is_sell_requested = false;\n            this.setContractStage(contract_stages.CONTRACT_CLOSED);\n        }\n    }\n\n    onError(data) {\n        // data.error for API errors, data for code errors\n        const error = data.error || data;\n        if (unrecoverable_errors.includes(error.code)) {\n            this.root_store.summary_card.clear();\n            this.error_type = error_types.UNRECOVERABLE_ERRORS;\n        } else {\n            this.error_type = error_types.RECOVERABLE_ERRORS;\n        }\n\n        const error_message = error?.message;\n        this.showErrorMessage(error_message);\n    }\n\n    showErrorMessage(data) {\n        const { journal } = this.root_store;\n        const { notifications } = this.core;\n        journal.onError(data);\n        if (journal.journal_filters.some(filter => filter === message_types.ERROR)) {\n            this.toggleDrawer(true);\n            this.setActiveTabIndex(run_panel.JOURNAL);\n        } else {\n            notifications.addNotificationMessage(journalError(this.switchToJournal));\n            notifications.removeNotificationMessage({ key: 'bot_error' });\n        }\n    }\n\n    switchToJournal() {\n        const { journal } = this.root_store;\n        const { notifications } = this.core;\n        journal.journal_filters.push(message_types.ERROR);\n        this.setActiveTabIndex(run_panel.JOURNAL);\n        this.toggleDrawer(true);\n        notifications.toggleNotificationsModal();\n        notifications.removeNotificationByKey({ key: 'bot_error' });\n    }\n\n    unregisterBotListeners = () => {\n        observer.unregisterAll('bot.running');\n        observer.unregisterAll('bot.stop');\n        observer.unregisterAll('bot.trade_again');\n        observer.unregisterAll('contract.status');\n        observer.unregisterAll('bot.contract');\n        observer.unregisterAll('Error');\n    };\n\n    setContractStage(contract_stage) {\n        this.contract_stage = contract_stage;\n    }\n\n    setHasOpenContract(has_open_contract) {\n        this.has_open_contract = has_open_contract;\n    }\n\n    setIsRunning(is_running) {\n        this.is_running = is_running;\n    }\n\n    onMount() {\n        const { journal } = this.root_store;\n        observer.register('ui.log.error', this.showErrorMessage);\n        observer.register('ui.log.notify', journal.onNotify);\n        observer.register('ui.log.success', journal.onLogSuccess);\n        observer.register('client.invalid_token', this.handleInvalidToken);\n    }\n\n    onUnmount() {\n        const { journal, summary_card, transactions } = this.root_store;\n\n        if (!this.is_running) {\n            this.unregisterBotListeners();\n            this.disposeReactionsFn();\n            journal.disposeReactionsFn();\n            summary_card.disposeReactionsFn();\n            transactions.disposeReactionsFn();\n        }\n\n        observer.unregisterAll('ui.log.error');\n        observer.unregisterAll('ui.log.notify');\n        observer.unregisterAll('ui.log.success');\n        observer.unregisterAll('client.invalid_token');\n    }\n\n    async handleInvalidToken() {\n        const { client } = this.core;\n        await client.logout();\n        this.setActiveTabIndex(run_panel.SUMMARY);\n    }\n\n    preloadAudio() {\n        const strategy_sounds = this.dbot.getStrategySounds();\n\n        strategy_sounds.forEach(sound => {\n            const audioElement = document.getElementById(sound);\n\n            audioElement.muted = true;\n            audioElement.play().catch(() => {\n                // suppressing abort error, thrown on immediate .pause()\n            });\n            audioElement.pause();\n            audioElement.muted = false;\n        });\n    }\n}\n","import localForage from 'localforage';\nimport LZString from 'lz-string';\nimport { action, makeObservable, observable } from 'mobx';\nimport {\n    getSavedWorkspaces,\n    observer as globalObserver,\n    save,\n    save_types,\n    saveWorkspaceToRecent,\n} from '@deriv/bot-skeleton';\nimport { localize } from '@deriv/translations';\nimport { MAX_STRATEGIES } from 'Constants/bot-contents';\nimport { button_status } from 'Constants/button-status';\nimport { TStrategy } from 'Types';\nimport RootStore from './root-store';\n\ntype IOnConfirmProps = {\n    is_local: boolean;\n    save_as_collection: boolean;\n    bot_name: string;\n};\ninterface ISaveModalStore {\n    is_save_modal_open: boolean;\n    button_status: { [key: string]: string } | number;\n    bot_name: { [key: string]: string } | string;\n    toggleSaveModal: () => void;\n    validateBotName: (values: string) => { [key: string]: string };\n    onConfirmSave: ({ is_local, save_as_collection, bot_name }: IOnConfirmProps) => void;\n    updateBotName: (bot_name: string) => void;\n    setButtonStatus: (status: { [key: string]: string } | string | number) => void;\n}\n\nconst Blockly = window.Blockly;\n\nexport default class SaveModalStore implements ISaveModalStore {\n    root_store: RootStore;\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            is_save_modal_open: observable,\n            button_status: observable,\n            bot_name: observable,\n            toggleSaveModal: action.bound,\n            validateBotName: action.bound,\n            onConfirmSave: action.bound,\n            updateBotName: action.bound,\n            onDriveConnect: action.bound,\n            setButtonStatus: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n    is_save_modal_open = false;\n    button_status = button_status.NORMAL;\n    bot_name = '';\n\n    toggleSaveModal = (): void => {\n        if (!this.is_save_modal_open) {\n            this.setButtonStatus(button_status.NORMAL);\n        }\n\n        this.is_save_modal_open = !this.is_save_modal_open;\n    };\n\n    validateBotName = (values: string): { [key: string]: string } => {\n        const errors = {};\n\n        if (values.bot_name.trim() === '') {\n            errors.bot_name = localize('Strategy name cannot be empty');\n        }\n\n        return errors;\n    };\n\n    addStrategyToWorkspace = async (\n        workspace_id: string,\n        is_local: boolean,\n        save_as_collection: boolean,\n        bot_name: string,\n        xml: string\n    ) => {\n        try {\n            const workspace = await getSavedWorkspaces();\n            const current_workspace_index = workspace.findIndex((strategy: TStrategy) => strategy.id === workspace_id);\n            const {\n                load_modal: { getSaveType },\n            } = this.root_store;\n            const local_type = is_local ? save_types.LOCAL : save_types.GOOGLE_DRIVE;\n            const save_collection = save_as_collection ? save_types.UNSAVED : local_type;\n            const type = save_collection;\n\n            const save_type = getSaveType(type)?.toLowerCase();\n\n            const workspace_structure = {\n                id: workspace_id,\n                xml: Blockly.Xml.domToText(xml),\n                name: bot_name,\n                timestamp: Date.now(),\n                save_type,\n            };\n\n            if (current_workspace_index >= 0) {\n                const current_workspace = workspace_structure;\n                workspace[current_workspace_index] = current_workspace;\n            } else {\n                workspace.push(workspace_structure);\n            }\n\n            workspace\n                .sort((a: TStrategy, b: TStrategy) => {\n                    return new Date(a.timestamp) - new Date(b.timestamp);\n                })\n                .reverse();\n\n            if (workspace.length > MAX_STRATEGIES) {\n                workspace.pop();\n            }\n            const { load_modal } = this.root_store;\n            const { setRecentStrategies } = load_modal;\n            localForage.setItem('saved_workspaces', LZString.compress(JSON.stringify(workspace)));\n            const updated_strategies = await getSavedWorkspaces();\n            setRecentStrategies(updated_strategies);\n            const {\n                dashboard: { setStrategySaveType },\n            } = this.root_store;\n            setStrategySaveType(save_type);\n        } catch (error) {\n            globalObserver.emit('Error', error);\n        }\n    };\n\n    async onConfirmSave({ is_local, save_as_collection, bot_name }: IOnConfirmProps) {\n        const { load_modal, dashboard, google_drive } = this.root_store;\n        const { loadStrategyToBuilder, selected_strategy } = load_modal;\n        const { active_tab } = dashboard;\n        this.setButtonStatus(button_status.LOADING);\n        const { saveFile } = google_drive;\n        let xml;\n        let main_strategy = null;\n        if (active_tab === 1) {\n            xml = Blockly?.Xml?.workspaceToDom(Blockly?.derivWorkspace);\n        } else {\n            const recent_files = await getSavedWorkspaces();\n            main_strategy = recent_files.filter((strategy: TStrategy) => strategy.id === selected_strategy.id)?.[0];\n            main_strategy.name = bot_name;\n            main_strategy.save_type = is_local ? save_types.LOCAL : save_types.GOOGLE_DRIVE;\n            xml = Blockly?.Xml?.textToDom(main_strategy.xml);\n        }\n        xml?.setAttribute('is_dbot', 'true');\n        xml?.setAttribute('collection', save_as_collection ? 'true' : 'false');\n\n        if (is_local) {\n            save(bot_name, save_as_collection, xml);\n        } else {\n            await saveFile({\n                name: bot_name,\n                content: Blockly?.Xml?.domToPrettyText(xml),\n                mimeType: 'application/xml',\n            });\n            this.setButtonStatus(button_status.COMPLETED);\n        }\n\n        this.updateBotName(bot_name);\n\n        if (active_tab === 0) {\n            const workspace_id = selected_strategy.id ?? Blockly?.utils?.genUid();\n            await this.addStrategyToWorkspace(workspace_id, is_local, save_as_collection, bot_name, xml);\n            if (main_strategy) await loadStrategyToBuilder(main_strategy);\n        } else {\n            await saveWorkspaceToRecent(xml, is_local ? save_types.LOCAL : save_types.GOOGLE_DRIVE);\n        }\n        this.toggleSaveModal();\n    }\n\n    updateBotName = (bot_name: string): void => {\n        this.bot_name = bot_name;\n    };\n\n    async onDriveConnect() {\n        const { google_drive } = this.root_store;\n\n        if (google_drive.is_authorised) {\n            google_drive.signOut();\n        } else {\n            google_drive.signIn();\n        }\n    }\n\n    setButtonStatus = (status: { [key: string]: string } | string | number): void => {\n        this.button_status = status;\n    };\n}\n","import { action, computed, makeObservable, observable } from 'mobx';\n\nexport default class SelfExclusionStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            api_max_losses: observable,\n            run_limit: observable,\n            is_restricted: observable,\n            initial_values: computed,\n            should_bot_run: computed,\n            setIsRestricted: action.bound,\n            setApiMaxLosses: action.bound,\n            setRunLimit: action.bound,\n            resetSelfExclusion: action.bound,\n            checkRestriction: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n    }\n\n    api_max_losses = 0;\n    run_limit = -1;\n    is_restricted = false;\n    get initial_values() {\n        return {\n            form_max_losses: this.api_max_losses || '',\n            run_limit: this.run_limit !== -1 ? this.run_limit : '',\n        };\n    }\n\n    get should_bot_run() {\n        const { client } = this.core;\n        if (client.is_eu && !client.is_virtual && (this.api_max_losses === 0 || this.run_limit === -1)) {\n            return false;\n        }\n        return true;\n    }\n\n    setIsRestricted(is_restricted) {\n        this.is_restricted = is_restricted;\n    }\n\n    setApiMaxLosses(api_max_losses) {\n        this.api_max_losses = api_max_losses;\n    }\n\n    setRunLimit(run_limit) {\n        this.run_limit = run_limit;\n    }\n\n    resetSelfExclusion() {\n        this.is_restricted = false;\n        this.api_max_losses = 0;\n        this.form_max_losses = 0;\n        this.run_limit = -1;\n    }\n\n    async checkRestriction() {\n        const { client } = this.core;\n        await client.getSelfExclusion();\n        if (client.self_exclusion.max_losses) {\n            this.setApiMaxLosses(client.self_exclusion.max_losses);\n        }\n    }\n}\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\n\nimport { getIndicativePrice, isEqualObject, isMultiplierContract, Validator } from '@deriv/shared';\n\nimport { getValidationRules } from 'Constants/contract';\nimport { contract_stages } from 'Constants/contract-stage';\nimport { getContractUpdateConfig } from 'Utils/multiplier';\n\nexport default class SummaryCardStore {\n    contract_info = null;\n    indicative_movement = '';\n    profit_movement = '';\n\n    validation_errors = {};\n    validation_rules = getValidationRules();\n\n    // Multiplier contract update config\n    contract_update_take_profit = '';\n    contract_update_stop_loss = '';\n    has_contract_update_take_profit = false;\n    has_contract_update_stop_loss = false;\n    contract_update_config = {};\n\n    contract_id = null;\n    profit = 0;\n    indicative = 0;\n\n    constructor(root_store, core) {\n        makeObservable(this, {\n            contract_info: observable,\n            indicative_movement: observable,\n            profit_movement: observable,\n            validation_errors: observable,\n            validation_rules: observable,\n            contract_update_take_profit: observable,\n            contract_update_stop_loss: observable,\n            has_contract_update_take_profit: observable,\n            has_contract_update_stop_loss: observable,\n            contract_update_config: observable,\n            contract_id: observable,\n            profit: observable,\n            indicative: observable,\n            is_contract_completed: computed,\n            is_contract_loading: computed,\n            is_contract_inactive: computed,\n            is_multiplier: computed,\n            clear: action.bound,\n            clearContractUpdateConfigValues: action.bound,\n            getLimitOrder: action.bound,\n            onBotContractEvent: action.bound,\n            onChange: action.bound,\n            populateContractUpdateConfig: action.bound,\n            setContractUpdateConfig: action.bound,\n            updateLimitOrder: action.bound,\n            setValidationErrorMessages: action,\n            validateProperty: action,\n            registerReactions: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n    }\n\n    get is_contract_completed() {\n        return (\n            !!this.contract_info?.is_sold &&\n            this.root_store.run_panel.contract_stage !== contract_stages.PURCHASE_RECEIVED\n        );\n    }\n\n    get is_contract_loading() {\n        return (\n            (this.root_store.run_panel.is_running && this.contract_info === null) ||\n            this.root_store.run_panel.contract_stage === contract_stages.PURCHASE_SENT ||\n            this.root_store.run_panel.contract_stage === contract_stages.STARTING\n        );\n    }\n\n    get is_contract_inactive() {\n        return !this.contract_info && !this.is_loading;\n    }\n\n    get is_multiplier() {\n        return isMultiplierContract(this.contract_info?.contract_type);\n    }\n\n    clear(should_unset_contract = true) {\n        if (should_unset_contract) {\n            this.contract_info = null;\n        }\n\n        this.profit = 0;\n        this.profit_loss = 0;\n        this.indicative = 0;\n        this.indicative_movement = '';\n        this.profit_movement = '';\n    }\n\n    clearContractUpdateConfigValues() {\n        if (this.contract_info) {\n            Object.assign(this, getContractUpdateConfig(this.contract_info));\n        }\n    }\n\n    getLimitOrder() {\n        const limit_order = {};\n\n        // send positive take_profit to update or null to cancel\n        limit_order.take_profit = this.has_contract_update_take_profit ? +this.contract_update_take_profit : null;\n\n        // send positive stop_loss to update or null to cancel\n        limit_order.stop_loss = this.has_contract_update_stop_loss ? +this.contract_update_stop_loss : null;\n\n        return limit_order;\n    }\n\n    onBotContractEvent(contract) {\n        const { profit } = contract;\n        const indicative = getIndicativePrice(contract);\n\n        if (this.contract_id !== contract.id) {\n            this.clear(false);\n            this.contract_id = contract.id;\n            this.profit = profit;\n            this.indicative = indicative;\n        }\n\n        const movements = { profit, indicative };\n\n        Object.keys(movements).forEach(name => {\n            if (movements[name] !== this[name]) {\n                this[`${name}_movement`] = movements[name] > this[name] ? 'profit' : 'loss';\n            } else if (this[`${name}_movement`] !== '') {\n                this.indicative_movement = '';\n            }\n\n            this[name] = movements[name];\n        });\n\n        // TODO only add props that is being used\n        this.contract_info = contract;\n    }\n\n    onChange({ name, value }) {\n        this[name] = value;\n        this.validateProperty(name, this[name]);\n    }\n\n    populateContractUpdateConfig(response) {\n        const contract_update_config = getContractUpdateConfig(response);\n\n        if (!isEqualObject(this.contract_update_config, contract_update_config)) {\n            Object.assign(this, contract_update_config);\n            this.contract_update_config = contract_update_config;\n\n            const { contract_update, error } = response;\n            if (contract_update && !error) {\n                this.contract_info.limit_order = Object.assign(this.contract_info.limit_order || {}, contract_update);\n            }\n        }\n    }\n\n    setContractUpdateConfig(contract_update_take_profit, contract_update_stop_loss) {\n        this.has_contract_update_take_profit = !!contract_update_take_profit;\n        this.has_contract_update_stop_loss = !!contract_update_stop_loss;\n        this.contract_update_take_profit = this.has_contract_update_take_profit ? +contract_update_take_profit : null;\n        this.contract_update_stop_loss = this.has_contract_update_stop_loss ? +contract_update_stop_loss : null;\n    }\n\n    updateLimitOrder() {\n        const limit_order = this.getLimitOrder();\n\n        this.root_store.ws.contractUpdate(this.contract_info.contract_id, limit_order).then(response => {\n            if (response.error) {\n                this.root_store.run_panel.showContractUpdateErrorDialog(response.error.message);\n                return;\n            }\n\n            // Update contract store\n            this.populateContractUpdateConfig(response);\n        });\n    }\n\n    /**\n     * Sets validation error messages for an observable property of the store\n     *\n     * @param {String} propertyName - The observable property's name\n     * @param [{String}] messages - An array of strings that contains validation error messages for the particular property.\n     *\n     */\n    setValidationErrorMessages(propertyName, messages) {\n        const is_different = () =>\n            !!this.validation_errors[propertyName]\n                .filter(x => !messages.includes(x))\n                .concat(messages.filter(x => !this.validation_errors[propertyName].includes(x))).length;\n        if (!this.validation_errors[propertyName] || is_different()) {\n            this.validation_errors[propertyName] = messages;\n        }\n    }\n\n    /**\n     * Validates a particular property of the store\n     *\n     * @param {String} property - The name of the property in the store\n     * @param {object} value    - The value of the property, it can be undefined.\n     *\n     */\n    validateProperty(property, value) {\n        const trigger = this.validation_rules[property].trigger;\n        const inputs = { [property]: value !== undefined ? value : this[property] };\n        const validation_rules = { [property]: this.validation_rules[property].rules || [] };\n\n        if (!!trigger && Object.hasOwnProperty.call(this, trigger)) {\n            inputs[trigger] = this[trigger];\n            validation_rules[trigger] = this.validation_rules[trigger].rules || [];\n        }\n\n        const validator = new Validator(inputs, validation_rules, this);\n\n        validator.isPassed();\n\n        Object.keys(inputs).forEach(key => {\n            this.setValidationErrorMessages(key, validator.errors.get(key));\n        });\n    }\n\n    registerReactions() {\n        const { client } = this.core;\n        this.disposeSwitchAcountListener = reaction(\n            () => client.loginid,\n            () => this.clear()\n        );\n\n        return () => {\n            if (typeof this.disposeSwitchAcountListener === 'function') {\n                this.disposeSwitchAcountListener();\n            }\n        };\n    }\n}\n","export default class SummaryStore {\n    constructor(root_store) {\n        this.root_store = root_store;\n    }\n}\n","import { action, makeObservable, observable } from 'mobx';\nimport { config, load, runGroupedEvents } from '@deriv/bot-skeleton';\nimport RootStore from './root-store';\n\ninterface IToolbarStore {\n    is_animation_info_modal_open: boolean;\n    is_dialog_open: boolean;\n    file_name: string;\n    has_undo_stack: boolean;\n    has_redo_stack: boolean;\n    onResetClick: () => void;\n    closeResetDialog: () => void;\n    onResetOkButtonClick: () => void;\n    onSortClick: () => void;\n    onUndoClick: (is_redo: boolean) => void;\n    onZoomInOutClick: (is_zoom_in: boolean) => void;\n    resetDefaultStrategy: () => void;\n    setHasUndoStack: () => void;\n    setHasRedoStack: () => void;\n}\n\nconst Blockly = window.Blockly;\nexport default class ToolbarStore implements IToolbarStore {\n    root_store: RootStore;\n\n    constructor(root_store: RootStore) {\n        makeObservable(this, {\n            is_animation_info_modal_open: observable,\n            is_dialog_open: observable,\n            file_name: observable,\n            has_undo_stack: observable,\n            has_redo_stack: observable,\n            onResetClick: action.bound,\n            closeResetDialog: action.bound,\n            onResetOkButtonClick: action.bound,\n            onUndoClick: action.bound,\n            resetDefaultStrategy: action.bound,\n            setHasUndoStack: action.bound,\n            setHasRedoStack: action.bound,\n        });\n\n        this.root_store = root_store;\n    }\n\n    is_animation_info_modal_open = false;\n    is_dialog_open = false;\n    file_name = config.default_file_name;\n    has_undo_stack = false;\n    has_redo_stack = false;\n\n    onResetClick = (): void => {\n        this.is_dialog_open = true;\n    };\n\n    closeResetDialog = (): void => {\n        this.is_dialog_open = false;\n    };\n\n    onResetOkButtonClick = (): void => {\n        runGroupedEvents(\n            false,\n            () => {\n                this.resetDefaultStrategy();\n            },\n            'reset'\n        );\n        this.is_dialog_open = false;\n\n        const { run_panel } = this.root_store;\n        if (run_panel.is_running) {\n            this.root_store.run_panel.stopBot();\n        }\n    };\n\n    resetDefaultStrategy = async () => {\n        const workspace = Blockly.derivWorkspace;\n        workspace.current_strategy_id = Blockly.utils.genUid();\n        await load({\n            block_string: workspace.cached_xml.main,\n            file_name: config.default_file_name,\n            workspace,\n            drop_event: null,\n            strategy_id: null,\n            from: null,\n            showIncompatibleStrategyDialog: null,\n        });\n        workspace.strategy_to_load = workspace.cached_xml.main;\n    };\n\n    onSortClick = () => {\n        Blockly.derivWorkspace.cleanUp();\n    };\n\n    onUndoClick = (is_redo: boolean): void => {\n        Blockly.Events.setGroup('undo_clicked');\n        Blockly.derivWorkspace.undo(is_redo);\n        Blockly.svgResize(Blockly.derivWorkspace); // Called for CommentDelete event.\n        this.setHasRedoStack();\n        this.setHasUndoStack();\n        Blockly.Events.setGroup(false);\n    };\n\n    onZoomInOutClick = (is_zoom_in: boolean): void => {\n        const workspace = Blockly.derivWorkspace;\n        const metrics = workspace.getMetrics();\n        const addition = is_zoom_in ? 1 : -1;\n\n        workspace.zoom(metrics.viewWidth / 2, metrics.viewHeight / 2, addition);\n    };\n\n    setHasUndoStack = (): void => {\n        this.has_undo_stack = Blockly.derivWorkspace?.hasUndoStack();\n    };\n\n    setHasRedoStack = (): void => {\n        this.has_redo_stack = Blockly.derivWorkspace?.hasRedoStack();\n    };\n}\n","import { action, makeObservable, observable, reaction } from 'mobx';\nimport { scrollWorkspace } from '@deriv/bot-skeleton';\nimport { isMobile } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\n\nexport default class ToolboxStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            is_toolbox_open: observable,\n            is_search_loading: observable,\n            is_search_focus: observable,\n            sub_category_index: observable,\n            toolbox_dom: observable,\n            toolbox_examples: observable,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            setWorkspaceOptions: action.bound,\n            adjustWorkspace: action.bound,\n            toggleDrawer: action.bound,\n            onToolboxItemClick: action.bound,\n            onToolboxItemExpand: action.bound,\n            getCategoryContents: action.bound,\n            getAllCategories: action.bound,\n            hasSubCategory: action.bound,\n            onSearch: action.bound,\n            onSearchBlur: action.bound,\n            onSearchClear: action.bound,\n            onSearchKeyUp: action.bound,\n            showSearch: action.bound,\n        });\n\n        this.root_store = root_store;\n        this.core = core;\n    }\n\n    is_toolbox_open = true;\n    is_search_loading = false;\n    is_search_focus = false;\n    sub_category_index = [];\n    toolbox_dom = null;\n    toolbox_examples = null;\n\n    onMount(toolbox_ref) {\n        this.adjustWorkspace();\n\n        this.toolbox_dom = Blockly.Xml.textToDom(toolbox_ref?.current);\n        this.toolbox_examples = [...this.toolbox_dom.childNodes].find(el => el.tagName === 'examples');\n        this.setWorkspaceOptions();\n        this.disposeToolboxToggleReaction = reaction(\n            () => this.is_toolbox_open,\n            is_toolbox_open => {\n                if (is_toolbox_open) {\n                    this.adjustWorkspace();\n                    // Emit event to GTM\n                    const { gtm } = this.core;\n                    gtm.pushDataLayer({ event: 'dbot_toolbox_visible', value: true });\n                }\n            }\n        );\n    }\n\n    onUnmount() {\n        if (typeof this.disposeToolboxToggleReaction === 'function') {\n            this.disposeToolboxToggleReaction();\n        }\n    }\n\n    setWorkspaceOptions() {\n        const workspace = Blockly.derivWorkspace;\n        const readOnly = !!workspace.options.readOnly;\n        let languageTree, hasCategories, hasCollapse, hasComments, hasDisable;\n\n        if (readOnly) {\n            languageTree = null;\n            hasCategories = false;\n            hasCollapse = false;\n            hasComments = false;\n            hasDisable = false;\n        } else {\n            languageTree = this.toolbox_dom;\n            hasCategories = Boolean(languageTree && languageTree.getElementsByTagName('category').length);\n            hasCollapse = hasCategories;\n            hasComments = hasCategories;\n            hasDisable = hasCategories;\n        }\n\n        workspace.options.collapse = hasCollapse;\n        workspace.options.comments = hasComments;\n        workspace.options.disable = hasDisable;\n        workspace.options.hasCategories = hasCategories;\n        workspace.options.languageTree = languageTree;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    adjustWorkspace() {\n        const workspace = Blockly.derivWorkspace;\n        const toolbox_width = document.getElementById('gtm-toolbox')?.getBoundingClientRect().width || 0;\n        const block_canvas_rect = workspace.svgBlockCanvas_?.getBoundingClientRect(); // eslint-disable-line\n\n        if (Math.round(block_canvas_rect?.left) <= toolbox_width) {\n            const scroll_distance = isMobile()\n                ? toolbox_width - block_canvas_rect.left + 20\n                : toolbox_width - block_canvas_rect.left + 36;\n            scrollWorkspace(workspace, scroll_distance, true, false);\n        }\n    }\n\n    toggleDrawer() {\n        this.is_toolbox_open = !this.is_toolbox_open;\n    }\n\n    onToolboxItemClick(category) {\n        const { flyout } = this.root_store;\n        const category_id = category.getAttribute('id');\n        const flyout_content = this.getCategoryContents(category);\n\n        flyout.setIsSearchFlyout(false);\n\n        if (flyout.selected_category?.getAttribute('id') === category_id) {\n            flyout.setVisibility(false);\n        } else {\n            flyout.setSelectedCategory(category);\n            flyout.setContents(flyout_content);\n        }\n    }\n\n    onToolboxItemExpand(index) {\n        if (this.sub_category_index.includes(index)) {\n            const open_ids = this.sub_category_index.filter(open_id => open_id !== index);\n            this.sub_category_index = open_ids;\n        } else {\n            this.sub_category_index = [...this.sub_category_index, index];\n        }\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getCategoryContents(category) {\n        const workspace = Blockly.derivWorkspace;\n        const dynamic = category.getAttribute('dynamic');\n        let xml_list = Array.from(category.childNodes);\n\n        // Dynamic categories\n        if (typeof dynamic === 'string') {\n            const fnToApply = workspace.getToolboxCategoryCallback(dynamic);\n            xml_list = fnToApply(workspace);\n        }\n\n        return xml_list;\n    }\n\n    getAllCategories() {\n        const categories = [];\n        Array.from(this.toolbox_dom.childNodes).forEach(category => {\n            categories.push(category);\n            if (this.hasSubCategory(category.children)) {\n                Array.from(category.children).forEach(subCategory => {\n                    categories.push(subCategory);\n                });\n            }\n        });\n        return categories;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    hasSubCategory(category) {\n        // eslint-disable-next-line consistent-return\n        const subCategory = Object.keys(category).filter(key => {\n            if (category[key].tagName.toUpperCase() === 'CATEGORY') {\n                return category[key];\n            }\n        });\n        if (subCategory.length) {\n            return true;\n        }\n        return false;\n    }\n\n    onSearch({ search }) {\n        this.is_search_focus = true;\n        this.showSearch(search);\n    }\n\n    onSearchBlur() {\n        this.is_search_focus = false;\n    }\n\n    onSearchClear(setFieldValue) {\n        setFieldValue('search', '');\n        this.showSearch('');\n    }\n\n    onSearchKeyUp(submitForm) {\n        this.is_search_loading = true;\n\n        clearTimeout(this.typing_timer);\n        this.typing_timer = setTimeout(\n            action(() => {\n                submitForm();\n                this.is_search_loading = false;\n            }),\n            1000\n        );\n    }\n\n    showSearch(search) {\n        const workspace = Blockly.derivWorkspace;\n        const flyout_content = [];\n        const search_term = search.replace(/\\s+/g, ' ').trim().toUpperCase();\n        const search_words = search_term.split(' ');\n        const all_variables = workspace.getVariablesOfType('');\n        const all_procedures = Blockly.Procedures.allProcedures(workspace);\n        const { flyout } = this.root_store;\n\n        flyout.setVisibility(false);\n\n        // avoid general term which the result will return most of the blocks\n        const general_term = [\n            localize('THE'),\n            localize('OF'),\n            localize('YOU'),\n            localize('IS'),\n            localize('THIS'),\n            localize('THEN'),\n            localize('A'),\n            localize('AN'),\n        ];\n\n        if (search_term.length === 0) {\n            return;\n        } else if (search_term.length <= 1 || search_words.every(term => general_term.includes(term))) {\n            flyout.setIsSearchFlyout(true);\n            flyout.setContents(flyout_content, search);\n            return;\n        }\n\n        const all_categories = this.getAllCategories();\n\n        const block_contents = all_categories\n            .filter(category => !this.hasSubCategory(category.children))\n            .map(category => {\n                const contents = this.getCategoryContents(category);\n\n                const only_block_contents = Array.from(contents).filter(\n                    content => content.tagName.toUpperCase() === 'BLOCK'\n                );\n                return only_block_contents;\n            })\n            .flat();\n\n        const pushIfNotExists = (array, element_to_push) => {\n            if (!array.some(element => element === element_to_push)) {\n                array.push(element_to_push);\n            }\n        };\n\n        const pushBlockWithPriority = priority => {\n            block_contents.forEach(block_content => {\n                const block_type = block_content.getAttribute('type');\n                const block = Blockly.Blocks[block_type];\n                const block_meta = block.meta instanceof Function && block.meta();\n                const block_definitions = block.definition instanceof Function && block.definition();\n                const block_name = block_meta.display_name;\n                const block_type_terms = block_type.toUpperCase().split('_');\n                const block_name_terms = block_name.toUpperCase().split(' ');\n                const definition_key_to_search = /^((message)|(tooltip)|(category))/;\n\n                switch (priority) {\n                    // when the search text match exactly the block's name\n                    case 'exact_block_name': {\n                        if (search_term === block_name.toUpperCase() || search_term === block_type.toUpperCase()) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    // when there's multiple search text and all the search text match block's name or block type\n                    case 'match_words': {\n                        if (\n                            search_words.every(word => block_name_terms.some(term => term.includes(word))) ||\n                            search_words.every(word => block_type_terms.some(term => term.includes(word)))\n                        ) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    // when some of search word match block's name or block's type\n                    case 'block_term': {\n                        if (\n                            block_type_terms.some(term => search_words.some(word => term.includes(word))) ||\n                            block_name_terms.some(term => search_words.some(word => term.includes(word)))\n                        ) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    case 'block_definitions': {\n                        // eslint-disable-next-line consistent-return\n                        Object.keys(block_definitions).forEach(key => {\n                            const definition = block_definitions[key];\n\n                            if (\n                                definition_key_to_search.test(key) &&\n                                search_words.some(word => definition.includes(word))\n                            ) {\n                                pushIfNotExists(flyout_content, block_content);\n                            }\n\n                            if (definition instanceof Array) {\n                                definition.forEach(def => {\n                                    const definition_strings = JSON.stringify(def).toUpperCase();\n\n                                    if (\n                                        def.type === 'field_dropdown' &&\n                                        search_term.length > 2 &&\n                                        search_words.some(word => definition_strings.includes(word))\n                                    ) {\n                                        pushIfNotExists(flyout_content, block_content);\n                                    }\n                                });\n                            }\n                        });\n                        break;\n                    }\n                    case 'block_meta': {\n                        // block_meta matched\n                        const matched_meta = Object.keys(block_meta)\n                            .filter(key => key !== 'display_name')\n                            .find(key => {\n                                const block_meta_strings = block_meta[key]\n                                    .toUpperCase()\n                                    .replace(/[^\\w\\s]/gi, '')\n                                    .split(' ');\n\n                                return search_words.some(word => block_meta_strings.some(meta => meta.includes(word)));\n                            });\n\n                        if (matched_meta && matched_meta.length) {\n                            pushIfNotExists(flyout_content, block_content);\n                        }\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            });\n        };\n\n        const priority_order = ['exact_block_name', 'match_words', 'block_term', 'block_definitions', 'block_meta'];\n\n        priority_order.forEach(priority => pushBlockWithPriority(priority));\n\n        // block_variable_name matched\n        const matched_variables = all_variables.filter(variable => variable.name.toUpperCase().includes(search_term));\n        const variables_blocks = Blockly.DataCategory.search(matched_variables);\n        // eslint-disable-next-line consistent-return\n        const unique_var_blocks = variables_blocks.filter(variable_block => {\n            return flyout_content.indexOf(variable_block) === -1;\n        });\n        if (unique_var_blocks && unique_var_blocks.length) {\n            flyout_content.unshift(...unique_var_blocks);\n        }\n\n        // block_procedure_name matched\n        const searched_procedures = { 0: [], 1: [] };\n        const procedures_callnoreturn = all_procedures[0];\n        const procedures_callreturn = all_procedures[1];\n        Object.keys(procedures_callnoreturn).forEach(key => {\n            const procedure = procedures_callnoreturn[key];\n\n            if (procedure[0].toUpperCase().includes(search_term)) {\n                searched_procedures['0'].unshift(procedure);\n            }\n        });\n\n        Object.keys(procedures_callreturn).forEach(key => {\n            const procedure = procedures_callreturn[key];\n\n            if (procedure[0].toUpperCase().includes(search_term)) {\n                searched_procedures['1'].unshift(procedure);\n            }\n        });\n\n        const procedures_blocks = Blockly.Procedures.populateDynamicProcedures(searched_procedures);\n        // eslint-disable-next-line consistent-return\n        const unique_proce_blocks = procedures_blocks.filter(procedure_block => {\n            return flyout_content.indexOf(procedure_block) === -1;\n        });\n        if (unique_proce_blocks.length) {\n            flyout_content.unshift(...unique_proce_blocks);\n        }\n\n        flyout.setIsSearchFlyout(true);\n        flyout.setContents(flyout_content, search);\n    }\n}\n","import { action, computed, makeObservable, observable, reaction } from 'mobx';\nimport { log_types } from '@deriv/bot-skeleton';\nimport { formatDate, isEnded } from '@deriv/shared';\nimport { transaction_elements } from '../constants/transactions';\nimport { getStoredItemsByKey, getStoredItemsByUser, setStoredItemsByKey } from '../utils/session-storage';\n\nexport default class TransactionsStore {\n    constructor(root_store, core) {\n        makeObservable(this, {\n            elements: observable,\n            active_transaction_id: observable,\n            recovered_completed_transactions: observable,\n            recovered_transactions: observable,\n            is_called_proposal_open_contract: observable,\n            is_transaction_details_modal_open: observable,\n            transactions: computed,\n            onBotContractEvent: action.bound,\n            pushTransaction: action.bound,\n            onClickOutsideTransaction: action.bound,\n            onMount: action.bound,\n            onUnmount: action.bound,\n            clear: action.bound,\n            setActiveTransactionId: action.bound,\n            registerReactions: action.bound,\n            recoverPendingContracts: action.bound,\n            updateResultsCompletedContract: action.bound,\n            sortOutPositionsBeforeAction: action.bound,\n            recoverPendingContractsById: action.bound,\n            toggleTransactionDetailsModal: action.bound,\n        });\n\n        this.is_transaction_details_modal_open = false;\n        this.root_store = root_store;\n        this.core = core;\n        this.disposeReactionsFn = this.registerReactions();\n    }\n    TRANSACTION_CACHE = 'transaction_cache';\n\n    elements = getStoredItemsByUser(this.TRANSACTION_CACHE, this.core?.client?.loginid, []);\n    active_transaction_id = null;\n    recovered_completed_transactions = [];\n    recovered_transactions = [];\n    is_called_proposal_open_contract = false;\n    is_transaction_details_modal_open = false;\n\n    get transactions() {\n        return (\n            this.elements[this.core?.client?.loginid]?.filter(\n                element => element.type === transaction_elements.CONTRACT\n            ) ?? []\n        );\n    }\n\n    toggleTransactionDetailsModal(is_open) {\n        this.is_transaction_details_modal_open = is_open;\n    }\n\n    onBotContractEvent(data) {\n        this.pushTransaction(data);\n    }\n\n    pushTransaction(data) {\n        const is_completed = isEnded(data);\n        const { run_id } = this.root_store.run_panel;\n        const current_account = this.core?.client?.loginid;\n        const contract = {\n            barrier: data.barrier,\n            buy_price: data.buy_price,\n            contract_id: data.contract_id,\n            contract_type: data.contract_type,\n            currency: data.currency,\n            date_start: formatDate(data.date_start, 'YYYY-M-D HH:mm:ss [GMT]'),\n            display_name: data.display_name,\n            entry_tick: data.entry_tick_display_value,\n            entry_tick_time: data.entry_tick_time && formatDate(data.entry_tick_time, 'YYYY-M-D HH:mm:ss [GMT]'),\n            exit_tick: data.exit_tick_display_value,\n            exit_tick_time: data.exit_tick_time && formatDate(data.exit_tick_time, 'YYYY-M-D HH:mm:ss [GMT]'),\n            high_barrier: data.high_barrier,\n            is_completed,\n            low_barrier: data.low_barrier,\n            payout: data.payout,\n            profit: is_completed && data.profit,\n            run_id,\n            shortcode: data.shortcode,\n            tick_count: data.tick_count,\n            transaction_ids: data.transaction_ids,\n            underlying: data.underlying,\n        };\n\n        if (!this.elements[current_account]) {\n            this.elements = {\n                ...this.elements,\n                [current_account]: [],\n            };\n        }\n\n        const same_contract_index = this.elements[current_account]?.findIndex(\n            c =>\n                c.type === transaction_elements.CONTRACT &&\n                c.data.transaction_ids &&\n                c.data.transaction_ids.buy === data.transaction_ids.buy\n        );\n\n        if (same_contract_index === -1) {\n            // Render a divider if the \"run_id\" for this contract is different.\n            if (this.elements[current_account]?.length > 0) {\n                const is_new_run =\n                    this.elements[current_account]?.[0].type === transaction_elements.CONTRACT &&\n                    contract.run_id !== this.elements[current_account]?.[0].data.run_id;\n\n                if (is_new_run) {\n                    this.elements[current_account]?.unshift({\n                        type: transaction_elements.DIVIDER,\n                        data: contract.run_id,\n                    });\n                }\n            }\n\n            this.elements[current_account]?.unshift({\n                type: transaction_elements.CONTRACT,\n                data: contract,\n            });\n        } else {\n            // If data belongs to existing contract in memory, update it.\n            this.elements[current_account]?.splice(same_contract_index, 1, {\n                type: transaction_elements.CONTRACT,\n                data: contract,\n            });\n        }\n\n        this.elements = { ...this.elements }; // force update\n    }\n\n    setActiveTransactionId(transaction_id) {\n        // Toggle transaction popover if passed transaction_id is the same.\n        if (transaction_id && this.active_transaction_id === transaction_id) {\n            this.active_transaction_id = null;\n        } else {\n            this.active_transaction_id = transaction_id;\n        }\n    }\n\n    onClickOutsideTransaction(event) {\n        const path = event.path || (event.composedPath && event.composedPath());\n        const is_transaction_click = path.some(\n            el => el.classList && el.classList.contains('transactions__item-wrapper')\n        );\n        if (!is_transaction_click) {\n            this.setActiveTransactionId(null);\n        }\n    }\n\n    onMount() {\n        window.addEventListener('click', this.onClickOutsideTransaction);\n        this.recoverPendingContracts();\n    }\n\n    onUnmount() {\n        window.removeEventListener('click', this.onClickOutsideTransaction);\n    }\n\n    clear() {\n        this.elements[this.core?.client?.loginid] = [];\n        this.recovered_completed_transactions = this.recovered_completed_transactions?.slice(0, 0);\n        this.recovered_transactions = this.recovered_transactions?.slice(0, 0);\n        this.is_transaction_details_modal_open = false;\n    }\n\n    registerReactions() {\n        const { client } = this.core;\n\n        // Write transactions to session storage on each change in transaction elements.\n        const disposeTransactionElementsListener = reaction(\n            () => this.elements[client?.loginid],\n            elements => {\n                const stored_transactions = getStoredItemsByKey(this.TRANSACTION_CACHE, {});\n                stored_transactions[client.loginid] = elements?.slice(0, 5000) ?? [];\n                setStoredItemsByKey(this.TRANSACTION_CACHE, stored_transactions);\n            }\n        );\n\n        // User could've left the page mid-contract. On initial load, try\n        // to recover any pending contracts so we can reflect accurate stats\n        // and transactions.\n        const disposeRecoverContracts = reaction(\n            () => this.transactions.length,\n            () => this.recoverPendingContracts()\n        );\n\n        return () => {\n            disposeTransactionElementsListener();\n            disposeRecoverContracts();\n        };\n    }\n\n    recoverPendingContracts(contract = null) {\n        this.transactions.forEach(({ data: trx }) => {\n            if (trx.is_completed || this.recovered_transactions.includes(trx.contract_id)) return;\n            this.recoverPendingContractsById(trx.contract_id, contract);\n        });\n    }\n\n    updateResultsCompletedContract(contract) {\n        const { journal, summary_card } = this.root_store;\n        const { contract_info } = summary_card;\n        const { currency, profit } = contract;\n\n        if (contract.contract_id !== contract_info?.contract_id) {\n            this.onBotContractEvent(contract);\n\n            if (!this.recovered_transactions.includes(contract.contract_id)) {\n                this.recovered_transactions.push(contract.contract_id);\n            }\n            if (!this.recovered_completed_transactions.includes(contract.contract_id) && isEnded(contract)) {\n                this.recovered_completed_transactions.push(contract.contract_id);\n\n                journal.onLogSuccess({\n                    log_type: profit > 0 ? log_types.PROFIT : log_types.LOST,\n                    extra: { currency, profit },\n                });\n            }\n        }\n    }\n\n    sortOutPositionsBeforeAction(positions, element_id = false) {\n        positions?.forEach(position => {\n            if (!element_id || (element_id && position.id === element_id)) {\n                const contract_details = position.contract_info;\n                this.updateResultsCompletedContract(contract_details);\n            }\n        });\n    }\n\n    recoverPendingContractsById(contract_id, contract = null) {\n        const positions = this.core.portfolio.positions;\n\n        if (contract) {\n            this.is_called_proposal_open_contract = true;\n            if (contract.contract_id === contract_id) {\n                this.updateResultsCompletedContract(contract);\n            }\n        }\n\n        if (!this.is_called_proposal_open_contract) {\n            const current_account = this.core?.client?.loginid;\n            if (!this.elements[current_account]?.length) {\n                this.sortOutPositionsBeforeAction(positions);\n            }\n            if (this.elements[current_account]?.length && !this.elements[current_account]?.[0]?.data?.profit) {\n                const element_id = this.elements[current_account]?.[0].data.contract_id;\n                this.sortOutPositionsBeforeAction(positions, element_id);\n            }\n        }\n    }\n}\n","import { TStores } from '@deriv/stores/types';\nimport type { TDbot, TWebSocket } from 'Types';\nimport AppStore from './app-store';\nimport BlocklyStore from './blockly-store';\nimport ChartStore from './chart-store';\nimport DashboardStore from './dashboard-store';\nimport DataCollectionStore from './data-collection-store';\nimport DownloadStore from './download-store';\nimport FlyoutHelpStore from './flyout-help-store';\nimport FlyoutStore from './flyout-store';\nimport GoogleDriveStore from './google-drive-store';\nimport JournalStore from './journal-store';\nimport LoadModalStore from './load-modal-store';\nimport QuickStrategyStore from './quick-strategy-store';\nimport RoutePromptDialogStore from './route-prompt-dialog-store';\nimport RunPanelStore from './run-panel-store';\nimport SaveModalStore from './save-modal-store';\nimport SelfExclusionStore from './self-exclusion-store';\nimport SummaryCardStore from './summary-card-store';\nimport SummaryStore from './summary-store';\nimport ToolbarStore from './toolbar-store';\nimport ToolboxStore from './toolbox-store';\nimport TransactionsStore from './transactions-store';\n\n// TODO: need to write types for the individual classes and convert them to ts\nexport default class RootStore {\n    public ws: TWebSocket;\n    public dbot: TDbot;\n    public app: AppStore;\n    public summary_card: SummaryCardStore;\n    public download: DownloadStore;\n    public flyout: FlyoutStore;\n    public flyout_help: FlyoutHelpStore;\n    public google_drive: GoogleDriveStore;\n    public journal: JournalStore;\n    public load_modal: LoadModalStore;\n    public run_panel: RunPanelStore;\n    public save_modal: SaveModalStore;\n    public summary: SummaryStore;\n    public transactions: TransactionsStore;\n    public toolbar: ToolbarStore;\n    public toolbox: ToolboxStore;\n    public quick_strategy: QuickStrategyStore;\n    public route_prompt_dialog: RoutePromptDialogStore;\n    public self_exclusion: SelfExclusionStore;\n    public dashboard: DashboardStore;\n\n    public chart_store: ChartStore;\n    public blockly_store: BlocklyStore;\n    public data_collection_store: DataCollectionStore;\n\n    constructor(core: TStores, ws: TWebSocket, dbot: TDbot) {\n        this.ws = ws;\n        this.dbot = dbot;\n        this.app = new AppStore(this, core);\n        this.summary_card = new SummaryCardStore(this, core);\n        this.download = new DownloadStore(this);\n        this.flyout = new FlyoutStore(this);\n        this.flyout_help = new FlyoutHelpStore(this);\n        this.google_drive = new GoogleDriveStore(this);\n        this.journal = new JournalStore(this, core);\n        this.load_modal = new LoadModalStore(this);\n        this.run_panel = new RunPanelStore(this, core);\n        this.save_modal = new SaveModalStore(this);\n        this.summary = new SummaryStore(this);\n        this.transactions = new TransactionsStore(this, core);\n        this.toolbar = new ToolbarStore(this);\n        this.toolbox = new ToolboxStore(this, core);\n        this.quick_strategy = new QuickStrategyStore(this);\n        this.route_prompt_dialog = new RoutePromptDialogStore(this, core);\n        this.self_exclusion = new SelfExclusionStore(this, core);\n        this.dashboard = new DashboardStore(this);\n\n        // need to be at last for dependency\n        this.chart_store = new ChartStore(this);\n        this.blockly_store = new BlocklyStore(this);\n        this.data_collection_store = new DataCollectionStore(this, core);\n    }\n}\n","import React, { createContext, PropsWithChildren, useContext, useMemo } from 'react';\nimport { DBot } from '@deriv/bot-skeleton';\nimport { useStore } from '@deriv/stores';\nimport type { TWebSocket } from 'Types';\nimport RootStore from './root-store';\n\nconst DBotStoreContext = createContext<RootStore | null>(null);\n\nconst DBotStoreProvider = ({ children, ws, mock }: PropsWithChildren<{ ws: TWebSocket; mock?: RootStore }>) => {\n    const stores = useStore();\n    const memoizedValue = useMemo(() => mock || new RootStore(stores, ws, DBot), [mock, stores, ws]);\n\n    return <DBotStoreContext.Provider value={memoizedValue}>{children}</DBotStoreContext.Provider>;\n};\n\nconst useDBotStore = () => {\n    const store = useContext(DBotStoreContext);\n\n    if (!store) {\n        throw new Error('useDBotStore must be used within DBotStoreProvider');\n    }\n\n    return store;\n};\n\nexport { DBotStoreProvider, useDBotStore };\n\nexport const mockDBotStore = (root_store: ReturnType<typeof useStore>, ws: TWebSocket) =>\n    new RootStore(root_store, ws, DBot);\n","import React, { useState } from 'react';\nimport { Icon, Toast } from '@deriv/components';\nimport { Localize } from '@deriv/translations';\n\ntype TBotSnackbar = {\n    className?: string;\n    is_open: boolean;\n    onClick?: React.MouseEventHandler<HTMLDivElement>;\n    handleClose: () => void;\n    type?: 'error' | 'info' | 'notification';\n    timeout?: number;\n    msg_localize_components?: JSX.Element[];\n    message: string;\n};\n\nconst BotSnackbar = ({\n    message,\n    msg_localize_components = [],\n    timeout = 6000,\n    is_open,\n    onClick,\n    handleClose,\n    type,\n    className,\n}: TBotSnackbar) => {\n    const [notification_timer, setNotificationTimer] = useState(timeout);\n\n    React.useEffect(() => {\n        if (is_open) {\n            setNotificationTimer(timeout);\n        }\n    }, [is_open, timeout]);\n\n    return (\n        <div\n            onMouseOver={() => {\n                setNotificationTimer(0);\n            }}\n            onMouseLeave={() => {\n                setNotificationTimer(timeout);\n            }}\n            className={className ?? 'bot-snackbar'}\n            data-testid='bot-snackbar-notification-container'\n        >\n            <Toast is_open={is_open} type={type} timeout={notification_timer} onClick={onClick} onClose={handleClose}>\n                <div>{message && <Localize i18n_default_text={message} components={msg_localize_components} />}</div>\n                <Icon\n                    icon='IcCross'\n                    className={'notification-close'}\n                    data_testid={'bot-snackbar-notification-close'}\n                    onClick={handleClose}\n                />\n            </Toast>\n        </div>\n    );\n};\nexport default BotSnackbar;\n","import BotSnackbar from './bot-snackbar';\nimport './bot-snackbar.scss';\n\nexport default BotSnackbar;\n","import React from 'react';\n\nimport { Dialog, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\n\nimport { useDBotStore } from '../../../../stores/useDBotStore';\n\nconst TourEndDialog = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { is_tour_dialog_visible, setTourDialogVisibility } = dashboard;\n\n    const is_mobile = isMobile();\n\n    const getTourContent = () => {\n        return (\n            <>\n                <div className='dc-dialog__content__description__text' data-testid='tour-success-message'>\n                    <Localize\n                        key={0}\n                        i18n_default_text={'You have successfully created your bot using a simple strategy.'}\n                    />\n                </div>\n                <div className='dc-dialog__content__description__text'>\n                    <Localize\n                        key={0}\n                        i18n_default_text={'Now, <0>run the bot</0> to test out the strategy.'}\n                        components={[<strong key={0} />]}\n                    />\n                </div>\n                <div className='dc-dialog__content__description__text'>\n                    <Localize\n                        key={0}\n                        i18n_default_text={\n                            'Note: If you wish to learn more about the Bot Builder, you can proceed to the <0>Tutorials</0> tab.'\n                        }\n                        components={[<strong key={0} />]}\n                    />\n                </div>\n            </>\n        );\n    };\n\n    const onHandleConfirm = () => {\n        setTourDialogVisibility(false);\n    };\n\n    return (\n        <div>\n            <Dialog\n                is_visible={is_tour_dialog_visible}\n                confirm_button_text={localize('OK')}\n                onConfirm={onHandleConfirm}\n                is_mobile_full_width\n                className='dc-dialog tour-dialog'\n                has_close_icon={false}\n            >\n                <div className='dc-dialog__content__header'>\n                    <Text weight='bold' color='prominent' size={is_mobile ? 'xs' : 's'}>\n                        {localize('Congratulations')}\n                    </Text>\n                </div>\n                <div className='dc-dialog__content__description'>\n                    <Text size={is_mobile ? 'xxs' : 'xs'} color='prominent'>\n                        {getTourContent()}\n                    </Text>\n                </div>\n            </Dialog>\n        </div>\n    );\n});\n\nexport default TourEndDialog;\n","import React from 'react';\n\nimport { observer } from '@deriv/stores';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport ReactJoyrideWrapper from '../common/react-joyride-wrapper';\nimport TourEndDialog from '../common/tour-end-dialog';\nimport TourStartDialog from '../common/tour-start-dialog';\nimport { BOT_BUILDER_TOUR } from '../config';\nimport { useTourHandler } from '../hooks/useTourHandler';\n\nconst BotBuilderTourDesktop = observer(() => {\n    const { is_close_tour, is_finished, handleJoyrideCallback, setIsCloseTour } = useTourHandler();\n    const { dashboard } = useDBotStore();\n    const { active_tab, active_tour, setActiveTour, setTourDialogVisibility } = dashboard;\n    const token = getSetting('bot_builder_token');\n    if (!token && active_tab === 1) setTourDialogVisibility(true);\n\n    React.useEffect(() => {\n        if (is_finished) {\n            setTourDialogVisibility(true);\n            setActiveTour('');\n        } else if (is_close_tour) {\n            setActiveTour('');\n            setIsCloseTour(false);\n        }\n    }, [is_close_tour, is_finished, setActiveTour, setIsCloseTour, setTourDialogVisibility]);\n\n    return (\n        <>\n            {!is_finished ? <TourStartDialog /> : <TourEndDialog />}\n            {active_tour && (\n                <ReactJoyrideWrapper\n                    handleCallback={handleJoyrideCallback}\n                    steps={BOT_BUILDER_TOUR}\n                    styles={{\n                        options: {\n                            arrowColor: 'transparent',\n                            backgroundColor: 'var(--general-main-2)',\n                            primaryColor: 'var(--brand-red-coral)',\n                            textColor: 'var(--text-general)',\n                        },\n                    }}\n                />\n            )}\n        </>\n    );\n});\n\nexport default BotBuilderTourDesktop;\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport { Icon, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\nimport { TStepMobile } from '../config';\n\ntype TAccordion = {\n    content_data: TStepMobile | null;\n    expanded: boolean;\n    test_id?: string;\n};\n\nconst Accordion = ({ content_data, expanded = false, test_id = 'dbot-acc-id', ...props }: TAccordion) => {\n    const [is_open, setOpen] = React.useState(expanded);\n    if (!content_data) return null;\n    const { content, header } = content_data;\n    return (\n        <div className='dbot-accordion' {...props}>\n            <div>\n                <div className='dbot-accordion__navbar' data-testid={test_id} onClick={() => setOpen(!is_open)}>\n                    <div className='dbot-accordion__header'>\n                        <Text as='span' size='xs' weight='bold'>\n                            {localize(header)}\n                        </Text>\n                    </div>\n                    <div className='dbot-accordion__icon'>\n                        <Icon icon={is_open ? 'IcChevronDownBold' : 'IcChevronUpBold'} />\n                    </div>\n                </div>\n                <div\n                    className={classNames('dbot-accordion__content', {\n                        'dbot-accordion__content--open': is_open,\n                    })}\n                    data-testid='accordion-content'\n                >\n                    <Text as='span' line_height='s' size='xxs'>\n                        {content}\n                    </Text>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Accordion;\n","import React from 'react';\n\nimport { ProgressBarTracker } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { getSetting } from 'Utils/settings';\n\nimport Accordion from '../common/accordion';\nimport TourButton from '../common/tour-button';\nimport TourStartDialog from '../common/tour-start-dialog';\nimport { BOT_BUILDER_MOBILE } from '../config';\nimport { highlightLoadModalButton } from '../utils';\n\nconst BotBuilderTourMobile = observer(() => {\n    const { dashboard, load_modal } = useDBotStore();\n    const { toggleTourLoadModal } = load_modal;\n    const {\n        onTourEnd,\n        setTourActiveStep,\n        active_tour,\n        show_mobile_tour_dialog,\n        active_tab,\n        setShowMobileTourDialog,\n        setTourDialogVisibility,\n    } = dashboard;\n    const [tour_step, setTourStep] = React.useState<number>(1);\n    const content_data = BOT_BUILDER_MOBILE.find(({ tour_step_key }) => {\n        return tour_step_key === tour_step;\n    });\n    const test_id = tour_step === 3 ? 'finish-bot-builder-tour' : 'next-bot-builder-tour';\n\n    React.useEffect(() => {\n        setTourActiveStep(tour_step);\n        //component does not rerender so calling this to highlight\n        !show_mobile_tour_dialog && highlightLoadModalButton(active_tour, tour_step);\n        if (tour_step === 2) toggleTourLoadModal(true);\n        else toggleTourLoadModal(false);\n        const token = getSetting('bot_builder_token');\n        if (!token && active_tab === 1) {\n            setShowMobileTourDialog(true);\n            setTourDialogVisibility(true);\n        }\n    }, [tour_step, show_mobile_tour_dialog]);\n\n    const tour_button_text = tour_step === 3 ? localize('Finish') : localize('Next');\n    const is_tour_active = active_tour === 'onboarding';\n    return (\n        <>\n            {show_mobile_tour_dialog && <TourStartDialog />}\n            {active_tour && !show_mobile_tour_dialog && (\n                <div data-testid='botbuilder-tour-mobile' className='dbot-slider dbot-slider__bot-builder-tour'>\n                    {content_data && <Accordion data-testid='bot-builder-acc' content_data={content_data} expanded />}\n                    <div className='dbot-slider__status'>\n                        <div className='dbot-slider__progress-bar'>\n                            {\n                                <ProgressBarTracker\n                                    step={tour_step}\n                                    steps_list={BOT_BUILDER_MOBILE.map(v => v.tour_step_key.toString())}\n                                    setStep={setTourStep}\n                                />\n                            }\n                        </div>\n                        <div className='dbot-slider__button-group'>\n                            {tour_step !== 1 && (\n                                <TourButton\n                                    onClick={() => {\n                                        setTourStep(tour_step - 1);\n                                    }}\n                                    label={localize('Previous')}\n                                    data-testid='prev-bot-builder-tour'\n                                />\n                            )}\n                            <TourButton\n                                type='danger'\n                                onClick={() => {\n                                    setTourStep(tour_step + 1);\n                                    onTourEnd(tour_step, is_tour_active);\n                                }}\n                                label={tour_button_text}\n                                data-testid={test_id}\n                            />\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n});\n\nexport default BotBuilderTourMobile;\n","import React from 'react';\nimport { observer } from 'mobx-react';\n\nimport { isMobile } from '@deriv/shared';\n\nimport BotBuilderTourDesktop from './bot-builder-tour-desktop';\nimport BotBuilderTourMobile from './bot-builder-tour-mobile';\n\nconst is_mobile = isMobile();\nconst BotBuilderTourHandler = observer(() => {\n    return <>{is_mobile ? <BotBuilderTourMobile /> : <BotBuilderTourDesktop />};</>;\n});\n\nexport default BotBuilderTourHandler;\n","import React from 'react';\nimport { Dialog, Text } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\nexport type TStopBotModalContent = {\n    is_running: boolean;\n    is_dialog_open: boolean;\n    is_contract_dialog_open: boolean;\n    is_stop_bot_dialog_open: boolean;\n    is_multiplier: boolean;\n    closeMultiplierContract: () => void;\n    onOkButtonClick: () => void;\n    toggleStopBotDialog: () => void;\n};\n\nconst StopBotModalContent = ({\n    is_running,\n    is_multiplier,\n    is_contract_dialog_open,\n    is_stop_bot_dialog_open,\n    closeMultiplierContract,\n    onOkButtonClick,\n    toggleStopBotDialog,\n}: TStopBotModalContent) => {\n    const confirm_button_text = is_running && is_multiplier ? localize('Keep my contract') : localize('Stop my bot');\n    const cancel_button_text = is_running && is_multiplier ? localize('Close my contract') : localize('Back');\n    const title_text =\n        is_running && is_multiplier ? localize('Keep your current contract?') : localize('Stop your current bot?');\n    const toggle_dialog_or_stop = is_running && is_multiplier ? closeMultiplierContract : toggleStopBotDialog;\n\n    return (\n        <React.Fragment>\n            <Dialog\n                portal_element_id='modal_root'\n                title={title_text}\n                is_visible={is_running ? is_stop_bot_dialog_open : is_contract_dialog_open}\n                confirm_button_text={confirm_button_text}\n                onConfirm={onOkButtonClick}\n                cancel_button_text={cancel_button_text}\n                onCancel={toggle_dialog_or_stop}\n                is_mobile_full_width={false}\n                className={'toolbar__dialog'}\n                has_close_icon\n            >\n                {is_running && is_multiplier ? (\n                    <>\n                        <Text as='p' line_height='s' size='xs' styles={{ paddingBottom: '2rem', paddingTop: '1rem' }}>\n                            {localize(\n                                'Close your contract now or keep it running. If you decide to keep it running, you can check and close it later on the '\n                            )}\n                            <Text as='span' line_height='s' size='xs'>\n                                <strong>{localize('Reports')}</strong>\n                            </Text>\n                            {localize(' page.')}\n                        </Text>\n                        <Text as='p' line_height='s' size='xs'>\n                            {localize('The Quick Strategy you just created will be loaded to the workspace.')}\n                        </Text>\n                    </>\n                ) : (\n                    <>\n                        <Text as='p' line_height='s' size='xs' styles={{ paddingBottom: '2rem', paddingTop: '1rem' }}>\n                            {localize(\n                                'Stopping the current bot will load the Quick Strategy you just created to the workspace.'\n                            )}\n                        </Text>\n                        <Text as='p' line_height='s' size='xs'>\n                            {localize(' Any open contracts can be viewed on the ')}\n                            <Text as='span' line_height='s' size='xs'>\n                                <strong>{localize('Reports')}</strong>\n                            </Text>\n                            {localize(' page.')}\n                        </Text>\n                    </>\n                )}\n            </Dialog>\n        </React.Fragment>\n    );\n};\n\nexport default StopBotModalContent;\n","import React from 'react';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport StopBotModalContent from '../stop-bot-modal-content';\n\nconst StopBotModal = observer(() => {\n    const { run_panel, quick_strategy, summary_card } = useDBotStore();\n\n    const { is_contract_dialog_open, is_stop_bot_dialog_open, toggleStopBotDialog } = quick_strategy;\n    const { is_running, closeMultiplierContract, stopMyBot, is_dialog_open } = run_panel;\n    const { is_multiplier } = summary_card;\n\n    return (\n        <StopBotModalContent\n            is_running={is_running}\n            onOkButtonClick={stopMyBot}\n            is_contract_dialog_open={is_contract_dialog_open}\n            is_stop_bot_dialog_open={is_stop_bot_dialog_open}\n            is_multiplier={is_multiplier}\n            closeMultiplierContract={closeMultiplierContract}\n            is_dialog_open={is_dialog_open}\n            toggleStopBotDialog={toggleStopBotDialog}\n        />\n    );\n});\n\nexport default StopBotModal;\n","import React from 'react';\nimport { Button, Popover } from '@deriv/components';\n\ntype TToolbarButton = {\n    popover_message?: string;\n    button_id: string;\n    button_classname: string;\n    buttonOnClick: () => void;\n    icon?: React.ReactElement;\n    button_text: string;\n};\n\nconst ToolbarButton = ({\n    popover_message,\n    button_id,\n    button_classname,\n    buttonOnClick,\n    icon,\n    button_text,\n}: TToolbarButton) => (\n    <Popover alignment='bottom' message={popover_message} should_disable_pointer_events>\n        <Button id={button_id} className={button_classname} has_effect onClick={buttonOnClick} icon={icon} green>\n            {button_text}\n        </Button>\n    </Popover>\n);\n\nexport default ToolbarButton;\n","import React from 'react';\nimport { Icon, Popover } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { popover_zindex } from 'Constants/z-indexes';\n\ntype TToolbarIcon = {\n    popover_message: string;\n    icon: string;\n    icon_id: string;\n    action: () => void;\n    icon_color?: string;\n};\n\nconst ToolbarIcon = ({ popover_message, icon, icon_id, icon_color, action }: TToolbarIcon) => {\n    const renderIcon = () => (\n        <Icon\n            icon={icon}\n            id={icon_id}\n            className='toolbar__icon'\n            onClick={action}\n            {...(icon_color && { color: icon_color })}\n        />\n    );\n\n    if (isMobile()) {\n        return renderIcon();\n    }\n\n    return (\n        <Popover\n            alignment='bottom'\n            message={popover_message}\n            zIndex={popover_zindex.TOOLBAR}\n            should_disable_pointer_events\n        >\n            {renderIcon()}\n        </Popover>\n    );\n};\n\nexport default ToolbarIcon;\n","import React from 'react';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport ToolbarIcon from './toolbar-icon';\n\ntype TWorkspaceGroup = {\n    has_redo_stack: boolean;\n    has_undo_stack: boolean;\n    onResetClick: () => void;\n    onSortClick: () => void;\n    onUndoClick: (param?: boolean) => void;\n    onZoomInOutClick: (param?: boolean) => void;\n    toggleLoadModal: () => void;\n    toggleSaveModal: () => void;\n};\n\nconst WorkspaceGroup = observer(\n    ({\n        has_redo_stack,\n        has_undo_stack,\n        onResetClick,\n        onSortClick,\n        onUndoClick,\n        onZoomInOutClick,\n        toggleLoadModal,\n        toggleSaveModal,\n    }: TWorkspaceGroup) => {\n        const { dashboard } = useDBotStore();\n        const { setPreviewOnPopup } = dashboard;\n\n        return (\n            <div className='toolbar__group toolbar__group-btn'>\n                <ToolbarIcon\n                    popover_message={localize('Reset')}\n                    icon='IcReset'\n                    icon_id='db-toolbar__reset-button'\n                    action={onResetClick}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Import')}\n                    icon='IcFolderOpen'\n                    icon_id='db-toolbar__import-button'\n                    action={() => {\n                        setPreviewOnPopup(true);\n                        toggleLoadModal();\n                    }}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Save')}\n                    icon='IcSave'\n                    icon_id='db-toolbar__save-button'\n                    action={toggleSaveModal}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Sort blocks')}\n                    icon='IcSort'\n                    icon_id='db-toolbar__sort-button'\n                    action={onSortClick}\n                />\n                <div className='vertical-divider' />\n                <ToolbarIcon\n                    popover_message={localize('Undo')}\n                    icon='IcUndo'\n                    icon_id='db-toolbar__undo-button'\n                    icon_color={has_undo_stack ? undefined : 'disabled'}\n                    action={() => onUndoClick(/* redo */ false)}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Redo')}\n                    icon='IcRedo'\n                    icon_id='db-toolbar__redo-button'\n                    icon_color={has_redo_stack ? undefined : 'disabled'}\n                    action={() => onUndoClick(/* redo */ true)}\n                />\n                <div className='vertical-divider' />\n                <ToolbarIcon\n                    popover_message={localize('Zoom in')}\n                    icon='IcZoomIn'\n                    icon_id='db-toolbar__zoom-in-button'\n                    action={() => onZoomInOutClick(/* in */ true)}\n                />\n                <ToolbarIcon\n                    popover_message={localize('Zoom out')}\n                    icon='IcZoomOut'\n                    icon_id='db-toolbar__zoom-out'\n                    action={() => onZoomInOutClick(/* in */ false)}\n                />\n            </div>\n        );\n    }\n);\n\nexport default WorkspaceGroup;\n","import React from 'react';\nimport { Dialog } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { Localize, localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport ToolbarButton from './toolbar-button';\nimport WorkspaceGroup from './workspace-group';\n\nconst Toolbar = observer(() => {\n    const { run_panel, save_modal, load_modal, toolbar, quick_strategy } = useDBotStore();\n    const {\n        ui: { is_mobile },\n    } = useStore();\n    const {\n        has_redo_stack,\n        has_undo_stack,\n        is_dialog_open,\n        closeResetDialog,\n        onResetOkButtonClick: onOkButtonClick,\n        onResetClick,\n        onSortClick,\n        onUndoClick,\n        onZoomInOutClick,\n    } = toolbar;\n    const { toggleSaveModal } = save_modal;\n    const { toggleLoadModal } = load_modal;\n    const { loadDataStrategy } = quick_strategy;\n    const { is_running } = run_panel;\n\n    const confirm_button_text = is_running ? localize('Yes') : localize('OK');\n    const cancel_button_text = is_running ? localize('No') : localize('Cancel');\n\n    return (\n        <React.Fragment>\n            <div className='toolbar dashboard__toolbar' data-testid='dashboard__toolbar'>\n                <div className='toolbar__section'>\n                    {is_mobile && (\n                        <ToolbarButton\n                            popover_message={localize('Click here to start building your Deriv Bot.')}\n                            button_id='db-toolbar__get-started-button'\n                            button_classname='toolbar__btn toolbar__btn--icon toolbar__btn--start'\n                            buttonOnClick={loadDataStrategy}\n                            button_text={localize('Quick strategy')}\n                        />\n                    )}\n                    <WorkspaceGroup\n                        has_redo_stack={has_redo_stack}\n                        has_undo_stack={has_undo_stack}\n                        onResetClick={onResetClick}\n                        onSortClick={onSortClick}\n                        onUndoClick={onUndoClick}\n                        onZoomInOutClick={onZoomInOutClick}\n                        toggleLoadModal={toggleLoadModal}\n                        toggleSaveModal={toggleSaveModal}\n                    />\n                </div>\n            </div>\n            <Dialog\n                portal_element_id='modal_root'\n                title={localize('Are you sure?')}\n                is_visible={is_dialog_open}\n                confirm_button_text={confirm_button_text}\n                onConfirm={onOkButtonClick}\n                cancel_button_text={cancel_button_text}\n                onCancel={closeResetDialog}\n                is_mobile_full_width={false}\n                className={'toolbar__dialog'}\n                has_close_icon\n            >\n                {is_running ? (\n                    <Localize\n                        i18n_default_text='Deriv Bot will not proceed with any new trades. Any ongoing trades will be completed by our system. Any unsaved changes will be lost.<0>Note: Please check your statement to view completed transactions.</0>'\n                        components={[\n                            <div\n                                key={0}\n                                className='toolbar__dialog-text--second'\n                                data-testid='toolbar__dialog-text--second'\n                            />,\n                        ]}\n                    />\n                ) : (\n                    <Localize i18n_default_text='Any unsaved changes will be lost.' />\n                )}\n            </Dialog>\n        </React.Fragment>\n    );\n});\n\nexport default Toolbar;\n","import Toolbar from './toolbar';\nimport './toolbar.scss';\n\nexport default Toolbar;\n","import React from 'react';\nimport { Icon } from '@deriv/components';\n\ntype TSearchIcon = {\n    search: string;\n    is_search_loading: boolean;\n    onClick: () => void;\n};\n\nconst SearchIcon = ({ search, is_search_loading, onClick }: TSearchIcon) => {\n    if (!search) return <Icon icon='IcSearch' />;\n    if (is_search_loading) return <div className='loader' data-testid='loader' />;\n    return <Icon icon='IcCloseCircle' onClick={onClick} color='secondary' />;\n};\n\nexport default SearchIcon;\n","import React from 'react';\nimport { Field as FormField, FieldProps, Form, Formik } from 'formik';\nimport { Input } from '@deriv/components';\nimport { localize } from '@deriv/translations';\nimport SearchIcon from './search-icon';\n\ntype TSearchBox = {\n    is_search_loading: boolean;\n    onSearch: () => void;\n    onSearchBlur: () => void;\n    onSearchClear: (param: (field: string, value: number | string, shouldValidate?: boolean) => void) => void;\n    onSearchKeyUp: (param: () => void) => void;\n};\n\ntype TFormValues = { [key: string]: string };\n\nconst SearchBox = ({ is_search_loading, onSearch, onSearchBlur, onSearchClear, onSearchKeyUp }: TSearchBox) => (\n    <div className='db-toolbox__search'>\n        <Formik initialValues={{ search: '' }} onSubmit={onSearch}>\n            {({ submitForm, values: { search }, setFieldValue }) => (\n                <Form>\n                    <FormField name='search'>\n                        {({ field }: FieldProps<string, TFormValues>) => (\n                            <Input\n                                {...field}\n                                className='db-toolbox__search-field'\n                                type='text'\n                                name='search'\n                                placeholder={localize('Search')}\n                                onKeyUp={() => onSearchKeyUp(submitForm)}\n                                onFocus={submitForm}\n                                onBlur={onSearchBlur}\n                                leading_icon={\n                                    <SearchIcon\n                                        search={search}\n                                        is_search_loading={is_search_loading}\n                                        onClick={() => onSearchClear(setFieldValue)}\n                                    />\n                                }\n                            />\n                        )}\n                    </FormField>\n                </Form>\n            )}\n        </Formik>\n    </div>\n);\n\nexport default SearchBox;\n","import SearchBox from './search-box';\n\nexport default SearchBox;\n","import React from 'react';\nimport ReactDomServer from 'react-dom/server';\nimport { localize } from '@deriv/translations';\n\nconst Arg = ({ ...props }) => {\n    return React.createElement('arg', props);\n};\n\nconst Block = ({ ...props }) => {\n    return React.createElement('block', props);\n};\n\nconst Category = ({ ...props }) => {\n    return React.createElement('category', props);\n};\n\nconst Example = ({ ...props }) => {\n    return React.createElement('example', props);\n};\n\nconst Examples = ({ ...props }) => {\n    return React.createElement('examples', props);\n};\n\nconst Field = ({ ...props }) => {\n    return React.createElement('field', props);\n};\n\nconst Mutation = ({ ...props }) => {\n    return React.createElement('mutation', props);\n};\n\nconst Next = ({ ...props }) => {\n    return React.createElement('next', props);\n};\n\nconst Shadow = ({ ...props }) => {\n    return React.createElement('shadow', props);\n};\n\nconst Statement = ({ ...props }) => {\n    return React.createElement('statement', props);\n};\n\nconst Value = ({ ...props }) => {\n    return React.createElement('value', props);\n};\n\nconst Xml = ({ ...props }) => {\n    return React.createElement('xml', props);\n};\n\nexport const ToolboxItems = ReactDomServer.renderToStaticMarkup(\n    <Xml xmlns='http://www.w3.org/1999/xhtml' id='toolbox'>\n        <Category id='trade_parameters' name={localize('Trade parameters')}>\n            <Block type='trade_definition'>\n                <Statement name='TRADE_OPTIONS'>\n                    <Block type='trade_definition_market' deletable='false' movable='false'>\n                        <Field name='MARKET_LIST' />\n                        <Field name='SUBMARKET_LIST' />\n                        <Field name='SYMBOL_LIST' />\n                        <Next>\n                            <Block type='trade_definition_tradetype' deletable='false' movable='false'>\n                                <Field name='TRADETYPECAT_LIST' />\n                                <Field name='TRADETYPE_LIST' />\n                                <Next>\n                                    <Block type='trade_definition_contracttype' deletable='false' movable='false'>\n                                        <Field name='TYPE_LIST' />\n                                        <Next>\n                                            <Block\n                                                type='trade_definition_candleinterval'\n                                                deletable='false'\n                                                movable='false'\n                                            >\n                                                <Field name='CANDLEINTERVAL_LIST'>60</Field>\n                                                <Next>\n                                                    <Block\n                                                        type='trade_definition_restartbuysell'\n                                                        deletable='false'\n                                                        movable='false'\n                                                    >\n                                                        <Field name='TIME_MACHINE_ENABLED'>FALSE</Field>\n                                                        <Next>\n                                                            <Block\n                                                                type='trade_definition_restartonerror'\n                                                                deletable='false'\n                                                                movable='false'\n                                                            >\n                                                                <Field name='RESTARTONERROR'>TRUE</Field>\n                                                            </Block>\n                                                        </Next>\n                                                    </Block>\n                                                </Next>\n                                            </Block>\n                                        </Next>\n                                    </Block>\n                                </Next>\n                            </Block>\n                        </Next>\n                    </Block>\n                </Statement>\n            </Block>\n            <Block type='trade_definition_tradeoptions'>\n                <Mutation has_first_barrier='false' has_second_barrier='false' has_prediction='false' />\n                <Field name='DURATIONTYPE_LIST' />\n                <Field name='CURRENCY_LIST'>USD</Field>\n                <Value name='DURATION'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>1</Field>\n                    </Shadow>\n                </Value>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>1</Field>\n                    </Shadow>\n                </Value>\n                <Field name='AMOUNT_LIMITS' />\n            </Block>\n            <Block type='trade_definition_multiplier'>\n                <Field name='MULTIPLIERTYPE_LIST' />\n                <Field name='CURRENCY_LIST'>USD</Field>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>1</Field>\n                    </Shadow>\n                </Value>\n                <Field name='AMOUNT_LIMITS' />\n            </Block>\n            <Block type='multiplier_take_profit'>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>0</Field>\n                    </Shadow>\n                </Value>\n            </Block>\n            <Block type='multiplier_stop_loss'>\n                <Value name='AMOUNT'>\n                    <Shadow type='math_number'>\n                        <Field name='NUM'>0</Field>\n                    </Shadow>\n                </Value>\n            </Block>\n        </Category>\n        <Category id='purchase_conditions' name={localize('Purchase conditions')}>\n            <Block type='before_purchase' />\n            <Block type='purchase' />\n        </Category>\n        <Category id='sell_conditions' name={localize('Sell conditions (optional)')}>\n            <Block type='during_purchase' />\n            <Block type='sell_at_market' />\n        </Category>\n        <Category id='trade_results' name={localize('Restart trading conditions')}>\n            <Block type='after_purchase' />\n            <Block type='trade_again' />\n        </Category>\n\n        <Category id='analysis' name={localize('Analysis')}>\n            <Category id='indicators' name={localize('Indicators')}>\n                <Block type='sma_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='smaa_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='bb_statement'>\n                    <Field name='BBRESULT_LIST'>0</Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='std_dev_multiplier_up' deletable='false' movable='false'>\n                                            <Value name='UPMULTIPLIER'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>5</Field>\n                                                </Shadow>\n                                            </Value>\n                                            <Next>\n                                                <Block type='std_dev_multiplier_down'>\n                                                    <Value name='DOWNMULTIPLIER'>\n                                                        <Shadow type='math_number'>\n                                                            <Field name='NUM'>5</Field>\n                                                        </Shadow>\n                                                    </Value>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='bba_statement'>\n                    <Field name='BBRESULT_LIST'>0</Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='std_dev_multiplier_up' deletable='false' movable='false'>\n                                            <Value name='UPMULTIPLIER'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>5</Field>\n                                                </Shadow>\n                                            </Value>\n                                            <Next>\n                                                <Block type='std_dev_multiplier_down'>\n                                                    <Value name='DOWNMULTIPLIER'>\n                                                        <Shadow type='math_number'>\n                                                            <Field name='NUM'>5</Field>\n                                                        </Shadow>\n                                                    </Value>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='ema_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='emaa_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='rsi_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='rsia_statement'>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='macda_statement'>\n                    <Field name='MACDFIELDS_LIST'>1</Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST' />\n                            <Next>\n                                <Block type='fast_ema_period' deletable='false' movable='false'>\n                                    <Value name='FAST_EMA_PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>12</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='slow_ema_period' deletable='false' movable='false'>\n                                            <Value name='SLOW_EMA_PERIOD'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>26</Field>\n                                                </Shadow>\n                                            </Value>\n                                            <Next>\n                                                <Block type='signal_ema_period' deletable='false' movable='false'>\n                                                    <Value name='SIGNAL_EMA_PERIOD'>\n                                                        <Shadow type='math_number'>\n                                                            <Field name='NUM'>9</Field>\n                                                        </Shadow>\n                                                    </Value>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Category>\n\n            <Category name={localize('Tick and candle analysis')} id='tick_analysis'>\n                <Block type='tick_analysis' />\n                <Block type='tick' />\n                <Block type='last_digit' />\n                <Block type='ticks' />\n                <Block type='lastDigitList' />\n                <Block type='check_direction' />\n                <Block type='is_candle_black' />\n                <Block type='read_ohlc'>\n                    <Field name='OHLCFIELD_LIST'>open</Field>\n                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                    <Value name='CANDLEINDEX'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='read_ohlc_obj' />\n                <Block type='ohlc_values' />\n                <Block type='ohlc_values_in_list' />\n                <Block type='get_ohlc'>\n                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                    <Value name='CANDLEINDEX'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='ohlc' />\n            </Category>\n\n            <Category name={localize('Contract')} id='contract_details'>\n                <Block type='contract_check_result' />\n                <Block type='read_details' />\n                <Block type='sell_price' />\n                <Block type='check_sell' />\n                <Block type='payout' />\n                <Block type='ask_price' />\n            </Category>\n\n            <Category name={localize('Stats')} id='stats'>\n                <Block type='balance' />\n                <Block type='total_profit' />\n                <Block type='total_runs' />\n            </Category>\n        </Category>\n\n        <Category id='utility' name={localize('Utility')}>\n            <Category name={localize('Custom functions')} id='custom_functions' dynamic='PROCEDURE' />\n\n            <Category name={localize('Variables')} id='variables' dynamic='VARIABLE' />\n\n            <Category name={localize('Notifications')} id='notifications'>\n                <Block type='text_print'>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_prompt_ext'>\n                    <Field name='TYPE'>TEXT</Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='notify'>\n                    <Field name='NOTIFICATION_TYPE'>success</Field>\n                    <Value name='MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='notify_telegram'>\n                    <Value name='TELEGRAM_ACCESS_TOKEN'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                    </Value>\n                    <Value name='TELEGRAM_CHAT_ID'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                    </Value>\n                    <Value name='TELEGRAM_MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n\n            <Category name={localize('Time')} id='time'>\n                <Block type='epoch' />\n                <Block type='timeout' />\n                <Block type='totimestamp'>\n                    <Value name='DATETIME'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>yyyy-mm-dd hh:mm:ss</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='todatetime'>\n                    <Value name='TIMESTAMP'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n\n            <Category name={localize('Math')} id='math'>\n                <Block type='math_number' />\n                <Block type='math_arithmetic'>\n                    <Field name='OP'>ADD</Field>\n                    <Value name='A'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='B'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_single'>\n                    <Field name='OP'>ROOT</Field>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>9</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_trig'>\n                    <Field name='OP'>SIN</Field>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>45</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_constant' />\n                <Block type='math_number_property'>\n                    <Mutation divisor_input='false' />\n                    <Field name='PROPERTY'>EVEN</Field>\n                    <Value name='NUMBER_TO_CHECK'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_change'>\n                    <Field name='VAR' variabletype=''>\n                        item\n                    </Field>\n                    <Value name='DELTA'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_on_list' />\n                <Block type='math_round'>\n                    <Field name='OP'>ROUND</Field>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>3.1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_modulo'>\n                    <Value name='DIVIDEND'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>64</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='DIVISOR'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>10</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_constrain'>\n                    <Value name='Value'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>50</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='LOW'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='HIGH'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>100</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_random_int'>\n                    <Value name='FROM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='TO'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>100</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='math_random_float' />\n            </Category>\n\n            <Category name={localize('Text')} id='text'>\n                <Block type='text'>\n                    <Field name='TEXT'>abc</Field>\n                </Block>\n                <Block type='text_join'>\n                    <Field name='VARIABLE' variabletype=''>\n                        text\n                    </Field>\n                    <Statement name='STACK'>\n                        <Block type='text_statement' movable='false'>\n                            <Value name='TEXT'>\n                                <Shadow type='text'>\n                                    <Field name='TEXT'>abc</Field>\n                                </Shadow>\n                            </Value>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='text_append'>\n                    <Field name='VAR' variabletype=''>\n                        text\n                    </Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_length'>\n                    <Value name='Value'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_isEmpty'>\n                    <Value name='Value'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_indexOf'>\n                    <Field name='END'>FIRST</Field>\n                    <Value name='Value'>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                text\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='FIND'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_charAt'>\n                    <Mutation at='true' />\n                    <Field name='WHERE'>FROM_START</Field>\n                    <Value name='Value'>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                item\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='AT'>\n                        <Shadow type='math_number_positive'>\n                            <Field name='NUM'>1</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_getSubstring'>\n                    <Mutation at1='true' at2='true' />\n                    <Field name='WHERE1'>FROM_START</Field>\n                    <Field name='WHERE2'>FROM_START</Field>\n                    <Value name='STRING'>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                text\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='AT1'>\n                        <Shadow type='math_number_positive'>\n                            <Field name='NUM'>0</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='AT2'>\n                        <Shadow type='math_number_positive'>\n                            <Field name='NUM'>2</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_changeCase'>\n                    <Field name='CASE'>UPPERCASE</Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='text_trim'>\n                    <Field name='MODE'>BOTH</Field>\n                    <Value name='TEXT'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n\n            <Category name={localize('Logic')} id='logic'>\n                <Block type='controls_if' />\n                <Block type='logic_compare' />\n                <Block type='logic_operation' />\n                <Block type='logic_negate' />\n                <Block type='logic_boolean' />\n                <Block type='logic_null' />\n                <Block type='logic_ternary' />\n            </Category>\n\n            <Category name={localize('Lists')} id='lists'>\n                <Block type='lists_create_with'>\n                    <Field name='VARIABLE' variabletype=''>\n                        list\n                    </Field>\n                    <Statement name='STACK'>\n                        <Block type='lists_statement' movable='false'>\n                            <Next>\n                                <Block type='lists_statement' movable='false' />\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n                <Block type='lists_repeat'>\n                    <Value name='NUM'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>5</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='lists_length' />\n                <Block type='lists_isEmpty' />\n                <Block type='lists_indexOf' />\n                <Block type='lists_getIndex' />\n                <Block type='lists_setIndex' />\n                <Block type='lists_getSublist' />\n                <Block type='lists_split'>\n                    <Mutation mode='SPLIT' />\n                    <Field name='MODE'>SPLIT</Field>\n                    <Value name='DELIM'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>,</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n                <Block type='lists_sort' />\n            </Category>\n\n            <Category name={localize('Loops')} id='loops'>\n                <Block type='controls_repeat' />\n                <Block type='controls_repeat_ext' />\n                <Block type='controls_whileUntil' />\n                <Block type='controls_for' />\n                <Block type='controls_forEach' />\n                <Block type='controls_flow_statements' />\n            </Category>\n\n            <Category name={localize('Miscellaneous')} id='misc'>\n                <Block type='loader' />\n                <Block type='block_holder' />\n                <Block type='console'>\n                    <Value name='MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Category>\n        </Category>\n\n        <Examples id='examples'>\n            <Example id='sell_available'>\n                <Block type='during_purchase'>\n                    <Statement name='DURING_PURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='check_sell' />\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='sell_at_market' />\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='trade_again'>\n                <Block type='after_purchase'>\n                    <Statement name='AFTERPURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='total_profit' />\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                target_profit\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sma_block_example'>\n                <Block type='sma_statement'>\n                    <Field name='VARIABLE' variabletype=''>\n                        sma\n                    </Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST'>\n                                <Block type='ohlc_values'>\n                                    <Field name='OHLCFIELD_LIST'>open</Field>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                </Block>\n                            </Value>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sma_array'>\n                <Block type='smaa_statement'>\n                    <Field name='VARIABLE' variabletype=''>\n                        smaa\n                    </Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sma_block_example_1'>\n                <Block type='sma_statement'>\n                    <Field name='VARIABLE' variabletype=''>\n                        sma\n                    </Field>\n                    <Statement name='STATEMENT'>\n                        <Block type='input_list' deletable='false' movable='false'>\n                            <Value name='INPUT_LIST'>\n                                <Block type='ticks' />\n                            </Value>\n                            <Next>\n                                <Block type='period' deletable='false' movable='false'>\n                                    <Value name='PERIOD'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='in_candle_list_read'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        op\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                            <Value name='CANDLEINDEX'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>1</Field>\n                                </Shadow>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='read_candle_value'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        op\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc_obj'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Value name='OHLCOBJ'>\n                                <Block type='read_ohlc'>\n                                    <Field name='OHLCFIELD_LIST'>open</Field>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                    <Value name='CANDLEINDEX'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>1</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='candle_list'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        candle_list\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='ohlc_values'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='candle_list_1'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        cl\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='ohlc_values_in_list'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Value name='OHLCLIST'>\n                                <Block type='ohlc'>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='get_candle'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        candle_open_price\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc_obj'>\n                            <Field name='OHLCFIELD_LIST'>epoch</Field>\n                            <Value name='OHLCOBJ'>\n                                <Block type='get_ohlc'>\n                                    <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                                    <Value name='CANDLEINDEX'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>2</Field>\n                                        </Shadow>\n                                    </Value>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='check_result'>\n                <Block type='after_purchase'>\n                    <Statement name='AFTERPURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='contract_check_result'>\n                                    <Field name='CHECK_RESULT'>win</Field>\n                                </Block>\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='trade_again' />\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='sell_pl'>\n                <Block type='during_purchase'>\n                    <Statement name='DURING_PURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='check_sell' />\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='controls_if'>\n                                    <Value name='IF0'>\n                                        <Block type='logic_compare'>\n                                            <Field name='OP'>EQ</Field>\n                                            <Value name='A'>\n                                                <Block type='sell_price' />\n                                            </Value>\n                                            <Value name='B'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        stake\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Statement name='DO0'>\n                                        <Block type='sell_at_market' />\n                                    </Statement>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='if-return'>\n                <Block type='procedures_defreturn'>\n                    <Mutation>\n                        <Arg name='x' />\n                    </Mutation>\n                    <Field name='NAME'>do something</Field>\n                    <Statement name='STACK'>\n                        <Block type='procedures_ifreturn'>\n                            <Mutation value='1' />\n                            <Value name='CONDITION'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Value name='VALUE'>\n                                <Block type='text'>\n                                    <Field name='TEXT'>x must be positive or zero</Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Statement>\n                    <Value name='RETURN'>\n                        <Block type='math_single'>\n                            <Field name='OP'>ROOT</Field>\n                            <Value name='NUM'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>9</Field>\n                                </Shadow>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        x\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='notify_telegram'>\n                <Block type='notify_telegram'>\n                    <Value name='TELEGRAM_ACCESS_TOKEN'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                access_token\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='TELEGRAM_CHAT_ID'>\n                        <Shadow type='text'>\n                            <Field name='TEXT' />\n                        </Shadow>\n                        <Block type='variables_get'>\n                            <Field name='VAR' variabletype=''>\n                                chat_id\n                            </Field>\n                        </Block>\n                    </Value>\n                    <Value name='TELEGRAM_MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>Enjoy!</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='epoch'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        candle\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='read_ohlc'>\n                            <Field name='OHLCFIELD_LIST'>open</Field>\n                            <Field name='CANDLEINTERVAL_LIST'>default</Field>\n                            <Value name='CANDLEINDEX'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>1</Field>\n                                </Shadow>\n                            </Value>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='variables_set'>\n                            <Field name='VAR' variabletype=''>\n                                Open Time\n                            </Field>\n                            <Value name='VALUE'>\n                                <Block type='read_ohlc_obj'>\n                                    <Field name='OHLCFIELD_LIST'>epoch</Field>\n                                    <Value name='OHLCOBJ'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                candle\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Next>\n                                <Block type='variables_set'>\n                                    <Field name='VAR' variabletype=''>\n                                        Open Time\n                                    </Field>\n                                    <Value name='VALUE'>\n                                        <Block type='math_arithmetic'>\n                                            <Field name='OP'>MINUS</Field>\n                                            <Value name='A'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>1</Field>\n                                                </Shadow>\n                                                <Block type='epoch' />\n                                            </Value>\n                                            <Value name='B'>\n                                                <Shadow type='math_number'>\n                                                    <Field name='NUM'>1</Field>\n                                                </Shadow>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        Open Time\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Next>\n                                        <Block type='controls_if'>\n                                            <Value name='IF0'>\n                                                <Block type='logic_compare'>\n                                                    <Field name='OP'>GTE</Field>\n                                                    <Value name='A'>\n                                                        <Block type='variables_get'>\n                                                            <Field name='VAR' variabletype=''>\n                                                                Time Since Candle Opened\n                                                            </Field>\n                                                        </Block>\n                                                    </Value>\n                                                    <Value name='B'>\n                                                        <Block type='math_number'>\n                                                            <Field name='NUM'>30</Field>\n                                                        </Block>\n                                                    </Value>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='totimestamp'>\n                <Block type='before_purchase'>\n                    <Statement name='BEFOREPURCHASE_STACK'>\n                        <Block type='controls_if'>\n                            <Value name='IF0'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='epoch' />\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='totimestamp'>\n                                            <Value name='DATETIME'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>1957-08-31 00:00:00</Field>\n                                                </Shadow>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Statement name='DO0'>\n                                <Block type='purchase'>\n                                    <Field name='PURCHASE_LIST'>CALL</Field>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='todatetime'>\n                <Block type='notify'>\n                    <Field name='NOTIFICATION_TYPE'>success</Field>\n                    <Field name='NOTIFICATION_SOUND'>silent</Field>\n                    <Value name='MESSAGE'>\n                        <Shadow type='text'>\n                            <Field name='TEXT'>abc</Field>\n                        </Shadow>\n                        <Block type='todatetime'>\n                            <Value name='TIMESTAMP'>\n                                <Shadow type='math_number'>\n                                    <Field name='NUM'>0</Field>\n                                </Shadow>\n                                <Block type='epoch' />\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='constrain'>\n                <Block type='math_constrain'>\n                    <Value name='VALUE'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>5</Field>\n                        </Block>\n                    </Value>\n                    <Value name='LOW'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>10</Field>\n                        </Shadow>\n                    </Value>\n                    <Value name='HIGH'>\n                        <Shadow type='math_number'>\n                            <Field name='NUM'>20</Field>\n                        </Shadow>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='controls_if'>\n                <Block type='controls_if'>\n                    <Mutation elseif='1' else='1' />\n                    <Value name='IF0'>\n                        <Block type='logic_compare'>\n                            <Field name='OP'>EQ</Field>\n                            <Value name='A'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var1\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Value name='B'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var2\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                    <Value name='IF1'>\n                        <Block type='logic_compare'>\n                            <Field name='OP'>EQ</Field>\n                            <Value name='A'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var3\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Value name='B'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        var4\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Value>\n                </Block>\n            </Example>\n            <Example id='compare_logic'>\n                <Block type='logic_compare'>\n                    <Field name='OP'>EQ</Field>\n                </Block>\n            </Example>\n            <Example id='compare_logic_1'>\n                <Block type='logic_operation'>\n                    <Field name='OP'>AND</Field>\n                </Block>\n            </Example>\n            <Example id='repeat_while'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_whileUntil'>\n                            <Field name='MODE'>WHILE</Field>\n                            <Value name='BOOL'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>LTE</Field>\n                                    <Value name='A'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Statement name='DO'>\n                                <Block type='math_change'>\n                                    <Field name='VAR' variabletype=''>\n                                        x\n                                    </Field>\n                                    <Value name='DELTA'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>1</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='repeat_until'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>20</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_whileUntil'>\n                            <Field name='MODE'>UNTIL</Field>\n                            <Value name='BOOL'>\n                                <Block type='logic_compare'>\n                                    <Field name='OP'>EQ</Field>\n                                    <Value name='A'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Value name='B'>\n                                        <Block type='math_number'>\n                                            <Field name='NUM'>10</Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Value>\n                            <Statement name='DO'>\n                                <Block type='math_change'>\n                                    <Field name='VAR' variabletype=''>\n                                        x\n                                    </Field>\n                                    <Value name='DELTA'>\n                                        <Shadow type='math_number'>\n                                            <Field name='NUM'>-1</Field>\n                                        </Shadow>\n                                    </Value>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='controls_for'>\n                <Block type='controls_for'>\n                    <Field name='VAR' variabletype=''>\n                        i\n                    </Field>\n                    <Value name='FROM'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>0</Field>\n                        </Block>\n                    </Value>\n                    <Value name='TO'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>10</Field>\n                        </Block>\n                    </Value>\n                    <Value name='BY'>\n                        <Block type='math_number'>\n                            <Field name='NUM'>2</Field>\n                        </Block>\n                    </Value>\n                    <Statement name='DO'>\n                        <Block type='notify'>\n                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                            <Value name='MESSAGE'>\n                                <Shadow type='text'>\n                                    <Field name='TEXT'>abc</Field>\n                                </Shadow>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        i\n                                    </Field>\n                                </Block>\n                            </Value>\n                        </Block>\n                    </Statement>\n                </Block>\n            </Example>\n            <Example id='controls_forEach'>\n                <Block type='lists_create_with'>\n                    <Field name='VARIABLE'>list</Field>\n                    <Statement name='STACK'>\n                        <Block type='lists_statement'>\n                            <Value name='VALUE'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        item1\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Next>\n                                <Block type='lists_statement'>\n                                    <Value name='VALUE'>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                item2\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                    <Next>\n                                        <Block type='lists_statement'>\n                                            <Value name='VALUE'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        item3\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Next>\n                        </Block>\n                    </Statement>\n                    <Next>\n                        <Block type='controls_forEach'>\n                            <Field name='VAR' variabletype=''>\n                                i\n                            </Field>\n                            <Value name='LIST'>\n                                <Block type='variables_get'>\n                                    <Field name='VAR' variabletype=''>\n                                        list\n                                    </Field>\n                                </Block>\n                            </Value>\n                            <Statement name='DO'>\n                                <Block type='notify'>\n                                    <Field name='NOTIFICATION_TYPE'>success</Field>\n                                    <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                    <Value name='MESSAGE'>\n                                        <Shadow type='text'>\n                                            <Field name='TEXT'>abc</Field>\n                                        </Shadow>\n                                        <Block type='variables_get'>\n                                            <Field name='VAR' variabletype=''>\n                                                i\n                                            </Field>\n                                        </Block>\n                                    </Value>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='break_out'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='logic_boolean'>\n                            <Field name='BOOL'>TRUE</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_repeat'>\n                            <Field name='TIMES'>10</Field>\n                            <Statement name='DO'>\n                                <Block type='controls_if'>\n                                    <Value name='IF0'>\n                                        <Block type='logic_negate'>\n                                            <Value name='BOOL'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Statement name='DO0'>\n                                        <Block type='controls_flow_statements'>\n                                            <Field name='FLOW'>BREAK</Field>\n                                        </Block>\n                                    </Statement>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n            <Example id='continue'>\n                <Block type='variables_set'>\n                    <Field name='VAR' variabletype=''>\n                        x\n                    </Field>\n                    <Value name='VALUE'>\n                        <Block type='logic_boolean'>\n                            <Field name='BOOL'>FALSE</Field>\n                        </Block>\n                    </Value>\n                    <Next>\n                        <Block type='controls_repeat'>\n                            <Field name='TIMES'>10</Field>\n                            <Statement name='DO'>\n                                <Block type='controls_if'>\n                                    <Value name='IF0'>\n                                        <Block type='logic_negate'>\n                                            <Value name='BOOL'>\n                                                <Block type='variables_get'>\n                                                    <Field name='VAR' variabletype=''>\n                                                        x\n                                                    </Field>\n                                                </Block>\n                                            </Value>\n                                        </Block>\n                                    </Value>\n                                    <Statement name='DO0'>\n                                        <Block type='variables_set'>\n                                            <Field name='VAR' variabletype=''>\n                                                x\n                                            </Field>\n                                            <Value name='VALUE'>\n                                                <Block type='logic_boolean'>\n                                                    <Field name='BOOL'>TRUE</Field>\n                                                </Block>\n                                            </Value>\n                                            <Next>\n                                                <Block type='controls_flow_statements'>\n                                                    <Field name='FLOW'>CONTINUE</Field>\n                                                </Block>\n                                            </Next>\n                                        </Block>\n                                    </Statement>\n                                    <Next>\n                                        <Block type='notify'>\n                                            <Field name='NOTIFICATION_TYPE'>success</Field>\n                                            <Field name='NOTIFICATION_SOUND'>silent</Field>\n                                            <Value name='MESSAGE'>\n                                                <Shadow type='text'>\n                                                    <Field name='TEXT'>abc</Field>\n                                                </Shadow>\n                                            </Value>\n                                        </Block>\n                                    </Next>\n                                </Block>\n                            </Statement>\n                        </Block>\n                    </Next>\n                </Block>\n            </Example>\n        </Examples>\n    </Xml>\n);\n","import React from 'react';\nimport classNames from 'classnames';\nimport { Icon, Text } from '@deriv/components';\nimport { isMobile } from '@deriv/shared';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from '../../../../stores/useDBotStore';\nimport ToolbarButton from '../toolbar/toolbar-button';\nimport SearchBox from './search-box';\nimport { ToolboxItems } from './toolbox-items';\n\nconst Toolbox = observer(() => {\n    const { toolbox, flyout, quick_strategy } = useDBotStore();\n    const {\n        hasSubCategory,\n        is_search_loading,\n        onMount,\n        onSearch,\n        onSearchBlur,\n        onSearchClear,\n        onSearchKeyUp,\n        onToolboxItemClick,\n        onToolboxItemExpand,\n        onUnmount,\n        sub_category_index,\n        toolbox_dom,\n    } = toolbox;\n\n    const { setVisibility, selected_category } = flyout;\n    const { loadDataStrategy } = quick_strategy;\n\n    const toolbox_ref = React.useRef(ToolboxItems);\n    const [is_open, setOpen] = React.useState(true);\n\n    React.useEffect(() => {\n        onMount(toolbox_ref);\n        return () => onUnmount();\n    }, []);\n\n    if (!isMobile()) {\n        return (\n            <div className='dashboard__toolbox' data-testid='dashboard__toolbox'>\n                <ToolbarButton\n                    popover_message={localize('Click here to start building your Deriv Bot.')}\n                    button_id='db-toolbar__get-started-button'\n                    button_classname='toolbar__btn toolbar__btn--icon toolbar__btn--start'\n                    buttonOnClick={loadDataStrategy}\n                    button_text={localize('Quick strategy')}\n                />\n                <div id='gtm-toolbox' className='db-toolbox__content'>\n                    <div className='db-toolbox__header'>\n                        <div\n                            className='db-toolbox__title'\n                            data-testid='db-toolbox__title'\n                            onClick={() => {\n                                setOpen(!is_open);\n                                setVisibility(false);\n                            }}\n                        >\n                            {localize('Blocks menu')}\n                            <span\n                                className={classNames('db-toolbox__title__chevron', {\n                                    'db-toolbox__title__chevron--active': is_open,\n                                })}\n                            >\n                                <Icon icon='IcChevronDownBold' />\n                            </span>\n                        </div>\n                    </div>\n                    <div\n                        className={classNames('db-toolbox__content-wrapper', { active: is_open })}\n                        data-testid='db-toolbox__content-wrapper'\n                    >\n                        <SearchBox\n                            is_search_loading={is_search_loading}\n                            onSearch={onSearch}\n                            onSearchBlur={onSearchBlur}\n                            onSearchClear={onSearchClear}\n                            onSearchKeyUp={onSearchKeyUp}\n                        />\n                        <div className='db-toolbox__category-menu'>\n                            {toolbox_dom &&\n                                Array.from(toolbox_dom.childNodes as HTMLElement[]).map((category, index) => {\n                                    if (category.tagName.toUpperCase() === 'CATEGORY') {\n                                        const has_sub_category = hasSubCategory(category.children);\n                                        const is_sub_category_open = sub_category_index.includes(index);\n                                        return (\n                                            <div\n                                                key={`db-toolbox__row--${category.getAttribute('id')}`}\n                                                className={classNames('db-toolbox__row', {\n                                                    'db-toolbox__row--active':\n                                                        selected_category?.getAttribute('id') === category?.id,\n                                                })}\n                                            >\n                                                <div\n                                                    className='db-toolbox__item'\n                                                    onClick={() => {\n                                                        // eslint-disable-next-line no-unused-expressions\n                                                        has_sub_category\n                                                            ? onToolboxItemExpand(index)\n                                                            : onToolboxItemClick(category);\n                                                    }}\n                                                >\n                                                    <div className='db-toolbox__category-text'>\n                                                        <div className='db-toolbox__label'>\n                                                            {localize(category.getAttribute('name') as string)}\n                                                        </div>\n                                                        {has_sub_category && (\n                                                            <div\n                                                                className={classNames('db-toolbox__category-arrow', {\n                                                                    'db-toolbox__category-arrow--active':\n                                                                        is_sub_category_open,\n                                                                })}\n                                                            >\n                                                                <Icon icon='IcChevronDownBold' />\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                                {has_sub_category &&\n                                                    is_sub_category_open &&\n                                                    (Array.from(category.childNodes) as HTMLElement[]).map(\n                                                        subCategory => {\n                                                            return (\n                                                                <div\n                                                                    key={`db-toolbox__sub-category-row--${subCategory.getAttribute(\n                                                                        'id'\n                                                                    )}`}\n                                                                    className={classNames(\n                                                                        'db-toolbox__sub-category-row',\n                                                                        {\n                                                                            'db-toolbox__sub-category-row--active':\n                                                                                selected_category?.getAttribute(\n                                                                                    'id'\n                                                                                ) === subCategory?.id,\n                                                                        }\n                                                                    )}\n                                                                    onClick={() => {\n                                                                        onToolboxItemClick(subCategory);\n                                                                    }}\n                                                                >\n                                                                    <Text size='xxs'>\n                                                                        {localize(\n                                                                            subCategory.getAttribute('name') as string\n                                                                        )}\n                                                                    </Text>\n                                                                </div>\n                                                            );\n                                                        }\n                                                    )}\n                                            </div>\n                                        );\n                                    }\n                                    return null;\n                                })}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    return null;\n});\n\nexport default Toolbox;\n","import Toolbox from './toolbox';\nimport './toolbox.scss';\n\nexport default Toolbox;\n","import React from 'react';\nimport { observer } from '@deriv/stores';\nimport Flyout from 'Components/flyout';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport StopBotModal from '../dashboard-component/load-bot-preview/stop-bot-modal';\nimport Toolbar from './toolbar';\nimport Toolbox from './toolbox';\nimport './workspace.scss';\n\nconst WorkspaceWrapper = observer(() => {\n    const { blockly_store } = useDBotStore();\n    const { onMount, onUnmount, is_loading } = blockly_store;\n\n    React.useEffect(() => {\n        onMount();\n        return () => {\n            onUnmount();\n        };\n    }, []);\n\n    if (is_loading) return null;\n\n    if (Blockly?.derivWorkspace)\n        return (\n            <React.Fragment>\n                <Toolbox />\n                <Toolbar />\n                <Flyout />\n                <StopBotModal />\n            </React.Fragment>\n        );\n\n    return null;\n});\n\nexport default WorkspaceWrapper;\n","import React, { useRef, useState } from 'react';\nimport classNames from 'classnames';\n\nimport { observer } from '@deriv/stores';\n\nimport { useDBotStore } from '../../../stores/useDBotStore';\nimport BotSnackbar from '../../bot-snackbar';\nimport LoadModal from '../../load-modal';\nimport SaveModal from '../dashboard-component/load-bot-preview/save-modal';\nimport BotBuilderTourHandler from '../dbot-tours/bot-builder-tour';\nimport QuickStrategy from '../quick-strategy';\n\nimport WorkspaceWrapper from './workspace-wrapper';\n\nconst BotBuilder = observer(() => {\n    const { dashboard, app, run_panel } = useDBotStore();\n    const { active_tab, active_tour, is_preview_on_popup } = dashboard;\n    const { is_running } = run_panel;\n    const is_blockly_listener_registered = useRef(false);\n    const [show_snackbar, setShowSnackbar] = useState(false);\n\n    const { onMount, onUnmount } = app;\n    const el_ref = React.useRef<HTMLInputElement | null>(null);\n\n    React.useEffect(() => {\n        onMount();\n        return () => onUnmount();\n    }, []);\n\n    const handleBlockChangeOnBotRun = (e: Event) => {\n        if (e.type !== 'ui') {\n            setShowSnackbar(true);\n            removeBlockChangeListener();\n        }\n    };\n\n    const removeBlockChangeListener = () => {\n        is_blockly_listener_registered.current = false;\n        window.Blockly?.derivWorkspace?.removeChangeListener(handleBlockChangeOnBotRun);\n    };\n\n    React.useEffect(() => {\n        const workspace = window.Blockly?.derivWorkspace;\n        if (workspace && is_running && !is_blockly_listener_registered.current) {\n            is_blockly_listener_registered.current = true;\n            workspace.addChangeListener(handleBlockChangeOnBotRun);\n        } else {\n            setShowSnackbar(false);\n            removeBlockChangeListener();\n        }\n\n        return () => {\n            if (workspace && is_blockly_listener_registered.current) {\n                removeBlockChangeListener();\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [is_running]);\n\n    return (\n        <>\n            <BotSnackbar\n                is_open={show_snackbar}\n                message='Changes you make will not affect your running bot.'\n                handleClose={() => setShowSnackbar(false)}\n            />\n            <div\n                className={classNames('bot-builder', {\n                    'bot-builder--active': active_tab === 1 && !is_preview_on_popup,\n                    'bot-builder--inactive': is_preview_on_popup,\n                    'bot-builder--tour-active': active_tour,\n                })}\n            >\n                {is_preview_on_popup ? null : (\n                    <div\n                        id='scratch_div'\n                        ref={el_ref}\n                        style={{\n                            width: 'calc(100vw - 3.2rem)',\n                            height: 'var(--bot-content-height)',\n                        }}\n                    >\n                        <WorkspaceWrapper />\n                    </div>\n                )}\n            </div>\n            {active_tab === 1 && <BotBuilderTourHandler />}\n            {/* removed this outside from toolbar becuase it needs to loaded seperately without dependency */}\n            <LoadModal />\n            <SaveModal />\n            <QuickStrategy />\n        </>\n    );\n});\n\nexport default BotBuilder;\n","import BotBuilder from './bot-builder';\nimport './workspace.scss';\n\nexport default BotBuilder;\n","import React from 'react';\nimport { Dialog, Icon, Text } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nconst BotStopped = observer(() => {\n    const { dashboard } = useDBotStore();\n    const { is_web_socket_intialised } = dashboard;\n    const onClickClose = () => {\n        location.reload();\n    };\n    return (\n        <>\n            <Dialog\n                is_visible={!is_web_socket_intialised}\n                is_mobile_full_width\n                className={'dc-dialog bot-stopped-dialog'}\n                cancel_button_text={localize('Go to Reports')}\n                confirm_button_text={localize('Back to Bot')}\n                onCancel={() => location.replace('reports/positions')}\n                onConfirm={() => location.reload()}\n            >\n                <div className='dc-dialog__content__header'>\n                    <Text data-testid='data-title' weight='bold' as='p' align='left' size='s' color='prominent'>\n                        {localize(\"You're back online\")}\n                    </Text>\n                    <div data-testid='data-close-button' onClick={onClickClose}>\n                        <Icon icon='IcCross' />\n                    </div>\n                </div>\n                <Text as='p' align='left' size='xs' color='prominent'>\n                    {localize(\n                        'The bot has stopped, but your trade may still be running. You can check it on the Reports page.'\n                    )}\n                </Text>\n            </Dialog>\n        </>\n    );\n});\n\nexport default BotStopped;\n","import React, { PropsWithChildren } from 'react';\nimport { Rnd } from 'react-rnd';\nimport { CSSTransition } from 'react-transition-group';\nimport { Icon } from '@deriv/components';\nimport { localize } from '@deriv/translations';\n\ntype DraggableProps = {\n    bounds?: string | Element;\n    dragHandleClassName?: string;\n    enableResizing?: boolean;\n    height?: number | string;\n    header_title: string;\n    is_visible: boolean;\n    minWidth?: number | string;\n    onCloseDraggable: () => void;\n    width?: number | string;\n    xaxis?: number;\n    yaxis?: number;\n};\nconst PARENT_CLASS = 'react-rnd-wrapper';\n\nexport default function Draggable({\n    bounds = 'window',\n    children,\n    dragHandleClassName,\n    enableResizing = false,\n    header_title,\n    height = 'fit-content',\n    is_visible,\n    minWidth,\n    onCloseDraggable,\n    width = 'fit-content',\n    xaxis = 0,\n    yaxis = 0,\n}: PropsWithChildren<DraggableProps>) {\n    return is_visible ? (\n        <Rnd\n            bounds={bounds}\n            className='react-rnd-wrapper'\n            data-testid='react-rnd-wrapper'\n            default={{\n                x: xaxis,\n                y: yaxis,\n                width,\n                height,\n            }}\n            dragHandleClassName={dragHandleClassName}\n            enableResizing={enableResizing}\n            minHeight={height}\n            minWidth={minWidth}\n            onDragStart={e => {\n                // on responsive devices touch event is not triggering the close button action\n                // need to handle it manually\n                const parentElement = (e?.target as HTMLDivElement)?.parentElement;\n                if (parentElement?.role === 'button' || parentElement?.tagName === 'svg') {\n                    onCloseDraggable();\n                }\n            }}\n        >\n            <CSSTransition\n                appear\n                in={is_visible}\n                timeout={50}\n                classNames={{\n                    appear: 'dc-dialog__wrapper--enter',\n                    enter: 'dc-dialog__wrapper--enter',\n                    enterDone: 'dc-dialog__wrapper--enter-done',\n                    exit: 'dc-dialog__wrapper--exit',\n                }}\n                unmountOnExit\n            >\n                <>\n                    <div className={`${PARENT_CLASS}-header`}>\n                        <div className={`${PARENT_CLASS}-header__title`}>{localize(header_title)}</div>\n                        <div\n                            role='button'\n                            className={`${PARENT_CLASS}-header__close`}\n                            data-testid='react-rnd-close-modal'\n                            onClick={onCloseDraggable}\n                        >\n                            <Icon icon='IcCross' />\n                        </div>\n                    </div>\n                    {children}\n                </>\n            </CSSTransition>\n        </Rnd>\n    ) : null;\n}\n","import Draggable from './draggable';\nimport './draggable.scss';\n\nexport default Draggable;\n","import React, { ReactElement } from 'react';\nimport classNames from 'classnames';\nimport ContentLoader from 'react-content-loader';\nimport { getContractTypeName } from '@deriv/bot-skeleton';\nimport { Icon, IconTradeTypes, Popover } from '@deriv/components';\nimport { convertDateFormat } from '@deriv/shared';\nimport { transaction_elements } from 'Constants/transactions';\nimport { TColumn, TDesktopTransactionTable, TTableCell } from './transaction-details.types';\n\nconst PARENT_CLASS = 'transaction-details-modal-desktop';\n\nconst TableCell = ({ label, extra_classes = [], loader = false }: TTableCell) => {\n    return (\n        <div className={classNames(`${PARENT_CLASS}__table-cell`, ...extra_classes)}>\n            {loader ? <CellLoader /> : label}\n        </div>\n    );\n};\n\nconst TableHeader = ({ columns }: { columns: TColumn[] }) => (\n    <div className={classNames(`${PARENT_CLASS}__table-row`, `${PARENT_CLASS}__table-header`)}>\n        {columns?.map(column => (\n            <TableCell\n                key={column.key}\n                extra_classes={[column.extra_class ? `${PARENT_CLASS}__table-cell${column.extra_class}` : '']}\n                label={column.label}\n                loader={false}\n            />\n        ))}\n    </div>\n);\n\nconst IconWrapper = ({ message, icon }: { message: string; icon: ReactElement }) => (\n    <div className={`${PARENT_CLASS}__icon-wrapper`}>\n        <Popover alignment='left' message={message} zIndex={'9999'}>\n            {icon}\n        </Popover>\n    </div>\n);\n\nconst CellLoader = () => (\n    <ContentLoader\n        className='transactions__loader-text'\n        data-testid='transaction_details_table_cell_loader'\n        height={10}\n        width={30}\n        speed={3}\n        backgroundColor={'var(--general-section-2)'}\n        foregroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='0' ry='0' width='60' height='12' />\n    </ContentLoader>\n);\n\nexport default function DesktopTransactionTable({\n    result,\n    result_columns,\n    transactions,\n    transaction_columns,\n    account,\n    balance,\n}: TDesktopTransactionTable) {\n    return (\n        <div data-testid='transaction_details_tables'>\n            <div\n                className={classNames(\n                    `${PARENT_CLASS}__table-container`,\n                    `${PARENT_CLASS}__table-container__top-table`\n                )}\n            >\n                <TableHeader columns={transaction_columns} />\n                {transactions?.map(transaction => {\n                    const { data, type } = transaction;\n                    if (type === transaction_elements.CONTRACT) {\n                        return (\n                            <div className={`${PARENT_CLASS}__table-row`} key={data?.transaction_ids?.buy}>\n                                <TableCell\n                                    label={\n                                        data?.date_start &&\n                                        convertDateFormat(\n                                            data?.date_start,\n                                            'YYYY-M-D HH:mm:ss [GMT]',\n                                            'YYYY-MM-DD HH:mm:ss [GMT]'\n                                        )\n                                    }\n                                    extra_classes={[`${PARENT_CLASS}__table-cell--grow-big`]}\n                                />\n                                <TableCell\n                                    label={data?.transaction_ids?.buy}\n                                    extra_classes={[`${PARENT_CLASS}__table-cell--grow-mid`]}\n                                />\n                                <TableCell\n                                    label={\n                                        <IconWrapper\n                                            message={data?.display_name}\n                                            icon={<Icon icon={`IcUnderlying${data?.underlying}`} size={24} />}\n                                        />\n                                    }\n                                />\n                                <TableCell\n                                    label={\n                                        <IconWrapper\n                                            message={getContractTypeName(data)}\n                                            icon={<IconTradeTypes type={data?.contract_type} size={24} />}\n                                        />\n                                    }\n                                />\n                                <TableCell label={data?.entry_tick} loader={!data?.entry_tick} />\n                                <TableCell label={data?.exit_tick} loader={!data.exit_tick} />\n                                <TableCell label={Math.abs(data?.buy_price ?? 0).toFixed(2)} />\n                                <TableCell\n                                    label={\n                                        <div\n                                            className={classNames({\n                                                [`${PARENT_CLASS}__profit--win`]: data?.profit > 0,\n                                                [`${PARENT_CLASS}__profit--loss`]: data?.profit < 0,\n                                            })}\n                                        >\n                                            {Math.abs(data?.profit ?? 0).toFixed(2)}\n                                        </div>\n                                    }\n                                    loader={!data.is_completed}\n                                />\n                            </div>\n                        );\n                    }\n\n                    return (\n                        <div className={`${PARENT_CLASS}__table-row`} key={`transaction-row-divider-${data}`}>\n                            <div className={`${PARENT_CLASS}__divider`}>\n                                <div className='transactions__divider-line' />\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n            <div className={classNames(`${PARENT_CLASS}__table-container`)}>\n                <TableHeader columns={result_columns} />\n                <div className={`${PARENT_CLASS}__table-row`}>\n                    <TableCell label={account} />\n                    <TableCell label={result?.number_of_runs} />\n                    <TableCell label={Math.abs(result?.total_stake ?? 0).toFixed(2)} />\n                    <TableCell label={Math.abs(result?.total_payout ?? 0).toFixed(2)} />\n                    <TableCell label={result?.won_contracts} />\n                    <TableCell label={result?.lost_contracts} extra_classes={[`${PARENT_CLASS}__loss`]} />\n                    <TableCell\n                        label={\n                            <div\n                                className={classNames(\n                                    result?.total_profit && {\n                                        [`${PARENT_CLASS}__profit--win`]: result?.total_profit > 0,\n                                        [`${PARENT_CLASS}__profit--loss`]: result?.total_profit < 0,\n                                    }\n                                )}\n                                data-testid='transaction_details_table_profit'\n                            >\n                                {Math.abs(result?.total_profit ?? 0).toFixed(2)}\n                            </div>\n                        }\n                    />\n                    <TableCell label={balance} />\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\nimport Draggable from 'Components/draggable';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport DesktopTransactionTable from './desktop-transaction-table';\nimport { TColumn, TRunPanelStore, TTransactionStore } from './transaction-details.types';\nimport './transaction-details-desktop.scss';\n\nconst transaction_columns: TColumn[] = [\n    { key: 'timestamp', label: localize('Timestamp'), extra_class: '--grow-big' },\n    { key: 'reference', label: localize('Reference'), extra_class: '--grow-mid' },\n    { key: 'market', label: localize('Market') },\n    { key: 'contract_type', label: localize('Trade type') },\n    { key: 'entry_tick', label: localize('Entry spot') },\n    { key: 'exit_tick', label: localize('Exit spot') },\n    { key: 'buy_price', label: localize('Buy price') },\n    { key: 'profit', label: localize('Profit/Loss') },\n];\n\n/* TODO: Add back account & balance when we have support from transaction store */\nconst result_columns: TColumn[] = [\n    { key: 'account', label: localize('Account') },\n    { key: 'no_of_runs', label: localize('No. of runs') },\n    { key: 'total_stake', label: localize('Total stake') },\n    { key: 'total_payout', label: localize('Total payout') },\n    { key: 'win', label: localize('Win') },\n    { key: 'loss', label: localize('Loss') },\n    { key: 'total_profit', label: localize('Total profit/loss') },\n    { key: 'balance', label: localize('Balance') },\n];\n\nconst TransactionDetailsDesktop = observer(() => {\n    const { client } = useStore();\n    const { loginid, balance } = client;\n    const { transactions, run_panel } = useDBotStore();\n    const {\n        toggleTransactionDetailsModal,\n        is_transaction_details_modal_open,\n        transactions: transaction_list,\n    }: Partial<TTransactionStore> = transactions;\n    const { statistics }: Partial<TRunPanelStore> = run_panel;\n\n    const [screenDimensions, setScreenDimensions] = useState({ width: 0, height: 0 });\n\n    const handleResize = () => {\n        setScreenDimensions({ width: window.innerWidth, height: window.innerHeight });\n    };\n\n    useEffect(() => {\n        window.addEventListener('resize', handleResize);\n        setScreenDimensions({ width: window.innerWidth, height: window.innerHeight });\n\n        return () => {\n            window.removeEventListener('resize', handleResize);\n        };\n    }, []);\n\n    // Calculate xaxis and yaxis to center the modal on open\n    const modalWidth = 1034;\n    const modalHeight = 800;\n    const xaxis = (screenDimensions.width - modalWidth) / 2;\n    const yAxisValue = (screenDimensions.height - modalHeight) / 2;\n    const yaxis = yAxisValue >= 0 ? yAxisValue : 0;\n\n    return (\n        <Draggable\n            bounds='.dashboard__main'\n            dragHandleClassName='react-rnd-wrapper-header'\n            is_visible={is_transaction_details_modal_open}\n            minWidth={modalWidth}\n            onCloseDraggable={() => toggleTransactionDetailsModal(false)}\n            width={modalWidth}\n            xaxis={xaxis}\n            yaxis={yaxis}\n            header_title={'Transactions detailed summary'}\n        >\n            <DesktopTransactionTable\n                transaction_columns={transaction_columns}\n                transactions={transaction_list}\n                result_columns={result_columns}\n                result={statistics}\n                account={loginid ?? ''}\n                balance={balance ?? 0}\n            />\n        </Draggable>\n    );\n});\n\nexport default TransactionDetailsDesktop;\n","import React, { ReactElement } from 'react';\nimport classNames from 'classnames';\nimport ContentLoader from 'react-content-loader';\nimport { getContractTypeName } from '@deriv/bot-skeleton';\nimport { Icon, IconTradeTypes, Popover } from '@deriv/components';\nimport { convertDateFormat } from '@deriv/shared';\nimport { localize } from '@deriv/translations';\nimport { TTransaction } from './transaction-details.types';\n\nconst PARENT_CLASS = 'transaction-details-modal-mobile';\n\ntype TCardRow = {\n    title: string;\n    label: string | number | ReactElement;\n    right_aligned: boolean;\n    large_title: boolean;\n    loader: boolean;\n};\n\nconst CellLoader = () => (\n    <ContentLoader\n        className='transactions__loader-text'\n        data-testid='transaction_details_card_cell_loader'\n        height={10}\n        width={80}\n        speed={3}\n        foregroundColor={'var(--general-section-2)'}\n        backgroundColor={'var(--general-hover)'}\n    >\n        <rect x='0' y='0' rx='0' ry='0' width='100' height='12' />\n    </ContentLoader>\n);\n\nconst CardColumn = ({\n    label = '',\n    large_title = false,\n    right_aligned = false,\n    title = '',\n    loader = false,\n}: Partial<TCardRow>) => (\n    <div\n        className={classNames(`${PARENT_CLASS}__card__column`, {\n            [`${PARENT_CLASS}__right-align`]: right_aligned,\n        })}\n    >\n        {title && (\n            <div\n                className={classNames({\n                    [`${PARENT_CLASS}__small-title`]: !large_title,\n                    [`${PARENT_CLASS}__large-title`]: large_title,\n                })}\n            >\n                {localize(title)}\n            </div>\n        )}\n        <div className={`${PARENT_CLASS}__label`}>{loader ? <CellLoader /> : label}</div>\n    </div>\n);\n\nconst IconContainer = ({ message, icon }: { message: string; icon: ReactElement }) => (\n    <div className={classNames(`${PARENT_CLASS}__table-cell`, `${PARENT_CLASS}__table-cell__icon-wrapper`)}>\n        {message && (\n            <Popover alignment='right' message={message} zIndex={'7'}>\n                {icon}\n            </Popover>\n        )}\n    </div>\n);\n\nexport default function MobileTransactionCards({ transaction }: { transaction: TTransaction }) {\n    return (\n        <div className={`${PARENT_CLASS}__card`}>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn\n                    label={\n                        <div className={`${PARENT_CLASS}__icon-wrapper`}>\n                            <IconContainer\n                                message={transaction?.display_name}\n                                icon={<Icon icon={`IcUnderlying${transaction?.underlying}`} size={32} />}\n                            />\n                            <IconContainer\n                                message={getContractTypeName(transaction)}\n                                icon={<IconTradeTypes type={transaction?.contract_type} size={24} />}\n                            />\n                        </div>\n                    }\n                />\n            </div>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn title='Ref. ID' label={transaction?.transaction_ids?.buy} />\n            </div>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn\n                    title='Timestamp'\n                    label={convertDateFormat(\n                        transaction?.date_start,\n                        'YYYY-M-D HH:mm:ss [GMT]',\n                        'YYYY-MM-DD HH:mm:ss [GMT]'\n                    )}\n                />\n                <CardColumn\n                    title='Entry Spot'\n                    label={transaction?.entry_tick}\n                    right_aligned\n                    loader={!transaction.entry_tick}\n                />\n            </div>\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn title='Buy Price' label={Math.abs(transaction?.buy_price ?? 0).toFixed(2)} />\n                <CardColumn\n                    title='Exit Spot'\n                    label={transaction?.exit_tick}\n                    right_aligned\n                    loader={!transaction.exit_tick}\n                />\n            </div>\n\n            <div className={`${PARENT_CLASS}__card__row`}>\n                <CardColumn title='Profit / Loss' large_title />\n                <CardColumn\n                    label={\n                        <div\n                            className={classNames({\n                                [`${PARENT_CLASS}__card__profit--win`]: transaction?.profit > 0,\n                                [`${PARENT_CLASS}__card__profit--loss`]: transaction?.profit < 0,\n                            })}\n                        >\n                            {Math.abs(transaction?.profit ?? 0).toFixed(2)}\n                        </div>\n                    }\n                    right_aligned\n                    loader={!transaction.is_completed}\n                />\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\n\nimport { MobileFullPageModal } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport { localize } from '@deriv/translations';\n\nimport { StatisticsSummary } from 'Components/run-panel/run-panel';\nimport { transaction_elements } from 'Constants/transactions';\nimport { useDBotStore } from 'Stores/useDBotStore';\n\nimport MobileTransactionCards from './mobile-transaction-card';\nimport { TRunPanelStore, TTransactionStore } from './transaction-details.types';\n\nimport './transaction-details-mobile.scss';\n\nconst TransactionDetailsMobile = observer(() => {\n    const { client } = useStore();\n    const { transactions, run_panel } = useDBotStore();\n    const {\n        toggleTransactionDetailsModal,\n        is_transaction_details_modal_open,\n        transactions: transaction_list,\n    }: Partial<TTransactionStore> = transactions;\n    const { statistics, toggleStatisticsInfoModal }: Partial<TRunPanelStore> = run_panel;\n\n    return (\n        <MobileFullPageModal\n            is_modal_open={is_transaction_details_modal_open}\n            className='transaction-details-modal-mobile'\n            header={localize('Transactions detailed summary')}\n            onClickClose={() => {\n                toggleTransactionDetailsModal(false);\n            }}\n            height_offset='80px'\n        >\n            <div className='transaction-details-modal-mobile__wrapper' data-testid='transaction_details_cards'>\n                {transaction_list?.map(({ data, type }) => {\n                    if (type === transaction_elements.CONTRACT)\n                        return <MobileTransactionCards transaction={data} key={data?.transaction_ids?.buy} />;\n                    return (\n                        <div\n                            className='transaction-details-modal-mobile__divider'\n                            key={`transaction-row-divider-${data}`}\n                        >\n                            <div className='transactions__divider-line' />\n                        </div>\n                    );\n                })}\n            </div>\n            <div className='transaction-details-modal-mobile__card__footer'>\n                <StatisticsSummary\n                    currency={client?.currency}\n                    is_mobile={true}\n                    lost_contracts={statistics?.lost_contracts ?? 0}\n                    number_of_runs={statistics?.number_of_runs ?? 0}\n                    toggleStatisticsInfoModal={toggleStatisticsInfoModal}\n                    total_payout={statistics?.total_payout ?? 0}\n                    total_profit={statistics?.total_profit ?? 0}\n                    total_stake={statistics?.total_stake ?? 0}\n                    won_contracts={statistics?.won_contracts ?? 0}\n                />\n            </div>\n        </MobileFullPageModal>\n    );\n});\n\nexport default TransactionDetailsMobile;\n","import React, { Suspense } from 'react';\nimport { Loading } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport TransactionDetailsDesktop from './transaction-details-desktop';\nimport TransactionDetailsMobile from './transaction-details-mobile';\n\nexport const TransactionDetails = observer(() => {\n    const {\n        ui: { is_mobile },\n    } = useStore();\n    return (\n        <Suspense fallback={<Loading />}>\n            {is_mobile ? <TransactionDetailsMobile /> : <TransactionDetailsDesktop />}\n        </Suspense>\n    );\n});\n\nexport default TransactionDetails;\n","import TransactionDetails from './transaction-details';\n\nexport default TransactionDetails;\n","import BlocklyLoading from './blockly-loading';\nimport './blockly-loading.scss';\n\nexport default BlocklyLoading;\n","import React from 'react';\nimport { Loading } from '@deriv/components';\nimport { observer } from '@deriv/stores';\nimport { useDBotStore } from '../../stores/useDBotStore';\n\nconst BlocklyLoading = observer(() => {\n    const { blockly_store } = useDBotStore();\n    const { is_loading } = blockly_store;\n    return (\n        <>\n            {is_loading && (\n                <div className='bot__loading' data-testid='blockly-loader'>\n                    <Loading />\n                </div>\n            )}\n        </>\n    );\n});\n\nexport default BlocklyLoading;\n","import React from 'react';\nimport { api_base, ApiHelpers, ServerTime, setColors } from '@deriv/bot-skeleton';\nimport { Loading } from '@deriv/components';\nimport { observer, useStore } from '@deriv/stores';\nimport BotBuilder from 'Components/dashboard/bot-builder';\nimport BotStopped from 'Components/dashboard/bot-stopped';\nimport TransactionDetailsModal from 'Components/transaction-details';\nimport GTM from 'Utils/gtm';\nimport hotjar from 'Utils/hotjar';\nimport { useDBotStore } from 'Stores/useDBotStore';\nimport { Audio, BotNotificationMessages, Dashboard, NetworkToastPopup, RoutePromptDialog } from '../components';\nimport BlocklyLoading from '../components/blockly-loading';\nimport './app.scss';\n\nconst AppContent = observer(() => {\n    const [is_loading, setIsLoading] = React.useState(true);\n    const RootStore = useStore();\n    const {\n        common,\n        client,\n        ui: { is_dark_mode_on },\n    } = RootStore;\n    const DBotStores = useDBotStore();\n    const { app, transactions } = DBotStores;\n    const { showDigitalOptionsMaltainvestError } = app;\n\n    // TODO: Remove this when connect is removed completely\n    const combinedStore = { ...DBotStores, core: { ...RootStore } };\n\n    const { recovered_transactions, recoverPendingContracts } = transactions;\n    const is_subscribed_to_msg_listener = React.useRef(false);\n    const msg_listener = React.useRef(null);\n\n    const handleMessage = ({ data }) => {\n        if (data?.msg_type === 'proposal_open_contract' && !data?.error) {\n            const { proposal_open_contract } = data;\n            if (\n                proposal_open_contract?.status !== 'open' &&\n                !recovered_transactions?.includes(proposal_open_contract?.contract_id)\n            ) {\n                recoverPendingContracts(proposal_open_contract);\n            }\n        }\n    };\n\n    React.useEffect(() => {\n        // Listen for proposal open contract messages to check\n        // if there is any active contract from bot still running\n        if (api_base?.api && !is_subscribed_to_msg_listener.current) {\n            is_subscribed_to_msg_listener.current = true;\n            msg_listener.current = api_base.api?.onMessage()?.subscribe(handleMessage);\n        }\n        return () => {\n            if (is_subscribed_to_msg_listener.current && msg_listener.current) {\n                is_subscribed_to_msg_listener.current = false;\n                msg_listener.current.unsubscribe();\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [api_base?.api]);\n\n    //Do not remove this is for the bot-skeleton package to load blockly with the theme\n    React.useEffect(() => {\n        setColors(is_dark_mode_on);\n    }, [is_dark_mode_on]);\n\n    React.useEffect(() => {\n        hotjar(client);\n    }, []);\n\n    React.useEffect(() => {\n        showDigitalOptionsMaltainvestError(client, common);\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [client.is_options_blocked, client.account_settings.country_code]);\n\n    const init = () => {\n        GTM.init(combinedStore);\n        ServerTime.init(common);\n        app.setDBotEngineStores(combinedStore);\n        ApiHelpers.setInstance(app.api_helpers_store);\n    };\n\n    const changeActiveSymbolLoadingState = () => {\n        init();\n        const { active_symbols } = ApiHelpers.instance;\n        active_symbols.retrieveActiveSymbols(true).then(() => {\n            setIsLoading(false);\n        });\n    };\n\n    React.useEffect(() => {\n        init();\n        setIsLoading(true);\n        if (!client.is_logged_in) {\n            changeActiveSymbolLoadingState();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    // use is_landing_company_loaded to know got details of accounts to identify should show an error or not\n    if (client.is_landing_company_loaded) {\n        changeActiveSymbolLoadingState();\n    }\n\n    React.useEffect(() => {\n        const onDisconnectFromNetwork = () => {\n            setIsLoading(false);\n        };\n        window.addEventListener('offline', onDisconnectFromNetwork);\n        return () => {\n            window.removeEventListener('offline', onDisconnectFromNetwork);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return is_loading ? (\n        <Loading />\n    ) : (\n        <>\n            <BlocklyLoading />\n            <div className='bot-dashboard bot'>\n                <Audio />\n                <BotNotificationMessages />\n                <Dashboard />\n                <NetworkToastPopup />\n                <BotBuilder />\n                <BotStopped />\n                <RoutePromptDialog />\n                <TransactionDetailsModal />\n            </div>\n        </>\n    );\n});\n\nexport default AppContent;\n","import { epochToMoment, toMoment } from '@deriv/shared';\n\nconst hotjar = client => {\n    /**\n     * Inject: External Script Hotjar - for DBot only\n     */\n    (function (h, o, t, j) {\n        /* eslint-disable */\n        h.hj =\n            h.hj ||\n            function () {\n                (h.hj.q = h.hj.q || []).push(arguments);\n            };\n        /* eslint-enable */\n        h._hjSettings = { hjid: 3050531, hjsv: 6 };\n        const a = o.getElementsByTagName('head')[0];\n        const r = o.createElement('script');\n        r.async = 1;\n        r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n        a.appendChild(r);\n\n        // Hotjar attribution code for user segmentation\n        const user_id = client?.loginid;\n        const account_type = client.is_virtual ? 'Demo' : 'Real';\n        const account_open_date = epochToMoment(client.account_open_date);\n\n        window.hj('identify', user_id, {\n            'Account created': toMoment(account_open_date).format('YYYY-MM-DD'),\n            'Account type': account_type,\n            'User country': client.clients_country,\n        });\n    })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');\n};\nexport default hotjar;\n","import React from 'react';\nimport { StoreProvider } from '@deriv/stores';\nimport { TStores } from '@deriv/stores/types';\nimport type { TWebSocket } from 'Types';\nimport { DBotStoreProvider } from 'Stores/useDBotStore';\n\nconst DBotProviders = ({ children, store, WS }: React.PropsWithChildren<{ store: TStores; WS: TWebSocket }>) => {\n    return (\n        <StoreProvider store={store}>\n            <DBotStoreProvider ws={WS}>{children}</DBotStoreProvider>\n        </StoreProvider>\n    );\n};\n\nexport default DBotProviders;\n","import { initSurvicate } from '../public-path';\nimport React from 'react';\nimport { TStores } from '@deriv/stores/types';\nimport type { TWebSocket } from 'Types';\nimport { setInnerHeightToVariable } from '../utils/window-size';\nimport AppContent from './app-content';\nimport DBotProviders from './dbot-providers';\n\ntype TAppProps = {\n    passthrough: {\n        WS: TWebSocket;\n        root_store: TStores;\n    };\n};\n\nconst App = ({ passthrough }: TAppProps) => {\n    const { root_store, WS } = passthrough;\n    React.useEffect(() => {\n        setInnerHeightToVariable();\n        initSurvicate();\n        return () => {\n            const survicate_box = document.getElementById('survicate-box') || undefined;\n            if (survicate_box) {\n                survicate_box.style.display = 'none';\n            }\n        };\n    }, []);\n\n    return (\n        <DBotProviders store={root_store} WS={WS}>\n            <AppContent />\n        </DBotProviders>\n    );\n};\n\nexport default App;\n","export const getMainContentHeight = () => {\n    return getComputedStyle(document.getElementsByClassName('bot')[0]).getPropertyValue('--bot-content-height');\n};\n\nexport const getMainContentWidth = () => {\n    return getComputedStyle(document.getElementsByClassName('bot')[0]).getPropertyValue('--bot-content-width');\n};\n\nexport const setMainContentWidth = is_run_panel_open => {\n    const width = is_run_panel_open ? 'calc(100vw - 366px)' : 'calc(100vw - 16px)';\n    return document.getElementsByClassName('bot')[0].style.setProperty('--bot-content-width', width);\n};\n\nexport const setInnerHeightToVariable = () => {\n    // Setting the inner height of the document to the --vh variable to fix the issue\n    // of dynamic view height(vh) on mobile browsers for few scrollable components\n    const vh = window.innerHeight;\n    document.body.style.setProperty('--vh', `${vh}px`);\n};\n","var map = {\n\t\"./af\": 95191,\n\t\"./af.js\": 95191,\n\t\"./ar\": 54358,\n\t\"./ar-dz\": 71727,\n\t\"./ar-dz.js\": 71727,\n\t\"./ar-kw\": 98279,\n\t\"./ar-kw.js\": 98279,\n\t\"./ar-ly\": 87895,\n\t\"./ar-ly.js\": 87895,\n\t\"./ar-ma\": 11987,\n\t\"./ar-ma.js\": 11987,\n\t\"./ar-sa\": 52796,\n\t\"./ar-sa.js\": 52796,\n\t\"./ar-tn\": 12386,\n\t\"./ar-tn.js\": 12386,\n\t\"./ar.js\": 54358,\n\t\"./az\": 57452,\n\t\"./az.js\": 57452,\n\t\"./be\": 79053,\n\t\"./be.js\": 79053,\n\t\"./bg\": 65428,\n\t\"./bg.js\": 65428,\n\t\"./bm\": 21569,\n\t\"./bm.js\": 21569,\n\t\"./bn\": 56212,\n\t\"./bn-bd\": 24635,\n\t\"./bn-bd.js\": 24635,\n\t\"./bn.js\": 56212,\n\t\"./bo\": 13667,\n\t\"./bo.js\": 13667,\n\t\"./br\": 192,\n\t\"./br.js\": 192,\n\t\"./bs\": 51802,\n\t\"./bs.js\": 51802,\n\t\"./ca\": 19118,\n\t\"./ca.js\": 19118,\n\t\"./cs\": 39990,\n\t\"./cs.js\": 39990,\n\t\"./cv\": 30557,\n\t\"./cv.js\": 30557,\n\t\"./cy\": 4227,\n\t\"./cy.js\": 4227,\n\t\"./da\": 95406,\n\t\"./da.js\": 95406,\n\t\"./de\": 87994,\n\t\"./de-at\": 44139,\n\t\"./de-at.js\": 44139,\n\t\"./de-ch\": 86591,\n\t\"./de-ch.js\": 86591,\n\t\"./de.js\": 87994,\n\t\"./dv\": 94649,\n\t\"./dv.js\": 94649,\n\t\"./el\": 14453,\n\t\"./el.js\": 14453,\n\t\"./en-au\": 48428,\n\t\"./en-au.js\": 48428,\n\t\"./en-ca\": 36972,\n\t\"./en-ca.js\": 36972,\n\t\"./en-gb\": 13224,\n\t\"./en-gb.js\": 13224,\n\t\"./en-ie\": 18843,\n\t\"./en-ie.js\": 18843,\n\t\"./en-il\": 32732,\n\t\"./en-il.js\": 32732,\n\t\"./en-in\": 76579,\n\t\"./en-in.js\": 76579,\n\t\"./en-nz\": 29851,\n\t\"./en-nz.js\": 29851,\n\t\"./en-sg\": 70442,\n\t\"./en-sg.js\": 70442,\n\t\"./eo\": 10654,\n\t\"./eo.js\": 10654,\n\t\"./es\": 63621,\n\t\"./es-do\": 68791,\n\t\"./es-do.js\": 68791,\n\t\"./es-mx\": 67278,\n\t\"./es-mx.js\": 67278,\n\t\"./es-us\": 60717,\n\t\"./es-us.js\": 60717,\n\t\"./es.js\": 63621,\n\t\"./et\": 72404,\n\t\"./et.js\": 72404,\n\t\"./eu\": 62944,\n\t\"./eu.js\": 62944,\n\t\"./fa\": 30496,\n\t\"./fa.js\": 30496,\n\t\"./fi\": 98137,\n\t\"./fi.js\": 98137,\n\t\"./fil\": 32872,\n\t\"./fil.js\": 32872,\n\t\"./fo\": 6545,\n\t\"./fo.js\": 6545,\n\t\"./fr\": 49090,\n\t\"./fr-ca\": 13049,\n\t\"./fr-ca.js\": 13049,\n\t\"./fr-ch\": 12338,\n\t\"./fr-ch.js\": 12338,\n\t\"./fr.js\": 49090,\n\t\"./fy\": 95088,\n\t\"./fy.js\": 95088,\n\t\"./ga\": 77812,\n\t\"./ga.js\": 77812,\n\t\"./gd\": 8374,\n\t\"./gd.js\": 8374,\n\t\"./gl\": 63649,\n\t\"./gl.js\": 63649,\n\t\"./gom-deva\": 52674,\n\t\"./gom-deva.js\": 52674,\n\t\"./gom-latn\": 44948,\n\t\"./gom-latn.js\": 44948,\n\t\"./gu\": 24033,\n\t\"./gu.js\": 24033,\n\t\"./he\": 10175,\n\t\"./he.js\": 10175,\n\t\"./hi\": 58055,\n\t\"./hi.js\": 58055,\n\t\"./hr\": 41678,\n\t\"./hr.js\": 41678,\n\t\"./hu\": 85111,\n\t\"./hu.js\": 85111,\n\t\"./hy-am\": 26530,\n\t\"./hy-am.js\": 26530,\n\t\"./id\": 19126,\n\t\"./id.js\": 19126,\n\t\"./is\": 11696,\n\t\"./is.js\": 11696,\n\t\"./it\": 98710,\n\t\"./it-ch\": 38821,\n\t\"./it-ch.js\": 38821,\n\t\"./it.js\": 98710,\n\t\"./ja\": 93974,\n\t\"./ja.js\": 93974,\n\t\"./jv\": 70648,\n\t\"./jv.js\": 70648,\n\t\"./ka\": 54731,\n\t\"./ka.js\": 54731,\n\t\"./kk\": 43501,\n\t\"./kk.js\": 43501,\n\t\"./km\": 84398,\n\t\"./km.js\": 84398,\n\t\"./kn\": 91825,\n\t\"./kn.js\": 91825,\n\t\"./ko\": 13729,\n\t\"./ko.js\": 13729,\n\t\"./ku\": 19670,\n\t\"./ku.js\": 19670,\n\t\"./ky\": 78797,\n\t\"./ky.js\": 78797,\n\t\"./lb\": 50627,\n\t\"./lb.js\": 50627,\n\t\"./lo\": 65859,\n\t\"./lo.js\": 65859,\n\t\"./lt\": 80355,\n\t\"./lt.js\": 80355,\n\t\"./lv\": 16594,\n\t\"./lv.js\": 16594,\n\t\"./me\": 45324,\n\t\"./me.js\": 45324,\n\t\"./mi\": 11689,\n\t\"./mi.js\": 11689,\n\t\"./mk\": 61308,\n\t\"./mk.js\": 61308,\n\t\"./ml\": 85241,\n\t\"./ml.js\": 85241,\n\t\"./mn\": 76320,\n\t\"./mn.js\": 76320,\n\t\"./mr\": 96771,\n\t\"./mr.js\": 96771,\n\t\"./ms\": 20503,\n\t\"./ms-my\": 77748,\n\t\"./ms-my.js\": 77748,\n\t\"./ms.js\": 20503,\n\t\"./mt\": 55534,\n\t\"./mt.js\": 55534,\n\t\"./my\": 62727,\n\t\"./my.js\": 62727,\n\t\"./nb\": 7550,\n\t\"./nb.js\": 7550,\n\t\"./ne\": 49899,\n\t\"./ne.js\": 49899,\n\t\"./nl\": 41228,\n\t\"./nl-be\": 31225,\n\t\"./nl-be.js\": 31225,\n\t\"./nl.js\": 41228,\n\t\"./nn\": 97130,\n\t\"./nn.js\": 97130,\n\t\"./oc-lnc\": 93130,\n\t\"./oc-lnc.js\": 93130,\n\t\"./pa-in\": 91282,\n\t\"./pa-in.js\": 91282,\n\t\"./pl\": 28190,\n\t\"./pl.js\": 28190,\n\t\"./pt\": 41549,\n\t\"./pt-br\": 78135,\n\t\"./pt-br.js\": 78135,\n\t\"./pt.js\": 41549,\n\t\"./ro\": 307,\n\t\"./ro.js\": 307,\n\t\"./ru\": 89272,\n\t\"./ru.js\": 89272,\n\t\"./sd\": 79248,\n\t\"./sd.js\": 79248,\n\t\"./se\": 74969,\n\t\"./se.js\": 74969,\n\t\"./si\": 65522,\n\t\"./si.js\": 65522,\n\t\"./sk\": 61581,\n\t\"./sk.js\": 61581,\n\t\"./sl\": 56428,\n\t\"./sl.js\": 56428,\n\t\"./sq\": 34611,\n\t\"./sq.js\": 34611,\n\t\"./sr\": 19821,\n\t\"./sr-cyrl\": 20185,\n\t\"./sr-cyrl.js\": 20185,\n\t\"./sr.js\": 19821,\n\t\"./ss\": 35029,\n\t\"./ss.js\": 35029,\n\t\"./sv\": 80939,\n\t\"./sv.js\": 80939,\n\t\"./sw\": 73107,\n\t\"./sw.js\": 73107,\n\t\"./ta\": 72304,\n\t\"./ta.js\": 72304,\n\t\"./te\": 72550,\n\t\"./te.js\": 72550,\n\t\"./tet\": 99717,\n\t\"./tet.js\": 99717,\n\t\"./tg\": 87669,\n\t\"./tg.js\": 87669,\n\t\"./th\": 94959,\n\t\"./th.js\": 94959,\n\t\"./tk\": 92661,\n\t\"./tk.js\": 92661,\n\t\"./tl-ph\": 52234,\n\t\"./tl-ph.js\": 52234,\n\t\"./tlh\": 94120,\n\t\"./tlh.js\": 94120,\n\t\"./tr\": 81111,\n\t\"./tr.js\": 81111,\n\t\"./tzl\": 53080,\n\t\"./tzl.js\": 53080,\n\t\"./tzm\": 88246,\n\t\"./tzm-latn\": 25385,\n\t\"./tzm-latn.js\": 25385,\n\t\"./tzm.js\": 88246,\n\t\"./ug-cn\": 48777,\n\t\"./ug-cn.js\": 48777,\n\t\"./uk\": 2014,\n\t\"./uk.js\": 2014,\n\t\"./ur\": 45953,\n\t\"./ur.js\": 45953,\n\t\"./uz\": 89716,\n\t\"./uz-latn\": 87791,\n\t\"./uz-latn.js\": 87791,\n\t\"./uz.js\": 89716,\n\t\"./vi\": 99816,\n\t\"./vi.js\": 99816,\n\t\"./x-pseudo\": 94450,\n\t\"./x-pseudo.js\": 94450,\n\t\"./yo\": 22556,\n\t\"./yo.js\": 22556,\n\t\"./zh-cn\": 7414,\n\t\"./zh-cn.js\": 7414,\n\t\"./zh-hk\": 50824,\n\t\"./zh-hk.js\": 50824,\n\t\"./zh-mo\": 88589,\n\t\"./zh-mo.js\": 88589,\n\t\"./zh-tw\": 63285,\n\t\"./zh-tw.js\": 63285\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 96616;","var map = {\n\t\"./dalembert.xml\": [\n\t\t29022,\n\t\t406\n\t],\n\t\"./martingale.xml\": [\n\t\t41732,\n\t\t101\n\t],\n\t\"./oscars_grind.xml\": [\n\t\t86373,\n\t\t113\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 27328;\nmodule.exports = webpackAsyncContext;"],"names":["common_store","clock_started","pending","NetworkMonitor","apiInstance","parentElement","this","api","addEvents","navigator","window","addEventListener","setStatus","onLine","setInterval","html","send","ping","then","PendingPromise","init","store","resolve","server_time","get","clone","undefined","timePromise","Promise","promise","CRYPTO_CURRENCIES","config","lists","PAYOUTTYPE","localize","DETAILS","CHECK_RESULT","CHECK_DIRECTION","BALANCE_TYPE","NOTIFICATION_TYPE","NOTIFICATION_SOUND","CURRENCY","opposites","MULTIPLIER","MULTUP","MULTDOWN","CALLPUT","CALL","PUT","CALLPUTEQUAL","CALLE","PUTE","HIGHERLOWER","TOUCHNOTOUCH","ONETOUCH","NOTOUCH","ENDSINOUT","EXPIRYRANGE","EXPIRYMISS","STAYSINOUT","RANGE","UPORDOWN","ASIANS","ASIANU","ASIAND","MATCHESDIFFERS","DIGITMATCH","DIGITDIFF","EVENODD","DIGITEVEN","DIGITODD","OVERUNDER","DIGITOVER","DIGITUNDER","HIGHLOWTICKS","TICKHIGH","TICKLOW","RESET","RESETCALL","RESETPUT","RUNS","RUNHIGH","RUNLOW","CALLPUTSPREAD","CALLSPREAD","PUTSPREAD","BARRIER_TYPES","ohlcFields","candleIntervals","mainBlocks","mandatoryMainBlocks","procedureDefinitionBlocks","single_instance_blocks","TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING","callput","asian","digits","TRADE_TYPE_CATEGORIES","multiplier","touchnotouch","inout","reset","callputspread","highlowticks","runs","TRADE_TYPE_CATEGORY_NAMES","BARRIER_CATEGORIES","euro_atm","euro_non_atm","american","non_financial","lookback","DEFAULT_DURATION_DROPDOWN_OPTIONS","BARRIER_LABELS","ABSOLUTE_BARRIER_DROPDOWN_OPTION","NOT_AVAILABLE_DROPDOWN_OPTIONS","NOT_AVAILABLE_DURATIONS","display","unit","min","BARRIER_TRADE_TYPES","PREDICTION_TRADE_TYPES","DIGIT_CATEGORIES","INDEPEDENT_BLOCKS","bbResult","macdFields","gd","scope","discovery_docs","workspaces","flyoutWorkspacesStartScale","mainWorkspaceStartScale","previewWorkspaceStartScale","strategies","martingale","index","label","description","dalembert","oscars_grind","default_file_name","unrecoverable_errors","message_types","Object","freeze","ERROR","NOTIFY","SUCCESS","error_types","RECOVERABLE_ERRORS","UNRECOVERABLE_ERRORS","log_types","LOAD_BLOCK","PURCHASE","SELL","NOT_OFFERED","PROFIT","LOST","WELCOME_BACK","WELCOME","save_types","UNSAVED","LOCAL","GOOGLE_DRIVE","require","goog","Blockly","JavaScript","defineContract","blueInfo","purchase","sellContract","finishSign","plusIconDark","plusIconLight","minusIconDark","Blocks","procedures_defnoreturn","arguments","argument_var_models","jsonInit","definition","getField","setValidator","Procedures","rename","fieldImage","FieldImage","onAddClick","appendDummyInput","appendField","setStatements","message0","function_name","function_params","args0","type","name","text","colour","Colours","Special2","colourSecondary","colourTertiary","tooltip","category","Categories","Functions","meta","display_name","onchange","event","allowedEvents","Events","BLOCK_DELETE","BLOCK_CREATE","BLOCK_CHANGE","workspace","isFlyout","includes","blockId","id","getProcedureCallers","forEach","block","setFieldValue","newValue","options","readOnly","isInFlyout","setTimeout","promptMessage","prompt","paramName","variable","Variables","getOrCreateVariablePackage","push","setText","join","setProcedureParameters","initSvg","render","hasStatements","appendStatementInput","getInput","moveInputBefore","removeInput","updateParams","paramString","length","disable","enable","mutationToDom","optParamIds","container","document","createElement","setAttribute","getFieldValue","arg","i","parameter","getId","paramIds","appendChild","domToMutation","xmlElement","childNodes","childNode","nodeName","toLowerCase","var_name","getAttribute","var_id","console","log","getProcedureDef","getAllBlocks","filter","callType","data","getVars","getVarModels","customContextMenu","option","enabled","replace","xmlMutation","argumentName","xmlArg","xmlBlock","callback","ContextMenu","callbackFactory","isCollapsed","argumentVarModel","getOption","xmlField","generateVariableFieldDom","xmlOptionBlock","functionName","variableDB_","getName","NAME_TYPE","branch","statementToCode","STATEMENT_PREFIX","prefixLines","INDENT","INFINITE_LOOP_TRAP","returnValue","valueToCode","ORDER_NONE","args","map","code","scrub_","definitions_","procedures_defreturn","dummy","message1","args1","check","align","ALIGN_RIGHT","renameVarById","displayRenamedVar","registerWorkspaceListener","procedures_callnoreturn","previousDisabledState","previousStatement","nextStatement","recordUndo","ids","indexOf","getProcedureCall","def","getDefinition","defType","JSON","stringify","setGroup","group","xml","xy","getRelativeToSurfaceXY","x","SNAP_RADIUS","RTL","y","mutation","field","createTextNode","Xml","domToWorkspace","procedure_definition","dispose","element","oldGroup","getGroup","disabled","setDisabled","getProcedureDefinition","getTopBlocks","find","tuple","Names","equals","renameProcedure","oldName","newName","paramNames","concat","updateShape","setValue","FieldLabel","appendValueInput","topRow","removeField","centerOnBlock","select","ORDER_COMMA","procedures_callreturn","output","outputShape","OUTPUT_SHAPE_ROUND","ORDER_FUNCTION_CALL","procedures_ifreturn","hasReturnValue","condition","value","Number","isDragging","legal","FUNCTION_TYPES","getSurroundParent","rerender","getInheritedDisabled","lists_create_with","protected_statements","allowed_children","field_image","onIconClick","bind","Base","List","runGroupedEvents","statement_block","newBlock","required_parent_id","setMovable","getLastConnectionInStatement","connect","previousConnection","END_DRAG","getBlocksInStatement","runIrreversibleEvents","unplug","elements","b","Array","isArray","lists_repeat","input_item","number","getRequiredValueInputs","ITEM","emptyTextValidator","NUM","provideFunction_","FUNCTION_NAME_PLACEHOLDER_","repeat_count","lists_length","input_list","VALUE","list","ORDER_MEMBER","lists_isEmpty","getAllVariables","findIndex","ORDER_LOGICAL_NOT","lists_indexOf","first_or_last","input_value","FIND","operator","item","oneBasedIndex","ORDER_ADDITION","lists_getIndex","MODE_OPTIONS","WHERE_OPTIONS","modeMenu","FieldDropdown","isStatement","updateStatement","setCheck","setColourFromRawValues_","setTooltip","setOutput","setOutputShape","updateAt","outputConnection","isAt","INPUT_VALUE","newStatement","setPreviousStatement","setNextStatement","menu","newAt","order","mode","where","listOrder","at","getAdjusted","lists_setIndex","ORDER_ASSIGNMENT","cacheList","match","listVar","getDistinctName","ORDER_SUBTRACTION","xVar","lists_getSublist","WHERE_OPTIONS_1","WHERE_OPTIONS_2","isAt1","isAt2","n","at1","at2","where1","where2","where_pascal_case","FROM_START","FROM_END","FIRST","LAST","getIndex","list_name","opt_at","has_at1","has_at2","lists_split","dropdown","newMode","updateType","delimInput","spaceField","insertFieldAt","input","delimiter","lists_sort","sort_type","sort_direction","LIST","direction","getCompareFunctionName","lists_statement","required_parent_type","surround_parent","original_parent","last_connection","ORDER_ATOMIC","controls_repeat_ext","Loop","TIMES","repeats","String","loopVar","endVar","isNumber","controls_repeat","precision","controls_whileUntil","while_or_until","boolean","BOOL","until","argument0","maxLoopVar","currentLoopVar","controls_for","start_number","end_number","step_size","FROM","TO","BY","variable0","argument1","increment","addLoopTrap","up","parseFloat","step","Math","abs","assignment","statement","startVar","incVar","incVal","controls_forEach","indexVar","controls_flow_statements","break_or_continue","keyword","variables_get","VAR_RENAME","function_blocks","category_","old_param","new_param","param_index","variables_set","varName","after_purchase","src","width","height","alt","class","RootBlock","After_Purchase","stack","contract_check_result","win_or_loss","top_parent","getTopParent","isMainBlock","checkWith","read_details","contract_detail","restricted_parents","detailIndex","trade_again","Special1","key_words","before_purchase","setDeletable","Before_Purchase","contract_type","populatePurchaseList","menuGenerator_","trade_definition_block","getTradeDefinitionBlock","trade_type","getChildByType","purchase_type_list","purchase_type","getValue","contract_type_options","getContractTypeOptions","updateOptions","default_value","event_group","should_pretend_empty","purchaseList","ask_price","enforceLimitations","payout","during_purchase","During_Purchase","sell_at_market","check_sell","sell_price","bb_statement","required_child_blocks","band_type","Indicators","bb_result","childValueToCode","period","std_dev_up","std_dev_down","bba_statement","ema_statement","emaa_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement","macda_statement","macd_field","fast_ema_period","slow_ema_period","signal_ema_period","setParentId","allowed_parents","has_parent","is_illegal_parent","parent_block","INPUT_LIST","input_period","PERIOD","std_dev_multiplier_up","input_number","UPMULTIPLIER","std_dev_multiplier_down","DOWNMULTIPLIER","FAST_EMA_PERIOD","SLOW_EMA_PERIOD","SIGNAL_EMA_PERIOD","tick","Tick_Analysis","tick_string","parent","getParent","ticks","ticks_string","ohlc","candle_interval_type","selectedGranularity","ohlc_values","candle_property","granularity","ohlcField","read_ohlc","CANDLEINDEX","get_ohlc","check_direction","direction_type","tick_analysis","last_digit","lastDigitList","is_candle_black","input_candle","Candle","OHLCOBJ","ohlcObj","ohlc_values_in_list","candle_list","OHLCLIST","ohlcList","read_ohlc_obj","balance","Miscellaneous","balanceType","barrier_offset","block_holder","loader","blocks_added_by_me","current_url","input_url","loader_block","loadBlocksFromCurrentUrl","oldValue","isValidUrl","isKnownUrl","loadBlocksFromRemote","globalObserver","log_type","error_msg","url","some","notify","notification_type","notification_sound","input_message","Special3","MESSAGE","notificationType","sound","message_block","getInputTargetBlock","variable_name","variable_id","derivWorkspace","getVariableById","message","notify_telegram","input_access_token","input_chat_id","TELEGRAM_ACCESS_TOKEN","TELEGRAM_CHAT_ID","TELEGRAM_MESSAGE","access_token","chat_id","total_profit","getRootInputTargetBlock","total_profit_string","total_runs","useless_block","message_type","console_type","epoch","Time","timeout","stack_input","SECONDS","seconds","todatetime","input_timestamp","TIMESTAMP","timestamp","invalid_timestamp","totimestamp","input_datetime","DATETIME","datetime_string","trade_definition","isInit","message2","message3","message4","message5","args2","args3","args4","args5","Trade_Definition","selected","removeErrorHandlingEventListener","initErrorHandlingListener","blocks_in_trade_options","test","client","DBotStore","is_logged_in","Error","loginid","account","getToken","market_block","trade_type_block","contract_type_block","candle_interval_block","restart_on_error_block","restart_on_buy_sell_block","symbol","candle_interval","should_restart_on_error","should_restart_on_buy_sell","contract_type_list","toUpperCase","opposite","keys","initialization","trade_options_statement","trim","trade_definition_market","input_market","input_submarket","input_symbol","is_allowed_event","event_name","active_symbols","ApiHelpers","market_dropdown","submarket_dropdown","symbol_dropdown","market","submarket","market_options","getMarketDropdownOptions","populateMarketDropdown","getSubmarketDropdownOptions","getSymbolDropdownOptions","getRootBlock","isEmpty","isDescendantOf","trade_definition_tradetype","trade_type_category","trade_definition_contracttype","is_load_event","trade_types","trade_definition_candleinterval","trade_definition_restartbuysell","checkbox","checked","required_inputs","trade_definition_restartonerror","trade_definition_tradeoptions","durations","is_stake","duration_unit","duration_value","getCurrencyDisplayCode","selected_block","getBlockById","parentBlock_","inputList","input_target","connection","targetBlock","startsWith","new_value","parseInt","toString","selected_symbol","selected_market","selected_trade_type_category","selected_trade_type","selected_duration","selected_barrier_types","setCurrency","updateAmountLimits","updateBarrierInputs","updateDurationInput","updatePredictionInput","enforceSingleBarrierType","fake_creation_event","Create","fire","createPredictionInput","prediction_range","prediction_input","shadow_block","setShadow","createBarrierInputs","barriers","input_names","values","fieldRow","account_limits","currency","landing_company_shortcode","getStakePayoutLimits","limits","amount_limits","max_payout","min_stake","should_use_default_unit","should_update_value","contracts_for","multiplier_block","parent_connection","child_connection","stake_input","stake_shadow_block","take_profit_block","take_profit_input","take_profit_shadow_block","stop_loss_block","stop_loss_input","stop_loss_shadow_block","cleanUp","getDurations","duration_field_dropdown","duration_input","duration_options","duration","target_block","isShadow","min_duration","should_use_default_type","should_use_default_values","getBarriers","barrier_field_dropdown","barrier_field_value","allow_both_types","allow_absolute_type","barrier_value","should_use_default_value","getPredictionRange","initial_prediction","max","barrier_input_name","should_force_distinct","other_barrier_input_name","other_barrier_field","has_other_barrier","other_barrier_type","other_barrier_value","has_first_barrier","has_second_barrier","has_prediction","currency_field","AMOUNT","error_message","isNaN","DURATION","d","is_valid_duration","trade_definition_tradeoptions_payout","prediction_value","barrier_offset_value","second_barrier_offset_value","amount","duration_type","decimal_places","getDecimalPlaces","stake_amount","getBarrierValue","barrier_offset_type","trade_definition_multiplier","validateBlocksInStatement","blocks_in_multiplier","block_types_in_multiplier","block_multiplier_take_profit","block_multiplier_stop_loss","Set","size","selected_multiplier","updateMultiplierInput","duration_block","duration_shadow_block","getMultiplierRange","multiplier_range","multiplier_list_dropdown","multiplier_options","setContractUpdateConfig","multiplier_value","stop_loss","take_profit","limit_order","multiplier_stop_loss","multiplier_take_profit","logic_compare","Logic","A","B","EQ","NEQ","LT","LTE","GT","GTE","ORDER_EQUALITY","ORDER_RELATIONAL","controls_if","value_connections","statement_connections","else_statement_connection","else_if_count","else_count","rebuildShape","targetConnection","getIfInputNames","if_input","IF","do_input","DO","reconnectChildBlocks","update","updateFn","old_mutation_dom","old_mutation","domToText","is_rendered","rendered","call","new_mutation_dom","new_mutation","change_event","BlockChange","bumpNeighbours_","BUMP_DELAY","IF_LABEL","THEN_LABEL","DELETE_ICON","j","modifyElseIf","modifyElse","storeConnections","else_input","opt_value_conns","opt_statement_conns","opt_else_statement_conns","value_connection","statement_connection","Mutator","reconnect","is_add","opt_idx","idx","logic_boolean","logic_operation","selectedOperator","ORDER_LOGICAL_AND","ORDER_LOGICAL_OR","logic_null","logic_ternary","return_value","THEN","ELSE","valueIf","ORDER_CONDITIONAL","valueThen","valueElse","logic_negate","math_change","Mathematical","DELTA","math_constant","constant","ORDER_DIVISION","math_constrain","low_number","high_number","LOW","HIGH","argument2","math_modulo","number1","number2","DIVIDEND","DIVISOR","ORDER_MODULUS","math_number","numberValidator","MAX_SAFE_INTEGER","math_number_positive","math_number_property","setOnChange","hasDivisorInput","toolip","divisorInput","inputExists","NUMBER_TO_CHECK","property","divisor","math_on_list","calculation","type_list","childBlocks_","operation","math_random_float","math_random_int","math_round","math_arithmetic","ADD","MINUS","MULTIPLY","ORDER_MULTIPLICATION","DIVIDE","POWER","math_single","ORDER_UNARY_NEGATION","math_trig","Text","quote_","text_join","text_block","text_statement","stack_blocks","getMainWorkspace","text_append","input_text","TEXT","forceString","text_length","text_isEmpty","text_indexOf","input_text1","input_text2","cateogry","substring","text_charAt","AT","textOrder","text_getSubstring","position1","index1","position2","index2","is_at","old_label_text","text_","new_input","new_at","hasInput","input_name","STRING","AT1","AT2","string_name","text_changeCase","transform_type","UPPERCASE","LOWERCASE","TITLECASE","text_trim","side","LEFT","RIGHT","BOTH","text_print","msg","text_prompt_ext","string_or_number","is_mobile","is_dark_mode_on","dashboard","flyout","toolbar","toolbox","save_modal","load_modal","toggleStrategyModal","handleFileChange","setLoading","reaction","api_base","singleton","instance","parseOhlc","open","high","low","close","open_time","getType","isCandle","TicksService","forget","subscription_id","reject","Map","candles","tickListeners","ohlcListeners","subscriptions","ticks_history_promise","active_symbols_promise","candles_promise","observe","pipSizes","style","has","hasIn","getIn","requestStream","res","e","key","getUUID","request","setIn","deleteIn","unsubscribeIfEmptyListeners","needToUnsubscribe","tickListener","ohlcListener","unsubscribeAllAndSubscribeListeners","ohlcSubscriptions","subscription","from","all","doUntilDone","set","listeners","address","subscribe","newTick","msg_type","updateTicksAndCallListeners","quote","parseTick","getLast","slice","updateCandlesAndCallListeners","lastCandle","prevCandles","updateCandles","stringified_options","requestPipSizes","requestTicks","request_object","ticks_history","end","count","r","historyToTicks","history","t","parseCandles","parse","createScope","observer","Observer","ticksService","stopped","isPositiveNumber","num","isFinite","isPositiveInteger","isInteger","expectInitArg","token","createError","contractTypes","expectOptions","candle","every","expectCandle","takeField","arr","takeLast","mean","reduce","a","simpleMovingAverage","periods","acc","sum","simpleMovingAverageArray","pipSize","sequence","toFixed","bollingerBands","stdDevUp","stdDevDown","vals","middle","std_dev","data_mean","sq_diff","pow","avg_sq_diff","sqrt","stddev","upper","lower","bollingerBandsArray","exponentialMovingAverage","init_val","weighting_multiplier","mean_val","prev","exponentialMovingAverageArray","paddingLeft","fill","macdArray","fastEmaPeriod","slowEmaPeriod","signalEmaPeriod","fast_ema_array","slow_ema_array","macd_calc_array","signal_ema_array","calcGain","q1","q2","calcLoss","calcFirstAvgDiff","comp","q","diff","calcSecondAvgDiff","init_avg","relativeStrengthIndex","memoized_diff","rest_seq","init_avg_gain","init_avg_loss","gain","loss","avg_gain","avg_loss","relativeStrengthIndexArray","decorate","f","tradeEngine","getPipSize","dateTimeStringToTimestamp","invalid_msg","validated_datetime","date_time","split","date_obj","Date","getTime","isCandleBlack","candleValues","c","expectCandles","o","candleField","notifyTelegram","onError","fetch","method","headers","body","response","ok","getTotalRuns","getBalance","getTotalProfit","tradeOptions","getMiscInterface","sma","smaa","ema","emaa","rsi","rsia","bb","bba","macda","getIndicatorsInterface","highlightBlock","block_id","highlightExecutedBlock","getLastTick","getLastDigit","getTicks","checkDirection","getOhlcFromEnd","getOhlc","getLastDigitList","getProposal","proposals","proposal","purchase_reference","getPurchaseReference","balance_string","BEFORE_PURCHASE","DURING_PURCHASE","PROPOSALS_READY","CLEAR_PROPOSALS","PURCHASE_SUCCESSFUL","OPEN_CONTRACT","START","STOP","NEW_TICK","dispatchIfScopeIs","dispatch","getState","dispatchIfBeforePurchaseReady","proposalsReady","constants","dispatchIfScopeIsBeforePurchase","delayIndex","initialState","state","action","openContract","payload","tickListenerKey","skeleton","totalProfit","totalWins","totalLosses","totalStake","totalPayout","totalRuns","globalStat","prevTick","watchScope","stopScope","passScope","passFlag","unsubscribe","newState","TradeEngine","$scope","contract","createStore","rootReducer","applyMiddleware","thunk","initArgs","startPromise","loginAndGetBalance","checkTicksPromiseExists","watchTicks","validated_trade_options","validateTradeOptions","checkLimits","makeProposals","checkProposalReady","accountInfo","transaction","transaction_recovery_timeout","is_same_contract","contract_id","is_open_contract","status","proposal_open_contract","observeOpenContract","observeBalance","observeProposals","watchName","watchDuring","Engine","getFormattedText","info","accountID","Balance","regeneratePurchaseReference","selectProposal","askPrice","onSuccess","p","echo_req","buy","contractStatus","transaction_id","contractId","renewProposalsOnPurchase","longcode","updateAndReturnTotalRuns","transaction_ids","buy_price","price","isSold","timeMachineEnabled","recoverFromError","errorCode","makeDelay","clearProposals","emit","Purchase","isSellAvailable","isExpired","isSellAtMarketAvailable","delay_index","onContractSold","sell_response","sold_for","sell","waitForAfter","sellContractAndGetContractInfo","error","sell_error","proposal_open_contract_response","errors_to_ignore","error_code","Sell","expectedContractId","setContractFlags","broadcastContract","clearTimeout","updateTotals","afterPromise","is_expired","is_valid_to_sell","is_sold","entry_tick","Boolean","hasEntryTick","bidPrice","bid_price","buyPrice","getRoundedNumber","OpenContract","trade_option","isNewTradeOption","proposal_templates","tradeOptionToProposal","to_buy","requestProposals","has_informed_error","passthrough","template","Proposal","stopMonitor","monitor","ticks_list","raw","last_tick","getLastDigitsFromList","dir","getDirection","candleInterval","expectPositiveInteger","sessionRuns","sessionProfit","clearStatistics","sellPrice","profit","win","accountStat","getAccountStat","tradeOption","limitations","maxLoss","maxTrades","sleep","getInterface","getDetail","createDetails","start","stop","getAskPrice","getPayout","sellAtMarket","getSellPrice","isResult","result","isTradeAgain","readDetails","getBotInterface","getToolsInterface","getTicksInterface","watch","alert","toLocaleTimeString","JSInterpreter","cloneThorough","stateStack","snapshot","global","object","initFunc_","botInitialized","bot","shouldRestartOnError","errorName","onFinish","Interface","interpreter","revert","restoreStateSnapshot","paused_","loop","run","pseudoToNative","createAsync","js_interpreter","func","asyncFunc","pop","reversed_args","reverse","first_defined_arg_idx","function_args","rv","nativeToPseudo","defineProperty","MAX_ACCEPTABLE_FUNC_ARGS","createAsyncFunction","initFunc","bot_interface","custom_console","ticks_interface","setProperty","pseudo_bot_interface","entries","startState","takeStateSnapshot","beforeState","duringState","global_timeouts","is_timeouts_cancellable","is_cancellable","terminateSession","is_error_triggered","isMultiplierContract","unsubscribeFromTicksService","register","shouldStopOnError","botStarted","DBot","terminateConnection","before_run_funcs","is_bot_running","public_path","api_helpers_store","getSavedWorkspaces","recent_files","Interpreter","that","getTradeTypeCategories","categories","category_field","run_button","querySelector","getTradeTypes","__webpack_public_path__","window_width","innerWidth","workspaceScale","getElementById","offsetWidth","el_scratch_div","inject","media","trashcan","zoom","wheel","startScale","scrollbars","cached_xml","main","main_xml","addChangeListener","valueInputLimitationsListener","updateDisabledBlocks","dispatchBlockEventEffects","validateErrorOnBlockDelete","addBeforeRunFunction","unselectBlocks","disableStrayBlocks","checkForErroredBlocks","checkForRequiredBlocks","current_strategy_id","utils","genUid","strategy_to_load","mainWorkspace","file_name","latest_file","now","textToDom","updateBotName","clearUndo","dispatchEvent","Event","handleDragOver","handleDropOver","parentNode","overflow","current_xml_dom","stored_strategy","strategy","stored_strategy_xml","current_xml","compareXml","workspaceToDom","isStrategyUpdated","saveWorkspaceToRecent","generateCode","stopBot","workspaceToCode","unselect","isIndependentBlock","disableBlocksRecursively","nextConnection","sourceBlock_","error_blocks","is_error_highlighted","self","should_animate","block_to_highlight","setErrorHighlighted","blink","isAllRequiredBlocksEnabled","force_check","hideChaff","UI","isChangeInMyInputs","isParentEnabledEvent","unhighlightRecursively","child_blocks","child_block","getChildren","required_inputs_object","should_highlight","is_selected","is_disabled","hasErrorHighlightedDescendant","inputValidatorFn","warn","removeSelect","current_collapsed_block","setCollapsed","notify_blocks","strategy_sounds","selected_sound","value_","stopPropagation","preventDefault","dataTransfer","dropEffect","main_workspace_dom","local_drag_zone","contains","target","effectAllowed","BlockSvg","MIN_BLOCK_X_WITH_STATEMENT","GRID_UNIT","START_HAT_PATH","CORNER_RADIUS","EXTRA_STATEMENT_ROW_Y","EDITABLE_FIELD_PADDING","prototype","updateColour","strokeColour","getColourTertiary","renderShadowed","scratchBlocksUtils","isShadowArgumentReporter","FieldColour","FieldColourSlider","colourPickerStroke","svgPath_","fillColour","getColour","isGlowingBlock_","getShadowColour","getColourSecondary","getOpacity","outlinePath","icons","getIcons","computeOutputPadding_","input_rows","getOutputShape","row","shape","paddingStart","paddingEnd","otherShape","firstInput","inputConnection","getSourceBlock","OUTPUT_SHAPE_HEXAGONAL","deltaHeight","renderHeight","MIN_BLOCK_Y_REPORTER","SHAPE_IN_SHAPE_PADDING","lastInput","Connection","DRAG_RADIUS","FLYOUT_DRAG_RADIUS","Css","CONTENT","dropDownShadow","fieldShadow","motion","tertiary","secondary","primary","optAlt","optOnClick","optFlipRtl","height_","width_","size_","math","Size","flipRtl_","tooltip_","clickHandler_","inherits","Field","fromJson","replaceMessageReferences","flipRtl","EDITABLE","fieldGroup_","createSvgElement","visible_","imageElement_","src_","getSvgRoot","Tooltip","bindMouseEvents","maybeAddClickHandler_","dom","removeNode","mouseDownWrapper_","bindEventWithChecks_","cursor","newTip","setAttributeNS","getFlipRtl","render_","forceRerender","updateWidth","showEditor_","FieldTextInput","notInShadow","className_","maxDisplayLength","superClass_","box_","rx","ry","stroke","insertBefore","textElement_","Gesture","updateIsDraggingFromFlyout_","targetBlock_","flyout_","isScrollable","isDragTowardWorkspace","currentDragDeltaXY_","startWorkspace_","targetWorkspace_","updateScreenCalculationsIfScrolled","startBlock_","createBlock","mostRecentEvent_","Icon","renderIcon","cursorX","collapseHidden","block_","iconGroup_","newCursorX","SIZE","computeIconLocation","SEP_SPACE_X","Block","Dimensions","getDisplayName","block_meta","getSiblings","siblings","getDescendants","child","getChildFieldValue","childType","childField","childBlock","statementInputName","firstBlock","statement_input_name","first_block_in_stack","lastConnectionInStack","isEnabled","parentBlock","nextParent","getDimensions","block_node","existing_dimensions_key","outer_html","outerHTML","Options","el_injection_div","svg","createDom_","createMainWorkspace_","block_hw","domToBlock","getHeightWidth","current_block","current_input","getInputWithBlock","hasHighlightedDescendant","is_self_highlighted","is_descendant_highlighted","isDynamic","block_type","addSelect","setVisibility","addClass","svgGroup_","updateDisabled","disabledPatternId","removeClass","showContextMenu_","contextMenu","menu_options","isDeletable","isMovable","blockDuplicateOption","blockDetachOption","isEditable","comments","blockCommentOption","blockDeleteOption","isShadow_","collapse","collapsed_","expand_option","collapse_option","is_trade_parameter","disable_option","restricted_parent","has_next_block","isConnected","downloadBlock","should_delete_next","block_xml","blockToDom","deleteNext","save","blockEnableOption","blockDisableOption","show","currentBlock","should_be_error_highlighted","highlight_class","highlight_block_class","hasClass","blink_class","collapsed","userAgent","search","getAllFields","render_list","COLLAPSED_INPUT_NAME","setVisible","visibility","icon","ScratchBlockComment","field_class","class_","dropdown_path","pathToMedia","isDarkRgbColour","field_expand_icon","COLLAPSE_CHARS","field_label","setWarningText","asserts","assert","isInsertionMarker","initOutlinePath","createIcon","updateMovable","eventsInit_","onMouseDown_","getCanvas","duplicate_","wsCleanupOption","ws","numTopBlocks","wsCollapseOption","hasExpandedBlocks","topBlocks","toggleCollapseFn_","wsExpandOption","hasCollapsedBlocks","blocks","shouldCollapse","wsDeleteOption","delete_list","WorkspaceSvg","buildDeleteList_","delete_count","shift","currentGesture_","cancel","confirm","comment_option","IE","comment","setCommentText","is_collapsed","canDisconnect","getConnections_","moveBy","checkAreSomeEnabled","enabledArr","checkAreSomeDisabled","disabledArr","enableBlocksRecursively","DataCategory","variableModelList","getVariablesOfType","xmlList","addCreateVariable","generateVariableFieldXmlString","variableModel","string","htmlEscape","firstVariable","gap","setBlockText","setBlock","firstChild","sort","first_variable","second_variable","getBlockText","getBlock","el_button_xml","createDom","el_input_xml","button_text","callback_key","input_placeholder","registerButtonCallback","button","el_input","getTargetWorkspace","createVariable","refreshCategory","dropdown_options","DropDownDiv","isVisible","hideWithoutAnimation","previous_value","has_default_value","runInvisibleEvents","should_trigger_event","arrowSize_","arrowX_","arrowY_","arrow_","disableColourChange_","FieldCheckbox","getAltText","is_checked","old_value","el_field_group","children","child_node","removeChild","Flyout","original_block","main_workspace","variables_before_creation","setResizesEnabled","new_block","placeNewBlock_","new_variables","getAddedVariables","ws_block","new_variable","VarCreate","autoClose","hide","setIsSearchFlyout","old_block","main_offset_pixels","getOriginOffsetInPixels","old_block_pos_pixels","Coordinate","clientX","clientY","final_offset_main_ws","difference","scale","flyoutCategory","nameField","allProcedures","populateDynamicProcedures","populateProcedures","procedureList","templateName","isNameUsed","optExclude","procName","WorkspaceDragger","drag","currentDragDeltaXY","workspace_","metrics","startDragMetrics_","newXY","startScrollXY_","contentLeft","contentTop","viewWidth","contentWidth","viewHeight","contentHeight","updateScroll_","Workspace","wait_events","undoStack_","redoStack_","setHasRedoStack","setHasUndoStack","clearPendingUndo","fireChangeListener","MAX_UNDO","unshift","listeners_","listener","waitForBlockEvent","opt_event_type","event_promise","event_type","isPending","wait_event","is_same_block_type","is_same_event_type","splice","is_ordered","fields","MouseEvent","cachedParentSvg_","constructor","gesture","getGesture","handleWsStart","scrollbar","heightWidth","blockCenterY","blockCenterX","pixelX","pixelY","getMetrics","scrollToBlockX","scrollToBlockY","scrollToCenterX","scrollToCenterY","addBlockNode","getFlyout","top_blocks","last_block","last_block_xy","extra_spacing","startHat_","START_HAT_HEIGHT","svgResize","blocks_to_clean","is_import","root_blocks","blockIndex","main_block_type","blocks_per_column","ceil","original_cursor_y","column_index","cursor_x","cursor_y","fat_neighbour_block","position_x","MIN_BLOCK_X","snapToGrid","MIN_BLOCK_Y","lowest_root_block","getTopLevelWorkspaceMetrics_","toolbox_dimensions","getDimensionsPx_","toolbox_","flyout_dimensions","svg_size","svgSize","getParentSvg","toolboxPosition","TOOLBOX_AT_TOP","TOOLBOX_AT_BOTTOM","TOOLBOX_AT_LEFT","TOOLBOX_AT_RIGHT","content_dimensions","getContentDimensions_","absolute_left","absolute_top","top","left","viewTop","scrollY","viewLeft","scrollX","absoluteTop","absoluteLeft","toolboxWidth","toolboxHeight","flyoutWidth","flyoutHeight","paste","xml_block","tagName","pasteWorkspaceComment_","removeLimitedBlocks","pasteBlock_","all_blocks","wsUndoOption","wsRedoOption","has_collapsed_blocks","has_expanded_blocks","workspaceCommentOption","disposeFn","svgBlockCanvas_","svgBubbleCanvas_","zoomControls_","audioManager_","grid_","toolboxCategoryCallbacks_","flyoutButtonCallbacks_","parentWorkspace","resizeHandlerWrapper_","unbindEvent_","asyncClear","clear","HOVER_MS","show_","params","DIV","poisonedElement_","element_","blocked_","innerHTML","wrap","LIMIT","param","div","text_span","verticalAlign","img","img_span","paddingRight","client_width","documentElement","clientWidth","client_height","clientHeight","visible","last_x","lastX_","OFFSET_X","last_y","lastY_","OFFSET_Y","offsetHeight","MARGINS","showPid_","createVirtualWorkspace_","fragment","blockDragSurface","workspaceDragSurface","zoomOptions","bubble_","setColour","VariableMap","opt_type","opt_id","opt_is_local","opt_is_cloud","getVariable","optional_id","optional_type","VariableModel","variableMap_","allUsedVarModels","variableHash","create","blockVariables","blockVariable","variableList","WorkspaceAudio","preload","NODE_BLOCK","NODE_BUTTON","NODE_LABEL","NODE_SHADOW","NODE_INPUT","saveAs","filename","blob","Blob","filesaver","contract_options","BlockConversion","blocks_pending_reconnect","createWorkspace","workspace_variables","has_market_block","generateGrowingListBlock","child_value_input_name","block_child_nodes","mutation_dom","items_amount","value_input_name","value_input_index","value_block_node","value_block","convertBlockNode","generateUniqueVariable","variable_block","block_to_attach","statement_blocks","generateIndicatorBlock","value_input_name_mappings","old","new","bb_result_list","macd_fields_list","required_child_block_name","block_in_statement","value_name_mappings","value_name_mapping","el_value","value_input","el_value_child","converted_block","is_symbol_type","block_node_to_use","barrier_inputs","block_child_node","field_name","trade","block_fields","blocks_to_connect","child_block_name","illegal_blocks","active_symbol","symbol_name","opposites_name","DocumentFragment","el_block","el_field","textContent","current_previous_connection","previous_block","getPreviousBlock","renamed_fields","MARKET_LIST","volidx","TRADETYPECAT_LIST","endsinout","staysinout","callputequal","TRADETYPE_LIST","risefall","risefallequals","innerText","old_name","has_initialization_block","current_name","counter","ws_variable","id_","strategy_node","showIncompatibleStrategyDialog","updateRenamedFields","hasAttribute","getIllegalBlocks","illegal_block_type","variable_nodes","block_nodes","strategy_child_node","registerVariables","el_variables","el_variable","querySelectorAll","previous_sibling_id","previous_sibling_block","sibling_previous_connection","sibling_previous_target_connection","highest_previous_connection","naivelyFixLegacyStrategyAfterConversion","converted_xml","conversions","getConversions","is_old_block","is_immovable","is_undeletable","setBlockAttributes","conversion_obj","previous_connection","getClosestLegalPreviousConnection","conversion_parent","el_block_child","FieldVariable","processValueInputs","statement_name","processStatementInputs","closest_statement","closest","el_sibling_block","sibling_block","is_minimised","comment_text","iconXY_","el_input_child_block","input_child_block","el_node_with_children","block_to_use","statement_input","supposed_parent_block","getFirstBlockInStack","is_protected_statement","isConnectedToProtectedStatementInput","new_parent","target_connection","getInputWithConnection","getSelectedTradeType","translate_xy","translate_X","translate_Y","blockRect","getBoundingClientRect","translate_offset","blockX","blockY","required_block_types","error_message_map","updateWorkspaceName","dashboard_strategies","title","string_to_replace","substr","new_document_title","collection","xmlDom","domToPrettyText","delayExecution","ms","load","block_string","drop_event","strategy_id","showInvalidStrategyError","DOMParser","parseFromString","getElementsByTagName","blockConversion","convertStrategy","blockly_xml","is_collection","loadBlocks","loadWorkspace","is_user_disabled_state","added_blocks","blockly_metrics","scale_cancellation","blockly_left","blockly_top","cleanUpOnLoad","has_possible_missing_index_xml","onFetchError","xml_string","addLoaderBlocksFirst","addDomAsBlock","loadBlocksFromHeader","promises","remove","domToVariables","block_conversion","el","throwNewErrorMessage","parent_block_error","parent_error_message","child_error_message","mandatory_trade_option_block","required_blocks_check","getAllRequiredBlocks","missing_blocks","blockType","getMissingBlocks","disabled_blocks","hasDisabledChild","getDisabledBlocks","scrollWorkspace","scroll_amount","is_horizontal","is_chronological","ws_metrics","scroll_x","scroll_y","use_existing_group","callbackFn","opt_group_name","should_disable","string_rgb","rgb","ActiveSymbols","trading_times","sortDropdownOptions","closedFunc","is_a_closed","is_b_closed","disabled_markets","disabled_symbols","disabled_submarkets","init_promise","is_initialised","processed_symbols","is_forced_update","initialise","authorized","activeSymbols","processActiveSymbols","onMarketOpenCloseChanged","changes","symbol_obj","exchange_is_open","isExistingValue","prop","market_display_name","submarkets","submarket_display_name","symbols","pip_size","pip","is_active","is_trading_suspended","should_be_open","all_symbols","market_name","isMarketClosed","submarket_name","market_display","submarket_display","symbol_display","market_option","sorted_options","submarket_options","market_obj","isSubmarketClosed","symbol_options","accumulator","symbol_display_name","isSymbolClosed","REQUESTS","getRequestType","req_type","measures","measure","datadogLogs","startTime","startTimeDate","detail","isBotRunning","defineMeasure","res_type","performance","mark","getEntriesByName","clearMarks","sendIsCalled","response_promise","sendRequestsStatistic","clearMeasures","debounced_calls","addGlobalMethod","getLoginId","login_id","localStorage","getItem","account_id","pip_sizes","account_info","is_running","time_interval","has_activeSymbols","reconnectIfNotConnected","readyState","getActiveSymbols","toExponential","toggleRunButton","toggle","socket_url","deriv_socket","force_update","terminate","getSocketURL","getAppId","getLanguage","website_name","WebSocket","DerivAPIBasic","middleware","APIMiddleware","initEventListeners","authorizeAndSubscribe","clearInterval","ready_state","socket_state","disconnect","active_loginid","client_accounts","active_account","authorize","expectResponse","s","_","time","AccountLimits","landing_company_details","landing_company","currency_config","TradingTimes","ContractsFor","cache_age_in_min","disabled_options","retrieving_contracts_for","barrier_types","barrier_props","getContractsByTradeType","contracts_for_category","offset_regexp","RegExp","isOffset","has_absolute_default_value","barrier_type","has_selected_offset_type","real_trade_type","getContractCategoryByTradeType","barrier_category","has_matching_category","contract_category","has_matching_duration","has_matching_barrier_category","has_matching_barrier_type","barrier","high_barrier","barrier_prop_name","barrier_match","assign","expiry_type","getTradeTypeCategoryByTradeType","getContractsFor","contracts","getBarrierCategoryByTradeType","has_matching_barrier","getContractsForFromApi","available","filtered_contracts","start_type","unix","convert_day_to_hours","getDurationIndex","convertDuration","unit_to_convert","duration_index","target_index","default_duration","converted_duration","min_contract_duration","max_contract_duration","start_index","end_index","day_duration_index","subcategory","last_digit_range","trade_type_options","trade_type_category_name","getTradeTypeCategoryNameByTradeType","getTradeTypeByTradeCategory","isDisabledOption","subcategories","has_durations","types","trade_type_categories","category_names","compare_obj","disabled_obj","last_update_moment","local","updateTradingTimes","periodicUpdate","updateMarketOpenClosed","next_update_date","nextUpdateDate","now_moment","next_update_moment","add","isAfter","is_open_map","is_opened","hour","minute","second","toDate","wait_period","update_timer","last_update_date","format","tradingTimes","date_str","toISOString","getUTCDate","markets","processed_times","times","is_open_all_day","is_closed_all_day","calcIsMarketOpened","session","nextDate","symbol_names","className","extra","basis","prediction","selected_tick","barrierOffset","secondBarrierOffset","barrier2","isEmptyObject","tickOld","tickNew","number_string","promiseFn","recoverFn","details","updateErrorMessage","shouldThrowError","recoverResolve","getGlobalTimeouts","next_delay_in_seconds","logError","delay","req_id","getBackoffDelayInMs","findValueByKeyRecursively","repeatFn","formatTime","entry_tick_time","exit_tick_time","exit_tick","random","CONNECTING","OPEN","CLOSING","CLOSED","generateErrorMessage","missing_space","missing","misplaced","default","trade_parameters","purchase_conditions","trackAndEmitError","trackJs","track","getContractTypeName","contract_type_obj","contract_type_names","shortcode_suffix","shortcode","is_risefall","importExternal","script","async","onload","external_global_component","onerror","timeSince","secondPast","minutePast","hourPast","timestampDate","day","getDate","month","toDateString","year","getFullYear","setColors","is_dark_mode","darkMode","lightMode","pipe","fns","initialValue","nextParam","fn","extractBlocksFromXml","sortBlockChild","blocksArray","areFieldsEqual","fields1","fields2","xml1","xml2","sortedBlocks1","sortedBlocks2","blocks1","blocks2","onKeyDownHandleError","handleError","removeEventListener","save_type","updateListStrategies","workspace_id","current_timestamp","current_workspace_index","current_workspace","bot_name","localForage","LZString","decompress","removeExistingWorkspace","eam","_action","once","unregisterIfError","unregisterAllBefore","unregisterAll","apiError","unregister","unreg","actionList","searchBy","_resolve","_reject","onWorkspaceResize","block_types","path","getUrlBase","l","location","pathname","get_path","getImageLocation","image_name","setSmartChartsPublicPath","createContext","queryClient","ReactQueryClient","QueryClient","endpoint","app_id","wss","standalone","WS","useWS","active_connection","DerivAPI","QueryClientProvider","useState","isLoading","setIsLoading","isSubscribed","setSubscribed","setError","setData","subscriber","useRef","_subscribe","useContext","APIContext","useCallback","props","current","useEffect","StoreContext","useSubscription","useStore","exchange_rates","base_currency","merge","BaseStore","onHydrationDone","makeObservable","observable","unmount","makePersistable","properties","storage","Function","stopPersisting","ExchangeRatesStore","FLAGS","wallet","next_wallet","sharkfin","FeatureFlagsStore","flag","memoizedValue","useMemo","is_mock","feature_flags","AppStore","root_store","core","getErrorForNonEuClients","link","getErrorForEuClients","route","routes","handleErrorForEu","show_default_error","common","ui","traders_hub","toggleAccountsDialog","is_eu_country","showDigitalOptionsUnavailableError","showError","is_landing_company_loaded","should_show_eu_error","content_flag","ContentFlag","is_bot_allowed","is_eu","isEuResidenceWithOnlyVRTC","active_accounts","is_options_blocked","has_error","onBeforeUnload","run_panel","is_stop_button_visible","onClickOutsideBlockly","composedPath","classList","showDigitalOptionsMaltainvestError","onMount","onUnmount","registerReloadOnLanguageChange","registerCurrencyReaction","registerOnAccountSwitch","registerLandingCompanyChangeReaction","registerResidenceChangeReaction","setDBotEngineStores","dbot_store","timer","blockly_store","timer_counter","setContainerSize","getCachedActiveTab","when","save_workspace_interval","disposeReloadOnLanguageChangeReaction","disposeCurrencyReaction","disposeSwitchAccountListener","disposeLandingCompanyChangeReaction","disposeResidenceChangeReaction","setAccountSwitcherDisabledMessage","setPromptHandler","current_language","reload","trade_options_block","switch_broadcast","retrieveActiveSymbols","disposeCache","fake_create_event","account_settings","country_code","quick_strategy","summary_card","loadDataStrategy","tabs_title","WORKSPACE","CHART","DBOT_TABS","DASHBOARD","BOT_BUILDER","TUTORIAL","TAB_IDS","getSettingsFromLocal","getSetting","settings","storeSetting","setItem","BlocklyStore","is_loading","active_tab","setActiveTab","tab","g_subscribers_map","ChartStore","is_chart_loading","chart_type","wsSubscribe","req","subscribeTicksHistory","wsForget","wsForgetStream","stream_id","forgetStream","wsSendRequest","ServerTime","getMarketsOrder","synthetic_index","has_synthetic_index","is_contract_ended","computed","onStartBot","onStopBot","updateSymbol","onSymbolChange","updateGranularity","updateChartType","setChartStatus","transactions","is_ended","TAB_LOCAL","TAB_GOOGLE","TAB_RECENT","clearInjectionDiv","el_ref","getElementsByClassName","tour_type","setTourSettings","tour_list","DashboardStore","active_tab_tutorials","active_tour_step_number","dialog_options","faq_search_value","getFileArray","has_file_loaded","has_mobile_preview_loaded","active_tour","is_dialog_open","is_file_supported","is_info_panel_visible","is_preview_on_popup","is_tour_dialog_visible","show_toast","show_mobile_tour_dialog","strategy_save_type","toast_message","is_web_socket_intialised","setShowMobileTourDialog","setWebSocketState","setOpenSettings","setIsFileSupported","setTourActiveStep","setPreviewOnDialog","onLoadModalClose","setStrategySaveType","setPreviewOnPopup","setTourDialogVisibility","setActiveTour","setFileLoaded","onCloseDialog","setActiveTabTutorial","setFAQSearchValue","showVideoDialog","setInfoPanelVisibility","onZoomInOutClick","is_zoom_in","addition","onCloseTour","setTourEnd","isMobile","onTourEnd","is_tour_active","initInfoPanel","previewRecentStrategy","current_workspace_id","refreshBotBuilderTheme","app","DataCollectionStore","IS_PENDING","IS_PROCESSED","run_id","run_start","should_post_xml","strategy_content","cleanXmlDom","xml_dom","useless_attributes","updated_dom","cloneObject","removeAttributesRecursively","useless_attribute","removeAttribute","getHash","btoa","crc32","trackRun","trackTransaction","setRunId","setRunStart","setStrategyContent","isProduction","hostname","xml_hash","pako","getPayload","gzip","Referer","DownloadStore","getSuccessJournalMessage","current_currency","onClickDownloadTransaction","transaction_csv_titles","date_start","transaction_csv_content","transaction_encoded_uri","encodeURI","transaction_link","click","onClickDownloadJournal","journal_csv_titles","journal","filtered_messages","array_message","date","journal_csv_content","journal_encoded_uri","journal_link","help_content_types","IMAGE","BLOCK","EXAMPLE","help_content_config","example_id","variables_gets","Localize","i18n_default_text","components","StaticUrl","href","pushDataLayer","onRunBot","onTransactionClosed","FlyoutHelpStore","css","move","sounds","examples","help_string","should_next_disable","should_previous_disable","active_helper","setHelpContent","setExamples","example_blocks","example","setFlyoutWidth","runInAction","is_help_content","help_strings","is_search_flyout","updateSequenceButtons","getHelpContent","target_blocks","xml_list_group","block_content","getFilledBlocksIndex","blocks_type","blocks_content","getNextHelpContentIndex","is_last","filled_blocks_index","setActiveHelper","onBackClick","onSequenceClick","initFlyoutHelp","getElementsByName","onSearch","should_go_next","xml_list","current_block_index","getNextBlock","current_index","is_next","next_index","next_blocks_type","next_filled_block","next_filled_block_index","next_block_type","getCategoryContents","selected_category","groupBy","last_filled_content_index","first_filled_content_index","nodes","should_include_block_only","block_group","node","all_examples","toolbox_examples","statistics","counters","number_of_runs","total_stake","total_payout","lost_contracts","won_contracts","is_completed","reference_id","refrence_id","_root_store","run_statistics","gtm","FlyoutStore","block_listeners","block_workspaces","flyout_min_width","flyout_content","flyout_width","is_visible","search_term","initFlyout","initBlockWorkspace","setContents","setSelectedCategory","getSelectedCategory","onClickOutsideFlyout","variables_blocks_count","first_get_variable_block_index","horizontalLayout","HorizontalFlyout","VerticalFlyout","targetWorkspace","getVariableMap","createPotentialVariableMap","el_block_workspace","block_svg_root","GTM","blockMouseDown_","bindEvent_","processed_xml","longest_block_width","is_search","is_flyout_click","is_search_focus","button_status","NORMAL","LOADING","COMPLETED","GoogleDriveStore","is_authorised","setKey","client_id","process","api_key","gapi","initialiseClient","google","accounts","oauth2","initTokenClient","updateSigninStatus","saveFile","loadFile","signIn","signOut","getPickerLanguage","checkFolderExists","createSaveFilePicker","createLoadFilePicker","showGoogleDriveFilePicker","bot_folder_name","google_auth","is_signed_in","requestAccessToken","setToken","revoke","removeItem","language","drive","files","pageSize","picker","pickerBackground","xml_doc","mime_type","file","mimeType","resource","setButtonStatus","Action","PICKED","folder_id","docs","strategy_file","content","strategy_file_metadata","parents","form_data","FormData","append","xhr","XMLHttpRequest","responseType","setRequestHeader","CANCEL","loadPickerCallback","fileId","is_save","docs_view","DocsView","setIncludeFolders","setMimeTypes","setSelectFolderEnabled","PickerBuilder","setOrigin","protocol","host","setTitle","setLocale","setAppId","setOAuthToken","addView","setDeveloperKey","setSize","setCallback","build","useDBotStore","is_drawer_open","Notifications","notification_messages_ui","classNames","ToolbarWidget","position","ChartMode","portalNodeId","onChartType","onGranularity","isDesktop","StudyLegend","searchInputClassName","Views","DrawTools","Share","show_digits_stats","chart_store","is_socket_opened","assetInformation","countdown","isHighestLowestMarkerEnabled","is_chart_layout_default","theme","SmartChart","showLastDigitStats","chartControlsWidgets","enabledChartFooter","chartStatusListener","v","toolbarWidget","chartType","enabledNavigationWidget","requestAPI","requestForget","requestForgetStream","requestSubscribe","topWidgets","ChartTitle","onChange","isConnectionOpened","isLive","speed","backgroundColor","foregroundColor","has_won_contract","weight","color","initTrashCan","margin","Trashcan","MARGIN_BOTTOM_","MARGIN_SIDE_","contract_stages","NOT_RUNNING","STARTING","PURCHASE_SENT","PURCHASE_RECEIVED","IS_STOPPING","CONTRACT_CLOSED","toggle_ref","checked_filters","filters","filterMessage","is_filter_dialog_visible","toggleFilterDialog","wrapper_ref","React","useOnClickOutside","classNameLabel","ref","hasFilter","Checkbox","defaultChecked","logType","classnames","styles","interpolation","escapeValue","formatMoney","getLogMessage","is_new_row","in_prop","useNewRowTransition","date_el","DateItem","CSSTransition","in","getJournalItemContent","clickFunction","popover_message","download","is_clear_stat_disabled","transaction_list","Popover","classNameBubble","alignment","zIndex","Button","onClick","enter","enterDone","exit","unmountOnExit","Journal","unfiltered_messages","contract_stage","filtered_messages_length","unfiltered_messages_length","DataList","data_source","rowRenderer","keyMapper","unique_id","as","line_height","SelfExclusionForm","max_losses_error","setMaxLossesError","is_onscreen_keyboard_active","initial_values","api_max_losses","onRunButtonClick","resetSelfExclusion","updateSelfExclusion","setRunLimit","is_reality_check_visible","onSubmitLimits","form_max_losses","max_losses","set_losses","run_limit","Formik","initialValues","validate","errors","is_number","is_integer","requested_field_message","valid_number_message","max_number_message","max_decimal_message","max_losses_limit_message","amount_decimal_array","onSubmit","touched","isValid","handleChange","Form","Input","hint","large","SelfExclusion","self_exclusion","is_restricted","self_exclusion_form_props","virtual_account_loginid","FadeWrapper","keyname","PageOverlay","header","onClickClose","MobileWrapper","Div100vhContainer","Modal","is_open","has_close_icon","toggleModal","propTypes","PropTypes","getContractUpdateConfig","contract_update","getLimitOrderAmount","contract_update_stop_loss","contract_update_take_profit","has_contract_update_stop_loss","has_contract_update_take_profit","getContractConfig","is_high_low","LBFLOATCALL","LBFLOATPUT","LBHIGHLOW","getSupportedContracts","getContractTypeDisplay","SummaryCard","contract_info","is_contract_loading","is_contract_completed","is_contract_inactive","is_multiplier","onClickSell","is_sell_requested","addToast","current_focus","removeToast","setCurrentFocus","card_header","ContractCard","getCardLabels","has_progress_slider","card_body","error_message_alignment","getContractById","card_footer","contract_el","profit_loss","should_show_result_overlay","Summary","ThemedScrollbars","summary","setShowBotStopMessage","notification_timer","notificationTimer","onMouseOver","onMouseLeave","Toast","rel","data_testid","CircularWrapper","ContractStageText","TradeAnimation","is_stop_button_disabled","onStopBotClick","performSelfExclusionCheck","should_show_overlay","show_bot_stop_message","account_status","cashier_validation","is_button_disabled","updateIsButtonDisabled","is_unavailable_for_payment_agent","status_classes","progress_status","has_effect","green","status_class","transaction_elements","CONTRACT","DIVIDER","popover_zindex","QUICK_STRATEGY","TOOLBAR","TRANSACTION","SUMMARY_TOOLTIPS","RUN_PANEL","TransactionIconWithText","TransactionFieldLoader","TransactionIconLoader","PopoverItem","PopoverContent","tick_count","low_barrier","convertDateFormat","Transaction","active_transaction_id","setActiveTransactionId","underlying","IconTradeTypes","Money","show_currency","TransactionItem","Transactions","toggleTransactionDetailsModal","transactions__content","getRowSize","StatisticsTile","contentClassName","StatisticsSummary","toggleStatisticsInfoModal","has_sign","DrawerHeader","onClearStatClick","DrawerContent","active_index","setActiveTabIndex","Tabs","onTabItemClick","DrawerFooter","MobileDrawerFooter","info_direction","StatisticsInfoModal","is_statistics_info_modal_open","RunPanel","toggleDrawer","footer","Drawer","anchor","common_tour_button_properties","fontWeight","fontSize","padding","steps","handleCallback","continuous","locale","back","next","arrowColor","primaryColor","textColor","spotlightShadow","buttonBack","border","marginRight","borderRadius","buttonNext","overlay","step_index","has_localize_component","show_actions","autoPlay","controls","playsInline","disablePictureInPicture","controlsList","content_data","joyride_props","showProgress","spotlightClicks","disableBeacon","disableOverlay","disableCloseOnEsc","DBOT_ONBOARDING","placement","last","hideBackButton","Step1","show_label","Step1A","Step2","Step3","Step4","Step5","Step6","BOT_BUILDER_TOUR","BOT_BUILDER_MOBILE","tour_step_key","DBOT_ONBOARDING_MOBILE","tourDialogInfo","tourDialogAction","onboarding_tour_header","bot_builder_tour_header","TourStartDialog","tour_token","onboard_tour","header_text_size","content_text_size","tour_headers","Dialog","cancel_button_text","onCancel","confirm_button_text","onConfirm","is_mobile_full_width","useTourHandler","is_finished","setIsFinished","is_close_tour","setIsCloseTour","handleJoyrideCallback","default_tour_data","tour_step","setStep","tour_data","setTourData","start_button","tour_button_text","test_id","ProgressBarTracker","steps_list","custom_color","id_ref","LocalComponent","loadFileFromRecent","onConfirmSave","file_input_ref","has_dashboard_strategies","renderOpenButton","accept","GoogleDrive","google_drive","is_open_button_loading","onDriveConnect","onDriveOpen","is_document","is_delete_modal_open","onToggleDeleteDialog","selected_strategy_id","setDashboardStrategies","setSelectedStrategyId","loadStrategyToBuilder","previewed_strategy_id","setPreviewedStrategyId","refreshStrategiesTheme","resetBotBuilderStrategy","resetStrategiesAfterDelete","deleted_strategy_id","updated_workspaces","current_previewed_strategy","removeBotStrategy","strategy_from_workspace","onHandleChange","STRATEGY","MENU_DESKTOP","CONTEXT_MENU_MOBILE","RecentWorkspace","toggleSaveModal","getRecentFileIcon","getSaveType","getSelectedStrategyID","trigger_div_ref","is_div_triggered_once","is_dropdown_visible","setDropdownVisibility","handleHideDropdown","handleClickOutside","useComponentVisibility","is_desktop","handlePreviewList","dashboard_tab_dom_element","selector","observingParent","MutationObserver","childList","subtree","handleEdit","viewRecentStrategy","is_active_mobile","text_size","DesktopWrapper","google_drive_connected","is_drive_radio","SaveModalForm","validateBotName","is_local","save_as_collection","content_height","autohide","placeholder","onFocus","currentTarget","onBlur","RadioGroup","onToggle","is_submit_success","SaveModal","is_save_modal_open","MobileFullPageModal","is_modal_open","height_offset","page_overlay","HEADERS","RecentComponent","getStrategies","recent_strategies","tab_name","setStrategies","Cards","loadFileFromLocal","actions","hidden","SIDEBAR_INTRO","InfoPanel","handleClose","renderInfo","sidebar_item","tutorial_link","tutorial_label","switchTab","DashboardTitle","MobileIconGuide","handleTabChange","DashboardDescription","DashboardComponent","el_portal","ReactDOM","FAQ","imageclass","dangerouslySetInnerHTML","__html","faq_list","hide_header","faq_wrapper_element","timer_id","open_accordion_element","previous_sibling_element","previousElementSibling","offset","offsetTop","wrapper_element","scrollTo","behavior","scrollToElement","Accordion","icon_close","icon_open","GuideContent","guide_list","onOkButtonClick","subtype","triggerTour","backgroundImage","onClose","frameBorder","allowFullScreen","user_guide_content","guide_content","faq_content","initialSelectedTab","guide_tab_content","search_filtered_list","setsearchFilteredList","search_faq_list","setsearchFAQList","selected_tab","setSelectedTab","menu_items","removeHTMLTagsFromString","is_faq","filtered_list","title_has_match","description_has_match","onChangeHandle","SelectNative","list_items","should_show_empty_option","Dashboard","tab_value","onEntered","onCancelButtonClick","is_strategy_modal_open","init_render","url_hashed_values","hash","active_hash_tab","checkAndHandleConnection","api_status","dbot","tab_index","el_id","el_tab","scrollIntoView","inline","onTabItemChange","ok_button_text","portal_element_id","QuickStrategyContainer","trade_type_dropdown","duration_unit_dropdown","types_strategies_dropdown","selected_duration_unit","selected_type_strategy","is_contract_dialog_open","is_stop_bot_dialog_open","createStrategy","getSizeDesc","onChangeDropdownItem","onChangeInputValue","onHideDropdownList","onScrollStopDropdownList","toggleStopBotDialog","symbol_dropdown_options","component","trade_type_dropdown_options","getMessage","select_value","is_able_disabled","trailing_icon_message","common_inputs_properties","is_uniq_strategy_field","QuickStrategyStore","qs_cache","input_duration_value","input_stake","input_martingale_size","input_alembert_unit","input_oscar_unit","input_loss","input_profit","getFieldMap","setSelected","setSelectedSymbol","setSelectedTradeType","setSelectedDurationUnit","setSelectedTypeStrategy","list_obj","getQuickStrategyFields","getHiddenCategories","hidden_categories","has_barrier","getTradeTypeOptions","is_muliplier","setDescription","setActiveTypeStrategyIndex","setDurationUnitDropdown","setSymbolDropdown","setTradeTypeDropdown","setTypesStrategiesDropdown","setDurationInputValue","updateSymbolDropdown","updateTypesStrategiesDropdown","updateTradeTypeDropdown","updateDurationDropdown","updateDurationValue","type_strategy","duration_unit_options","types_strategies_options","field_map","typeStrategy","stake","alembert_unit","oscar_unit","getMarketBySymbol","getSubmarketBySymbol","trade_type_cat","strategy_name","strategy_xml","strategy_dom","modifyValueInputs","el_value_input","modifyFieldDropdownValues","name_list","fields_to_update","tradetype","tradetypecat","durationtype","getAllSymbols","filtered_trade_type_categories","first_trade_type","types_strategies","first_type_strategy","first_duration_unit","duration_input_value","cache_unit","quick_strategy_store","RootStore","Description","displayName","DurationFields","dropdown_list","selected_value","QuickStrategyFields","uniq_selected_input","data_uniq_input_obj","_elem","dropdown_lists","selected_values","data_fields","is_input_field","is_select_field","prevProps","nextProps","QuickStrategyFooter","is_submit_enabled","submitForm","handleCreateEdit","handleRun","QuickStrategyForm","setDefaultValidationNumber","Yup","typeError","round","SchemaFields","required","validationSchema","enableReinitialize","validateOnMount","isSubmitting","is_valid","elem","is_bypassed","isSafari","InputField","new_field_name","new_id","new_className","new_label","new_input_value","new_placeholder","new_trailing_icon_message","new_zIndex","trailing_icon","Inputs","MarketOption","SelectField","Autocomplete","autoComplete","onItemSelection","onScrollStop","leading_icon","Selects","TradeTypeOption","QuickStrategy","quick_strategy_props","should_hide_display_name","FlyoutBlockGroup","onInfoClick","is_variables_get","is_variables_set","AddButton","is_plus","lineHeight","allow","flyout_help","block_help_component","text_count","example_node","renderText","SearchResult","total_result","FlyoutContent","flyout_ref","is_empty","platform_name_dbot","getPlatformSettings","callback_id","getButtonCallback","flyout__search","flyout__help","flyout__normal","LocalFooter","setLoadedLocalFile","toggleLoadModal","Wrapper","mockZoomInOut","loaded_local_file","onDrop","is_explanation_expand","toggleExplanationExpand","is_load_modal_open","header_text","has_loaded_file","has_recent_strategies","elements_to_ignore","header_fit_content","has_separator","network_status","setIsOpen","portal_id","getIcon","route_prompt_dialog","continueRoute","should_show","is_confirmed","last_location","showErrorMessageWithButton","showErrorMessage","centerAndHighlightBlock","btn_text","messageWithButton","parseArray","getStoredItemsByUser","storage_key","getStoredItemsByKey","session_storage_item","sessionStorage","decompressed_item","stored_items","setStoredItemsByKey","compressed_value","JournalStore","JOURNAL_CACHE","journal_filters","playAudio","play","onLogSuccess","onNotify","pushMessage","getServerTime","welcomeBackUser","welcomeUser","registerReactions","restoreStoredJournals","disposeReactionsFn","parsedArray","is","NaN","message_length","ExpansionPanel","onResize","isCustomJournalMessage","parsed_message","account_list","current_account","is_virtual","formatDate","item_id","disposeWriteJournalMessageListener","stored_journals","disposeJournalMessageListener","fireImmediately","LoadModalStore","recent_workspace","local_workspace","drop_zone","is_strategy_loaded","is_strategy_removed","clicked_id","is_body","getDashboardStrategies","readFile","selected_strategy","onActiveIndexChange","preview_workspace","zoomCenter","dark_mode","setRecentStrategies","refreshStrategies","toggleTourLoadModal","is_preview","reader","FileReader","load_options","readAsText","RoutePromptDialogStore","shouldNavigateAfterPrompt","next_location","routeTo","SUMMARY","TRANSACTIONS","JOURNAL","switch_account_notification","is_persistent","RunPanelStore","has_open_contract","error_type","unregisterBotListeners","onStopButtonClick","clearStat","showStopMultiplierContractDialog","showLoginDialog","showRealAccountDialog","showClearStatDialog","showContractUpdateErrorDialog","onBotSellEvent","onBotStopEvent","onBotReadyEvent","onBotTradeAgain","onContractStatusEvent","onBotContractEvent","switchToJournal","setContractStage","setHasOpenContract","setIsRunning","handleInvalidToken","registerBotListeners","onBotRunningEvent","preloadAudio","stopMyBot","closeMultiplierContract","stats","trx","checkRestriction","is_ios","mobileOSDetect","saveRecentWorkspace","unHighlightAllBlocks","should_bot_run","setIsRestricted","shouldRunBot","runBot","terminateBot","notifications","registerIsSocketOpenedListener","disposeIsSocketOpenedListener","addNotificationMessage","disposeLogoutListener","disposeStopBotListener","ignore_new_version","indicateBotStopped","clearContractUpdateConfigValues","listen_new_version","is_trade_again","contract_status","platform","platform_name","is_disposable","removeNotificationMessage","toggleNotificationsModal","removeNotificationByKey","logout","getStrategySounds","audioElement","muted","pause","SaveModalStore","addStrategyToWorkspace","local_type","save_collection","workspace_structure","updated_strategies","main_strategy","SelfExclusionStore","setApiMaxLosses","getSelfExclusion","SummaryCardStore","indicative_movement","profit_movement","validation_errors","validation_rules","trigger","rules","contract_store","getBuyPrice","contract_update_config","indicative","getLimitOrder","populateContractUpdateConfig","updateLimitOrder","setValidationErrorMessages","validateProperty","getIndicativePrice","movements","isEqualObject","contractUpdate","propertyName","messages","inputs","hasOwnProperty","validator","Validator","isPassed","disposeSwitchAcountListener","SummaryStore","ToolbarStore","is_animation_info_modal_open","has_undo_stack","has_redo_stack","onResetClick","closeResetDialog","onResetOkButtonClick","resetDefaultStrategy","onSortClick","onUndoClick","is_redo","undo","hasUndoStack","hasRedoStack","ToolboxStore","is_toolbox_open","is_search_loading","sub_category_index","toolbox_dom","setWorkspaceOptions","adjustWorkspace","onToolboxItemClick","onToolboxItemExpand","getAllCategories","hasSubCategory","onSearchBlur","onSearchClear","onSearchKeyUp","showSearch","toolbox_ref","disposeToolboxToggleReaction","languageTree","hasCategories","hasCollapse","hasComments","hasDisable","toolbox_width","block_canvas_rect","scroll_distance","category_id","open_ids","open_id","dynamic","getToolboxCategoryCallback","fnToApply","subCategory","typing_timer","search_words","all_variables","all_procedures","general_term","term","block_contents","contents","flat","pushIfNotExists","array","element_to_push","priority","block_definitions","block_name","block_type_terms","block_name_terms","definition_key_to_search","word","definition_strings","matched_meta","block_meta_strings","pushBlockWithPriority","matched_variables","unique_var_blocks","searched_procedures","procedure","unique_proce_blocks","procedure_block","TransactionsStore","TRANSACTION_CACHE","recovered_completed_transactions","recovered_transactions","is_called_proposal_open_contract","is_transaction_details_modal_open","pushTransaction","onClickOutsideTransaction","recoverPendingContracts","updateResultsCompletedContract","sortOutPositionsBeforeAction","recoverPendingContractsById","isEnded","entry_tick_display_value","exit_tick_display_value","same_contract_index","disposeTransactionElementsListener","stored_transactions","disposeRecoverContracts","positions","element_id","contract_details","portfolio","data_collection_store","DBotStoreContext","DBotStoreProvider","mock","stores","Provider","msg_localize_components","setNotificationTimer","TourEndDialog","expanded","setOpen","setTourStep","tour_active","title_text","toggle_dialog_or_stop","paddingBottom","paddingTop","button_id","button_classname","buttonOnClick","should_disable_pointer_events","icon_id","icon_color","Toolbar","onKeyUp","Arg","Category","Example","Examples","Mutation","Next","Shadow","Statement","Value","ToolboxItems","ReactDomServer","xmlns","deletable","movable","divisor_input","variabletype","elseif","else","active","has_sub_category","is_sub_category_open","is_blockly_listener_registered","show_snackbar","setShowSnackbar","handleBlockChangeOnBotRun","removeBlockChangeListener","removeChangeListener","PARENT_CLASS","bounds","dragHandleClassName","enableResizing","header_title","minWidth","onCloseDraggable","xaxis","yaxis","minHeight","onDragStart","role","appear","TableCell","extra_classes","CellLoader","TableHeader","columns","column","extra_class","IconWrapper","DesktopTransactionTable","result_columns","transaction_columns","TransactionDetailsDesktop","screenDimensions","setScreenDimensions","handleResize","innerHeight","modalWidth","yAxisValue","CardColumn","large_title","right_aligned","IconContainer","MobileTransactionCards","TransactionDetails","Suspense","fallback","Loading","DBotStores","combinedStore","is_subscribed_to_msg_listener","msg_listener","handleMessage","onMessage","h","hj","_hjSettings","hjid","hjsv","user_id","account_type","account_open_date","epochToMoment","toMoment","clients_country","hotjar","changeActiveSymbolLoadingState","onDisconnectFromNetwork","vh","survicate_box","initSurvicate","webpackContext","webpackContextResolve","__webpack_require__","module","exports","webpackAsyncContext"],"sourceRoot":""}