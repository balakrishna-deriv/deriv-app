/*! For license information please see on-ramp.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@deriv/components"),require("@deriv/shared"),require("@deriv/translations"),require("mobx"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["@deriv/components","@deriv/shared","@deriv/translations","mobx","react","react-dom"],t):"object"==typeof exports?exports["@deriv/cashier"]=t(require("@deriv/components"),require("@deriv/shared"),require("@deriv/translations"),require("mobx"),require("react"),require("react-dom")):e["@deriv/cashier"]=t(e["@deriv/components"],e["@deriv/shared"],e["@deriv/translations"],e.mobx,e.react,e["react-dom"])}(self,((e,t,r,n,i,o)=>(()=>{var a={"../../api/src/index.ts":(e,t,r)=>{"use strict";r("react"),r("@deriv/shared")},"./components/cashier-locked/index.ts":(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r("react"),i=r.n(n),o=r("../../stores/src/index.ts"),a=r("../../hooks/src/index.ts"),s=r("./components/empty-state/index.ts"),c=r("@deriv/translations"),l=r("@deriv/shared");const u=function(e){var t=e.cashier_validation,r=e.is_crypto,n=e.is_system_maintenance,o=e.is_cashier_locked,a=e.is_deposit_locked,s=e.is_withdrawal_locked,u=e.is_identity_verification_needed,d=e.excluded_until,p=null==t?void 0:t.includes("no_residence"),m=null==t?void 0:t.includes("unwelcome_status"),f=null==t?void 0:t.includes("SelfExclusion"),h=null==t?void 0:t.includes("no_withdrawal_or_trading_status"),_=null==t?void 0:t.includes("only_pa_withdrawals_allowed_status"),v=null==t?void 0:t.includes("WithdrawServiceUnavailableForPA"),y=null==t?void 0:t.includes("withdrawal_locked_status"),g=null==t?void 0:t.includes("documents_expired"),b=null==t?void 0:t.includes("cashier_locked_status"),w=null==t?void 0:t.includes("disabled_status"),k=null==t?void 0:t.includes("FinancialAssessmentRequired"),x=null==t?void 0:t.includes("ASK_CURRENCY"),E=null==t?void 0:t.includes("ASK_AUTHENTICATE"),C=null==t?void 0:t.includes("ASK_FINANCIAL_RISK_APPROVAL"),z=null==t?void 0:t.includes("ASK_TIN_INFORMATION"),N=null==t?void 0:t.includes("ASK_SELF_EXCLUSION_MAX_TURNOVER_SET"),I=null==t?void 0:t.includes("ASK_FIX_DETAILS"),P=null==t?void 0:t.includes("ASK_UK_FUNDS_PROTECTION"),S=null==t?void 0:t.includes("PACommisionWithdrawalLimit");if(n)return r&&s?{icon:"IcCashierLocked",title:(0,c.localize)("Withdrawals are locked"),description:(0,c.localize)("Withdrawals are temporarily unavailable due to system maintenance. You can make your withdrawals when the maintenance is complete.")}:r&&a?{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Deposits are temporarily unavailable due to system maintenance. You can make your deposits when the maintenance is complete.")}:r?{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Our cryptocurrency cashier is temporarily down due to system maintenance. You can access the Cashier in a few minutes when the maintenance is complete.")}:{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Our cashier is temporarily down due to system maintenance. You can access the Cashier in a few minutes when the maintenance is complete.")};if(o){if(p)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("You’ve not set your country of residence. To access Cashier, please update your country of residence in the Personal details section in your account settings.")};if(g)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("The identification documents you submitted have expired. Please submit valid identity documents to unlock Cashier. ")};if(b)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Your cashier is currently locked. Please contact us via live chat to find out how to unlock it.")};if(w)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Your account is temporarily disabled. Please contact us via live chat to enable deposits and withdrawals again.")};if(x)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Please set your account currency to enable deposits and withdrawals.")};if(E&&u)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Please submit your <0>proof of identity</0> to authenticate your account and access your Cashier.",components:[i().createElement("a",{key:0,className:"link",href:"/account/proof-of-identity"})]})};if(E)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your account has not been authenticated. Please submit your <0>proof of identity</0> and <1>proof of address</1> to authenticate your account and access your cashier.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-identity"}),i().createElement("a",{key:1,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-address"})]})};if(C)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Please complete the <0>Appropriateness Test</0> to access your cashier.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/financial-assessment","data-testid":"dt_financial_assessment_link"})]})};if(k)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your cashier is locked. Please complete the <0>financial assessment</0> to unlock it.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/financial-assessment","data-testid":"dt_financial_assessment_link"})]})};if(z)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"You have not provided your tax identification number. This information is necessary for legal and regulatory requirements. Please go to <0>Personal details</0> in your account settings, and fill in your latest tax identification number.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]})};if(P)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your cashier is locked. See <0>how we protect your funds</0> before you proceed.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/cashier/deposit"})]})};if(N)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your access to Cashier has been temporarily disabled as you have not set your 30-day turnover limit. Please go to <0>Self-exclusion</0> and set your 30-day turnover limit.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/self-exclusion"})]})};if(I)return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your <0>personal details</0> are incomplete. Please go to your account settings and complete your personal details to enable deposits and withdrawals.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]})}}if(a){if(I)return{icon:"IcCashierDepositLock",title:(0,c.localize)("Deposits are locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your <0>personal details</0> are incomplete. Please go to your account settings and complete your personal details to enable deposits.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]})};if(f)return{icon:"IcCashierDepositLock",title:(0,c.localize)("Deposits are locked"),description:(0,c.localize)("You have chosen to exclude yourself from trading on our website until {{exclude_until}}. If you are unable to place a trade or deposit after your self-exclusion period, please contact us via live chat.",{exclude_until:(0,l.formatDate)(d,"DD MMM, YYYY")})};if(m)return{icon:"IcCashierDepositLock",title:(0,c.localize)("Deposits are locked"),description:(0,c.localize)("Please contact us via live chat.")}}if(s){if(k)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:i().createElement(c.Localize,{i18n_default_text:"You can only make deposits. Please complete the <0>financial assessment</0> to unlock withdrawals.",components:[i().createElement("a",{key:0,className:"link",href:"/account/financial-assessment","data-testid":"dt_financial_assessment_link"})]})};if(E)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your account has not been authenticated. Please submit your <0>proof of identity</0> and <1>proof of address</1> to authenticate your account and request for withdrawals.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-identity"}),i().createElement("a",{key:1,className:"link",rel:"noopener noreferrer",href:"/account/proof-of-address"})]})};if(I)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:i().createElement(c.Localize,{i18n_default_text:"Your <0>personal details</0> are incomplete. Please go to your account settings and complete your personal details to enable withdrawals.",components:[i().createElement("a",{key:0,className:"link",rel:"noopener noreferrer",href:"/account/personal-details"})]})};if(v)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:(0,c.localize)("This feature is not available for payment agents.")};if(h)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:(0,c.localize)("Unfortunately, you can only make deposits. Please contact us via live chat to enable withdrawals.")};if(y)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:(0,c.localize)("Unfortunately, you can only make deposits. Please contact us via live chat to enable withdrawals.")};if(_)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Withdrawals are locked"),description:(0,c.localize)("You can only make deposits. Please contact us via live chat for more information.")};if(S)return{icon:"IcCashierWithdrawalLock",title:(0,c.localize)("Cashier is locked for withdrawals"),description:(0,c.localize)("It seems that you've no commissions to withdraw at the moment. You can make withdrawals once you receive your commissions.")}}return{icon:"IcCashierLocked",title:(0,c.localize)("Cashier is locked"),description:(0,c.localize)("Your cashier is currently locked. Please contact us via live chat to find out how to unlock it.")}};const d=(0,o.Pi)((function(){var e,t=(0,a.wN)(),r=(0,o.oR)(),n=r.client,c=r.modules,l=n.account_status,d=n.accounts,p=n.current_currency_type,m=n.is_withdrawal_lock,f=n.loginid,h=n.is_identity_verification_needed,_=c.cashier.general_store,v=_.is_cashier_locked,y=_.is_system_maintenance,g=u({cashier_validation:l.cashier_validation,is_crypto:"crypto"===p,is_system_maintenance:y,is_cashier_locked:v,is_deposit_locked:t,is_withdrawal_locked:m,is_identity_verification_needed:h,excluded_until:f?null===(e=d[f])||void 0===e?void 0:e.excluded_until:void 0});return i().createElement(s.Z,{icon:g.icon,title:g.title,description:g.description})}))},"./components/empty-state/index.ts":(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r("react"),i=r.n(n),o=r("@deriv/components");const a=function(e){var t=e.icon,r=e.title,n=e.description,a=e.action;return i().createElement("div",{className:"cashier-empty-state"},t&&i().createElement(o.Icon,{icon:t,data_testid:"dt_empty_state_icon",className:"cashier-empty-state__icon"}),r&&i().createElement(o.Text,{as:"h2",weight:"bold",align:"center","data-testid":"dt_empty_state_title",className:"cashier-empty-state__title"},r),n&&i().createElement(o.Text,{as:"p",size:"xs",align:"center","data-testid":"dt_empty_state_description",className:"cashier-empty-state__desc"},n),a&&i().createElement(o.Button,{has_effect:!0,text:a.label,onClick:a.onClick,primary:a.primary||!0,tertiary:a.tertiary,is_disabled:a.disabled,large:!0,"data-testid":"dt_empty_state_action",className:"cashier-empty-state__action"}))}},"./components/side-note/index.ts":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r("../../../node_modules/classnames/index.js"),i=r.n(n),o=r("react"),a=r.n(o),s=r("@deriv/components"),c=r("@deriv/translations"),l=r("@deriv/shared"),u=function(e){var t=e.children_length,r=e.side_notes_length,n=e.title,i=t||r||0;return a().createElement(s.Text,{className:"side-note__title",weight:"bold",as:"p"},n||(i>1?a().createElement(c.Localize,{i18n_default_text:"Notes"}):a().createElement(c.Localize,{i18n_default_text:"Note"})))},d=function(e){var t=e.children,r=e.id;return a().createElement("div",{className:"side-note__bullet-wrapper","data-testid":"dt_side_note_bullet_wrapper_".concat(r)},a().createElement("div",{className:"side-note__bullet","data-testid":"dt_side_note_bullet_".concat(r)}),a().createElement("div",null,t))};const p=function(e){var t=e.children,r=e.className,n=e.has_bullets,o=void 0===n||n,c=e.has_title,p=void 0===c||c,m=e.is_mobile,f=e.side_notes,h=e.title,_=m?s.MobileWrapper:s.DesktopWrapper;return a().createElement(a().Fragment,null,(t||(null==f?void 0:f.length))&&a().createElement(_,null,a().createElement("div",{className:i()("side-note",{"side-note--mobile":(0,l.isMobile)()},r)},p&&a().createElement(u,{title:h,children_length:Array.isArray(t)?null==t?void 0:t.length:1,side_notes_length:null==f?void 0:f.length}),t&&a().createElement(a().Fragment,null,t),!t&&(null==f?void 0:f.map((function(e,t){return o?a().createElement(d,{id:t,key:t},e):a().createElement(s.Text,{key:t,className:"side-note__text",size:"xxs",as:"p"},e)}))))))}},"../../hooks/src/index.ts":(e,t,r)=>{"use strict";r.d(t,{wN:()=>l});r("react");r("../../api/src/index.ts");var n=r("../../stores/src/index.ts");var i=r("@deriv/shared");const o=function(){var e=(0,n.oR)(),t=e.client,r=e.traders_hub,o=t.is_authentication_needed,a=r.content_flag,s=[i.ContentFlag.LOW_RISK_CR_EU,i.ContentFlag.EU_REAL].includes(a);return o&&s};const a=function(){var e=(0,n.oR)().client,t=e.is_financial_account,r=e.is_financial_information_incomplete,i=e.is_trading_experience_incomplete;return t&&(r||i)};const s=function(){return(0,n.oR)().client.mt5_login_list.some((function(e){return"real"===e.account_type&&"financial_stp"===e.sub_account_type}))};const c=function(){var e=(0,n.oR)().client,t=e.is_eu,r=e.is_tnc_needed,i=s();return(t||i)&&r};const l=function(){var e=(0,n.oR)().client,t=e.is_deposit_lock,r=e.is_trading_experience_incomplete,i=e.landing_company_shortcode,s=o(),l=c(),u=a();return t||s||l||("maltainvest"===i?r:u)}},"../../stores/src/index.ts":(e,t,r)=>{"use strict";r.d(t,{Pi:()=>n.Pi,oR:()=>a});var n=r("../../../node_modules/mobx-react-lite/es/index.js"),i=r("react");r("mobx"),r("../../../node_modules/mobx-persist-store/lib/esm5/index.js");var o=(0,i.createContext)(null),a=function(){var e=(0,i.useContext)(o);if(!e)throw new Error("useStore must be used within StoreContext");return e}},"../../../node_modules/classnames/index.js":(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var a=i.apply(null,r);a&&e.push(a)}}else if("object"===o){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},"../../../node_modules/mobx-persist-store/lib/esm5/index.js":(e,t,r)=>{"use strict";var n=new Map,i={},o={},a=r("mobx"),s=function(e){return Boolean(e)&&!1===Array.isArray(e)&&"object"==typeof e},c=function(e,t,r){void 0===r&&(r="")},l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=function(){function e(e){this.options=e}return e.prototype.setItem=function(e,t){var r;return l(this,void 0,void 0,(function(){var n,i,o,a,s,l;return u(this,(function(u){switch(u.label){case 0:return n=this.options,i=n.stringify,o=void 0===i||i,a=n.debugMode,void 0!==a&&a,s=this.options.expireIn?Object.assign({},t,{__mps__:{expireInTimestamp:(d=this.options.expireIn,(new Date).getTime()+d)}}):t,l=o?JSON.stringify(s):s,c(0,"".concat(e," - setItem:"),l),[4,null===(r=this.options.storage)||void 0===r?void 0:r.setItem(e,l)];case 1:return u.sent(),[2]}var d}))}))},e.prototype.getItem=function(e){var t,r;return l(this,void 0,void 0,(function(){var n,i,o,a,s,l,d;return u(this,(function(u){switch(u.label){case 0:return n=this.options,i=n.removeOnExpiration,o=void 0===i||i,a=n.debugMode,void 0!==a&&a,[4,null===(t=this.options.storage)||void 0===t?void 0:t.getItem(e)];case 1:s=u.sent();try{l=JSON.parse(s)||{}}catch(e){l=s||{}}return p=null===(r=l.__mps__)||void 0===r?void 0:r.expireInTimestamp,m=(new Date).getTime(),d=new Date(p).getTime()<=m,c(0,"".concat(e," - hasExpired"),d),d&&o?[4,this.removeItem(e)]:[3,3];case 2:u.sent(),u.label=3;case 3:return l=d?{}:l,c(0,"".concat(e," - (getItem):"),l),[2,l]}var p,m}))}))},e.prototype.removeItem=function(e){var t;return l(this,void 0,void 0,(function(){var r;return u(this,(function(n){switch(n.label){case 0:return r=this.options.debugMode,void 0!==r&&r,c(0,"".concat(e," - (removeItem): storage was removed")),[4,null===(t=this.options.storage)||void 0===t?void 0:t.removeItem(e)];case 1:return n.sent(),[2]}}))}))},e}(),p=function(e){return e.reduce((function(e,t){return"string"==typeof t?(e.push({key:t,serialize:function(e){return e},deserialize:function(e){return e}}),e):(s(r=t)?["key","serialize","deserialize"].every((function(e){return!(!r.hasOwnProperty(e)||void 0===e)||(c(i.debugMode,"".concat(e," not found in SerializableProperty"),{key:e,obj:r}),!1)})):(c(i.debugMode,0,{obj:r}),0))?(e.push(t),e):e;var r}),[])},m=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{c(n.next(e))}catch(e){o(e)}}function s(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))},f=function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(){function e(e,t,r){var n,s,l,u,m,f,h;void 0===r&&(r={}),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null,this.debugMode=!1,this.isHydrated=!1,this.isPersisting=!1,this.storageName="",this.target=e,this.storageName=t.name,this.properties=p(t.properties),this.reactionOptions=Object.assign({fireImmediately:!0},o,r),this.debugMode=null!==(s=null!==(n=t.debugMode)&&void 0!==n?n:i.debugMode)&&void 0!==s&&s,this.storageAdapter=new d({expireIn:null!==(l=t.expireIn)&&void 0!==l?l:i.expireIn,removeOnExpiration:null===(m=null!==(u=t.removeOnExpiration)&&void 0!==u?u:i.removeOnExpiration)||void 0===m||m,stringify:null===(h=null!==(f=t.stringify)&&void 0!==f?f:i.stringify)||void 0===h||h,storage:t.storage?t.storage:i.storage,debugMode:this.debugMode}),(0,a.makeObservable)(this,{clearPersistedStore:a.action,hydrateStore:a.action,isHydrated:a.observable,isPersisting:a.observable,pausePersisting:a.action,startPersisting:a.action,stopPersisting:a.action},{autoBind:!0,deep:!1}),this.storageAdapter.options.storage,this.storageName,c(this.debugMode,"".concat(this.storageName," - (makePersistable)"),{properties:this.properties,storageAdapter:this.storageAdapter,reactionOptions:this.reactionOptions})}e.prototype.init=function(){return m(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.hydrateStore()];case 1:return e.sent(),this.startPersisting(),[2,this]}}))}))},e.prototype.hydrateStore=function(){return m(this,void 0,void 0,(function(){var e,t,r,n=this;return f(this,(function(i){switch(i.label){case 0:return e=Boolean(this.cancelWatch),this.isPersisting&&this.pausePersisting(),(0,a.runInAction)((function(){n.isHydrated=!1,c(n.debugMode,"".concat(n.storageName," - (hydrateStore) isHydrated:"),n.isHydrated)})),this.storageAdapter&&this.target?[4,this.storageAdapter.getItem(this.storageName)]:[3,2];case 1:t=i.sent(),r=this.target,t&&(0,a.runInAction)((function(){n.properties.forEach((function(e){var n;if([r.hasOwnProperty(e.key),void 0!==t[e.key]].every(Boolean)){var i=t[e.key];r[e.key]instanceof a.ObservableMap&&(n=i,Array.isArray(n)&&n.every((function(e){return Array.isArray(e)})))?r[e.key]=e.deserialize(new Map(i)):r[e.key]=e.deserialize(i)}}))})),i.label=2;case 2:return(0,a.runInAction)((function(){n.isHydrated=!0,c(n.debugMode,"".concat(n.storageName," - isHydrated:"),n.isHydrated)})),e&&this.startPersisting(),[2]}}))}))},e.prototype.startPersisting=function(){var e=this;if(this.storageAdapter&&this.target&&!this.cancelWatch){var t=this.target;this.cancelWatch=(0,a.reaction)((function(){var r={};return e.properties.forEach((function(e){var n=(0,a.isComputedProp)(t,e.key),i=(0,a.isAction)(t[e.key]);if(String(e.key),String(e.key),!n&&!i){var o=e.serialize(t[e.key]);if(o instanceof a.ObservableMap){var s=[];o.forEach((function(e,t){s.push([t,(0,a.toJS)(e)])})),o=s}r[e.key]=(0,a.toJS)(o)}})),r}),(function(t){return m(e,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.storageAdapter?[4,this.storageAdapter.setItem(this.storageName,t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}),this.reactionOptions),this.isPersisting=!0,c(this.debugMode,"".concat(this.storageName," - (startPersisting) isPersisting:"),this.isPersisting)}},e.prototype.pausePersisting=function(){this.isPersisting=!1,c(this.debugMode,"".concat(this.storageName," - pausePersisting (isPersisting):"),this.isPersisting),this.cancelWatch&&(this.cancelWatch(),this.cancelWatch=null)},e.prototype.stopPersisting=function(){this.pausePersisting(),c(this.debugMode,"".concat(this.storageName," - (stopPersisting)")),n.delete(this.target),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null},e.prototype.clearPersistedStore=function(){return m(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return this.storageAdapter?(c(this.debugMode,"".concat(this.storageName," - (clearPersistedStore)")),[4,this.storageAdapter.removeItem(this.storageName)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.getPersistedStore=function(){return m(this,void 0,void 0,(function(){return f(this,(function(e){return this.storageAdapter?(c(this.debugMode,"".concat(this.storageName," - (getPersistedStore)")),[2,this.storageAdapter.getItem(this.storageName)]):[2,null]}))}))}}()},"../../../node_modules/mobx-react-lite/es/index.js":(e,t,r)=>{"use strict";r.d(t,{Pi:()=>z});var n=r("mobx"),i=r("react"),o=r.n(i);if(!i.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!n.makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var a=r("react-dom");function s(e){e()}function c(e){return(0,n.getDependencyTree)(e)}var l="undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry;function u(e){return{reaction:e,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+d}}var d=1e4;var p=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};var m=l?function(e){var t=new Map,r=1,n=new e((function(e){var r=t.get(e);r&&(r.reaction.dispose(),t.delete(e))}));return{addReactionToTrack:function(e,i,o){var a=r++;return n.register(o,a,e),e.current=u(i),e.current.finalizationRegistryCleanupToken=a,t.set(a,e.current),e.current},recordReactionAsCommitted:function(e){n.unregister(e),e.current&&e.current.finalizationRegistryCleanupToken&&t.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}(l):function(){var e,t=new Set;function r(){void 0===e&&(e=setTimeout(n,1e4))}function n(){e=void 0;var n=Date.now();t.forEach((function(e){var r=e.current;r&&n>=r.cleanAt&&(r.reaction.dispose(),e.current=null,t.delete(e))})),t.size>0&&r()}return{addReactionToTrack:function(e,n,i){var o;return e.current=u(n),o=e,t.add(o),r(),e.current},recordReactionAsCommitted:function(e){t.delete(e)},forceCleanupTimerToRunNowForTests:function(){e&&(clearTimeout(e),n())},resetCleanupScheduleForTests:function(){var r,n;if(t.size>0){try{for(var i=p(t),o=i.next();!o.done;o=i.next()){var a=o.value,s=a.current;s&&(s.reaction.dispose(),a.current=null)}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.clear()}e&&(clearTimeout(e),e=void 0)}}}(),f=m.addReactionToTrack,h=m.recordReactionAsCommitted,_=(m.resetCleanupScheduleForTests,m.forceCleanupTimerToRunNowForTests,!1);function v(){return _}var y=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a};function g(e){return"observer".concat(e)}var b=function(){};function w(){return new b}function k(e,t){if(void 0===t&&(t="observed"),v())return e();var r=y(o().useState(w),1)[0],i=y(o().useState(),2)[1],a=function(){return i([])},s=o().useRef(null);if(!s.current)var l=new n.Reaction(g(t),(function(){u.mounted?a():u.changedBeforeMount=!0})),u=f(s,l,r);var d,p,m=s.current.reaction;if(o().useDebugValue(m,c),o().useEffect((function(){return h(s),s.current?(s.current.mounted=!0,s.current.changedBeforeMount&&(s.current.changedBeforeMount=!1,a())):(s.current={reaction:new n.Reaction(g(t),(function(){a()})),mounted:!0,changedBeforeMount:!1,cleanAt:1/0},a()),function(){s.current.reaction.dispose(),s.current=null}}),[]),m.track((function(){try{d=e()}catch(e){p=e}})),p)throw p;return d}var x="function"==typeof Symbol&&Symbol.for,E=x?Symbol.for("react.forward_ref"):"function"==typeof i.forwardRef&&(0,i.forwardRef)((function(e){return null})).$$typeof,C=x?Symbol.for("react.memo"):"function"==typeof i.memo&&(0,i.memo)((function(e){return null})).$$typeof;function z(e,t){var r;if(C&&e.$$typeof===C)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(v())return e;var n=null!==(r=null==t?void 0:t.forwardRef)&&void 0!==r&&r,o=e,a=e.displayName||e.name;if(E&&e.$$typeof===E&&(n=!0,"function"!=typeof(o=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var s,c,l=function(e,t){return k((function(){return o(e,t)}),a)};return""!==a&&(l.displayName=a),e.contextTypes&&(l.contextTypes=e.contextTypes),n&&(l=(0,i.forwardRef)(l)),l=(0,i.memo)(l),s=e,c=l,Object.keys(s).forEach((function(e){N[e]||Object.defineProperty(c,e,Object.getOwnPropertyDescriptor(s,e))})),l}var N={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};var I;(I=a.unstable_batchedUpdates)||(I=s),(0,n.configure)({reactionScheduler:I})},"@deriv/components":t=>{"use strict";t.exports=e},"@deriv/shared":e=>{"use strict";e.exports=t},"@deriv/translations":e=>{"use strict";e.exports=r},mobx:e=>{"use strict";e.exports=n},react:e=>{"use strict";e.exports=i},"react-dom":e=>{"use strict";e.exports=o}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return a[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var l={};return(()=>{"use strict";c.d(l,{default:()=>w});var e=c("react"),t=c.n(e),r=c("@deriv/components"),n=c("../../hooks/src/index.ts"),i=c("@deriv/shared"),o=c("@deriv/translations"),a=c("../../stores/src/index.ts"),s=c("./components/cashier-locked/index.ts"),u=c("./components/side-note/index.ts");const d=(0,a.Pi)((function(e){var n=e.provider,i=(0,a.oR)(),s=i.ui,c=i.modules,l=s.is_dark_mode_on,u=s.is_mobile,d=c.cashier.onramp.setSelectedProvider,p=n.getPaymentIcons(),m=n.name.toLowerCase().replace(" ","-"),f=u?56:128;return t().createElement("div",{className:"on-ramp__provider"},t().createElement("div",{className:"on-ramp__provider-logo"},t().createElement(r.Icon,{data_testid:l?"dti_provider_icon_dark":"dti_provider_icon_light",icon:l?n.icon.dark:n.icon.light,width:f,height:f})),t().createElement(r.Text,{size:"s",color:"prominent",weight:"bold",line_height:"l",className:"on-ramp__provider-name"},n.name),t().createElement(r.Text,{size:"xs",line_height:"m",as:"p",className:"on-ramp__provider-description"},n.getDescription()),t().createElement("div",{className:"on-ramp__provider-payment-icons"},t().createElement("div",{className:"on-ramp__provider-payment-icons-shadow"}),t().createElement(r.NewsTicker,{speed:10},p.map((function(e,n){return t().createElement(r.Icon,{data_testid:l?"dti_payment_icon_dark":"dti_payment_icon_light",icon:l?e.dark:e.light,key:n,size:40})})))),t().createElement(r.Button,{id:"gtm-onramp-provider-select--".concat(m),className:"on-ramp__provider-button",type:"button",has_effect:!0,onClick:function(){return d(n)},text:(0,o.localize)("Select"),primary:!0,small:u}))}));var p=c("../../../node_modules/classnames/index.js"),m=c.n(p);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const _=(0,a.Pi)((function(){var e,n=(0,a.oR)(),s=n.ui,c=n.modules,l=s.is_dark_mode_on,u=c.cashier.onramp,d=u.api_error,p=u.deposit_address,h=u.is_deposit_address_loading,_=u.is_requesting_widget_html,v=u.onClickDisclaimerContinue,y=u.onClickGoToDepositPage,g=u.selected_provider,b=u.setIsOnRampModalOpen,w=u.should_show_dialog,k=u.should_show_widget,x=u.widget_error,E=u.widget_html,C=t().useRef(null),z=f((0,r.useCopyToClipboard)(),3),N=z[0],I=z[1],P=z[2];return t().useEffect((function(){return function(){return clearTimeout(e)}}),[]),t().useEffect((function(){k&&E&&g.onMountWidgetContainer(C)}),[g,k,E]),null===g?null:h||k&&_?t().createElement(r.Loading,{is_fullscreen:!0}):k?t().createElement("div",{className:m()("on-ramp__widget-container",{"on-ramp__widget-container--error":x}),ref:C},x?t().createElement("div",{className:"on-ramp__widget-container-error"},x):t().createElement("div",{dangerouslySetInnerHTML:{__html:E}})):w?t().createElement("div",{className:"on-ramp__popup-no-deposit-address"},t().createElement(r.Text,{size:"xs",className:"on-ramp__popup-no-deposit-address-text"},d?t().createElement(o.Localize,{i18n_default_text:"Please go to the Deposit page to get an address."}):t().createElement(o.Localize,{i18n_default_text:"Please go to the Deposit page to generate an address. Then come back here to continue with your transaction."})),t().createElement(r.Button.Group,{className:"on-ramp__popup-no-deposit-address-buttons"},t().createElement(r.Button,{text:(0,o.localize)("Cancel"),onClick:function(){return b(!1)},secondary:!0,large:!0}),t().createElement(r.Button,{text:(0,o.localize)("Go to Deposit page"),onClick:y,primary:!0,large:!0}))):t().createElement("div",{className:"on-ramp__popup","data-testid":"dti_on-ramp_popup"},g.should_show_deposit_address&&t().createElement(t().Fragment,null,t().createElement("div",{className:"on-ramp__popup-deposit"},t().createElement(r.Text,{size:(0,i.isMobile)()?"xxs":"xs",color:"general",line_height:(0,i.isMobile)()?"m":"l",align:(0,i.isMobile)()?"left":"center"},t().createElement(o.Localize,{i18n_default_text:"Please copy the crypto address you see below. You'll need it to deposit your cryptocurrency."})),t().createElement("div",{className:"on-ramp__popup-deposit-address"},t().createElement(r.Popover,{zIndex:9998,alignment:"right",message:(0,o.localize)("Copied!"),is_open:N},t().createElement("input",{className:m()("on-ramp__popup-deposit-address-text",{"on-ramp__popup-deposit-address-text--dark":l}),defaultValue:p,disabled:!0,onFocus:function(e){return e.preventDefault()}}),t().createElement(r.Icon,{className:"on-ramp__popup-deposit-address-icon",data_testid:"dti_deposit_address_icon",icon:(0,i.isMobile)()?"IcCopy":"icClipboard",size:16,onClick:function(){I(p),e=setTimeout((function(){P(!1)}),500)}}))),t().createElement("div",{className:"on-ramp__popup-deposit-address-hint"},t().createElement(r.HintBox,{icon:"IcInfo",is_info:!0,message:(0,o.localize)("This address can only be used ONCE. Please copy a new one for your next transaction.")}))),t().createElement("div",{className:"on-ramp__popup-divider"})),t().createElement("div",{className:"on-ramp__popup-disclaimer"},t().createElement(r.Text,{line_height:"m",weight:"bold",color:"prominent",as:"p",className:"on-ramp__popup-disclaimer-title"},t().createElement(o.Localize,{i18n_default_text:"Disclaimer"})),t().createElement(r.Text,{size:(0,i.isMobile)()?"xxs":"xs",line_height:"l",color:"general",as:"p",className:"on-ramp__popup-disclaimer-text"},t().createElement(o.Localize,{i18n_default_text:"By clicking 'Continue' you will be redirected to {{ service }}, a third-party payment service provider. Please note that {{ website_name }} is not responsible for the content or services provided by {{ service }}. If you encounter any issues related to {{ service }} services, you must contact {{ service }} directly.",values:{service:g.name,website_name:i.website_name}}))),!k&&p&&t().createElement("div",{className:"on-ramp__popup-buttons"},t().createElement(r.Button.Group,null,t().createElement(r.Button,{large:!0,onClick:function(){return b(!1)},secondary:!0,text:(0,o.localize)("Cancel")}),t().createElement(r.Button,{id:"gtm-onramp-provider-continue--".concat((0,i.getKebabCase)(g.name)),large:!0,onClick:v,primary:!0,text:(0,o.localize)("Continue")}))))}));function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(){var e=[t().createElement(o.Localize,{i18n_default_text:"Fiat onramp is a cashier service that allows you to convert fiat currencies to crypto to top up your Deriv crypto accounts. Listed here are third-party crypto exchanges. You’ll need to create an account with them to use their services.",key:0})];return t().createElement(u.Z,{side_notes:e,title:t().createElement(o.Localize,{i18n_default_text:"What is Fiat onramp?"})})},b=function(){return t().createElement("div",{className:"on-ramp__info"},t().createElement(r.Text,{color:"prominent",size:"s",weight:"bold",className:"on-ramp__info-header",as:"p"},t().createElement(o.Localize,{i18n_default_text:"What is Fiat onramp?"})),t().createElement("div",{className:"on-ramp__info-content"},t().createElement(r.ReadMore,{expand_text:(0,o.localize)("See more"),text:(0,o.localize)("Fiat onramp is a cashier service that allows you to convert fiat currencies to crypto to top up your Deriv crypto accounts. Listed here are third-party crypto exchanges. You’ll need to create an account with them to use their services."),collapse_length:140,className:"on-ramp__read-more"})))};const w=(0,a.Pi)((function(e){var c=e.menu_options,l=e.setSideNotes,u=(0,n.wN)(),p=(0,a.oR)(),m=p.modules,f=p.common,h=p.client,y=m.cashier,w=y.onramp,k=y.general_store,x=w.filtered_onramp_providers,E=w.is_onramp_modal_open,C=w.onMountOnramp,z=w.onUnmountOnramp,N=w.onramp_popup_modal_title,I=w.resetPopup,P=w.setIsOnRampModalOpen,S=w.should_show_dialog,T=k.is_cashier_onboarding,A=k.is_cashier_locked,L=k.is_loading,M=k.cashier_route_tab_index,O=h.is_switching,R=f.routeTo,j=v(t().useState(i.routes.cashier_onramp),2),W=j[0],D=j[1];t().useEffect((function(){c&&W!==i.routes.cashier_onramp&&R(W)}),[c,R,W]),t().useEffect((function(){return C(),"function"!=typeof l||O||L||l([t().createElement(g,{key:0})]),function(){z(),"function"==typeof l&&l([])}}),[C,z,T,O,L,M]);return O||L?t().createElement(r.Loading,{className:"cashier-onboarding__loader",is_fullscreen:!0}):u||A?t().createElement(s.Z,null):t().createElement(t().Fragment,null,t().createElement("div",{className:"cashier__wrapper cashier__wrapper--align-left on-ramp"},(0,i.isMobile)()&&t().createElement(t().Fragment,null,t().createElement(r.SelectNative,{data_testid:"dt_on_ramp_select_native",className:"on-ramp__selector",list_items:(null!=c?c:[]).map((function(e){return{text:e.label,value:e.path}})),value:W,should_show_empty_option:!1,onChange:function(e){e.currentTarget.value!==W&&D(e.currentTarget.value)}}),t().createElement(b,null)),t().createElement(r.Text,{color:(0,i.isMobile)()?"less-prominent":"general",weight:(0,i.isMobile)()?"normal":"bold",align:"center",line_height:"m",className:"on-ramp__page-header",as:"p"},t().createElement(o.Localize,{i18n_default_text:"Select payment channel"})),x.map((function(e){return t().createElement(d,{key:e.name,provider:e})})),t().createElement(r.Modal,{className:"on-ramp__modal",has_close_icon:!0,is_open:E,small:S,title:N,toggleModal:function(){return P(!E)},onUnmount:I,width:S?"44rem":"62.8rem"},t().createElement(r.Modal.Body,null,t().createElement(_,null)))))}))})(),l=l.default})()));