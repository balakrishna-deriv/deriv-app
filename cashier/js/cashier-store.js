!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@deriv/components"),require("@deriv/shared"),require("@deriv/translations"),require("mobx"),require("react")):"function"==typeof define&&define.amd?define(["@deriv/components","@deriv/shared","@deriv/translations","mobx","react"],t):"object"==typeof exports?exports["@deriv/cashier"]=t(require("@deriv/components"),require("@deriv/shared"),require("@deriv/translations"),require("mobx"),require("react")):e["@deriv/cashier"]=t(e["@deriv/components"],e["@deriv/shared"],e["@deriv/translations"],e.mobx,e.react)}(self,(function(e,t,n,r,a){return(()=>{"use strict";var o,i,s,c,u={"@deriv/components":t=>{t.exports=e},"@deriv/shared":e=>{e.exports=t},"@deriv/translations":e=>{e.exports=n},mobx:e=>{e.exports=r},react:e=>{e.exports=a}},l={};function h(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return u[e].call(n.exports,n,n.exports,h),n.exports}h.m=u,h.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return h.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,h.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);h.r(n);var r={};o=o||[null,i({}),i([]),i(i)];for(var a=2&t&&e;"object"==typeof a&&!~o.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,h.d(n,r),n},h.d=(e,t)=>{for(var n in t)h.o(t,n)&&!h.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},h.f={},h.e=e=>Promise.all(Object.keys(h.f).reduce(((t,n)=>(h.f[n](e,t),t)),[])),h.u=e=>"cashier/js/cashier."+e+".4b458ac4203eb84dc516.js",h.miniCssF=e=>{},h.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},c="@deriv/cashier:",h.l=(e,t,n,r)=>{if(s[e])s[e].push(t);else{var a,o;if(void 0!==n)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var l=i[u];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==c+n){a=l;break}}a||(o=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,h.nc&&a.setAttribute("nonce",h.nc),a.setAttribute("data-webpack",c+n),a.src=e),s[e]=[t];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=s[e];if(delete s[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),o&&document.head.appendChild(a)}},h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.p="/",(()=>{var e={"cashier-store":0};h.f.j=(t,n)=>{var r=h.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=h.p+h.u(t),i=new Error;h.l(o,(n=>{if(h.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",i.name="ChunkLoadError",i.type=a,i.request=o,r[1](i)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[o,i,s]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in i)h.o(i,r)&&(h.m[r]=i[r]);if(s)s(h)}for(t&&t(n);c<o.length;c++)a=o[c],h.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunk_deriv_cashier=self.webpackChunk_deriv_cashier||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var d={};return(()=>{h.d(d,{default:()=>Je});var e=h("mobx"),t=h("@deriv/shared");function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,c,"next",e)}function c(e){a(i,r,o,s,c,"throw",e)}s(void 0)}))}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function r(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.should_show=!1,this.is_confirmed=!1,this.last_location=null,this.current_location=null,(0,e.makeObservable)(this,{should_show:e.observable,is_confirmed:e.observable,last_location:e.observable,current_location:e.observable,shouldNavigateAfterPrompt:e.action.bound,resetLastLocation:e.action.bound,resetIsConfirmed:e.action.bound,onConfirm:e.action.bound,onCancel:e.action.bound,continueRoute:e.action.bound}),this.root_store=t}var a,s,c,u,l;return a=r,s=[{key:"shouldNavigateAfterPrompt",value:function(e,t){this.is_confirmed||(this.last_location=e,this.should_show=!0,this.current_location=t)}},{key:"resetLastLocation",value:function(){this.last_location=null}},{key:"resetIsConfirmed",value:function(){this.is_confirmed=!1}},{key:"onConfirm",value:(l=o(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.root_store.client,this.should_show=!1,this.is_confirmed=!0,r=Object.values(n.accounts).some((function(e){return!e.is_virtual&&!(0,t.isCryptocurrency)(e.currency)})),!(0,t.isCryptocurrency)(null==n?void 0:n.currency)||!r){e.next=7;break}return e.next=7,this.doSwitch();case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"doSwitch",value:(u=o(regeneratorRuntime.mark((function e(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.root_store,a=r.client,o=r.modules,i=o.cashier.general_store,s=Object.entries(a.accounts).reduce((function(e,r){var a=n(r,2),o=a[0],i=a[1];return i.is_virtual||(0,t.isCryptocurrency)(i.currency)?e:o}),""),e.next=5,a.switchAccount(s);case 5:"deposit"===this.current_location&&i.setIsDeposit(!0);case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"onCancel",value:function(){this.should_show=!1}},{key:"continueRoute",value:function(){this.is_confirmed&&this.last_location&&this.root_store.common.routeTo(this.last_location)}}],s&&i(a.prototype,s),c&&i(a,c),Object.defineProperty(a,"prototype",{writable:!1}),r}(),c=h("react"),u=h.n(c),l=h("@deriv/translations");const f={containers:{account_transfer:"account_transfer",deposit:"deposit",payment_agent:"payment_agent",payment_agent_transfer:"payment_agent_transfer",withdraw:"withdraw"},map_action:{withdraw:"payment_withdraw",payment_agent:"payment_agent_withdraw"},icon_payment_methods:{Alipay:["alipay"],Bank:["bank","bankdeposit","banks","banktransfer","bankwire","bankwiretransfer","localbankwire","localbank","localbanks","localbanktransfer"],Bankbri:["bri","bankbri"],Bca:["bca","grupbca"],Bch:["bch"],Bni:["bni"],Bitcoin:["bitcoin","btc"],Card:["card","cards","visa","mastercard"],Cimbniaga:["cimbniaga"],Crypto:["crypto","cryptos","cryptocurrencies","cryptocurrency","weacceptcrypto"],Dai:["dai"],Diamondbank:["diamondbank"],Eth:["eth","ethd","ethereum"],Ewallet:["ewallet","ewallets","ewalletpayment","skrill"],Firstbank:["firstbank"],Gtbank:["gtbank"],Icbc:["icbc"],Libertyreserve:["libertyreserve"],LiteCoin:["ltc","litecoin"],Mandiri:["mandiri"],Mandirisyariah:["mandirisyariah"],Moneygram:["moneygram"],Paypal:["paypal"],PerfectMoney:["perfectmoneyandwebmoney","perfectmoney"],Permatabank:["permatabank"],Tether:["tether"],Verve:["verve"],WebMoney:["perfectmoneyandwebmoney","webmoney"],Wechatpay:["wechatpay"],Zenithbank:["zenithbank"]},payment_methods:{AbokiFX:["AbokiFX","A BOKI FX"],"ABSA Bank":["Absa","ABSA","ABSA Bank","ABSABank","ABSABANK","Absabank","ABSA Bank Transfer","ABSA Cash Send","Absa fund transfer and orange money services","ABSA GHANA LIMITED","Direct deposit FNB and ABSA"],"Access bank":["Access bank","Access Bank","Accessbank","AccessBank","ACCESS BANK","Acess Bank"],"Access forex":["Access Forex","ACCESS FOREX","Access forex"],"Afriland First Bank":["Afriland First Bank","AFRILAND FIRST BANK"],"Airtel Mobile money":["Airtel Mobile money","airtel","Airtel","AIRTEL MOBILE MONEY","airtel money","Airtel money","Airtelmoney","Airtel Money","AirtelMoney","AIRTELMONEY","AIRTEL MONEY","Airtel Tigo","AirtelTigo cash","all mobile money"],Airtm:["airtm","Airtm"],AlfalahBank:["AlfalahBank","bank alfalfa","Alflah Bank"],"All banks":["All banks","All local banks","All local Banks","All local banks ZWL","All Local Bank transfer","bank","Bank","BANK","banks","Banks","local banks","Local banks","Local Banks","Pakistani Local All banks","Local Indian banks","LocalBanks"],Astropay:["astropay","Astropay","Astro Pay"],"ATM transfer":["ATM","ATMDeposits","ATMdeposit","ATM transfer","ATM Transfer","BanktransferATM","FNB ATM deposit"],AzamPesa:["AzamPesa","Azampesa"],"Banco Bradesco":["Banco Bradesco","Bradesco"],"Banco de Pichincha":["Banco de Pichincha","BANCO DE PICHINCHA","Pichincha"],"Banco de Produbanco":["Banco de Produbanco","BANCO DE PRODUBANCO"],"Banco del Pacifico":["Banco del Pacifico","BANCO DE PACIFICO","Pacifico"],"Banco Internacional":["Banco Internacional","BANCO INTERNACIONAL"],"Banco Internacional de Moçambique (BIM)":["Banco Internacional de Moçambique (BIM)","Bim","Transferencia Bim"],"Bancobu Bank eNoti":["Bancobu Bank eNoti","Bancobu e-noti"],"Bank AL Habib":["Bank AL Habib","bank al habib","Bank Alhabib"],"Bank Negara Indonesia (BNI)":["Bank Negara Indonesia (BNI)","BNI","BankBNI"],"Bank Of Ceylon (BOC)":["Bank Of Ceylon (BOC)","Bankofceylon","Boc Peoples Bank"],"Bank Rakyat Indonesia (BRI)":["Bank Rakyat Indonesia (BRI)","BankBri","BankBRI","BRI","BRI dan Ewallet"],"Bank transfer":["All Local Bank payment Accept","All local bank payments","All Local Bank transfer","bank","Bank","BANK","Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","Bank and E-wallet","bank deposit","Bank deposit","Bankdeposit","Bank Deposit","Bank deposits","bank ewallet","bank payment","banks","Banks","Bank to Bank account transfer","bank transfer","Bank transfer","Banktransfer","Bank Transfer","BankTransfer","BANK TRANSFER","BANKTRANSFER","bank transfer and all form of E-payments","Bank Transfer and all Forms of E-payments","BanktransferATM","bank transfers","Bank transfers","Bank Transfers","Ban transfer","Depositos direto em conta","Direct deposit FNB and ABSA","E-wallet Bank transfer","Internet Banking","Internet transfer","Internet Transfer","LocalBank","local banks","Local banks","Local Banks","Local bank transfer","Local bank Transfers","Local deposits","Local deposit","local deposits","BANKTRANSFERS","Bank Deposits","Bank deposit and transfer","Bank transfer and e-wallets","BankDeposit","Fiat","LOCALBANK","OnlineTransfer","ZWbanktransfers","localbanktransfer","Bank transfer Bank wire"],"Bank wire":["bank","Bank","BANK","bank payment","banks","Banks","bank wire","bankwire","Bank wire","Bankwire","Bank Wire","BankWire","BANKWIRE","Bank wire and e-wallets","Bank wire and E-wallets","Bank wires","Bankwires","bank wires and e-wallet","Bank wires and e-wallets","BankWire transfer","E-wallets and bank wires","local bank wire","LocalBankWire","LocalBankwire","Wire Bank Transfer","WIRE TRANSFER","Bank Wire transfer","Fiat","OnlineTransfer","Bank transfer Bank wire"],BankABC:["BankABC","BANCABC BANK"],"Bank BTN":["Bank BTN","BTN"],"Bank of the Philippine Islands (BPI)":["Bank of the Philippine Islands (BPI)","BPI"],"BCA bank":["BCA bank","BCA","BankBCA","bca"],"BDO Unibank":["BDO Unibank","BDO"],BHIM:["BHIM","Bhim","Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe"],"BMCE Bank":["BMCE Bank","Bmce Bank"],"CABS Bank":["CABS Bank","Cabs bank","CABS transfer"],Card:["Card","card","cards","Cards","Credit card","Debit Card","Mastercard","MasterCard","visa","Visa","VISA","Visa card","Bank cards","Carteiras Electronicas","Fiat","Master card"],Cash:["cash","Cash","Cash deposit","Cash deposits","Cash in USD or Local","electronic transfers and cash deposits","FNB cash deposit","physical local and foreign bank notes","USD","USD cash","Cash Deposit","Fiat","INR","USDCash","Zwcash"],"Cash send ABSA bank":["Cash send ABSA bank","ABSA Cash Send","Cashsend","Cash Send","CashSend","cash send Absa","Cash send Absa bank"],"Chipper Cash":["Chipper Cash","Chipper","Chippercash","Chipperchash"],"CIH Bank":["CIH Bank","Cih Bank"],CIMB:["CIMB","CIMBNIAGA","NIAGA"],"City Hopper":["City hopper","City Hopper"],"Co-operative Bank of Kenya":["Co-operative Bank of Kenya","cooperativebank"],"Commercial Bank":["Commercial Bank","Commercialbank"],"CRDB Bank":["CRDB Bank","CRDBBANK"],Crypto:["Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","bitcoin","Bitcoin","BITCOIN","bitcoins","Bitcoins","btc","BTC","btc smega","Cripto","crypto","Crypto","Cyptocurrency","cryptocurrencies","Cryptocurrencies","Crypto Currencies","CRYPTOCURRENCIES","cryptocurrency","Cryptocurrency","CRYPTOCURRENCY","Cryptos","ETH","eUSDT","EUSDT","LTC","Tether","TRON","USDC","USDT","UST","We accept Crypto","BCH","Btc","Criptomoedas","Crypto Payment","Crypto transfer","CryptoTransfer","E-Wallets and Crypto","E-wallets and Crypto","Ethereum","Etherium","Litecoin","Skrill Neteller Crypto","SkrillCrypto","Tether ERC20","Tether Omni","Thether","Usdt","cryptos","ethereum","litecoin"],"Diamond Bank":["Diamond bank","Diamond Bank","DiamondBank"],"E-Mola":["E-Mola","E-mola","Emola"],"E-money":["E-money","e money"],"E-payment":["E-payment","all form of E-payments","All form of E-payments","all forms of E-payments","and all other forms of Epayment","bank transfer and all form of E-payments","Bank Transfer and all Forms of E-payments","E-payments","Epayments","All forms of E-Payments","DigitalPayment","OnlineTransfer","all forms of E-Payment"],"E-transfer":["E-transfer","electronic transfers and cash deposits","E-Transfers","OnlineTransfer"],"E-wallet":["Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","Bank and E-wallet","bank ewallet","Bank wire and e-wallets","Bank wire and E-wallets","bank wires and e-wallet","Bank wires and e-wallets","Digital Wallets","electronic wallets","e-wallers","e-wallet","ewallet","eWallet","E-wallet","Ewallet","EWALLET","E-wallet Bank transfer","E wallet FNB","E-wallet payment","Ewallet payment","e-wallets","ewallets","e-Wallets","e-WALLETS","E- wallets","E-wallets","Ewallets","E-Wallets","E-wallets and bank wires","fnb ewallet","MY WALLET","wallet","Bank transfer and e-wallets","E-Wallets and Crypto","E-wallets and Crypto","E-Wallet","EWallets","Fiat","OnlineTransfer","ewalllets","ewalltets","local bank wallets and Orange money"],Easypaisa:["easypaisa","Easy paisa","Easypaisa","Easy Paisa","EasyPaisaTransfer"],Ecobank:["Ecobank","Eco Bank","ECO BANK","Eco bank Transfers"],EcoCash:["Eco cash","Ecocash","EcoCash","ECOCASH","Ecocash FCA","Ecocash method","ECOCASH WALLET","Ecocash ZWL","EcocashMobileMoney","Zwecocash"],"Electronic Funds Transfer (EFT)":["Electronic Funds Transfer (EFT)","EFT"],"Equity Bank":["Equity bank","Equity Bank","equitybankmoneytransfer"],"EU Mobile Money":["EU Mobile Money","all mobile money","EU MONEY"],EzyPesa:["EzyPesa","Ezypesa","Ezzy pesa","Ezzy Pesa","EzzyPesa"],FasaPay:["fasapay","Fasa pay","FasaPay"],"Fast Payment":["Fast payment","Fast Payment"],"Faysal Bank":["Faysal Bank","FaysalBank"],"FBC Bank":["FBC Bank","FBC BANK"],"Fidelity Bank":["Fidelity Bank","fidelitybank"],Finbank:["Finbank","Fin bank","FinBank"],"First Bank of Nigeria":["First Bank of Nigeria","First bank","First Bank","FirstBank","FIRST BANK","Firstbank"],"First City Monument Bank (FCMB)":["First City Monument Bank (FCMB)","FCMB","fcmb"],"First MicroFinanceBank (FMFB)":["First MicroFinanceBank (FMFB)","FMFB"],"First National Bank (FNB)":["First National Bank (FNB)","Direct deposit FNB and ABSA","E wallet FNB","First National Bank","fnb","FNB","FNB ATM deposit","Fnbbank","FNB Bank","FNBB Bank Transfer","FNB cash deposit","fnb ewallet","FNB First National Bank","FNB pay2cell","FNB pay to cell","FNB pay to sell","Pay to cell FNB","FNB bank transfer","FNBB","FNBBank","FirNationalBank","First National Bank of Botswana","Firstnationalbank","Fnb"],Gmoney:["Gmoney","GMONEY"],"Google Pay":["Google Pay","Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","Google pay","gpay","Gpay","GPay"],"Grup BCA":["Grup BCA","GrupBCA"],"GT bank":["GT bank","Gtb","GTB","Gt Bank","GT Bank","GTBank","GT BANK","Gtbank","Guarantee Trust Bank","GuarantyTrustBank"],Halopesa:["halopesa","Halo pesa","Halopesa","Halo Pesa","HaloPesa","HALOPESA"],"Hatton National Bank":["Hatton National Bank","HattonNationalBank"],HBL:["HBL","HBLMFB","KONNET HBL"],Help2Pay:["Help2Pay","help2pay"],"HNB Bank":["HNB Bank","HNB"],"IMPS Transfer":["imps","Imps","IMPS","IMPS Transfer"],"ING Bank":["ING Bank","ING"],Innbucks:["Innbucks","INNBUCKS"],"Instant Money":["Instant Money","InstantMoney","Instant money stambic bank","Instant money stanbic","Instant money"],"Inter Bank Fund Transfer":["Inter Bank Fund Transfer","InterBankfundtransfer","Interbank Transfer"],"Itau Bank":["Itau Bank","Itau"],IZI:["IZI","Izzy"],JazzCash:["JazzCash","jazzcash","Jazz cash","Jazzcash","Jazz-Cash","JazzCashTransfer"],JENIUS:["JENIUS","Jenius"],Jeton:["Jeton","jeton","JetonWallet"],"Key Stone Bank":["Key Stone Bank","Keystone"],"Kuda Bank":["Kuda Bank","KUDA BANK","Kuda MFB","KudaMFB","KUDA MICROFINANCE BANK 2014563937","Kuda Microfinance","KUDA"],"Luno Wallet":["Luno Wallet","Luno","Luno crypto wallet","Luno e-wallet","Luno ewallet","luno"],"Mandiri Bank":["Mandiri Bank","Mandiri","MANDIRI","MandiriSyariah","BankMandiri"],"Meezan Bank":["Meezan Bank","MeezanBank"],"Millenium Bim Visa":["Millenium Bim Visa","Millenium Bim"],MIX:["mix","Mix","MIX","Mixed"],"Mobile money":["all mobile money","mobile banking","Mobile banking","Mobile money","Mobile Money","MobileMoney","Mobile money MTN","Mobile Money transfer","MOBILE MONEY TRANSFER","Mobile money transfers","Mobilemoneyoption","OnlineTransfer"],"Mojo Mula":["Mojo money","Mojo Mula","MOJO MULA","MoMo pay","Mojo Moolah"],MoMo:["MoMo","MOMO","MoMo pay","MTN MOMO","MTNMOMO"],MoneyGram:["Moneygram","Money Gram","MoneyGram","Money grame"],"M-PESA":["AbesafaricomMpesa Transfers","mpesa","M pesa","M-pesa","Mpesa","M Pesa","M-Pesa","MPesa","M PESA","M-PESA","MPESA","M-Pesa Tigo-Pesa T-Pesa","Pesa","safaricom mpesa","MPESA 0710393947 Albert Kyalo","VodacomMpesa"],"MTN MOMO":["all mobile money","Mobile money MTN","MoMo","MOMO","MTN","MTN mobile money","MTN Mobile money","MTN Mobile Money","MTN MOBILE MONEY","MTNMOBILEMONEY","MTN MOMO","MTNMOMO","MTN MONEY"],"Mukuru money transfers":["Mukuru","Mukuru money transfers","MukuruMoneyTransfer","USDMukurutransfer"],"MyZaka Mascom Money":["MyZaka Mascom Money","mascom","mascom myZaka","Mascom MyZaka","myzaka","My zaka","Myzaka","MyZaka","My zaka mascom money","my Zaka","myzaaka"],Neft:["neft","Neft","NEFT"],Nequi:["Nequi","Nequi o Daviplata al 300 6839026"],Neteller:["neTeller","Neteller","NETELLER","NETelle","Skrill Neteller Crypto","neteller","netteller"],"Nigeria local bank":["Nigeria Local","Nigeria local bank","NIGERIA LOCAL BANK"],"NMB Bank":["NMB Bank","NATIONALMICROFINANCEBANK","Nmb bank"],"One Money":["OM","Onemoney","One Money","One money service","OneMoney","OneMoneyMobileMoney"],Opay:["Opay","OPAY"],"Orange Money Transfer":["Absa fund transfer and orange money services","Orange Cameroon","orange money","orangemoney","Orange money","Orangemoney","Orange Money","OrangeMoney","ORANGE MONEY","Orange Money Transfer","local bank wallets and Orange money"],PalmPay:["PalmPay","PALMPAY"],"Pay safe Card":["paysafecard","Pay safe Card"],Pay2Cell:["FNB pay2cell","FNB pay to cell","FNB pay to sell","Pay2cell","Pay2Cell","PAY2CELL","pay to cell","Pay to cell","Paytocell","Pay to Cell","Pay to cell FNB","PayToCell","pay2cell"],"Payment Checks":["Payment checks","Payment Checks"],PayPal:["Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","Paypal","PayPal","PAYPAL","paypal"],PayTM:["Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","Paytm","PayTM"],"Perfect Money":["Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","perfect money","perfectmoney","Perfect money","Perfectmoney","Perfect Money","PerfectMoney","PERFECT MONEY","Perfect Money and Webmoney","PM","PERFECTMONEY","PERFECT"],"Permata Bank":["Permata Bank","PermataBank","PERMATA"],PhonePhe:["PhonePhe","Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","Phonepay","phonepe","Phonepe","PhonePe","Phone pay","PhonePay"],Pix:["Pix","PIX"],"Polaris Bank":["Polaris Bank","Polaris"],"Ponto 24":["Conta movel","Conta Movel","ContamovelBCI","Ponto 24","Ponto24"],"Pos deposit":["Pos","POS","Pos deposit"],"Postal transfer":["Postal transfer","Egyptian postal transfers"],RIA:["Ria","RIA"],"RTGS Transfers":["RTGS Transfers","rtgs","RTGS","Rtgs bank transfer","RTGS transfers","Rtgs"],Safaricom:["Safaricom","AbesafaricomMpesa Transfers","AbeSafaricomMpesaTransfers","safaricom mpesa"],"Sama Money":["Sama Money","Sama money"],ShopeePay:["ShopeePay","SHOPEEPAY"],Skrill:["Skrill","Skill","Skril","skrill","SKRILL","skrillpayments","Skrll","SkrillCrypto","Skrill Neteller Crypto"],Smega:["btc smega","smega","Smega"],"Standard Bank Namibia":["Standard Bank Namibia","Standard Bank","StandardBank"],"Stanbic Bank":["Instant money stambic bank","Instant money stanbic","stanbic","Stanbic","Stanbic Bank","StanbicBank","Stanbic Bank Transfer","Stanbic Money Transfer","Standbic","Stanbic IBTC","Stanbic bank"],"Standard Charted Bank":["STANCHART","Standard Charted Bank","Standard chartered","Standard chartered bank","Standard Chartered Bank Transfer","Standard Chatterd Bank"],"Steward remit":["Steward remit","Steward Remmitt"],"T-pesa":["M-Pesa Tigo-Pesa T-Pesa","Pesa","T-pesa","Tpesa","T PESA","TTCLpesa"],"Tigo Cash":["Tigo","Tigo Cash","AirtelTigo cash"],"Tigo Mobile Money":["Tigo Mobile Money","Airtel Tigo","all mobile money","Tigo","TIGO MOBILE MONEY","TIGOMOBILEMONEY","AirtelTigo cash"],"Tigo Pesa":["M-Pesa Tigo-Pesa T-Pesa","Pesa","Tigo","tigopesa","Tigo pesa","Tigopesa","Tigo Pesa","TigoPesa","TIGO PESA","TTCLpesa","TIGOPESA"],"Transferencia bancaria":["Transferencia bancaria","Transferencia Eletronica TED","Transferencias bancarias","Ted","Transferencia Bancaria"],"UBA Bank":["UBA","UBA Bank","UBA BANK"],"Union Bank":["Union Bank","Unionbank","Union"],"United Bank Limited (UBL)":["United Bank Limited (UBL)","UBL Bank"],UPI:["All UPI Transfer","Banks BHIMUP BTC Ewallet GooglePay LocalBank Paypal Paytm Perfect Money PhonePhe","upi","UPI","UPI transfer","AmazonUPI","PaytmUPI","Upi"],"USSD code transfer":["USSD code transfer","Or USSD transfer from all Nigeria banks","USSD Code","USSD CODE","Ussd code Transfer from all Nigerian banks","Ussd transfer","USSD transfer","USSD Transfer","ussd transfer"],Vodacom:["Vodacom","VodacomMpesa"],"Vodafone Cash":["Vodafon Cash Methods","Vodafone cash","Vodafone Cash","VODAFONE CASH","VODAFONECASH"],Webmoney:["Perfect Money and Webmoney","Webmoney","WebMoney","Web Money","Web money"],"WeChat Pay":["WeChat Pay","WeChatPay"],"Wema Bank":["Wema Bank","Wema"],WesternUnion:["Western union","Western Union","WesternUnion","westernunion"],Wise:["Wise","transferwise"],"World Remit":["World remit","World Remit","CoinbaseworldRemit"],"Zanaco bank":["ZANACO","Zanaco bank"],"Zenith bank":["Zenith bank","Zenithbank","Zenith Bank","ZenithBank","ZENITH BANK","Zenith","zenithbank"],Zipit:["Zipit","ZIPIT","ZIPIT bank transfers"]}};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.message="",this.code="",this.fields="",this.is_show_full_page=!1,this.onClickButton=null,this.is_ask_uk_funds_protection=!1,this.is_self_exclusion_max_turnover_set=!1,this.is_ask_authentication=!1,this.is_ask_financial_risk_approval=!1,(0,e.makeObservable)(this,{message:e.observable,code:e.observable,fields:e.observable,is_show_full_page:e.observable,onClickButton:e.observable,is_ask_uk_funds_protection:e.observable,is_self_exclusion_max_turnover_set:e.observable,is_ask_authentication:e.observable,is_ask_financial_risk_approval:e.observable,setErrorMessage:e.action.bound,handleCashierError:e.action.bound,setMessage:e.action.bound,setIsAskUkFundsProtection:e.action.bound,setIsSelfExclusionMaxTurnoverSet:e.action.bound,setIsAskAuthentication:e.action.bound,setIsAskFinancialRiskApproval:e.action.bound})}var r,a,o;return r=n,a=[{key:"setErrorMessage",value:function(e,n,r){var a,o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({onClickButton:n,code:e.code,message:e.message,is_show_full_page:r||/InvalidToken|WrongResponse/.test(e.code)},(0,t.getPropertyValue)(e,["details","fields"])&&{fields:null===(a=e.details)||void 0===a?void 0:a.fields});this.onClickButton=o.onClickButton,this.code=o.code,this.message=o.message,this.is_show_full_page=o.is_show_full_page,this.fields=o.fields,this.is_ask_uk_funds_protection=null==o?void 0:o.is_ask_uk_funds_protection,this.is_self_exclusion_max_turnover_set=null==o?void 0:o.is_self_exclusion_max_turnover_set,this.is_ask_authentication=null==o?void 0:o.is_ask_authentication,this.is_ask_financial_risk_approval=null==o?void 0:o.is_ask_financial_risk_approval}},{key:"handleCashierError",value:function(e){switch(e.code){case"ASK_TNC_APPROVAL":case"ASK_FIX_DETAILS":this.setErrorMessage(e,null,!0);break;case"ASK_UK_FUNDS_PROTECTION":this.setIsAskUkFundsProtection(!0);break;case"ASK_SELF_EXCLUSION_MAX_TURNOVER_SET":this.setIsSelfExclusionMaxTurnoverSet(!0);break;case"ASK_AUTHENTICATE":case"ASK_AGE_VERIFICATION":this.setIsAskAuthentication(!0);break;case"ASK_FINANCIAL_RISK_APPROVAL":this.setIsAskFinancialRiskApproval(!0);break;default:this.setErrorMessage(e),this.setIsAskUkFundsProtection(!1),this.setIsSelfExclusionMaxTurnoverSet(!1),this.setIsAskAuthentication(!1),this.setIsAskFinancialRiskApproval(!1)}}},{key:"setMessage",value:function(e){this.message=e}},{key:"setIsAskUkFundsProtection",value:function(e){this.is_ask_uk_funds_protection=e}},{key:"setIsSelfExclusionMaxTurnoverSet",value:function(e){this.is_self_exclusion_max_turnover_set=e}},{key:"setIsAskAuthentication",value:function(e){this.is_ask_authentication=e}},{key:"setIsAskFinancialRiskApproval",value:function(e){this.is_ask_financial_risk_approval=e}}],a&&m(r.prototype,a),o&&m(r,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){A(o,r,a,i,s,"next",e)}function s(e){A(o,r,a,i,s,"throw",e)}i(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(e){return e.startsWith("MX")},S=function(e,t){return t?u().createElement(l.Localize,{i18n_default_text:"Transfer from {{selected_value}} is not allowed, Please choose another account from dropdown",values:{selected_value:e}}):u().createElement(l.Localize,{i18n_default_text:"Transfer to {{selected_value}} is not allowed, Please choose another account from dropdown",values:{selected_value:e}})},B=function(){function n(r){var a=this,o=r.WS,i=r.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.accounts_list=[],this.container=f.containers.account_transfer,this.error=new y,this.has_no_account=!1,this.has_no_accounts_balance=!1,this.is_transfer_confirm=!1,this.is_transfer_successful=!1,this.is_mt5_transfer_in_progress=!1,this.minimum_fee=null,this.receipt={},this.selected_from={},this.selected_to={},this.account_transfer_amount="",this.transfer_fee=null,this.transfer_limit={},this.requestTransferBetweenAccounts=function(){var e=C(regeneratorRuntime.mark((function e(n){var r,o,i,s,c,u,l,h,d,f,_,p,m,y,v,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.amount,o=a.root_store,i=o.client,s=o.modules,c=o.common,u=s.cashier.general_store.setLoading,l=c.is_from_derivgo,h=i.is_logged_in,d=i.responseMt5LoginList,f=i.responseTradingPlatformAccountsList,_=i.setAccountStatus,p=i.setBalanceOtherAccounts,h){e.next=7;break}return e.abrupt("return",null);case 7:return u(!0),a.error.setErrorMessage(""),(m=a.selected_from.is_mt||a.selected_to.is_mt)&&a.setIsMT5TransferInProgress(!0),y=a.selected_from.currency,e.next=14,a.WS.authorized.transferBetweenAccounts(a.selected_from.value,a.selected_to.value,y,r);case 14:if(v=e.sent,!l&&v&&Array.isArray(v.accounts)&&(v.accounts=v.accounts.filter((function(e){return e.account_type!==t.CFD_PLATFORMS.DERIVEZ}))),m&&a.setIsMT5TransferInProgress(!1),!v.error){e.next=26;break}if("Fiat2CryptoTransferOverLimit"!==v.error.code){e.next=23;break}return e.next=21,a.WS.authorized.getAccountStatus();case 21:(b=e.sent).error||_(b.get_account_status);case 23:a.error.setErrorMessage(v.error),e.next=30;break;case 26:a.setReceiptTransfer({amount:(0,t.formatMoney)(y,r,!0)}),v.accounts.forEach((function(e){a.setBalanceByLoginId(e.loginid,e.balance),e.loginid===a.selected_from.value?a.setBalanceSelectedFrom(e.balance):e.loginid===a.selected_to.value&&a.setBalanceSelectedTo(e.balance),e.account_type===t.CFD_PLATFORMS.MT5&&Promise.all([a.WS.mt5LoginList(),a.WS.balanceAll()]).then((function(e){var t=k(e,2),n=t[0],r=t[1];d(n),p(r.balance)})),e.account_type===t.CFD_PLATFORMS.DXTRADE&&Promise.all([a.WS.tradingPlatformAccountsList(t.CFD_PLATFORMS.DXTRADE),a.WS.balanceAll()]).then((function(e){var t=k(e,2),n=t[0],r=t[1];f(n),p(r.balance)}))})),a.setAccountTransferAmount(null),a.setIsTransferConfirm(!0);case 30:return u(!1),e.abrupt("return",v);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.resetAccountTransfer=C(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setIsTransferConfirm(!1),a.setTransferLimit();case 2:case"end":return e.stop()}}),e)}))),(0,e.makeObservable)(this,{accounts_list:e.observable,container:e.observable,error:e.observable,has_no_account:e.observable,has_no_accounts_balance:e.observable,is_transfer_confirm:e.observable,is_transfer_successful:e.observable,is_mt5_transfer_in_progress:e.observable,minimum_fee:e.observable,receipt:e.observable,selected_from:e.observable,selected_to:e.observable,account_transfer_amount:e.observable,transfer_fee:e.observable,transfer_limit:e.observable,is_account_transfer_visible:e.computed,is_transfer_locked:e.computed,setBalanceByLoginId:e.action.bound,setBalanceSelectedFrom:e.action.bound,setBalanceSelectedTo:e.action.bound,onMountAccountTransfer:e.action.bound,setHasNoAccountsBalance:e.action.bound,setHasNoAccount:e.action.bound,setTransferFee:e.action.bound,setMinimumFee:e.action.bound,setTransferLimit:e.action.bound,sortAccountsTransfer:e.action.bound,setSelectedFrom:e.action.bound,setSelectedTo:e.action.bound,setAccounts:e.action.bound,setIsTransferConfirm:e.action.bound,setAccountTransferAmount:e.action.bound,setIsTransferSuccessful:e.action.bound,setIsMT5TransferInProgress:e.action.bound,setReceiptTransfer:e.action.bound,onChangeTransferFrom:e.action.bound,onChangeTransferTo:e.action.bound,resetAccountTransfer:e.action.bound,setTransferPercentageSelectorResult:e.action.bound,validateTransferFromAmount:e.action.bound,validateTransferToAmount:e.action.bound}),this.root_store=i,this.WS=o}var r,a,o,i,s;return r=n,a=[{key:"is_account_transfer_visible",get:function(){var e=this.root_store.client,t=e.has_maltainvest_account,n=e.landing_company_shortcode;return"im"!==e.residence&&("malta"!==n||t)}},{key:"is_transfer_locked",get:function(){var e=this.root_store.client,t=e.is_financial_account,n=e.is_financial_information_incomplete,r=e.is_trading_experience_incomplete;return!!e.account_status.status&&t&&(n||r)&&this.error.is_ask_financial_risk_approval}},{key:"setBalanceByLoginId",value:function(e,t){this.accounts_list.find((function(t){return e===t.value})).balance=t}},{key:"setBalanceSelectedFrom",value:function(e){this.selected_from.balance=e}},{key:"setBalanceSelectedTo",value:function(e){this.selected_to.balance=e}},{key:"onMountAccountTransfer",value:(s=C(regeneratorRuntime.mark((function e(){var n,r,a,o,i,s,c,u,l,h,d,f,_,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.root_store,r=n.client,a=n.common,o=n.modules,i=o.cashier.general_store,s=i.onMountCommon,c=i.setLoading,u=i.setOnRemount,l=r.active_accounts,h=r.is_logged_in,d=a.is_from_derivgo,c(!0),u(this.onMountAccountTransfer),e.next=8,s();case 8:return e.next=10,this.WS.wait("website_status");case 10:if(this.has_no_accounts_balance&&Object.keys(l).find((function(e){return!l[e].is_virtual&&l[e].balance}))&&this.setHasNoAccountsBalance(!1),!h){e.next=29;break}return e.next=15,this.WS.authorized.transferBetweenAccounts();case 15:if(!(_=e.sent).error){e.next=20;break}return this.error.setErrorMessage(_.error,this.onMountAccountTransfer),c(!1),e.abrupt("return");case 20:if(d||(_.accounts=_.accounts.filter((function(e){return e.account_type!==t.CFD_PLATFORMS.DERIVEZ}))),this.canDoAccountTransfer(_.accounts)){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,this.sortAccountsTransfer(_,d);case 25:this.setTransferFee(),this.setMinimumFee(),this.setTransferLimit(),(null===(f=this.accounts_list)||void 0===f?void 0:f.length)>0&&(p=sessionStorage.getItem("cfd_transfer_to_login_id"),sessionStorage.removeItem("cfd_transfer_to_login_id"),(m=this.accounts_list.find((function(e){return e.value===p})))&&(T(m.value)&&(m.error=S(m.value)),this.setSelectedTo(m)));case 29:c(!1);case 30:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"canDoAccountTransfer",value:function(e){var t=!0;return e.find((function(e){return+e.balance>0}))?this.setHasNoAccountsBalance(!1):(t=!1,this.setHasNoAccountsBalance(!0)),e.length<=1?(t=!1,this.setHasNoAccount(!0)):this.setHasNoAccount(!1),t||this.root_store.modules.cashier.general_store.setLoading(!1),t}},{key:"setHasNoAccountsBalance",value:function(e){this.has_no_accounts_balance=e}},{key:"setHasNoAccount",value:function(e){this.has_no_account=e}},{key:"setTransferFee",value:function(){var e=(0,t.getPropertyValue)((0,t.getCurrencies)(),[this.selected_from.currency,"transfer_between_accounts","fees",this.selected_to.currency]);this.transfer_fee=Number(e||0)}},{key:"setMinimumFee",value:function(){var e=(0,t.getDecimalPlaces)(this.selected_from.currency);this.minimum_fee=(1/Math.pow(10,e)).toFixed(e)}},{key:"setTransferLimit",value:function(){var e,n=this.selected_from.is_mt||this.selected_to.is_mt,r=this.selected_from.is_dxtrade||this.selected_to.is_dxtrade,a=this.selected_from.is_derivez||this.selected_to.is_derivez;e=n?"limits_mt5":r?"limits_dxtrade":a?"limits_derivez":"limits";var o=(0,t.getPropertyValue)((0,t.getCurrencies)(),[this.selected_from.currency,"transfer_between_accounts",e]),i=this.selected_from.balance,s=(0,t.getDecimalPlaces)(this.selected_from.currency);this.transfer_limit={max:null==o||!o.max||+i>=((null==o?void 0:o.min)||0)&&+i<=(null==o?void 0:o.max)?i:null==o?void 0:o.max.toFixed(s),min:null!=o&&o.min?(+(null==o?void 0:o.min)).toFixed(s):null}}},{key:"sortAccountsTransfer",value:(i=C(regeneratorRuntime.mark((function e(n,r){var a,o,i,s,c,u,l,h,d,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,this.WS.authorized.transferBetweenAccounts();case 4:e.t0=e.sent;case 5:if(s=e.t0,this.accounts_list.length){e.next=9;break}if(!s.error){e.next=9;break}return e.abrupt("return");case 9:return!r&&s&&Array.isArray(s.accounts)&&(s.accounts=s.accounts.filter((function(e){return e.account_type!==t.CFD_PLATFORMS.DERIVEZ}))),e.next=12,this.WS.storage.mt5LoginList();case 12:if(e.t2=a=e.sent,e.t1=null===e.t2,e.t1){e.next=16;break}e.t1=void 0===a;case 16:if(!e.t1){e.next=20;break}e.t3=void 0,e.next=21;break;case 20:e.t3=a.mt5_login_list;case 21:return c=e.t3,e.next=24,this.WS.tradingPlatformAccountsList(t.CFD_PLATFORMS.DXTRADE);case 24:if(e.t5=o=e.sent,e.t4=null===e.t5,e.t4){e.next=28;break}e.t4=void 0===o;case 28:if(!e.t4){e.next=32;break}e.t6=void 0,e.next=33;break;case 32:e.t6=o.trading_platform_accounts;case 33:return u=e.t6,e.next=36,this.WS.tradingPlatformAccountsList(t.CFD_PLATFORMS.DERIVEZ);case 36:if(e.t8=i=e.sent,e.t7=null===e.t8,e.t7){e.next=40;break}e.t7=void 0===i;case 40:if(!e.t7){e.next=44;break}e.t9=void 0,e.next=45;break;case 44:e.t9=i.trading_platform_accounts;case 45:l=e.t9,h=s.accounts.map((function(e){if(e.account_type===t.CFD_PLATFORMS.MT5&&Array.isArray(c)&&c.length){var n=c.find((function(t){return t.login===e.loginid}));return void 0===n?e:b(b(b({},e),n),{},{account_type:t.CFD_PLATFORMS.MT5})}if(e.account_type===t.CFD_PLATFORMS.DXTRADE&&Array.isArray(u)&&u.length){var r=u.find((function(t){return t.account_id===e.loginid}));return void 0===r?e:b(b(b({},e),r),{},{account_type:t.CFD_PLATFORMS.DXTRADE})}if(e.account_type===t.CFD_PLATFORMS.DERIVEZ&&Array.isArray(l)&&l.length){var a=l.find((function(t){return t.login===e.loginid}));return void 0===a?e:b(b(b({},e),a),{},{account_type:t.CFD_PLATFORMS.DERIVEZ})}return e})),s.accounts.length>1&&h.sort((function(e,n){var r=e.account_type===t.CFD_PLATFORMS.MT5,a=n.account_type===t.CFD_PLATFORMS.MT5,o=e.account_type===t.CFD_PLATFORMS.DERIVEZ,i=n.account_type===t.CFD_PLATFORMS.DERIVEZ,s=!r&&(0,t.isCryptocurrency)(e.currency),c=!a&&(0,t.isCryptocurrency)(n.currency),u=!r&&!s,l=!a&&!c;return r&&a?"gaming"===e.market_type||"synthetic"===e.market_type?-1:"financial"===e.sub_account_type?"gaming"===n.market_type||"synthetic"===n.market_type?1:-1:1:s&&i||u&&i||o&&a?-1:s&&c||u&&l?e.currency<n.currency?-1:1:s&&a||u&&c||u&&a||r?-1:1})),d=[],this.setSelectedTo({}),h.forEach((function(e){var n,r,a,o,i,s,c={mt5:{name:"Deriv MT5",icon:"IcMt5"},dxtrade:{name:"Deriv X",icon:"IcDxtrade"},derivez:{name:"Deriv EZ",icon:"IcDerivez"}},u=Object.keys(c).includes(e.account_type),l=null===(n=c[e.account_type])||void 0===n?void 0:n.name,h=e.account_type===t.CFD_PLATFORMS.DERIVEZ?"".concat(null===(r=c[e.account_type])||void 0===r?void 0:r.icon):"".concat(null===(a=c[e.account_type])||void 0===a?void 0:a.icon,"-").concat((0,t.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:f.root_store.client.is_eu})),_=e.landing_company_short&&"svg"!==e.landing_company_short&&"bvi"!==e.landing_company_short?(null===(o=e.landing_company_short)||void 0===o?void 0:o.charAt(0).toUpperCase())+(null===(i=e.landing_company_short)||void 0===i?void 0:i.slice(1)):null===(s=e.landing_company_short)||void 0===s?void 0:s.toUpperCase(),p=b({text:u?"mt5"===e.account_type?"".concat((0,t.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:f.root_store.client.is_eu})," ").concat(f.root_store.client.is_eu?"":_):"".concat(l," ").concat((0,t.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:f.root_store.client.is_eu,is_transfer_form:!0})):(0,t.getCurrencyDisplayCode)("eUSDT"!==e.currency?e.currency.toUpperCase():e.currency),value:e.loginid,balance:e.balance,currency:e.currency,is_crypto:(0,t.isCryptocurrency)(e.currency),is_mt:e.account_type===t.CFD_PLATFORMS.MT5,is_dxtrade:e.account_type===t.CFD_PLATFORMS.DXTRADE,is_derivez:e.account_type===t.CFD_PLATFORMS.DERIVEZ},u&&{platform_icon:h,status:null==e?void 0:e.status,market_type:(0,t.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:e.account_type,is_eu:f.root_store.client.is_eu})});e.loginid===f.root_store.client.loginid?(T(p.value)&&(p.error=S(p.value,!0)),f.setSelectedFrom(p)):(0,t.isEmptyObject)(f.selected_to)&&(T(p.value)&&(p.error=S(p.value)),f.setSelectedTo(p)),d.push(p)})),this.setAccounts(d);case 52:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"setSelectedFrom",value:function(e){this.selected_from=e}},{key:"setSelectedTo",value:function(e){this.selected_to=e}},{key:"setAccounts",value:function(e){this.accounts_list=e}},{key:"setIsTransferConfirm",value:function(e){this.is_transfer_confirm=e}},{key:"setAccountTransferAmount",value:function(e){this.account_transfer_amount=e}},{key:"setIsTransferSuccessful",value:function(e){this.is_transfer_successful=e}},{key:"setIsMT5TransferInProgress",value:function(e){this.is_mt5_transfer_in_progress=e}},{key:"setReceiptTransfer",value:function(e){var t=e.amount;this.receipt={amount_transferred:t}}},{key:"onChangeTransferFrom",value:function(e){var t=e.target;this.error.setErrorMessage(""),this.selected_from.error="";var n=this.accounts_list.find((function(e){return e.value===t.value}));if(n.value===this.selected_to.value)this.onChangeTransferTo({target:{value:this.selected_from.value}});else if(n.is_mt&&this.selected_to.is_mt||n.is_dxtrade&&this.selected_to.is_dxtrade||n.is_dxtrade&&(this.selected_to.is_mt||this.selected_to.is_derivez)||n.is_mt&&(this.selected_to.is_dxtrade||this.selected_to.is_derivez)||n.is_derivez&&this.selected_to.is_derivez||n.is_derivez&&(this.selected_to.is_dxtrade||this.selected_to.is_mt)){var r=this.accounts_list.find((function(e){return!e.is_mt&&!e.is_dxtrade&&!e.is_derivez}));this.onChangeTransferTo({target:{value:r.value}})}T(n.value)&&(n.error=S(n.value,!0)),this.selected_from=n,this.setTransferFee(),this.setMinimumFee(),this.setTransferLimit()}},{key:"onChangeTransferTo",value:function(e){var t=e.target;this.error.setErrorMessage(""),this.selected_to.error="";var n=this.accounts_list;this.selected_to=n.find((function(e){return e.value===t.value}))||{},T(this.selected_to.value)&&(this.selected_to.error=S(this.selected_to.value)),this.setTransferFee(),this.setMinimumFee(),this.setTransferLimit()}},{key:"setTransferPercentageSelectorResult",value:function(e){var t=this.root_store.modules.cashier,n=t.crypto_fiat_converter,r=t.general_store,a=this.selected_from.currency,o=this.selected_to.currency;e>0||0==+this.selected_from.balance?(n.setConverterFromAmount(e),this.validateTransferFromAmount(),n.onChangeConverterFromAmount({target:{value:e}},a,o)):n.resetConverter(),n.setIsTimerVisible(!1),r.percentageSelectorSelectionStatus(!1)}},{key:"validateTransferFromAmount",value:function(){var e=this.root_store.modules.cashier.crypto_fiat_converter,n=e.converter_from_amount,r=e.setConverterFromError;if(n){var a=(0,t.validNumber)(n,{type:"float",decimals:(0,t.getDecimalPlaces)(this.selected_from.currency),min:this.transfer_limit.min,max:this.transfer_limit.max}),o=a.is_ok,i=a.message;o?+this.selected_from.balance<+n?r((0,l.localize)("Insufficient funds")):r(""):r(i)}else r((0,l.localize)("This field is required."))}},{key:"validateTransferToAmount",value:function(){var e=this.root_store.modules.cashier.crypto_fiat_converter,n=e.converter_to_amount,r=e.setConverterToError;if(n){var a=this.selected_to.currency,o=(0,t.validNumber)(n,{type:"float",decimals:(0,t.getDecimalPlaces)(a)}),i=o.is_ok,s=o.message;r(i?"":s)}}}],a&&P(r.prototype,a),o&&P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function M(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function E(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){M(o,r,a,i,s,"next",e)}function s(e){M(o,r,a,i,s,"throw",e)}i(void 0)}))}}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function n(t){var r=t.WS,a=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.converter_from_amount="",this.converter_to_amount="",this.converter_from_error="",this.converter_to_error="",this.is_timer_visible=!1,(0,e.makeObservable)(this,{converter_from_amount:e.observable,converter_to_amount:e.observable,converter_from_error:e.observable,converter_to_error:e.observable,is_timer_visible:e.observable,setConverterFromAmount:e.action.bound,setConverterToAmount:e.action.bound,setConverterFromError:e.action.bound,setConverterToError:e.action.bound,setIsTimerVisible:e.action.bound,resetTimer:e.action.bound,getExchangeRate:e.action.bound,validateFromAmount:e.action.bound,validateToAmount:e.action.bound,onChangeConverterFromAmount:e.action.bound,onChangeConverterToAmount:e.action.bound,resetConverter:e.action.bound}),this.root_store=a,this.WS=r}var r,a,o,i,s,c;return r=n,a=[{key:"setConverterFromAmount",value:function(e){this.converter_from_amount=e}},{key:"setConverterToAmount",value:function(e){this.converter_to_amount=e}},{key:"setConverterFromError",value:function(e){this.converter_from_error=e}},{key:"setConverterToError",value:function(e){this.converter_to_error=e}},{key:"setIsTimerVisible",value:function(e){this.is_timer_visible=e}},{key:"resetTimer",value:function(){this.setIsTimerVisible(!1)}},{key:"getExchangeRate",value:(c=E(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.send({exchange_rates:1,base_currency:t});case 2:return r=e.sent,a=r.exchange_rates,e.abrupt("return",a.rates[n]);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"validateFromAmount",value:function(){var e=this.root_store.modules.cashier,t=e.account_transfer,n=e.general_store,r=e.withdraw;n.active_container===t.container?t.validateTransferFromAmount():r.validateWithdrawFromAmount()}},{key:"validateToAmount",value:function(){var e=this.root_store.modules.cashier,t=e.account_transfer,n=e.general_store,r=e.withdraw;n.active_container===t.container?t.validateTransferToAmount():r.validateWithdrawToAmount()}},{key:"onChangeConverterFromAmount",value:(s=E(regeneratorRuntime.mark((function e(n,r,a){var o,i,s,c,u,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.target,i=this.root_store.modules.cashier,s=i.account_transfer,c=i.general_store,this.resetTimer(),!o.value){e.next=27;break}if(this.setConverterFromAmount(o.value),this.validateFromAmount(),c.percentageSelectorSelectionStatus(!0),c.calculatePercentage(),!this.converter_from_error){e.next=15;break}this.setConverterToAmount(""),this.setConverterToError(""),this.setIsTimerVisible(!1),s.setAccountTransferAmount(""),e.next=25;break;case 15:return e.next=17,this.getExchangeRate(r,a);case 17:u=e.sent,l=(0,t.getDecimalPlaces)(a),+(h=(u*o.value).toFixed(l))||this.converter_from_amount?this.setConverterToAmount(h):this.setConverterToAmount(""),this.validateToAmount(),this.setConverterToError(""),this.setIsTimerVisible(!0),s.setAccountTransferAmount(o.value);case 25:e.next=28;break;case 27:this.resetConverter();case 28:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return s.apply(this,arguments)})},{key:"onChangeConverterToAmount",value:(i=E(regeneratorRuntime.mark((function e(n,r,a){var o,i,s,c,u,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.target,i=this.root_store.modules.cashier,s=i.account_transfer,c=i.general_store,this.resetTimer(),!o.value){e.next=25;break}if(this.setConverterToAmount(o.value),this.validateToAmount(),!this.converter_to_error){e.next=13;break}this.setConverterFromAmount(""),this.setConverterFromError(""),this.setIsTimerVisible(!1),s.setAccountTransferAmount(""),e.next=23;break;case 13:return e.next=15,this.getExchangeRate(r,a);case 15:u=e.sent,l=(0,t.getDecimalPlaces)(a),+(h=(u*o.value).toFixed(l))||this.converter_to_amount?this.setConverterFromAmount(h):this.setConverterFromAmount(""),c.percentageSelectorSelectionStatus(!0),c.calculatePercentage(),this.validateFromAmount(),this.converter_from_error?(this.setIsTimerVisible(!1),s.setAccountTransferAmount("")):(this.setConverterFromError(""),this.setIsTimerVisible(!0),s.setAccountTransferAmount(h));case 23:e.next=26;break;case 25:this.resetConverter();case 26:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return i.apply(this,arguments)})},{key:"resetConverter",value:function(){this.setConverterFromAmount(""),this.setConverterToAmount(""),this.setConverterFromError(""),this.setConverterToError(""),this.setIsTimerVisible(!1),this.root_store.modules.cashier.general_store.percentageSelectorSelectionStatus(!0)}}],a&&I(r.prototype,a),o&&I(r,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function x(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function t(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.WS=n,this.root_store=r,this.container=f.containers.deposit,this.error=new y,(0,e.makeObservable)(this,{container:e.observable,error:e.observable,onMountDeposit:e.action.bound}),this.root_store=r,this.WS=n}var n,r,a,o,i;return n=t,r=[{key:"onMountDeposit",value:(o=regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u,l,h,d,f,_,p,m,y,v,b,g,k,w,A;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.root_store,r=n.client,a=n.modules,o=a.cashier.general_store,i=o.active_container,s=o.is_crypto,c=o.onMountCommon,u=o.setLoading,l=o.setOnRemount,h=a.cashier.iframe,d=h.checkIframeLoaded,f=h.clearTimeoutCashierUrl,_=h.is_session_timeout,p=h.setContainerHeight,m=h.setIframeUrl,y=h.setSessionTimeout,v=h.setTimeoutCashierUrl,b=r.account_status,g=r.is_virtual,k=r.updateAccountStatus,w=i,l(this.onMountDeposit),e.next=8,c();case 8:if(this.error.setErrorMessage({code:"",message:""},null,!1),p(0),_){e.next=13;break}return d(),e.abrupt("return");case 13:if(m(""),!g){e.next=17;break}return u(!1),e.abrupt("return");case 17:if(s){e.next=35;break}return e.next=20,this.WS.authorized.cashier(i,{verification_code:"undefined"});case 20:if(A=e.sent,w===i){e.next=24;break}return u(!1),e.abrupt("return");case 24:if(!A.error){e.next=30;break}this.error.handleCashierError(A.error),y(!0),f(),e.next=35;break;case 30:return e.next=32,d();case 32:m(A.cashier),y(!1),v();case 35:if(null!=b&&null!==(t=b.status)&&void 0!==t&&t.includes("deposit_attempt")){e.next=38;break}return e.next=38,k();case 38:u(!1);case 39:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var a=o.apply(e,t);function i(e){x(a,n,r,i,s,"next",e)}function s(e){x(a,n,r,i,s,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})}],r&&R(n.prototype,r),a&&R(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.confirm_button_text="",this.error_message="",this.has_no_close_icon=!1,this.should_show=!1,this.should_not_show_title=!1,(0,e.makeObservable)(this,{confirm_button_text:e.observable,error_message:e.observable,has_no_close_icon:e.observable,should_show:e.observable,should_not_show_title:e.observable,setShouldShow:e.action.bound,setErrorMessage:e.action.bound,setConfirmButtonText:e.action.bound,setShouldNotShowTitle:e.action.bound,setHasNoCloseIcon:e.action.bound,openReadMoreDialog:e.action.bound,reset:e.action.bound})}var n,r,a;return n=t,(r=[{key:"setShouldShow",value:function(e){this.should_show=e}},{key:"setErrorMessage",value:function(e){this.error_message=e,this.setShouldShow(!0)}},{key:"setConfirmButtonText",value:function(e){this.confirm_button_text=e}},{key:"setShouldNotShowTitle",value:function(e){this.should_not_show_title=e}},{key:"setHasNoCloseIcon",value:function(e){this.has_no_close_icon=e}},{key:"openReadMoreDialog",value:function(e,t){this.setErrorMessage(e),this.setConfirmButtonText(t),this.setHasNoCloseIcon(!0),this.setShouldNotShowTitle(!0)}},{key:"reset",value:function(){this.setConfirmButtonText(""),this.setShouldNotShowTitle(!1),this.setHasNoCloseIcon(!1)}}])&&F(n.prototype,r),a&&F(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}(),D=h("@deriv/components");const W=function(e){var t=e.p2p_notification_count;return u().createElement(u().Fragment,null,u().createElement(D.Icon,{icon:"IcCashier",className:"header__icon"}),!!t&&u().createElement(D.Counter,{className:"cashier__counter",count:t}))};function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e,t){var n=t;return t&&!Array.isArray(t)&&(n=[t]),e.replace(/\[_(\d+)]/g,(function(e,t){return n[+t-1]}))},z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=n?e.replace(/[' ',-]/g,"").toLowerCase():e,a=Object.entries(t).reduce((function(e,t){var n=j(t,2),a=n[0];return n[1].some((function(e){return e===r}))?a:e}),"");return n?a:a||e};function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}return function(e,t,n){t&&V(e.prototype,t),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"add",value:function(e,t){this.has(e)||(this.errors[e]=[]),-1===this.errors[e].indexOf(t)&&this.errors[e].push(t)}},{key:"all",value:function(){return this.errors}},{key:"first",value:function(e){return this.has(e)?this.errors[e][0]:null}},{key:"get",value:function(e){return this.has(e)?this.errors[e]:[]}},{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.errors,e)}}]),e}();const K=G;function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Y=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;q(this,e),this.input=t,this.rules=n,this.store=r,this.errors=new K,this.error_count=0}return function(e,t,n){t&&Z(e.prototype,t),n&&Z(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"addFailure",value:function(e,n,r){var a=r||n.options.message||(0,t.getPreBuildDVRs)()[n.name].message();"length"===n.name?a=H(a,[n.options.min===n.options.max?n.options.min:"".concat(n.options.min,"-").concat(n.options.max)]):"min"===n.name?a=H(a,[n.options.min]):"not_equal"===n.name&&(a=H(a,[n.options.name1,n.options.name2])),this.errors.add(e,a),this.error_count++}},{key:"check",value:function(){var t=this;return Object.keys(this.input).forEach((function(n){Object.prototype.hasOwnProperty.call(t.rules,n)&&t.rules[n].forEach((function(r){var a=e.getRuleObject(r);if((a.validator||"function"==typeof a.validator)&&(!a.options.condition||a.options.condition(t.store))&&(""!==t.input[n]||"req"===a.name)){var o,i;if("number"===a.name){var s=a.validator(t.input[n],a.options,t.store,t.input);o=s.is_ok,i=s.message}else o=a.validator(t.input[n],a.options,t.store,t.input);o||t.addFailure(n,a,i)}}))})),!this.error_count}},{key:"isPassed",value:function(){return this.check()}}],[{key:"getRuleObject",value:function(e){var n="string"==typeof e,r={name:n?e:e[0],options:n?{}:e[1]||{}};return r.validator="custom"===r.name?e[1].func:(0,t.getPreBuildDVRs)()[r.name].func,r}}]),e}();const J=Y;function X(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){X(o,r,a,i,s,"next",e)}function s(e){X(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function n(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(this,n),this.validation_errors={},this.validation_rules={},this.preSwitchAccountDisposer=null,this.pre_switch_account_listener=null,this.switchAccountDisposer=null,this.switch_account_listener=null,this.logoutDisposer=null,this.logout_listener=null,this.clientInitDisposer=null,this.client_init_listener=null,this.networkStatusChangeDisposer=null,this.network_status_change_listener=null,this.themeChangeDisposer=null,this.theme_change_listener=null,this.realAccountSignupEndedDisposer=null,this.real_account_signup_ended_listener=null,this.partial_fetch_time=0,(0,e.makeObservable)(this,{validation_errors:e.observable,validation_rules:e.observable,partial_fetch_time:e.observable,retrieveFromStorage:e.action,setValidationErrorMessages:e.action,setValidationRules:e.action,addRule:e.action,validateProperty:e.action,validateAllProperties:e.action,onSwitchAccount:e.action.bound,onPreSwitchAccount:e.action.bound,onLogout:e.action.bound,onClientInit:e.action.bound,onNetworkStatusChange:e.action.bound,onThemeChange:e.action.bound,onRealAccountSignupEnd:e.action.bound,disposePreSwitchAccount:e.action.bound,disposeSwitchAccount:e.action.bound,disposeLogout:e.action.bound,disposeClientInit:e.action.bound,disposeNetworkStatusChange:e.action.bound,disposeThemeChange:e.action.bound,disposeRealAccountSignupEnd:e.action.bound,onUnmount:e.action.bound,assertHasValidCache:e.action.bound});var a=r.root_store,o=r.local_storage_properties,i=r.session_storage_properties,s=r.validation_rules,c=r.store_name;Object.defineProperty(this,"root_store",{enumerable:!1,writable:!0}),Object.defineProperty(this,"local_storage_properties",{enumerable:!1,writable:!0}),Object.defineProperty(this,"session_storage_properties",{enumerable:!1,writable:!0});var u=o&&o.length||i&&i.length;if(u){if(!c)throw new Error("store_name is required for local/session storage");Object.defineProperty(this,"store_name",{value:c,enumerable:!1,writable:!1})}this.root_store=a,this.local_storage_properties=o||[],this.session_storage_properties=i||[],setTimeout((function(){t.setValidationRules(s),t.setupReactionForLocalStorage(),t.setupReactionForSessionStorage(),t.retrieveFromStorage()}),0)}return function(e,t,n){t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"getSnapshot",value:function(n){var r=(0,e.toJS)(this);return(0,t.isEmptyObject)(this.root_store)||(r.root_store=this.root_store),n&&n.length&&(r=n.reduce((function(e,t){return Object.assign(e,te({},t,r[t]))}),{})),r}},{key:"setupReactionForLocalStorage",value:function(){var t=this;this.local_storage_properties.length&&(0,e.reaction)((function(){return t.local_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.local_storage_properties,n.STORAGES.LOCAL_STORAGE)}))}},{key:"setupReactionForSessionStorage",value:function(){var t=this;this.session_storage_properties.length&&(0,e.reaction)((function(){return t.session_storage_properties.map((function(e){return t[e]}))}),(function(){return t.saveToStorage(t.session_storage_properties,n.STORAGES.SESSION_STORAGE)}))}},{key:"saveToStorage",value:function(e,t){var r=JSON.stringify(this.getSnapshot(e),(function(e,t){if(null!==t)return t}));t===n.STORAGES.LOCAL_STORAGE?localStorage.setItem(this.store_name,r):t===n.STORAGES.SESSION_STORAGE&&sessionStorage.setItem(this.store_name,r)}},{key:"retrieveFromStorage",value:function(){var e=this,t=JSON.parse(localStorage.getItem(this.store_name,{})),n=JSON.parse(sessionStorage.getItem(this.store_name,{})),r=ee(ee({},t),n);Object.keys(r).forEach((function(t){return e[t]=r[t]}))}},{key:"setValidationErrorMessages",value:function(e,t){var n=this;this.validation_errors[e]&&!n.validation_errors[e].filter((function(e){return!t.includes(e)})).concat(t.filter((function(t){return!n.validation_errors[e].includes(t)}))).length||(this.validation_errors[e]=t)}},{key:"setValidationRules",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){e.addRule(n,t[n])}))}},{key:"addRule",value:function(t,n){var r=this;this.validation_rules[t]=n,(0,e.intercept)(this,t,(function(e){return r.validateProperty(t,e.newValue),e}))}},{key:"validateProperty",value:function(e,t){var n=this,r=this.validation_rules[e].trigger,a=te({},e,void 0!==t?t:this[e]),o=te({},e,this.validation_rules[e].rules||[]);r&&Object.hasOwnProperty.call(this,r)&&(a[r]=this[r],o[r]=this.validation_rules[r].rules||[]);var i=new J(a,o,this);i.isPassed(),Object.keys(a).forEach((function(e){n.setValidationErrorMessages(e,i.errors.get(e))}))}},{key:"validateAllProperties",value:function(){var e=this,t=Object.keys(this.validation_rules),n=Object.keys(this.validation_errors);t.forEach((function(t){e.validateProperty(t,e[t])})),n.forEach((function(n){t.includes(n)||delete e.validation_errors[n]}))}},{key:"onSwitchAccount",value:function(n){var r=this;n&&(this.switch_account_listener=n,this.switchAccountDisposer=(0,e.when)((function(){return r.root_store.client.switch_broadcast}),(function(){try{var e=r.switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Switching account listeners are required to return a promise.");e.then((function(){r.root_store.client.switchEndSignal(),r.onSwitchAccount(r.switch_account_listener)}))}catch(e){(0,t.isProduction)()||console.error(e)}})))}},{key:"onPreSwitchAccount",value:function(n){var r=this;n&&(this.pre_switch_account_listener=n,this.preSwitchAccountDisposer=(0,e.when)((function(){return r.root_store.client.pre_switch_broadcast}),(function(){try{var e=r.pre_switch_account_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Pre-switch account listeners are required to return a promise.");e.then((function(){r.root_store.client.setPreSwitchAccount(!1),r.onPreSwitchAccount(r.pre_switch_account_listener)}))}catch(e){(0,t.isProduction)()||console.error(e)}})))}},{key:"onLogout",value:function(n){var r=this;this.logoutDisposer=(0,e.when)((function(){return r.root_store.client.has_logged_out}),$(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=r.logout_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){r.root_store.client.setLogout(!1),r.onLogout(r.logout_listener)})),e.next=7;break;case 6:throw new Error("Logout listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,t.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.logout_listener=n}},{key:"onClientInit",value:function(n){var r=this;this.clientInitDisposer=(0,e.when)((function(){return r.root_store.client.initialized_broadcast}),$(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=r.client_init_listener())||!n.then||"function"!=typeof n.then){e.next=6;break}n.then((function(){r.root_store.client.setInitialized(!1),r.onClientInit(r.client_init_listener)})),e.next=7;break;case 6:throw new Error("Client init listeners are required to return a promise.");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,t.isProduction)()||console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))),this.client_init_listener=n}},{key:"onNetworkStatusChange",value:function(n){var r=this;this.networkStatusChangeDisposer=(0,e.reaction)((function(){return r.root_store.common.is_network_online}),(function(e){try{r.network_status_change_listener(e)}catch(e){(0,t.isProduction)()||console.error(e)}})),this.network_status_change_listener=n}},{key:"onThemeChange",value:function(n){var r=this;this.themeChangeDisposer=(0,e.reaction)((function(){return r.root_store.ui.is_dark_mode_on}),(function(e){try{r.theme_change_listener(e)}catch(e){(0,t.isProduction)()||console.error(e)}})),this.theme_change_listener=n}},{key:"onRealAccountSignupEnd",value:function(n){var r=this;this.realAccountSignupEndedDisposer=(0,e.when)((function(){return r.root_store.ui.has_real_account_signup_ended}),(function(){try{var e=r.real_account_signup_ended_listener();if(!e||!e.then||"function"!=typeof e.then)throw new Error("Real account signup listeners are required to return a promise.");e.then((function(){r.root_store.ui.setRealAccountSignupEnd(!1),r.onRealAccountSignupEnd(r.real_account_signup_ended_listener)}))}catch(e){(0,t.isProduction)()||console.error(e)}})),this.real_account_signup_ended_listener=n}},{key:"disposePreSwitchAccount",value:function(){"function"==typeof this.preSwitchAccountDisposer&&this.preSwitchAccountDisposer(),this.pre_switch_account_listener=null}},{key:"disposeSwitchAccount",value:function(){"function"==typeof this.switchAccountDisposer&&this.switchAccountDisposer(),this.switch_account_listener=null}},{key:"disposeLogout",value:function(){"function"==typeof this.logoutDisposer&&this.logoutDisposer(),this.logout_listener=null}},{key:"disposeClientInit",value:function(){"function"==typeof this.clientInitDisposer&&this.clientInitDisposer(),this.client_init_listener=null}},{key:"disposeNetworkStatusChange",value:function(){"function"==typeof this.networkStatusChangeDisposer&&this.networkStatusChangeDisposer(),this.network_status_change_listener=null}},{key:"disposeThemeChange",value:function(){"function"==typeof this.themeChangeDisposer&&this.themeChangeDisposer(),this.theme_change_listener=null}},{key:"disposeRealAccountSignupEnd",value:function(){"function"==typeof this.realAccountSignupEndedDisposer&&this.realAccountSignupEndedDisposer(),this.real_account_signup_ended_listener=null}},{key:"onUnmount",value:function(){this.disposePreSwitchAccount(),this.disposeSwitchAccount(),this.disposeLogout(),this.disposeClientInit(),this.disposeNetworkStatusChange(),this.disposeThemeChange(),this.disposeRealAccountSignupEnd()}},{key:"assertHasValidCache",value:function(e){if(this.root_store.client.loginid!==e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(e){return e()})),this.partial_fetch_time=!1}}}]),n}();function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ie(o,r,a,i,s,"next",e)}function s(e){ie(o,r,a,i,s,"throw",e)}i(void 0)}))}}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ue(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var a=fe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return de(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fe(e)}ae.STORAGES=Object.freeze({LOCAL_STORAGE:Symbol("LOCAL_STORAGE"),SESSION_STORAGE:Symbol("SESSION_STORAGE")});var _e=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ue(e,t)}(h,n);var r,a,o,i,s,c=le(h);function h(t){var n,r=t.root_store,a=t.WS;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(n=c.call(this,{root_store:r})).is_loading=!1,n.is_p2p_visible=!1,n.p2p_notification_count=0,n.cashier_route_tab_index=0,n.is_deposit=!1,n.should_show_all_available_currencies=!1,n.is_cashier_onboarding=!0,n.deposit_target="",n.should_set_currency_modal_title_change=!1,n.p2p_advertiser_error=void 0,n.has_set_currency=!1,n.should_percentage_reset=!1,n.percentage=0,n.show_p2p_in_cashier_onboarding=!1,n.onRemount=function(){},n.p2p_completed_orders=null,n.active_container=f.containers.deposit,n.is_populating_values=!1,(0,e.makeObservable)(de(n),{is_loading:e.observable,is_p2p_visible:e.observable,p2p_notification_count:e.observable,cashier_route_tab_index:e.observable,is_deposit:e.observable,should_show_all_available_currencies:e.observable,is_cashier_onboarding:e.observable,deposit_target:e.observable,should_set_currency_modal_title_change:e.observable,p2p_advertiser_error:e.observable,has_set_currency:e.observable,should_percentage_reset:e.observable,percentage:e.observable,show_p2p_in_cashier_onboarding:e.observable,onRemount:e.observable,p2p_completed_orders:e.observable,setOnRemount:e.action.bound,is_crypto:e.computed,is_p2p_enabled:e.computed,p2p_unseen_notifications:e.computed,showP2pInCashierOnboarding:e.action.bound,attachCashierToMenu:e.action.bound,replaceCashierMenuOnclick:e.action.bound,setHasSetCurrency:e.action.bound,changeSetCurrencyModalTitle:e.action.bound,onMountCashierOnboarding:e.action.bound,calculatePercentage:e.action.bound,percentageSelectorSelectionStatus:e.action.bound,setIsDeposit:e.action.bound,setShouldShowAllAvailableCurrencies:e.action.bound,setIsCashierOnboarding:e.action.bound,setDepositTarget:e.action.bound,continueRoute:e.action.bound,setAccountSwitchListener:e.action.bound,init:e.action.bound,getAdvertizerError:e.action.bound,setP2pAdvertiserError:e.action.bound,checkP2pStatus:e.action.bound,setP2pCompletedOrders:e.action.bound,getP2pCompletedOrders:e.action.bound,onMountCommon:e.action.bound,setCashierTabIndex:e.action.bound,setNotificationCount:e.action.bound,setIsP2pVisible:e.action.bound,is_cashier_locked:e.computed,is_system_maintenance:e.computed,setLoading:e.action.bound,setActiveTab:e.action.bound}),n.WS=a,n.root_store=r,(0,e.when)((function(){return n.root_store.client.is_logged_in}),(function(){n.setHasSetCurrency(),n.attachCashierToMenu()})),n.has_set_currency||n.changeSetCurrencyModalTitle(),(0,e.reaction)((function(){return[n.root_store.client.switched,n.root_store.client.is_logged_in,n.root_store.client.currency]}),(function(){n.init()})),n}return function(e,t,n){t&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(h,[{key:"setOnRemount",value:function(e){this.onRemount=e}},{key:"is_crypto",get:function(){var e=this.root_store.client.currency;return!!e&&(0,t.isCryptocurrency)(e)}},{key:"is_p2p_enabled",get:function(){return this.is_p2p_visible&&!this.root_store.client.is_eu}},{key:"p2p_unseen_notifications",get:function(){var e=JSON.parse(localStorage.getItem("p2p_settings")||"{}")[this.root_store.client.loginid];return(0,t.isEmptyObject)(e)?0:e.notifications.filter((function(e){return!e.is_seen})).length}},{key:"showP2pInCashierOnboarding",value:function(){var e=this.root_store.client,n=e.account_list,r=e.is_virtual,a="RestrictedCountry"===this.p2p_advertiser_error,o=n.some((function(e){return"USD"===e.title})),i=n.some((function(e){return!(0,t.isCryptocurrency)(e.title)&&"Real"!==e.title}));this.show_p2p_in_cashier_onboarding=!(a||r||i&&!o)}},{key:"attachCashierToMenu",value:function(){var e=this.root_store,n=e.menu,r=e.ui;this.has_set_currency||this.setHasSetCurrency(),n.attach({id:"dt_cashier_tab",icon:u().createElement(W,{p2p_notification_count:this.p2p_notification_count}),text:function(){return(0,l.localize)("Cashier")},link_to:this.has_set_currency&&t.routes.cashier,onClick:!this.has_set_currency&&r.toggleSetCurrencyModal,login_only:!0})}},{key:"replaceCashierMenuOnclick",value:function(){var e=this.root_store,n=e.menu,r=e.ui;this.setHasSetCurrency(),n.update({id:"dt_cashier_tab",icon:u().createElement(W,{p2p_notification_count:this.p2p_notification_count}),text:function(){return(0,l.localize)("Cashier")},link_to:this.has_set_currency&&t.routes.cashier,onClick:!this.has_set_currency&&r.toggleSetCurrencyModal,login_only:!0},1)}},{key:"setHasSetCurrency",value:function(){var e=this.root_store.client,t=e.account_list,n=e.has_active_real_account;this.has_set_currency=t.filter((function(e){return!e.is_virtual})).some((function(e){return"Real"!==e.title}))||!n}},{key:"changeSetCurrencyModalTitle",value:function(){this.should_set_currency_modal_title_change=!0}},{key:"onMountCashierOnboarding",value:(s=se(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store.modules.cashier,a=r.account_prompt_dialog,o=r.payment_agent,this.has_set_currency||this.setHasSetCurrency(),this.setIsCashierOnboarding(!0),a.resetIsConfirmed(),this.setLoading(!0),null!==(t=o.all_payment_agent_list)&&void 0!==t&&null!==(n=t.paymentagent_list)&&void 0!==n&&n.list){e.next=10;break}return e.next=8,o.getAllPaymentAgentList();case 8:i=e.sent,o.setAllPaymentAgentList(i);case 10:this.setLoading(!1);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"calculatePercentage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount,t=this.root_store,n=t.client,r=t.modules,a=r.cashier.account_transfer;this.active_container===a.container?this.percentage=+(e/+a.selected_from.balance*100).toFixed(0):this.percentage=+(e/+n.balance*100).toFixed(0),isFinite(this.percentage)||(this.percentage=0)}},{key:"percentageSelectorSelectionStatus",value:function(e){this.should_percentage_reset=e,e&&(this.percentage=0)}},{key:"setIsDeposit",value:function(e){this.is_deposit=e}},{key:"setShouldShowAllAvailableCurrencies",value:function(e){this.should_show_all_available_currencies=e}},{key:"setIsCashierOnboarding",value:function(e){this.is_cashier_onboarding=e}},{key:"setDepositTarget",value:function(e){this.deposit_target=e}},{key:"continueRoute",value:function(){this.root_store.common.routeTo(this.deposit_target)}},{key:"setAccountSwitchListener",value:function(){this.disposeSwitchAccount(),this.onSwitchAccount(this.accountSwitcherListener)}},{key:"init",value:(i=se(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.root_store.modules.cashier){e.next=14;break}return t=this.root_store,n=t.client,r=n.is_logged_in,a=n.switched,o=t.modules,i=o.cashier,s=i.payment_agent,c=i.payment_agent_transfer,u=i.withdraw,e.next=5,this.WS.wait("get_settings");case 5:if(!r){e.next=14;break}return e.next=8,this.getAdvertizerError();case 8:if(a){e.next=14;break}return this.checkP2pStatus(),s.setPaymentAgentList().then(s.filterPaymentAgentList),c.is_payment_agent||c.checkIsPaymentAgent(),e.next=14,u.check10kLimit();case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getAdvertizerError",value:(o=se(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.p2pAdvertiserInfo();case 2:n=e.sent,this.setP2pAdvertiserError((0,t.getPropertyValue)(n,["error","code"]));case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setP2pAdvertiserError",value:function(e){this.p2p_advertiser_error=e}},{key:"checkP2pStatus",value:function(){var e=this.p2p_advertiser_error,t="RestrictedCountry"===e||"RestrictedCurrency"===e;this.setIsP2pVisible(!(t||this.root_store.client.is_virtual))}},{key:"setP2pCompletedOrders",value:function(e){this.p2p_completed_orders=e}},{key:"getP2pCompletedOrders",value:(a=se(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.send({p2p_order_list:1,active:0}).then((function(e){if(null==e||!e.error){var n=e.p2p_order_list;t.setP2pCompletedOrders(n.list)}}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onMountCommon",value:(r=se(regeneratorRuntime.mark((function e(n){var r,a,o,i,s,c,u,l,h,d,f,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store,a=r.client,o=r.common,i=r.modules,s=o.is_from_derivgo,c=o.routeTo,u=i.cashier,l=u.account_transfer,h=u.onramp,d=u.payment_agent,f=u.payment_agent_transfer,_=u.transaction_history,this.setNotificationCount(this.p2p_unseen_notifications),!a.is_logged_in){e.next=20;break}if(!this.is_populating_values){e.next=7;break}return e.abrupt("return");case 7:return this.is_populating_values=!0,n&&this.setOnRemount(this.onMountCommon),this.setLoading(!0),e.next=12,d.setPaymentAgentList();case 12:return e.next=14,d.filterPaymentAgentList();case 14:this.setLoading(!1),f.is_payment_agent||f.checkIsPaymentAgent(),l.accounts_list.length||l.sortAccountsTransfer(null,s),!d.is_payment_agent_visible&&window.location.pathname.endsWith(t.routes.cashier_pa)&&c(t.routes.cashier_deposit),!h.is_onramp_tab_visible&&window.location.pathname.endsWith(t.routes.cashier_onramp)&&c(t.routes.cashier_deposit),!_.is_crypto_transactions_visible&&window.location.pathname.endsWith(t.routes.cashier_crypto_transactions)&&(c(t.routes.cashier_deposit),_.setIsCryptoTransactionsVisible(!0),_.onMount());case 20:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setCashierTabIndex",value:function(e){this.cashier_route_tab_index=e}},{key:"setNotificationCount",value:function(e){this.p2p_notification_count=e}},{key:"setIsP2pVisible",value:function(e){var n;(this.is_p2p_visible=e,!e&&window.location.pathname.endsWith(t.routes.cashier_p2p))&&this.root_store.common.routeTo(null!==(n=this.root_store.modules.cashier.account_prompt_dialog.last_location)&&void 0!==n?n:t.routes.cashier_deposit)}},{key:"is_cashier_locked",get:function(){var e=this.root_store.client.account_status;return!(null==e||!e.status)&&e.status.some((function(e){return"cashier_locked"===e}))}},{key:"is_system_maintenance",get:function(){var e=this.root_store.client.account_status;return!(null==e||!e.cashier_validation)&&e.cashier_validation.some((function(e){return"system_maintenance"===e}))}},{key:"setLoading",value:function(e){this.is_loading=e}},{key:"setActiveTab",value:function(e){this.active_container=e}},{key:"accountSwitcherListener",value:function(){var e=this.root_store,n=e.client,r=e.modules.cashier,a=r.iframe,o=r.payment_agent,i=r.general_store.active_container,s=f.map_action[i];return n.setVerificationCode("",s),a.clearIframe(),this.payment_agent=o,1===o.active_tab_index&&window.location.pathname.endsWith(t.routes.cashier_pa)&&o.setActiveTab(1),this.is_populating_values=!1,this.onRemount(),Promise.resolve()}}]),h}(ae);function pe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ye=function(){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.root_store=n,this.iframe_height=0,this.iframe_url="",this.is_session_timeout=!0,this.onIframeLoaded=null,this.timeout_session=null,(0,e.makeObservable)(this,{iframe_height:e.observable,iframe_url:e.observable,is_session_timeout:e.observable,timeout_session:e.observable,setSessionTimeout:e.action.bound,checkIframeLoaded:e.action.bound,clearTimeoutCashierUrl:e.action.bound,setTimeoutCashierUrl:e.action.bound,setIframeUrl:e.action.bound,setContainerHeight:e.action.bound,clearIframe:e.action.bound}),this.root_store=n}var n,r;return function(e,t,n){t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(t,[{key:"setSessionTimeout",value:function(e){this.is_session_timeout=e,e&&this.removeOnIframeLoaded()}},{key:"checkIframeLoaded",value:(n=regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.root_store,n=t.modules,r=t.ui,this.removeOnIframeLoaded(),this.onIframeLoaded=function(e){/cashier|doughflow/.test(e.origin)&&(n.cashier.general_store.setLoading(!1),r.is_mobile?a.setContainerHeight(window.innerHeight-100):a.setContainerHeight(window.innerHeight-190))},window.addEventListener("message",this.onIframeLoaded,!1);case 4:case"end":return e.stop()}}),e,this)})),r=function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){pe(o,r,a,i,s,"next",e)}function s(e){pe(o,r,a,i,s,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})},{key:"removeOnIframeLoaded",value:function(){this.onIframeLoaded&&(window.removeEventListener("message",this.onIframeLoaded,!1),this.onIframeLoaded=null)}},{key:"clearTimeoutCashierUrl",value:function(){this.timeout_session&&clearTimeout(this.timeout_session)}},{key:"setTimeoutCashierUrl",value:function(e){var t=this;this.clearTimeoutCashierUrl(),e&&(this.timeout_session=setTimeout((function(){t.setSessionTimeout(!0)}),6e4))}},{key:"setIframeUrl",value:function(e){var t=this.root_store,n=t.client,r=t.ui;if(e){this.iframe_url="".concat(e,"&theme=").concat(r.is_dark_mode_on?"dark":"light");var a=this.root_store.modules.cashier.general_store.active_container;if(a in f.map_action){var o=a;n.setVerificationCode("",f.map_action[o])}}else this.iframe_url=e}},{key:"setContainerHeight",value:function(e){this.iframe_height=e}},{key:"clearIframe",value:function(){this.setContainerHeight(0),this.setIframeUrl(""),this.clearTimeoutCashierUrl(),this.setSessionTimeout(!0)}}]),t}();const ve=function(e){return{icon:{dark:"IcCashierBanxaDark",light:"IcCashierBanxaLight"},name:"Banxa",getDescription:function(){return(0,l.localize)("A fast and secure fiat-to-crypto payment service. Deposit cryptocurrencies from anywhere in the world using your credit/debit cards and bank transfers.")},getAllowedResidencies:function(){return["*"]},getPaymentIcons:function(){return[{dark:"IcCashierVisaDark",light:"IcCashierVisaLight"},{dark:"IcCashierMastercardDark",light:"IcCashierMastercardLight"},{dark:"IcCashierBpayDark",light:"IcCashierBpayLight"},{dark:"IcCashierSepaDark",light:"IcCashierSepaLight"},{dark:"IcCashierBlueshyftDark",light:"IcCashierBlueshyftLight"},{dark:"IcCashierFlexepinDark",light:"IcCashierFlexepinLight"},{dark:"IcCashierPayIdDark",light:"IcCashierPayIdLight"},{dark:"IcCashierPoliDark",light:"IcCashierPoliLight"},{dark:"IcCashierApplePay",light:"IcCashierApplePay"},{dark:"IcCashierInteracEtransfer",light:"IcCashierInteracEtransfer"},{dark:"IcCashierIdeal",light:"IcCashierIdeal"},{dark:"IcCashierPostBillPayDark",light:"IcCashierPostBillPayLight"},{dark:"IcCashierSofort",light:"IcCashierSofort"}]},getScriptDependencies:function(){return[]},getDefaultFromCurrency:function(){return""},getFromCurrencies:function(){return["*"]},getToCurrencies:function(){return["*"]},getWidgetHtml:function(){return new Promise((function(t,n){e.WS.serviceToken({service_token:1,service:"banxa",referrer:window.location.href}).then((function(e){if(e.error)n(e.error.message);else{var r=e.service_token.banxa.url;r&&window.open(r),t()}}))}))},onMountWidgetContainer:function(){},should_show_deposit_address:!1}};function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ge(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){ge(o,r,a,i,s,"next",e)}function s(e){ge(o,r,a,i,s,"throw",e)}i(void 0)}))}}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ae(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Se(e);if(t){var a=Se(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pe(this,n)}}function Pe(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Te(e)}function Te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}var Be=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(a,n);var r=Ce(a);function a(t){var n,o=t.WS,i=t.root_store;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=r.call(this,{root_store:i})).api_error=null,n.deposit_address=null,n.is_deposit_address_loading=!0,n.is_onramp_modal_open=!1,n.is_requesting_widget_html=!1,n.onramp_providers=[],n.selected_provider=null,n.should_show_widget=!1,n.widget_error=null,n.widget_html=null,(0,e.makeObservable)(Te(n),{api_error:e.observable,deposit_address:e.observable,is_deposit_address_loading:e.observable,is_onramp_modal_open:e.observable,is_requesting_widget_html:e.observable,onramp_providers:e.observable.shallow,selected_provider:e.observable.ref,should_show_widget:e.observable,widget_error:e.observable,widget_html:e.observable,is_onramp_tab_visible:e.computed,filtered_onramp_providers:e.computed,onramp_popup_modal_title:e.computed,should_show_dialog:e.computed,onMountOnramp:e.action.bound,onUnmountOnramp:e.action.bound,onClickDisclaimerContinue:e.action.bound,onClickGoToDepositPage:e.action.bound,pollApiForDepositAddress:e.action.bound,resetPopup:e.action.bound,setApiError:e.action.bound,setCopyIconRef:e.action.bound,setDepositAddress:e.action.bound,setIsDepositAddressLoading:e.action.bound,setIsOnRampModalOpen:e.action.bound,setIsRequestingWidgetHtml:e.action.bound,setSelectedProvider:e.action.bound,setShouldShowWidget:e.action.bound,setOnrampProviders:e.action.bound,setWidgetError:e.action.bound,setWidgetHtml:e.action.bound}),n.WS=o,n.onClientInit(ke(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setOnrampProviders([ve(Te(n))]);case 1:case"end":return e.stop()}}),e)})))),n}return function(e,t,n){t&&we(e.prototype,t),n&&we(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(a,[{key:"is_onramp_tab_visible",get:function(){var e=this.root_store.client;return!1===e.is_virtual&&(0,t.isCryptocurrency)(e.currency)&&this.filtered_onramp_providers.length>0}},{key:"filtered_onramp_providers",get:function(){var e=this.root_store.client;return this.onramp_providers.filter((function(t){var n=t.getToCurrencies();return n.includes("*")||n.includes(e.currency.toLowerCase())})).filter((function(t){var n=t.getAllowedResidencies();return n.includes("*")||n.includes(e.residence)}))}},{key:"onramp_popup_modal_title",get:function(){return this.should_show_widget?(0,l.localize)("Payment channel"):this.selected_provider?this.should_show_dialog?(0,l.localize)("Our server cannot retrieve an address."):" ":void 0}},{key:"should_show_dialog",get:function(){return!!this.api_error}},{key:"onMountOnramp",value:function(){var n=this;this.disposeThirdPartyJsReaction=(0,e.reaction)((function(){return n.selected_provider}),function(){var e=ke(regeneratorRuntime.mark((function e(r){var a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(0!==(a=r.getScriptDependencies()).length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,h.e("loadjs").then(h.t.bind(h,"../../../node_modules/loadjs/dist/loadjs.umd.js",23));case 7:o=e.sent,i=o.default,s="".concat((0,t.getKebabCase)(r.name),"-onramp"),i.isDefined(s)||i(a,s,{error:function(){console.warn("Dependencies for onramp provider ".concat(r.name," could not be loaded.")),n.setSelectedProvider(null)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.disposeGetWidgetHtmlReaction=(0,e.reaction)((function(){return n.should_show_widget}),(function(e){if(e){if(n.is_requesting_widget_html)return;n.setIsRequestingWidgetHtml(!0),n.selected_provider.getWidgetHtml().then((function(e){e?n.setWidgetHtml(e):n.setShouldShowWidget(!1)})).catch((function(e){n.setWidgetError(e)})).finally((function(){return n.setIsRequestingWidgetHtml(!1)}))}}))}},{key:"onUnmountOnramp",value:function(){"function"==typeof this.disposeThirdPartyJsReaction&&this.disposeThirdPartyJsReaction(),"function"==typeof this.disposeGetWidgetHtmlReaction&&this.disposeGetWidgetHtmlReaction()}},{key:"onClickDisclaimerContinue",value:function(){this.setShouldShowWidget(!0)}},{key:"onClickGoToDepositPage",value:function(){this.pollApiForDepositAddress(!1),window.open((0,t.websiteUrl)()+t.routes.cashier_deposit.substring(1))}},{key:"pollApiForDepositAddress",value:function(e){var t=this;this.setIsDepositAddressLoading(!0),this.setApiError(null);var n=setInterval((function(){return r}),3e3),r=function(){t.WS.authorized.cashier("deposit",{provider:"crypto",type:"api"}).then((function(r){var a=!1;if(r.error)t.setApiError(r.error),a=!0;else{var o=r.cashier.deposit.address;(o||e)&&(t.setDepositAddress(o),a=!0)}a&&(clearInterval(n),t.setIsDepositAddressLoading(!1))}))};r(),setTimeout((function(){clearInterval(n),t.setIsDepositAddressLoading(!1)}),3e4)}},{key:"resetPopup",value:function(){this.setApiError(null),this.setDepositAddress(null),this.setIsDepositAddressLoading(!0),this.setSelectedProvider(null),this.setShouldShowWidget(!1),this.setWidgetError(null),this.setWidgetHtml(null)}},{key:"setApiError",value:function(e){this.api_error=e}},{key:"setCopyIconRef",value:function(e){this.copy_icon_ref=e}},{key:"setDepositAddress",value:function(e){this.deposit_address=e}},{key:"setIsDepositAddressLoading",value:function(e){this.is_deposit_address_loading=e}},{key:"setIsOnRampModalOpen",value:function(e){this.is_onramp_modal_open=e}},{key:"setIsRequestingWidgetHtml",value:function(e){this.is_requesting_widget_html=e}},{key:"setSelectedProvider",value:function(e){e?(this.selected_provider=e,this.setIsOnRampModalOpen(!0),this.pollApiForDepositAddress(!0)):(this.setIsOnRampModalOpen(!1),this.selected_provider=null)}},{key:"setShouldShowWidget",value:function(e){this.should_show_widget=e}},{key:"setOnrampProviders",value:function(e){this.onramp_providers=e.slice()}},{key:"setWidgetError",value:function(e){this.widget_error=e}},{key:"setWidgetHtml",value:function(e){this.widget_html=e}}]),a}(ae);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Oe(o,r,a,i,s,"next",e)}function s(e){Oe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Le=function(){function n(t){var r=this,a=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.list=[],this.agents=[],this.container=f.containers.payment_agent,this.error=new y,this.filtered_list=[],this.is_name_selected=!0,this.is_search_loading=!1,this.is_withdraw=!1,this.is_try_withdraw_successful=!1,this.is_withdraw_successful=!1,this.confirm={},this.receipt={},this.selected_bank=0,this.supported_banks=[],this.active_tab_index=0,this.all_payment_agent_list=[],this.search_term="",this.has_payment_agent_search_warning=!1,this.resetPaymentAgent=function(){var e=r.root_store,t=e.client,n=e.modules.cashier.general_store.active_container,a=f.map_action[n];t.setVerificationCode("",a),r.error.setErrorMessage(""),r.setIsWithdraw(!1),r.setIsWithdrawSuccessful(!1),r.setIsTryWithdrawSuccessful(!1),r.setActiveTabIndex(0)},(0,e.makeObservable)(this,{list:e.observable,agents:e.observable,container:e.observable,error:e.observable,filtered_list:e.observable,is_name_selected:e.observable,is_search_loading:e.observable,is_withdraw:e.observable,is_try_withdraw_successful:e.observable,is_withdraw_successful:e.observable,confirm:e.observable,receipt:e.observable,selected_bank:e.observable,supported_banks:e.observable,active_tab_index:e.observable,all_payment_agent_list:e.observable,search_term:e.observable,has_payment_agent_search_warning:e.observable,setActiveTabIndex:e.action.bound,setActiveTab:e.action.bound,is_payment_agent_visible:e.computed,getPaymentAgentList:e.action.bound,getPaymentAgentDetails:e.action.bound,addSupportedBank:e.action.bound,clearSuppertedBanks:e.action.bound,sortSupportedBanks:e.action.bound,setList:e.action.bound,clearList:e.action.bound,setPaymentAgentList:e.action.bound,filterPaymentAgentList:e.action.bound,setSearchTerm:e.action.bound,setIsSearchLoading:e.action.bound,setPaymentAgentSearchWarning:e.action.bound,onChangePaymentMethod:e.action.bound,setIsWithdraw:e.action.bound,setIsTryWithdrawSuccessful:e.action.bound,setIsWithdrawSuccessful:e.action.bound,setConfirmation:e.action.bound,setReceipt:e.action.bound,addPaymentAgent:e.action.bound,onMountPaymentAgentWithdraw:e.action.bound,requestTryPaymentAgentWithdraw:e.action.bound,resetPaymentAgent:e.action.bound,onMountPaymentAgentList:e.action.bound,setAllPaymentAgentList:e.action.bound,is_payment_agent_visible_in_onboarding:e.computed,requestPaymentAgentWithdraw:e.action.bound}),this.root_store=o,this.WS=a}var r,a,o,i,s,c,u,l;return function(e,t,n){t&&Re(e.prototype,t),n&&Re(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setActiveTabIndex",value:function(e){this.active_tab_index=e}},{key:"setActiveTab",value:function(e){this.setActiveTabIndex(e)}},{key:"is_payment_agent_visible",get:function(){return!!(this.filtered_list.length||this.agents.length||this.has_payment_agent_search_warning)}},{key:"getPaymentAgentList",value:(l=xe(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.wait("get_settings");case 2:return t=this.root_store.client,n=t.residence,r=t.currency,e.abrupt("return",this.WS.authorized.paymentAgentList(n,r));case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"getPaymentAgentDetails",value:(u=xe(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.paymentAgentDetails();case 2:return t=e.sent,n=t.paymentagent_details,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"addSupportedBank",value:function(e){this.supported_banks.find((function(t){return t.value===e.toLowerCase()}))||this.supported_banks.push({text:e,value:e.toLowerCase()})}},{key:"clearSuppertedBanks",value:function(){this.supported_banks=[]}},{key:"sortSupportedBanks",value:function(){this.supported_banks.replace(this.supported_banks.slice().sort((function(e,t){return e.value<t.value?-1:e.value>t.value?1:0})))}},{key:"setList",value:function(e){this.list.push(e)}},{key:"clearList",value:function(){this.list=[]}},{key:"setPaymentAgentList",value:(c=xe(regeneratorRuntime.mark((function e(n){var r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store.modules.cashier.general_store.setLoading,e.t0=n,e.t0){e.next=6;break}return e.next=5,this.getPaymentAgentList();case 5:e.t0=e.sent;case 6:a=e.t0,this.clearList(),this.clearSuppertedBanks();try{null===(o=a.paymentagent_list)||void 0===o||o.list.forEach((function(e){i.setList({currency:e.currencies,deposit_commission:e.deposit_commission,email:e.email,further_information:e.further_information,max_withdrawal:e.max_withdrawal,min_withdrawal:e.min_withdrawal,name:e.name,paymentagent_loginid:e.paymentagent_loginid,phones:(null==e?void 0:e.phone_numbers)||(null==e?void 0:e.telephone),supported_banks:null==e?void 0:e.supported_payment_methods,urls:(null==e?void 0:e.urls)||(null==e?void 0:e.url),withdrawal_commission:e.withdrawal_commission}),(null==e?void 0:e.supported_payment_methods.map((function(e){var t=z(e.payment_method,f.payment_methods);return["Neteller","Skrill"].includes(t)?"":t})).filter(Boolean)).forEach((function(e){return i.addSupportedBank(e)}))})),(0,t.shuffleArray)(this.list)}catch(e){r(!1),console.error(e)}this.sortSupportedBanks();case 11:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"filterPaymentAgentList",value:function(e){var n=this;this.setPaymentAgentSearchWarning(!1);var r=this.root_store.common;this.filtered_list=[],e||this.selected_bank?this.list.forEach((function(t){var r=null==t?void 0:t.supported_banks;r&&(-1!==r.map((function(e){return z(e.payment_method,f.payment_methods).toLowerCase()})).indexOf(e||n.selected_bank)&&n.filtered_list.push(t))})):this.filtered_list=this.list,this.search_term&&(this.filtered_list=this.filtered_list.filter((function(e){return e.name.toLocaleLowerCase().includes(n.search_term.toLocaleLowerCase())})),0===this.filtered_list.length&&this.setPaymentAgentSearchWarning(!0)),this.setIsSearchLoading(!1),!this.is_payment_agent_visible&&window.location.pathname.endsWith(t.routes.cashier_pa)&&r.routeTo(t.routes.cashier_deposit)}},{key:"setSearchTerm",value:function(e){this.search_term=e}},{key:"setIsSearchLoading",value:function(e){this.is_search_loading=e}},{key:"setPaymentAgentSearchWarning",value:function(e){this.has_payment_agent_search_warning=e}},{key:"onChangePaymentMethod",value:function(e){var t=e.target,n="0"===t.value?parseInt(t.value):t.value;this.selected_bank=n,this.filterPaymentAgentList(n)}},{key:"setIsWithdraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.is_withdraw;this.is_withdraw=e}},{key:"setIsTryWithdrawSuccessful",value:function(e){this.error.setErrorMessage(""),this.is_try_withdraw_successful=e}},{key:"setIsWithdrawSuccessful",value:function(e){this.is_withdraw_successful=e}},{key:"setConfirmation",value:function(e){var t=e.amount,n=e.currency,r=e.loginid,a=e.payment_agent_name;this.confirm={amount:t,currency:n,loginid:r,payment_agent_name:a}}},{key:"setReceipt",value:function(e){var t=e.amount_transferred,n=e.payment_agent_email,r=e.payment_agent_id,a=e.payment_agent_name,o=e.payment_agent_phone,i=e.payment_agent_url;this.receipt={amount_transferred:t,payment_agent_email:n,payment_agent_id:r,payment_agent_name:a,payment_agent_phone:o,payment_agent_url:i}}},{key:"addPaymentAgent",value:function(e){this.agents.push({text:e.name,value:e.paymentagent_loginid,max_withdrawal:e.max_withdrawal,min_withdrawal:e.min_withdrawal,email:e.email,phone:e.phone_numbers,url:e.urls})}},{key:"onMountPaymentAgentWithdraw",value:(s=xe(regeneratorRuntime.mark((function e(){var n,r,a,o,i,s,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.root_store,r=n.common,a=n.modules,o=a.cashier.general_store,i=o.setLoading,s=o.onMountCommon,i(!0),this.onRemount=this.onMountPaymentAgentWithdraw,s(),this.setIsWithdraw(!0),this.setIsWithdrawSuccessful(!1),this.setReceipt({}),this.agents.length){e.next=14;break}return e.next=11,this.getPaymentAgentList();case 11:(c=e.sent).paymentagent_list.list.forEach((function(e){u.addPaymentAgent(e)})),!c.paymentagent_list.list.length&&window.location.pathname.endsWith(t.routes.cashier_pa)&&r.routeTo(t.routes.cashier_deposit);case 14:i(!1);case 15:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"requestTryPaymentAgentWithdraw",value:(i=xe(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.loginid,r=t.currency,a=t.amount,o=t.verification_code,this.error.setErrorMessage(""),e.next=4,this.WS.authorized.paymentAgentWithdraw({loginid:n,currency:r,amount:a,verification_code:o,dry_run:1});case 4:2==+(i=e.sent).paymentagent_withdraw?(s=this.agents.find((function(e){return e.value===n})),this.setConfirmation({amount:a,currency:r,loginid:n,payment_agent_name:(null==s?void 0:s.text)||i.paymentagent_name}),this.setIsTryWithdrawSuccessful(!0)):this.error.setErrorMessage(i.error,this.resetPaymentAgent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onMountPaymentAgentList",value:(o=xe(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store.modules.cashier.general_store,n=t.setLoading,r=t.onMountCommon,n(!0),this.onRemount=this.onMountPaymentAgentList,e.next=5,r();case 5:return e.next=7,this.getPaymentAgentList();case 7:n(!1);case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getAllPaymentAgentList",value:(a=xe(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.wait("get_settings");case 2:return e.abrupt("return",this.WS.allPaymentAgentList(this.root_store.client.residence));case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setAllPaymentAgentList",value:function(e){this.all_payment_agent_list=e}},{key:"is_payment_agent_visible_in_onboarding",get:function(){var e,t,n;return!(null===(e=this.all_payment_agent_list)||void 0===e||null===(t=e.paymentagent_list)||void 0===t||null===(n=t.list)||void 0===n||!n.length)}},{key:"requestPaymentAgentWithdraw",value:(r=xe(regeneratorRuntime.mark((function e(n){var r,a,o,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.loginid,a=n.currency,o=n.amount,i=n.verification_code,this.error.setErrorMessage(""),e.next=4,this.WS.authorized.paymentAgentWithdraw({loginid:r,currency:a,amount:o,verification_code:i});case 4:1==+(s=e.sent).paymentagent_withdraw?(c=this.agents.find((function(e){return e.value===r})),this.setReceipt(Ee({amount_transferred:(0,t.formatMoney)(a,o,!0)},c&&{payment_agent_email:c.email,payment_agent_id:c.value,payment_agent_name:c.text,payment_agent_phone:c.phone,payment_agent_url:c.url})),this.setIsWithdrawSuccessful(!0),this.setIsTryWithdrawSuccessful(!1),this.setConfirmation({})):this.error.setErrorMessage(s.error,this.resetPaymentAgent);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})}]),n}();function Fe(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Fe(o,r,a,i,s,"next",e)}function s(e){Fe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var We=function(){function n(t){var r=this,a=t.WS,o=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.container=f.containers.payment_agent_transfer,this.error=new y,this.is_payment_agent=!1,this.is_try_transfer_successful=!1,this.is_transfer_successful=!1,this.confirm={},this.receipt={},this.transfer_limit={},this.requestTryPaymentAgentTransfer=function(){var e=Ne(regeneratorRuntime.mark((function e(t){var n,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.amount,a=t.currency,o=t.description,i=t.transfer_to,r.error.setErrorMessage(""),e.next=4,r.WS.authorized.paymentAgentTransfer({amount:n,currency:a,description:o,transfer_to:i,dry_run:1});case 4:return 2==+(s=e.sent).paymentagent_transfer?(r.setConfirmationPaymentAgentTransfer({client_id:i,client_name:s.client_to_full_name,amount:n,description:o}),r.setIsTryTransferSuccessful(!0)):r.error.setErrorMessage(s.error,r.resetPaymentAgentTransfer),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.requestPaymentAgentTransfer=function(){var e=Ne(regeneratorRuntime.mark((function e(t){var n,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.amount,a=t.currency,o=t.description,i=t.transfer_to,r.error.setErrorMessage(""),e.next=4,r.WS.authorized.paymentAgentTransfer({amount:n,currency:a,description:o,transfer_to:i});case 4:return 1==+(s=e.sent).paymentagent_transfer?(r.setReceiptPaymentAgentTransfer({amount_transferred:n,client_id:i,client_name:s.client_to_full_name}),r.setIsTransferSuccessful(!0),r.setIsTryTransferSuccessful(!1),r.setConfirmationPaymentAgentTransfer({})):r.error.setErrorMessage(s.error,r.resetPaymentAgentTransfer),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.resetPaymentAgentTransfer=function(){r.setIsTransferSuccessful(!1),r.error.setErrorMessage("")},(0,e.makeObservable)(this,{container:e.observable,error:e.observable,is_payment_agent:e.observable,is_try_transfer_successful:e.observable,is_transfer_successful:e.observable,confirm:e.observable,receipt:e.observable,transfer_limit:e.observable,is_payment_agent_transfer_visible:e.computed,setIsPaymentAgent:e.action.bound,setIsTryTransferSuccessful:e.action.bound,setIsTransferSuccessful:e.action.bound,setConfirmationPaymentAgentTransfer:e.action.bound,setReceiptPaymentAgentTransfer:e.action.bound,setMinMaxPaymentAgentTransfer:e.action.bound,onMountPaymentAgentTransfer:e.action.bound,requestTryPaymentAgentTransfer:e.action.bound,requestPaymentAgentTransfer:e.action.bound,resetPaymentAgentTransfer:e.action.bound}),this.root_store=o,this.WS=a}var r,a,o;return function(e,t,n){t&&De(e.prototype,t),n&&De(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"is_payment_agent_transfer_visible",get:function(){return this.is_payment_agent}},{key:"checkIsPaymentAgent",value:(o=Ne(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.storage.getSettings();case 2:n=e.sent.get_settings,this.setIsPaymentAgent(null!==(t=null==n?void 0:n.is_authenticated_payment_agent)&&void 0!==t&&t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setIsPaymentAgent",value:function(e){!e&&window.location.pathname.endsWith(t.routes.cashier_pa_transfer)&&this.root_store.common.routeTo(t.routes.cashier_deposit),this.is_payment_agent=!!e}},{key:"setIsTryTransferSuccessful",value:function(e){this.error.setErrorMessage(""),this.is_try_transfer_successful=e}},{key:"setIsTransferSuccessful",value:function(e){this.is_transfer_successful=e}},{key:"setConfirmationPaymentAgentTransfer",value:function(e){var t=e.amount,n=e.client_id,r=e.client_name,a=e.description;this.confirm={amount:t,client_id:n,client_name:r,description:a}}},{key:"setReceiptPaymentAgentTransfer",value:function(e){var t=e.amount_transferred,n=e.client_id,r=e.client_name;this.receipt={amount_transferred:t,client_id:n,client_name:r}}},{key:"getCurrentPaymentAgent",value:(a=Ne(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.root_store,r=n.client,a=n.modules,o=t.paymentagent_list.list.find((function(e){return e.paymentagent_loginid===r.loginid})),e.t0=o,e.t0){e.next=7;break}return e.next=6,a.cashier.payment_agent.getPaymentAgentDetails();case 6:e.t0=e.sent;case 7:return i=e.t0,e.abrupt("return",null!=i?i:{});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"setMinMaxPaymentAgentTransfer",value:function(e){var t=e.min_withdrawal,n=e.max_withdrawal;this.transfer_limit={min:t,max:n}}},{key:"onMountPaymentAgentTransfer",value:(r=Ne(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.root_store.modules.cashier,n=t.general_store,r=t.payment_agent,n.setLoading(!0),this.onRemount=this.onMountPaymentAgentTransfer,e.next=5,n.onMountCommon();case 5:if(this.transfer_limit.min_withdrawal){e.next=13;break}return e.next=8,r.getPaymentAgentList();case 8:return a=e.sent,e.next=11,this.getCurrentPaymentAgent(a);case 11:o=e.sent,this.setMinMaxPaymentAgentTransfer(o);case 13:n.setLoading(!1);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),n}();function je(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ue(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){je(o,r,a,i,s,"next",e)}function s(e){je(o,r,a,i,s,"throw",e)}i(void 0)}))}}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ze=function(){function n(t){var r=t.WS,a=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.crypto_transactions=[],this.is_crypto_transactions_cancel_modal_visible=!1,this.is_crypto_transactions_status_modal_visible=!1,this.is_crypto_transactions_visible=!1,this.is_loading=!1,this.selected_crypto_transaction_id="",this.selected_crypto_status="",this.selected_crypto_status_description="",(0,e.makeObservable)(this,{crypto_transactions:e.observable,is_crypto_transactions_cancel_modal_visible:e.observable,is_crypto_transactions_status_modal_visible:e.observable,is_crypto_transactions_visible:e.observable,is_loading:e.observable,selected_crypto_transaction_id:e.observable,selected_crypto_status:e.observable,selected_crypto_status_description:e.observable,onMount:e.action.bound,unsubscribeCryptoTransactions:e.action.bound,getCryptoTransactions:e.action.bound,setCryptoTransactionsHistory:e.action.bound,updateCryptoTransactions:e.action.bound,sortCryptoTransactions:e.action.bound,cancelCryptoTransaction:e.action.bound,setSelectedCryptoTransactionId:e.action.bound,setIsCryptoTransactionsCancelModalVisible:e.action.bound,showCryptoTransactionsCancelModal:e.action.bound,hideCryptoTransactionsCancelModal:e.action.bound,setSelectedCryptoStatus:e.action.bound,setSelectedCryptoStatusDescription:e.action.bound,setIsCryptoTransactionsStatusModalVisible:e.action.bound,showCryptoTransactionsStatusModal:e.action.bound,hideCryptoTransactionsStatusModal:e.action.bound,setLoading:e.action.bound,setIsCryptoTransactionsVisible:e.action.bound}),this.root_store=a,this.WS=r}var r,a,o,i;return function(e,t,n){t&&He(e.prototype,t),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"onMount",value:(i=Ue(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.root_store.client,r=n.currency,a=n.switched,!r||!(0,t.isCryptocurrency)(r)||a){e.next=9;break}return this.setLoading(!0),e.next=6,this.unsubscribeCryptoTransactions();case 6:return e.next=8,this.getCryptoTransactions();case 8:this.setLoading(!1);case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"unsubscribeCryptoTransactions",value:(o=Ue(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.authorized.cashierPayments({provider:"crypto",transaction_type:"all"}).then((function(e){if(!e.error){var n=e.cashier_payments.crypto;t.setCryptoTransactionsHistory(n)}}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"getCryptoTransactions",value:(a=Ue(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.subscribeCashierPayments((function(e){if(!e.error){var n=e.cashier_payments.crypto;t.updateCryptoTransactions(n)}}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setCryptoTransactionsHistory",value:function(e){this.crypto_transactions=e,this.sortCryptoTransactions()}},{key:"updateCryptoTransactions",value:function(e){var t=this;e.forEach((function(e){var n=t.crypto_transactions.findIndex((function(t){return t.id===e.id}));-1===n?t.crypto_transactions.push(e):Object.assign(t.crypto_transactions[n],e)})),this.sortCryptoTransactions()}},{key:"sortCryptoTransactions",value:function(){this.crypto_transactions.replace(this.crypto_transactions.slice().sort((function(e,t){return t.submit_date-e.submit_date})))}},{key:"cancelCryptoTransaction",value:(r=Ue(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.cancelCryptoTransaction(t).then((function(e){return e.error?Promise.reject(e.error):(n.setSelectedCryptoTransactionId(""),n.setIsCryptoTransactionsCancelModalVisible(!1),Promise.resolve(e))}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"setSelectedCryptoTransactionId",value:function(e){this.selected_crypto_transaction_id=e}},{key:"setIsCryptoTransactionsCancelModalVisible",value:function(e){this.is_crypto_transactions_cancel_modal_visible=e}},{key:"showCryptoTransactionsCancelModal",value:function(e){this.setSelectedCryptoTransactionId(e),this.setIsCryptoTransactionsCancelModalVisible(!0)}},{key:"hideCryptoTransactionsCancelModal",value:function(){this.setSelectedCryptoTransactionId(""),this.setIsCryptoTransactionsCancelModalVisible(!1)}},{key:"setSelectedCryptoStatus",value:function(e){this.selected_crypto_status=e}},{key:"setSelectedCryptoStatusDescription",value:function(e){this.selected_crypto_status_description=e}},{key:"setIsCryptoTransactionsStatusModalVisible",value:function(e){this.is_crypto_transactions_status_modal_visible=e}},{key:"showCryptoTransactionsStatusModal",value:function(e,t){this.setSelectedCryptoStatusDescription(e),this.setSelectedCryptoStatus(t),this.setIsCryptoTransactionsStatusModalVisible(!0)}},{key:"hideCryptoTransactionsStatusModal",value:function(){this.setIsCryptoTransactionsStatusModalVisible(!1)}},{key:"setLoading",value:function(e){this.is_loading=e}},{key:"setIsCryptoTransactionsVisible",value:function(e){this.is_crypto_transactions_visible=e}}]),n}();function Ve(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Ve(o,r,a,i,s,"next",e)}function s(e){Ve(o,r,a,i,s,"throw",e)}i(void 0)}))}}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qe=function(){function n(t){var r=t.WS,a=t.root_store;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.blockchain_address="",this.container=f.containers.withdraw,this.error=new y,this.is_10k_withdrawal_limit_reached=void 0,this.is_withdraw_confirmed=!1,this.withdraw_amount="",this.max_withdraw_amount=0,this.crypto_config={},(0,e.makeObservable)(this,{blockchain_address:e.observable,container:e.observable,error:e.observable,is_10k_withdrawal_limit_reached:e.observable,is_withdraw_confirmed:e.observable,withdraw_amount:e.observable,max_withdraw_amount:e.observable,crypto_config:e.observable,setIsWithdrawConfirmed:e.action.bound,setWithdrawAmount:e.action.bound,requestWithdraw:e.action.bound,saveWithdraw:e.action.bound,resetWithrawForm:e.action.bound,setBlockchainAddress:e.action.bound,onMountWithdraw:e.action.bound,onMountCryptoWithdraw:e.action.bound,is_withdrawal_locked:e.computed,setMaxWithdrawAmount:e.action.bound,check10kLimit:e.action.bound,set10kLimitation:e.action.bound,setCryptoConfig:e.action.bound,setWithdrawPercentageSelectorResult:e.action.bound,validateWithdrawFromAmount:e.action.bound,validateWithdrawToAmount:e.action.bound,account_platform_icon:e.computed}),this.root_store=a,this.WS=r}var r,a,o,i,s,c;return function(e,t,n){t&&Ke(e.prototype,t),n&&Ke(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(n,[{key:"setIsWithdrawConfirmed",value:function(e){var t=this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount;if(this.is_withdraw_confirmed=e,e&&this.setWithdrawAmount(t),!e){var n=this.root_store,r=n.client,a=n.modules.cashier.general_store.active_container,o=f.map_action[a];r.setVerificationCode("",o)}}},{key:"setWithdrawAmount",value:function(e){this.withdraw_amount=e}},{key:"requestWithdraw",value:(c=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.root_store,r=n.client,a=n.modules,o=a.cashier.crypto_fiat_converter,r.is_logged_in){e.next=4;break}return e.abrupt("return");case 4:if(o.converter_from_amount){e.next=7;break}return o.setConverterFromError((0,l.localize)("This field is required.")),e.abrupt("return");case 7:return e.next=9,this.WS.cryptoWithdraw({address:this.blockchain_address,amount:+o.converter_from_amount,verification_code:t,dry_run:1}).then((function(e){e.error?(i.error.setErrorMessage({code:"CryptoWithdrawalError",message:e.error.message}),i.setCryptoConfig().then((function(){return i.validateWithdrawFromAmount()}))):i.saveWithdraw(t)}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"saveWithdraw",value:(s=Ge(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.root_store.modules.cashier.crypto_fiat_converter.converter_from_amount,this.error.setErrorMessage(""),e.next=4,this.WS.cryptoWithdraw({address:this.blockchain_address,amount:+n,verification_code:t}).then((function(e){if(e.error){if(r.error.setErrorMessage(e.error),t){var n=r.root_store,a=n.client,o=n.modules.cashier.general_store.active_container,i=f.map_action[o];a.setVerificationCode("",i)}r.resetWithrawForm()}else r.setIsWithdrawConfirmed(!0)}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"resetWithrawForm",value:function(){var e=this.root_store.modules.cashier.crypto_fiat_converter,t=e.setConverterFromAmount,n=e.setConverterToAmount,r=this.root_store,a=r.client,o=r.modules.cashier.general_store.active_container,i=f.map_action[o];this.setBlockchainAddress(""),t(""),n(""),a.setVerificationCode("",i)}},{key:"setBlockchainAddress",value:function(e){this.blockchain_address=e}},{key:"willMountWithdraw",value:function(e){if(this&&this.root_store&&e){var t=this.root_store,n=t.client,r=t.modules.cashier.general_store.active_container,a=f.map_action[r];n.setVerificationCode("",a)}}},{key:"onMountWithdraw",value:(i=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l,h,d,_,p,m,y,v,b,g,k,w,A,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.root_store,r=n.client,a=n.modules,o=a.cashier.general_store,i=o.active_container,s=o.is_crypto,c=o.onMountCommon,u=o.setLoading,l=o.setOnRemount,h=a.cashier.iframe,d=h.checkIframeLoaded,_=h.clearTimeoutCashierUrl,p=h.clearIframe,m=h.is_session_timeout,y=h.setContainerHeight,v=h.setIframeUrl,b=h.setSessionTimeout,g=h.setTimeoutCashierUrl,k=r.is_virtual,w=i,l(this.onMountWithdraw),e.next=8,c();case 8:if(this.error.setErrorMessage(""),y(0),p(),u(!0),m){e.next=15;break}return d(),e.abrupt("return");case 15:if(v(""),t&&!k){e.next=19;break}return u(!1),e.abrupt("return");case 19:return e.next=21,this.WS.authorized.cashier(i,{verification_code:t});case 21:if(A=e.sent,w===i){e.next=25;break}return u(!1),e.abrupt("return");case 25:if(!A.error){e.next=33;break}this.error.handleCashierError(A.error),u(!1),b(!0),_(),t&&(C=f.map_action[i],r.setVerificationCode("",C)),e.next=43;break;case 33:if(!s){e.next=37;break}u(!1),e.next=43;break;case 37:return e.next=39,d();case 39:u(!1),v(A.cashier),b(!1),g(!0);case 43:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"onMountCryptoWithdraw",value:(o=Ge(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,c,u,l,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.root_store.modules.cashier,a=r.crypto_fiat_converter,o=r.general_store,i=r.iframe,o.setLoading(!0),!/^\w{8,128}$/.test(t)){e.next=9;break}return e.next=6,this.WS.cryptoWithdraw({address:this.blockchain_address,amount:+a.converter_from_amount,verification_code:t,dry_run:1});case 6:s=e.sent,e.next=10;break;case 9:s={error:{code:"InvalidToken",message:"Your token has expired or is invalid."}};case 10:if("InvalidToken"!==(null===(n=s.error)||void 0===n?void 0:n.code)){e.next=18;break}this.error.handleCashierError(s.error),o.setLoading(!1),i.setSessionTimeout(!0),i.clearTimeoutCashierUrl(),t&&(c=this.root_store,u=c.client,l=c.modules,h=l.cashier.general_store.active_container,d=f.map_action[h],u.setVerificationCode("",d)),e.next=21;break;case 18:return e.next=20,this.setCryptoConfig();case 20:o.setLoading(!1);case 21:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setCryptoConfig",value:(a=Ge(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.WS.cryptoConfig();case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.crypto_config;case 11:this.crypto_config=e.t2;case 12:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"is_withdrawal_locked",get:function(){var e,t=this.root_store.client,n=t.account_status.authentication;if(null===(e=t.account_status)||void 0===e||!e.status)return!1;var r=n.needs_verification.includes("identity"),a=this.error.is_ask_authentication&&r;return t.is_withdrawal_lock||a||this.error.is_ask_financial_risk_approval}},{key:"setMaxWithdrawAmount",value:function(e){this.max_withdraw_amount=e}},{key:"check10kLimit",value:(r=Ge(regeneratorRuntime.mark((function e(){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.root_store.client,e.next=3,a.getLimits();case 3:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===n;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=null===(r=n.get_limits)||void 0===r?void 0:r.remainder;case 12:o=e.t2,this.setMaxWithdrawAmount(o),i=(0,t.getMinWithdrawal)(a.currency),s=!!(void 0!==o&&+o<i),this.set10kLimitation(s);case 17:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"set10kLimitation",value:function(e){this.is_10k_withdrawal_limit_reached=e}},{key:"setWithdrawPercentageSelectorResult",value:function(e){var t=this.root_store,n=t.client,r=t.modules.cashier,a=r.crypto_fiat_converter,o=r.general_store,i=n.currency,s=n.current_fiat_currency;e>0?(a.setConverterFromAmount(e),this.validateWithdrawFromAmount(),a.onChangeConverterFromAmount({target:{value:e}},i,s||"USD")):a.resetConverter(),a.setIsTimerVisible(!1),o.percentageSelectorSelectionStatus(!1)}},{key:"validateWithdrawFromAmount",value:function(){var e,n,r,a=this,o="",i=this.root_store,s=i.client,c=i.modules,h=s.balance,d=s.currency,f=c.cashier.crypto_fiat_converter,_=f.converter_from_amount,p=f.setConverterFromError,m=null===(e=this.crypto_config)||void 0===e||null===(n=e.currencies_config)||void 0===n||null===(r=n[d])||void 0===r?void 0:r.minimum_withdrawal,y=+this.max_withdraw_amount>+h?+h:+this.max_withdraw_amount,v=(0,t.formatMoney)(d,h,!0),b=(0,t.formatMoney)(d,m,!0),g=(0,t.formatMoney)(d,y,!0);if(_){var k=(0,t.validNumber)(_,{type:"float",decimals:(0,t.getDecimalPlaces)(d)}),w=k.is_ok,A=k.message;if(w?+h<+_?o=(0,l.localize)("Insufficient funds"):+h<+m?o=(0,l.localize)("Your balance ({{format_balance}} {{currency}}) is less than the current minimum withdrawal allowed ({{format_min_withdraw_amount}} {{currency}}). Please top up your account to continue with your withdrawal.",{format_balance:v,currency:d,format_min_withdraw_amount:b}):(+_<+m||+_>+y)&&(o=(0,l.localize)("The current allowed withdraw amount is {{format_min_withdraw_amount}} to {{format_max_withdraw_amount}} {{currency}}",{format_min_withdraw_amount:b,format_max_withdraw_amount:g,currency:d})):o=A,(0,t.isMobile)()&&o.length>35){var C=o;o=u().createElement(D.ReadMore,{expand_text:(0,l.localize)("more"),text:C,collapse_length:28,openDialog:function(){return a.error.setErrorMessage({code:"CryptoWithdrawalReadMore",message:C})},show_dialog:!0})}}p(o)}},{key:"validateWithdrawToAmount",value:function(){var e="",n=this.root_store,r=n.client,a=n.modules,o=r.current_fiat_currency,i=a.cashier.crypto_fiat_converter,s=i.converter_to_amount,c=i.setConverterToError;if(s){var u=(0,t.validNumber)(s,{type:"float",decimals:(0,t.getDecimalPlaces)(o)}),l=u.is_ok,h=u.message;l||(e=h)}c(e)}},{key:"account_platform_icon",get:function(){var e=this.root_store.client,t=e.account_list,n=e.loginid;return t.find((function(e){return n===e.loginid})).icon}}]),n}();function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t,n){return t&&Ze(e.prototype,t),n&&Ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Je=Ye((function e(t){var n=t.root_store,r=t.WS;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.account_prompt_dialog=new s(n),this.account_transfer=new B({root_store:n,WS:r}),this.crypto_fiat_converter=new O({root_store:n,WS:r}),this.deposit=new L(r,n),this.error_dialog=new N,this.error=new y,this.general_store=new _e({root_store:n,WS:r}),this.iframe=new ye(n),this.onramp=new Be({root_store:n,WS:r}),this.payment_agent=new Le({root_store:n,WS:r}),this.payment_agent_transfer=new We({root_store:n,WS:r}),this.transaction_history=new ze({root_store:n,WS:r}),this.withdraw=new qe({root_store:n,WS:r})}))})(),d=d.default})()}));